const xnt=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))g(m);new MutationObserver(m=>{for(const S of m)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&g(b)}).observe(document,{childList:!0,subtree:!0});function h(m){const S={};return m.integrity&&(S.integrity=m.integrity),m.referrerpolicy&&(S.referrerPolicy=m.referrerpolicy),m.crossorigin==="use-credentials"?S.credentials="include":m.crossorigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function g(m){if(m.ep)return;m.ep=!0;const S=h(m);fetch(m.href,S)}};xnt();var Y_=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Qnt(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ss={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA=Symbol.for("react.element"),Fnt=Symbol.for("react.portal"),jnt=Symbol.for("react.fragment"),Vnt=Symbol.for("react.strict_mode"),Gnt=Symbol.for("react.profiler"),Knt=Symbol.for("react.provider"),Hnt=Symbol.for("react.context"),Ynt=Symbol.for("react.forward_ref"),Wnt=Symbol.for("react.suspense"),Jnt=Symbol.for("react.memo"),qnt=Symbol.for("react.lazy"),p3=Symbol.iterator;function znt(o){return o===null||typeof o!="object"?null:(o=p3&&o[p3]||o["@@iterator"],typeof o=="function"?o:null)}var R4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w4=Object.assign,b4={};function $u(o,c,h){this.props=o,this.context=c,this.refs=b4,this.updater=h||R4}$u.prototype.isReactComponent={};$u.prototype.setState=function(o,c){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,c,"setState")};$u.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function N4(){}N4.prototype=$u.prototype;function dv(o,c,h){this.props=o,this.context=c,this.refs=b4,this.updater=h||R4}var lv=dv.prototype=new N4;lv.constructor=dv;w4(lv,$u.prototype);lv.isPureReactComponent=!0;var f3=Array.isArray,O4=Object.prototype.hasOwnProperty,Av={current:null},D4={key:!0,ref:!0,__self:!0,__source:!0};function k4(o,c,h){var g,m={},S=null,b=null;if(c!=null)for(g in c.ref!==void 0&&(b=c.ref),c.key!==void 0&&(S=""+c.key),c)O4.call(c,g)&&!D4.hasOwnProperty(g)&&(m[g]=c[g]);var M=arguments.length-2;if(M===1)m.children=h;else if(1<M){for(var F=Array(M),$=0;$<M;$++)F[$]=arguments[$+2];m.children=F}if(o&&o.defaultProps)for(g in M=o.defaultProps,M)m[g]===void 0&&(m[g]=M[g]);return{$$typeof:lA,type:o,key:S,ref:b,props:m,_owner:Av.current}}function Xnt(o,c){return{$$typeof:lA,type:o.type,key:c,ref:o.ref,props:o.props,_owner:o._owner}}function hv(o){return typeof o=="object"&&o!==null&&o.$$typeof===lA}function Znt(o){var c={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(h){return c[h]})}var g3=/\/+/g;function W_(o,c){return typeof o=="object"&&o!==null&&o.key!=null?Znt(""+o.key):c.toString(36)}function Qf(o,c,h,g,m){var S=typeof o;(S==="undefined"||S==="boolean")&&(o=null);var b=!1;if(o===null)b=!0;else switch(S){case"string":case"number":b=!0;break;case"object":switch(o.$$typeof){case lA:case Fnt:b=!0}}if(b)return b=o,m=m(b),o=g===""?"."+W_(b,0):g,f3(m)?(h="",o!=null&&(h=o.replace(g3,"$&/")+"/"),Qf(m,c,h,"",function($){return $})):m!=null&&(hv(m)&&(m=Xnt(m,h+(!m.key||b&&b.key===m.key?"":(""+m.key).replace(g3,"$&/")+"/")+o)),c.push(m)),1;if(b=0,g=g===""?".":g+":",f3(o))for(var M=0;M<o.length;M++){S=o[M];var F=g+W_(S,M);b+=Qf(S,c,h,F,m)}else if(F=znt(o),typeof F=="function")for(o=F.call(o),M=0;!(S=o.next()).done;)S=S.value,F=g+W_(S,M++),b+=Qf(S,c,h,F,m);else if(S==="object")throw c=String(o),Error("Objects are not valid as a React child (found: "+(c==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":c)+"). If you meant to render a collection of children, use an array instead.");return b}function _f(o,c,h){if(o==null)return o;var g=[],m=0;return Qf(o,g,"","",function(S){return c.call(h,S,m++)}),g}function $nt(o){if(o._status===-1){var c=o._result;c=c(),c.then(function(h){(o._status===0||o._status===-1)&&(o._status=1,o._result=h)},function(h){(o._status===0||o._status===-1)&&(o._status=2,o._result=h)}),o._status===-1&&(o._status=0,o._result=c)}if(o._status===1)return o._result.default;throw o._result}var Dr={current:null},Ff={transition:null},trt={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:Ff,ReactCurrentOwner:Av};Re.Children={map:_f,forEach:function(o,c,h){_f(o,function(){c.apply(this,arguments)},h)},count:function(o){var c=0;return _f(o,function(){c++}),c},toArray:function(o){return _f(o,function(c){return c})||[]},only:function(o){if(!hv(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};Re.Component=$u;Re.Fragment=jnt;Re.Profiler=Gnt;Re.PureComponent=dv;Re.StrictMode=Vnt;Re.Suspense=Wnt;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=trt;Re.cloneElement=function(o,c,h){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var g=w4({},o.props),m=o.key,S=o.ref,b=o._owner;if(c!=null){if(c.ref!==void 0&&(S=c.ref,b=Av.current),c.key!==void 0&&(m=""+c.key),o.type&&o.type.defaultProps)var M=o.type.defaultProps;for(F in c)O4.call(c,F)&&!D4.hasOwnProperty(F)&&(g[F]=c[F]===void 0&&M!==void 0?M[F]:c[F])}var F=arguments.length-2;if(F===1)g.children=h;else if(1<F){M=Array(F);for(var $=0;$<F;$++)M[$]=arguments[$+2];g.children=M}return{$$typeof:lA,type:o.type,key:m,ref:S,props:g,_owner:b}};Re.createContext=function(o){return o={$$typeof:Hnt,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:Knt,_context:o},o.Consumer=o};Re.createElement=k4;Re.createFactory=function(o){var c=k4.bind(null,o);return c.type=o,c};Re.createRef=function(){return{current:null}};Re.forwardRef=function(o){return{$$typeof:Ynt,render:o}};Re.isValidElement=hv;Re.lazy=function(o){return{$$typeof:qnt,_payload:{_status:-1,_result:o},_init:$nt}};Re.memo=function(o,c){return{$$typeof:Jnt,type:o,compare:c===void 0?null:c}};Re.startTransition=function(o){var c=Ff.transition;Ff.transition={};try{o()}finally{Ff.transition=c}};Re.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Re.useCallback=function(o,c){return Dr.current.useCallback(o,c)};Re.useContext=function(o){return Dr.current.useContext(o)};Re.useDebugValue=function(){};Re.useDeferredValue=function(o){return Dr.current.useDeferredValue(o)};Re.useEffect=function(o,c){return Dr.current.useEffect(o,c)};Re.useId=function(){return Dr.current.useId()};Re.useImperativeHandle=function(o,c,h){return Dr.current.useImperativeHandle(o,c,h)};Re.useInsertionEffect=function(o,c){return Dr.current.useInsertionEffect(o,c)};Re.useLayoutEffect=function(o,c){return Dr.current.useLayoutEffect(o,c)};Re.useMemo=function(o,c){return Dr.current.useMemo(o,c)};Re.useReducer=function(o,c,h){return Dr.current.useReducer(o,c,h)};Re.useRef=function(o){return Dr.current.useRef(o)};Re.useState=function(o){return Dr.current.useState(o)};Re.useSyncExternalStore=function(o,c,h){return Dr.current.useSyncExternalStore(o,c,h)};Re.useTransition=function(){return Dr.current.useTransition()};Re.version="18.1.0";ss.exports=Re;var m0={},P4={exports:{}},Ci={},L4={exports:{}},B4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function c(Ft,he){var pe=Ft.length;Ft.push(he);t:for(;0<pe;){var sn=pe-1>>>1,wn=Ft[sn];if(0<m(wn,he))Ft[sn]=he,Ft[pe]=wn,pe=sn;else break t}}function h(Ft){return Ft.length===0?null:Ft[0]}function g(Ft){if(Ft.length===0)return null;var he=Ft[0],pe=Ft.pop();if(pe!==he){Ft[0]=pe;t:for(var sn=0,wn=Ft.length,co=wn>>>1;sn<co;){var Pe=2*(sn+1)-1,rd=Ft[Pe],fn=Pe+1,As=Ft[fn];if(0>m(rd,pe))fn<wn&&0>m(As,rd)?(Ft[sn]=As,Ft[fn]=pe,sn=fn):(Ft[sn]=rd,Ft[Pe]=pe,sn=Pe);else if(fn<wn&&0>m(As,pe))Ft[sn]=As,Ft[fn]=pe,sn=fn;else break t}}return he}function m(Ft,he){var pe=Ft.sortIndex-he.sortIndex;return pe!==0?pe:Ft.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var b=Date,M=b.now();o.unstable_now=function(){return b.now()-M}}var F=[],$=[],At=1,gt=null,ct=3,Bt=!1,Rt=!1,$t=!1,Ne=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function rt(Ft){for(var he=h($);he!==null;){if(he.callback===null)g($);else if(he.startTime<=Ft)g($),he.sortIndex=he.expirationTime,c(F,he);else break;he=h($)}}function vt(Ft){if($t=!1,rt(Ft),!Rt)if(h(F)!==null)Rt=!0,ua(Qt);else{var he=h($);he!==null&&nd(vt,he.startTime-Ft)}}function Qt(Ft,he){Rt=!1,$t&&($t=!1,et(Dt),Dt=-1),Bt=!0;var pe=ct;try{for(rt(he),gt=h(F);gt!==null&&(!(gt.expirationTime>he)||Ft&&!Zr());){var sn=gt.callback;if(typeof sn=="function"){gt.callback=null,ct=gt.priorityLevel;var wn=sn(gt.expirationTime<=he);he=o.unstable_now(),typeof wn=="function"?gt.callback=wn:gt===h(F)&&g(F),rt(he)}else g(F);gt=h(F)}if(gt!==null)var co=!0;else{var Pe=h($);Pe!==null&&nd(vt,Pe.startTime-he),co=!1}return co}finally{gt=null,ct=pe,Bt=!1}}var Yt=!1,qt=null,Dt=-1,en=5,Se=-1;function Zr(){return!(o.unstable_now()-Se<en)}function $r(){if(qt!==null){var Ft=o.unstable_now();Se=Ft;var he=!0;try{he=qt(!0,Ft)}finally{he?ca():(Yt=!1,qt=null)}}else Yt=!1}var ca;if(typeof W=="function")ca=function(){W($r)};else if(typeof MessageChannel!="undefined"){var gA=new MessageChannel,Qg=gA.port2;gA.port1.onmessage=$r,ca=function(){Qg.postMessage(null)}}else ca=function(){Ne($r,0)};function ua(Ft){qt=Ft,Yt||(Yt=!0,ca())}function nd(Ft,he){Dt=Ne(function(){Ft(o.unstable_now())},he)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Ft){Ft.callback=null},o.unstable_continueExecution=function(){Rt||Bt||(Rt=!0,ua(Qt))},o.unstable_forceFrameRate=function(Ft){0>Ft||125<Ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):en=0<Ft?Math.floor(1e3/Ft):5},o.unstable_getCurrentPriorityLevel=function(){return ct},o.unstable_getFirstCallbackNode=function(){return h(F)},o.unstable_next=function(Ft){switch(ct){case 1:case 2:case 3:var he=3;break;default:he=ct}var pe=ct;ct=he;try{return Ft()}finally{ct=pe}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Ft,he){switch(Ft){case 1:case 2:case 3:case 4:case 5:break;default:Ft=3}var pe=ct;ct=Ft;try{return he()}finally{ct=pe}},o.unstable_scheduleCallback=function(Ft,he,pe){var sn=o.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?sn+pe:sn):pe=sn,Ft){case 1:var wn=-1;break;case 2:wn=250;break;case 5:wn=1073741823;break;case 4:wn=1e4;break;default:wn=5e3}return wn=pe+wn,Ft={id:At++,callback:he,priorityLevel:Ft,startTime:pe,expirationTime:wn,sortIndex:-1},pe>sn?(Ft.sortIndex=pe,c($,Ft),h(F)===null&&Ft===h($)&&($t?(et(Dt),Dt=-1):$t=!0,nd(vt,pe-sn))):(Ft.sortIndex=wn,c(F,Ft),Rt||Bt||(Rt=!0,ua(Qt))),Ft},o.unstable_shouldYield=Zr,o.unstable_wrapCallback=function(Ft){var he=ct;return function(){var pe=ct;ct=he;try{return Ft.apply(this,arguments)}finally{ct=pe}}}})(B4);L4.exports=B4;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M4=ss.exports,Ii=L4.exports;function yt(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U4=new Set,Jl={};function hc(o,c){Wu(o,c),Wu(o+"Capture",c)}function Wu(o,c){for(Jl[o]=c,o=0;o<c.length;o++)U4.add(c[o])}var cs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),I0=Object.prototype.hasOwnProperty,ert=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E3={},m3={};function nrt(o){return I0.call(m3,o)?!0:I0.call(E3,o)?!1:ert.test(o)?m3[o]=!0:(E3[o]=!0,!1)}function rrt(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function irt(o,c,h,g){if(c===null||typeof c=="undefined"||rrt(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function kr(o,c,h,g,m,S,b){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=m,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=S,this.removeEmptyString=b}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){cr[o]=new kr(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];cr[c]=new kr(c,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){cr[o]=new kr(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){cr[o]=new kr(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){cr[o]=new kr(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){cr[o]=new kr(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){cr[o]=new kr(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){cr[o]=new kr(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){cr[o]=new kr(o,5,!1,o.toLowerCase(),null,!1,!1)});var pv=/[\-:]([a-z])/g;function fv(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(pv,fv);cr[c]=new kr(c,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(pv,fv);cr[c]=new kr(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(pv,fv);cr[c]=new kr(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){cr[o]=new kr(o,1,!1,o.toLowerCase(),null,!1,!1)});cr.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){cr[o]=new kr(o,1,!1,o.toLowerCase(),null,!0,!0)});function gv(o,c,h,g){var m=cr.hasOwnProperty(c)?cr[c]:null;(m!==null?m.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(irt(c,h,m,g)&&(h=null),g||m===null?nrt(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):m.mustUseProperty?o[m.propertyName]=h===null?m.type===3?!1:"":h:(c=m.attributeName,g=m.attributeNamespace,h===null?o.removeAttribute(c):(m=m.type,h=m===3||m===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var ls=M4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vf=Symbol.for("react.element"),Nu=Symbol.for("react.portal"),Ou=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),C0=Symbol.for("react.profiler"),x4=Symbol.for("react.provider"),Q4=Symbol.for("react.context"),mv=Symbol.for("react.forward_ref"),_0=Symbol.for("react.suspense"),v0=Symbol.for("react.suspense_list"),Iv=Symbol.for("react.memo"),Gs=Symbol.for("react.lazy"),F4=Symbol.for("react.offscreen"),I3=Symbol.iterator;function Rl(o){return o===null||typeof o!="object"?null:(o=I3&&o[I3]||o["@@iterator"],typeof o=="function"?o:null)}var pn=Object.assign,J_;function Bl(o){if(J_===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);J_=c&&c[1]||""}return`
`+J_+o}var q_=!1;function z_(o,c){if(!o||q_)return"";q_=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch($){var g=$}Reflect.construct(o,[],c)}else{try{c.call()}catch($){g=$}o.call(c.prototype)}else{try{throw Error()}catch($){g=$}o()}}catch($){if($&&g&&typeof $.stack=="string"){for(var m=$.stack.split(`
`),S=g.stack.split(`
`),b=m.length-1,M=S.length-1;1<=b&&0<=M&&m[b]!==S[M];)M--;for(;1<=b&&0<=M;b--,M--)if(m[b]!==S[M]){if(b!==1||M!==1)do if(b--,M--,0>M||m[b]!==S[M]){var F=`
`+m[b].replace(" at new "," at ");return o.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",o.displayName)),F}while(1<=b&&0<=M);break}}}finally{q_=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?Bl(o):""}function ort(o){switch(o.tag){case 5:return Bl(o.type);case 16:return Bl("Lazy");case 13:return Bl("Suspense");case 19:return Bl("SuspenseList");case 0:case 2:case 15:return o=z_(o.type,!1),o;case 11:return o=z_(o.type.render,!1),o;case 1:return o=z_(o.type,!0),o;default:return""}}function S0(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Ou:return"Fragment";case Nu:return"Portal";case C0:return"Profiler";case Ev:return"StrictMode";case _0:return"Suspense";case v0:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Q4:return(o.displayName||"Context")+".Consumer";case x4:return(o._context.displayName||"Context")+".Provider";case mv:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Iv:return c=o.displayName||null,c!==null?c:S0(o.type)||"Memo";case Gs:c=o._payload,o=o._init;try{return S0(o(c))}catch{}}return null}function srt(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S0(c);case 8:return c===Ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function na(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function j4(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function art(o){var c=j4(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h!="undefined"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,S=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return m.call(this)},set:function(b){g=""+b,S.call(this,b)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(b){g=""+b},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Sf(o){o._valueTracker||(o._valueTracker=art(o))}function V4(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=j4(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function Zf(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch{return o.body}}function y0(o,c){var h=c.checked;return pn({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h!=null?h:o._wrapperState.initialChecked})}function C3(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=na(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function G4(o,c){c=c.checked,c!=null&&gv(o,"checked",c,!1)}function T0(o,c){G4(o,c);var h=na(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?R0(o,c.type,h):c.hasOwnProperty("defaultValue")&&R0(o,c.type,na(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function _3(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function R0(o,c,h){(c!=="number"||Zf(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var Ml=Array.isArray;function ju(o,c,h,g){if(o=o.options,c){c={};for(var m=0;m<h.length;m++)c["$"+h[m]]=!0;for(h=0;h<o.length;h++)m=c.hasOwnProperty("$"+o[h].value),o[h].selected!==m&&(o[h].selected=m),m&&g&&(o[h].defaultSelected=!0)}else{for(h=""+na(h),c=null,m=0;m<o.length;m++){if(o[m].value===h){o[m].selected=!0,g&&(o[m].defaultSelected=!0);return}c!==null||o[m].disabled||(c=o[m])}c!==null&&(c.selected=!0)}}function w0(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(yt(91));return pn({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function v3(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(yt(92));if(Ml(h)){if(1<h.length)throw Error(yt(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:na(h)}}function K4(o,c){var h=na(c.value),g=na(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function S3(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function H4(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b0(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?H4(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var yf,Y4=function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(c,h,g,m){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,m)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(yf=yf||document.createElement("div"),yf.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=yf.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function ql(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},crt=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(o){crt.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ql[c]=Ql[o]})});function W4(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Ql.hasOwnProperty(o)&&Ql[o]?(""+c).trim():c+"px"}function J4(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,m=W4(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,m):o[h]=m}}var urt=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N0(o,c){if(c){if(urt[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(yt(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(yt(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(yt(61))}if(c.style!=null&&typeof c.style!="object")throw Error(yt(62))}}function O0(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D0=null;function Cv(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var k0=null,Vu=null,Gu=null;function y3(o){if(o=pA(o)){if(typeof k0!="function")throw Error(yt(280));var c=o.stateNode;c&&(c=wg(c),k0(o.stateNode,o.type,c))}}function q4(o){Vu?Gu?Gu.push(o):Gu=[o]:Vu=o}function z4(){if(Vu){var o=Vu,c=Gu;if(Gu=Vu=null,y3(o),c)for(o=0;o<c.length;o++)y3(c[o])}}function X4(o,c){return o(c)}function Z4(){}var X_=!1;function $4(o,c,h){if(X_)return o(c,h);X_=!0;try{return X4(o,c,h)}finally{X_=!1,(Vu!==null||Gu!==null)&&(Z4(),z4())}}function zl(o,c){var h=o.stateNode;if(h===null)return null;var g=wg(h);if(g===null)return null;h=g[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break t;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(yt(231,c,typeof h));return h}var P0=!1;if(cs)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){P0=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{P0=!1}function drt(o,c,h,g,m,S,b,M,F){var $=Array.prototype.slice.call(arguments,3);try{c.apply(h,$)}catch(At){this.onError(At)}}var Fl=!1,$f=null,tg=!1,L0=null,lrt={onError:function(o){Fl=!0,$f=o}};function Art(o,c,h,g,m,S,b,M,F){Fl=!1,$f=null,drt.apply(lrt,arguments)}function hrt(o,c,h,g,m,S,b,M,F){if(Art.apply(this,arguments),Fl){if(Fl){var $=$f;Fl=!1,$f=null}else throw Error(yt(198));tg||(tg=!0,L0=$)}}function pc(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function tM(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function T3(o){if(pc(o)!==o)throw Error(yt(188))}function prt(o){var c=o.alternate;if(!c){if(c=pc(o),c===null)throw Error(yt(188));return c!==o?null:o}for(var h=o,g=c;;){var m=h.return;if(m===null)break;var S=m.alternate;if(S===null){if(g=m.return,g!==null){h=g;continue}break}if(m.child===S.child){for(S=m.child;S;){if(S===h)return T3(m),o;if(S===g)return T3(m),c;S=S.sibling}throw Error(yt(188))}if(h.return!==g.return)h=m,g=S;else{for(var b=!1,M=m.child;M;){if(M===h){b=!0,h=m,g=S;break}if(M===g){b=!0,g=m,h=S;break}M=M.sibling}if(!b){for(M=S.child;M;){if(M===h){b=!0,h=S,g=m;break}if(M===g){b=!0,g=S,h=m;break}M=M.sibling}if(!b)throw Error(yt(189))}}if(h.alternate!==g)throw Error(yt(190))}if(h.tag!==3)throw Error(yt(188));return h.stateNode.current===h?o:c}function eM(o){return o=prt(o),o!==null?nM(o):null}function nM(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=nM(o);if(c!==null)return c;o=o.sibling}return null}var rM=Ii.unstable_scheduleCallback,R3=Ii.unstable_cancelCallback,frt=Ii.unstable_shouldYield,grt=Ii.unstable_requestPaint,Rn=Ii.unstable_now,Ert=Ii.unstable_getCurrentPriorityLevel,_v=Ii.unstable_ImmediatePriority,iM=Ii.unstable_UserBlockingPriority,eg=Ii.unstable_NormalPriority,mrt=Ii.unstable_LowPriority,oM=Ii.unstable_IdlePriority,Sg=null,Ro=null;function Irt(o){if(Ro&&typeof Ro.onCommitFiberRoot=="function")try{Ro.onCommitFiberRoot(Sg,o,void 0,(o.current.flags&128)===128)}catch{}}var so=Math.clz32?Math.clz32:vrt,Crt=Math.log,_rt=Math.LN2;function vrt(o){return o>>>=0,o===0?32:31-(Crt(o)/_rt|0)|0}var Tf=64,Rf=4194304;function Ul(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ng(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,m=o.suspendedLanes,S=o.pingedLanes,b=h&268435455;if(b!==0){var M=b&~m;M!==0?g=Ul(M):(S&=b,S!==0&&(g=Ul(S)))}else b=h&~m,b!==0?g=Ul(b):S!==0&&(g=Ul(S));if(g===0)return 0;if(c!==0&&c!==g&&(c&m)===0&&(m=g&-g,S=c&-c,m>=S||m===16&&(S&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-so(c),m=1<<h,g|=o[h],c&=~m;return g}function Srt(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yrt(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,m=o.expirationTimes,S=o.pendingLanes;0<S;){var b=31-so(S),M=1<<b,F=m[b];F===-1?((M&h)===0||(M&g)!==0)&&(m[b]=Srt(M,c)):F<=c&&(o.expiredLanes|=M),S&=~M}}function B0(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function sM(){var o=Tf;return Tf<<=1,(Tf&4194240)===0&&(Tf=64),o}function Z_(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function AA(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-so(c),o[c]=h}function Trt(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var m=31-so(h),S=1<<m;c[m]=0,g[m]=-1,o[m]=-1,h&=~S}}function vv(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-so(h),m=1<<g;m&c|o[g]&c&&(o[g]|=c),h&=~m}}var Qe=0;function aM(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var cM,Sv,uM,dM,lM,M0=!1,wf=[],qs=null,zs=null,Xs=null,Xl=new Map,Zl=new Map,Hs=[],Rrt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w3(o,c){switch(o){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":Xl.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(c.pointerId)}}function bl(o,c,h,g,m,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:S,targetContainers:[m]},c!==null&&(c=pA(c),c!==null&&Sv(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,m!==null&&c.indexOf(m)===-1&&c.push(m),o)}function wrt(o,c,h,g,m){switch(c){case"focusin":return qs=bl(qs,o,c,h,g,m),!0;case"dragenter":return zs=bl(zs,o,c,h,g,m),!0;case"mouseover":return Xs=bl(Xs,o,c,h,g,m),!0;case"pointerover":var S=m.pointerId;return Xl.set(S,bl(Xl.get(S)||null,o,c,h,g,m)),!0;case"gotpointercapture":return S=m.pointerId,Zl.set(S,bl(Zl.get(S)||null,o,c,h,g,m)),!0}return!1}function AM(o){var c=ic(o.target);if(c!==null){var h=pc(c);if(h!==null){if(c=h.tag,c===13){if(c=tM(h),c!==null){o.blockedOn=c,lM(o.priority,function(){uM(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function jf(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=U0(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);D0=g,h.target.dispatchEvent(g),D0=null}else return c=pA(h),c!==null&&Sv(c),o.blockedOn=h,!1;c.shift()}return!0}function b3(o,c,h){jf(o)&&h.delete(c)}function brt(){M0=!1,qs!==null&&jf(qs)&&(qs=null),zs!==null&&jf(zs)&&(zs=null),Xs!==null&&jf(Xs)&&(Xs=null),Xl.forEach(b3),Zl.forEach(b3)}function Nl(o,c){o.blockedOn===c&&(o.blockedOn=null,M0||(M0=!0,Ii.unstable_scheduleCallback(Ii.unstable_NormalPriority,brt)))}function $l(o){function c(m){return Nl(m,o)}if(0<wf.length){Nl(wf[0],o);for(var h=1;h<wf.length;h++){var g=wf[h];g.blockedOn===o&&(g.blockedOn=null)}}for(qs!==null&&Nl(qs,o),zs!==null&&Nl(zs,o),Xs!==null&&Nl(Xs,o),Xl.forEach(c),Zl.forEach(c),h=0;h<Hs.length;h++)g=Hs[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<Hs.length&&(h=Hs[0],h.blockedOn===null);)AM(h),h.blockedOn===null&&Hs.shift()}var Ku=ls.ReactCurrentBatchConfig,rg=!0;function Nrt(o,c,h,g){var m=Qe,S=Ku.transition;Ku.transition=null;try{Qe=1,yv(o,c,h,g)}finally{Qe=m,Ku.transition=S}}function Ort(o,c,h,g){var m=Qe,S=Ku.transition;Ku.transition=null;try{Qe=4,yv(o,c,h,g)}finally{Qe=m,Ku.transition=S}}function yv(o,c,h,g){if(rg){var m=U0(o,c,h,g);if(m===null)c0(o,c,g,ig,h),w3(o,g);else if(wrt(m,o,c,h,g))g.stopPropagation();else if(w3(o,g),c&4&&-1<Rrt.indexOf(o)){for(;m!==null;){var S=pA(m);if(S!==null&&cM(S),S=U0(o,c,h,g),S===null&&c0(o,c,g,ig,h),S===m)break;m=S}m!==null&&g.stopPropagation()}else c0(o,c,g,null,h)}}var ig=null;function U0(o,c,h,g){if(ig=null,o=Cv(g),o=ic(o),o!==null)if(c=pc(o),c===null)o=null;else if(h=c.tag,h===13){if(o=tM(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return ig=o,null}function hM(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ert()){case _v:return 1;case iM:return 4;case eg:case mrt:return 16;case oM:return 536870912;default:return 16}default:return 16}}var Ws=null,Tv=null,Vf=null;function pM(){if(Vf)return Vf;var o,c=Tv,h=c.length,g,m="value"in Ws?Ws.value:Ws.textContent,S=m.length;for(o=0;o<h&&c[o]===m[o];o++);var b=h-o;for(g=1;g<=b&&c[h-g]===m[S-g];g++);return Vf=m.slice(o,1<g?1-g:void 0)}function Gf(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function bf(){return!0}function N3(){return!1}function _i(o){function c(h,g,m,S,b){this._reactName=h,this._targetInst=m,this.type=g,this.nativeEvent=S,this.target=b,this.currentTarget=null;for(var M in o)o.hasOwnProperty(M)&&(h=o[M],this[M]=h?h(S):S[M]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?bf:N3,this.isPropagationStopped=N3,this}return pn(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=bf)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=bf)},persist:function(){},isPersistent:bf}),c}var td={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rv=_i(td),hA=pn({},td,{view:0,detail:0}),Drt=_i(hA),$_,t0,Ol,yg=pn({},hA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wv,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ol&&(Ol&&o.type==="mousemove"?($_=o.screenX-Ol.screenX,t0=o.screenY-Ol.screenY):t0=$_=0,Ol=o),$_)},movementY:function(o){return"movementY"in o?o.movementY:t0}}),O3=_i(yg),krt=pn({},yg,{dataTransfer:0}),Prt=_i(krt),Lrt=pn({},hA,{relatedTarget:0}),e0=_i(Lrt),Brt=pn({},td,{animationName:0,elapsedTime:0,pseudoElement:0}),Mrt=_i(Brt),Urt=pn({},td,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xrt=_i(Urt),Qrt=pn({},td,{data:0}),D3=_i(Qrt),Frt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jrt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vrt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Grt(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Vrt[o])?!!c[o]:!1}function wv(){return Grt}var Krt=pn({},hA,{key:function(o){if(o.key){var c=Frt[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Gf(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?jrt[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wv,charCode:function(o){return o.type==="keypress"?Gf(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Gf(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Hrt=_i(Krt),Yrt=pn({},yg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k3=_i(Yrt),Wrt=pn({},hA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wv}),Jrt=_i(Wrt),qrt=pn({},td,{propertyName:0,elapsedTime:0,pseudoElement:0}),zrt=_i(qrt),Xrt=pn({},yg,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zrt=_i(Xrt),$rt=[9,13,27,32],bv=cs&&"CompositionEvent"in window,jl=null;cs&&"documentMode"in document&&(jl=document.documentMode);var tit=cs&&"TextEvent"in window&&!jl,fM=cs&&(!bv||jl&&8<jl&&11>=jl),P3=String.fromCharCode(32),L3=!1;function gM(o,c){switch(o){case"keyup":return $rt.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EM(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Du=!1;function eit(o,c){switch(o){case"compositionend":return EM(c);case"keypress":return c.which!==32?null:(L3=!0,P3);case"textInput":return o=c.data,o===P3&&L3?null:o;default:return null}}function nit(o,c){if(Du)return o==="compositionend"||!bv&&gM(o,c)?(o=pM(),Vf=Tv=Ws=null,Du=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return fM&&c.locale!=="ko"?null:c.data;default:return null}}var rit={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B3(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!rit[o.type]:c==="textarea"}function mM(o,c,h,g){q4(g),c=og(c,"onChange"),0<c.length&&(h=new Rv("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Vl=null,tA=null;function iit(o){NM(o,0)}function Tg(o){var c=Lu(o);if(V4(c))return o}function oit(o,c){if(o==="change")return c}var IM=!1;if(cs){var n0;if(cs){var r0="oninput"in document;if(!r0){var M3=document.createElement("div");M3.setAttribute("oninput","return;"),r0=typeof M3.oninput=="function"}n0=r0}else n0=!1;IM=n0&&(!document.documentMode||9<document.documentMode)}function U3(){Vl&&(Vl.detachEvent("onpropertychange",CM),tA=Vl=null)}function CM(o){if(o.propertyName==="value"&&Tg(tA)){var c=[];mM(c,tA,o,Cv(o)),$4(iit,c)}}function sit(o,c,h){o==="focusin"?(U3(),Vl=c,tA=h,Vl.attachEvent("onpropertychange",CM)):o==="focusout"&&U3()}function ait(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Tg(tA)}function cit(o,c){if(o==="click")return Tg(c)}function uit(o,c){if(o==="input"||o==="change")return Tg(c)}function dit(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ao=typeof Object.is=="function"?Object.is:dit;function eA(o,c){if(ao(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var m=h[g];if(!I0.call(c,m)||!ao(o[m],c[m]))return!1}return!0}function x3(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Q3(o,c){var h=x3(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=x3(h)}}function _M(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?_M(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function vM(){for(var o=window,c=Zf();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Zf(o.document)}return c}function Nv(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function lit(o){var c=vM(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&_M(h.ownerDocument.documentElement,h)){if(g!==null&&Nv(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var m=h.textContent.length,S=Math.min(g.start,m);g=g.end===void 0?S:Math.min(g.end,m),!o.extend&&S>g&&(m=g,g=S,S=m),m=Q3(h,S);var b=Q3(h,g);m&&b&&(o.rangeCount!==1||o.anchorNode!==m.node||o.anchorOffset!==m.offset||o.focusNode!==b.node||o.focusOffset!==b.offset)&&(c=c.createRange(),c.setStart(m.node,m.offset),o.removeAllRanges(),S>g?(o.addRange(c),o.extend(b.node,b.offset)):(c.setEnd(b.node,b.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Ait=cs&&"documentMode"in document&&11>=document.documentMode,ku=null,x0=null,Gl=null,Q0=!1;function F3(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Q0||ku==null||ku!==Zf(g)||(g=ku,"selectionStart"in g&&Nv(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Gl&&eA(Gl,g)||(Gl=g,g=og(x0,"onSelect"),0<g.length&&(c=new Rv("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=ku)))}function Nf(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Pu={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},i0={},SM={};cs&&(SM=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function Rg(o){if(i0[o])return i0[o];if(!Pu[o])return o;var c=Pu[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in SM)return i0[o]=c[h];return o}var yM=Rg("animationend"),TM=Rg("animationiteration"),RM=Rg("animationstart"),wM=Rg("transitionend"),bM=new Map,j3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oa(o,c){bM.set(o,c),hc(c,[o])}for(var o0=0;o0<j3.length;o0++){var s0=j3[o0],hit=s0.toLowerCase(),pit=s0[0].toUpperCase()+s0.slice(1);oa(hit,"on"+pit)}oa(yM,"onAnimationEnd");oa(TM,"onAnimationIteration");oa(RM,"onAnimationStart");oa("dblclick","onDoubleClick");oa("focusin","onFocus");oa("focusout","onBlur");oa(wM,"onTransitionEnd");Wu("onMouseEnter",["mouseout","mouseover"]);Wu("onMouseLeave",["mouseout","mouseover"]);Wu("onPointerEnter",["pointerout","pointerover"]);Wu("onPointerLeave",["pointerout","pointerover"]);hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fit=new Set("cancel close invalid load scroll toggle".split(" ").concat(xl));function V3(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,hrt(g,c,void 0,o),o.currentTarget=null}function NM(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],m=g.event;g=g.listeners;t:{var S=void 0;if(c)for(var b=g.length-1;0<=b;b--){var M=g[b],F=M.instance,$=M.currentTarget;if(M=M.listener,F!==S&&m.isPropagationStopped())break t;V3(m,M,$),S=F}else for(b=0;b<g.length;b++){if(M=g[b],F=M.instance,$=M.currentTarget,M=M.listener,F!==S&&m.isPropagationStopped())break t;V3(m,M,$),S=F}}}if(tg)throw o=L0,tg=!1,L0=null,o}function $e(o,c){var h=c[K0];h===void 0&&(h=c[K0]=new Set);var g=o+"__bubble";h.has(g)||(OM(c,o,2,!1),h.add(g))}function a0(o,c,h){var g=0;c&&(g|=4),OM(h,o,g,c)}var Of="_reactListening"+Math.random().toString(36).slice(2);function nA(o){if(!o[Of]){o[Of]=!0,U4.forEach(function(h){h!=="selectionchange"&&(fit.has(h)||a0(h,!1,o),a0(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Of]||(c[Of]=!0,a0("selectionchange",!1,c))}}function OM(o,c,h,g){switch(hM(c)){case 1:var m=Nrt;break;case 4:m=Ort;break;default:m=yv}h=m.bind(null,c,h,o),m=void 0,!P0||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(m=!0),g?m!==void 0?o.addEventListener(c,h,{capture:!0,passive:m}):o.addEventListener(c,h,!0):m!==void 0?o.addEventListener(c,h,{passive:m}):o.addEventListener(c,h,!1)}function c0(o,c,h,g,m){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)t:for(;;){if(g===null)return;var b=g.tag;if(b===3||b===4){var M=g.stateNode.containerInfo;if(M===m||M.nodeType===8&&M.parentNode===m)break;if(b===4)for(b=g.return;b!==null;){var F=b.tag;if((F===3||F===4)&&(F=b.stateNode.containerInfo,F===m||F.nodeType===8&&F.parentNode===m))return;b=b.return}for(;M!==null;){if(b=ic(M),b===null)return;if(F=b.tag,F===5||F===6){g=S=b;continue t}M=M.parentNode}}g=g.return}$4(function(){var $=S,At=Cv(h),gt=[];t:{var ct=bM.get(o);if(ct!==void 0){var Bt=Rv,Rt=o;switch(o){case"keypress":if(Gf(h)===0)break t;case"keydown":case"keyup":Bt=Hrt;break;case"focusin":Rt="focus",Bt=e0;break;case"focusout":Rt="blur",Bt=e0;break;case"beforeblur":case"afterblur":Bt=e0;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Bt=O3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Bt=Prt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Bt=Jrt;break;case yM:case TM:case RM:Bt=Mrt;break;case wM:Bt=zrt;break;case"scroll":Bt=Drt;break;case"wheel":Bt=Zrt;break;case"copy":case"cut":case"paste":Bt=xrt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Bt=k3}var $t=(c&4)!==0,Ne=!$t&&o==="scroll",et=$t?ct!==null?ct+"Capture":null:ct;$t=[];for(var W=$,rt;W!==null;){rt=W;var vt=rt.stateNode;if(rt.tag===5&&vt!==null&&(rt=vt,et!==null&&(vt=zl(W,et),vt!=null&&$t.push(rA(W,vt,rt)))),Ne)break;W=W.return}0<$t.length&&(ct=new Bt(ct,Rt,null,h,At),gt.push({event:ct,listeners:$t}))}}if((c&7)===0){t:{if(ct=o==="mouseover"||o==="pointerover",Bt=o==="mouseout"||o==="pointerout",ct&&h!==D0&&(Rt=h.relatedTarget||h.fromElement)&&(ic(Rt)||Rt[us]))break t;if((Bt||ct)&&(ct=At.window===At?At:(ct=At.ownerDocument)?ct.defaultView||ct.parentWindow:window,Bt?(Rt=h.relatedTarget||h.toElement,Bt=$,Rt=Rt?ic(Rt):null,Rt!==null&&(Ne=pc(Rt),Rt!==Ne||Rt.tag!==5&&Rt.tag!==6)&&(Rt=null)):(Bt=null,Rt=$),Bt!==Rt)){if($t=O3,vt="onMouseLeave",et="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&($t=k3,vt="onPointerLeave",et="onPointerEnter",W="pointer"),Ne=Bt==null?ct:Lu(Bt),rt=Rt==null?ct:Lu(Rt),ct=new $t(vt,W+"leave",Bt,h,At),ct.target=Ne,ct.relatedTarget=rt,vt=null,ic(At)===$&&($t=new $t(et,W+"enter",Rt,h,At),$t.target=rt,$t.relatedTarget=Ne,vt=$t),Ne=vt,Bt&&Rt)e:{for($t=Bt,et=Rt,W=0,rt=$t;rt;rt=bu(rt))W++;for(rt=0,vt=et;vt;vt=bu(vt))rt++;for(;0<W-rt;)$t=bu($t),W--;for(;0<rt-W;)et=bu(et),rt--;for(;W--;){if($t===et||et!==null&&$t===et.alternate)break e;$t=bu($t),et=bu(et)}$t=null}else $t=null;Bt!==null&&G3(gt,ct,Bt,$t,!1),Rt!==null&&Ne!==null&&G3(gt,Ne,Rt,$t,!0)}}t:{if(ct=$?Lu($):window,Bt=ct.nodeName&&ct.nodeName.toLowerCase(),Bt==="select"||Bt==="input"&&ct.type==="file")var Qt=oit;else if(B3(ct))if(IM)Qt=uit;else{Qt=ait;var Yt=sit}else(Bt=ct.nodeName)&&Bt.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(Qt=cit);if(Qt&&(Qt=Qt(o,$))){mM(gt,Qt,h,At);break t}Yt&&Yt(o,ct,$),o==="focusout"&&(Yt=ct._wrapperState)&&Yt.controlled&&ct.type==="number"&&R0(ct,"number",ct.value)}switch(Yt=$?Lu($):window,o){case"focusin":(B3(Yt)||Yt.contentEditable==="true")&&(ku=Yt,x0=$,Gl=null);break;case"focusout":Gl=x0=ku=null;break;case"mousedown":Q0=!0;break;case"contextmenu":case"mouseup":case"dragend":Q0=!1,F3(gt,h,At);break;case"selectionchange":if(Ait)break;case"keydown":case"keyup":F3(gt,h,At)}var qt;if(bv)t:{switch(o){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else Du?gM(o,h)&&(Dt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Dt="onCompositionStart");Dt&&(fM&&h.locale!=="ko"&&(Du||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Du&&(qt=pM()):(Ws=At,Tv="value"in Ws?Ws.value:Ws.textContent,Du=!0)),Yt=og($,Dt),0<Yt.length&&(Dt=new D3(Dt,o,null,h,At),gt.push({event:Dt,listeners:Yt}),qt?Dt.data=qt:(qt=EM(h),qt!==null&&(Dt.data=qt)))),(qt=tit?eit(o,h):nit(o,h))&&($=og($,"onBeforeInput"),0<$.length&&(At=new D3("onBeforeInput","beforeinput",null,h,At),gt.push({event:At,listeners:$}),At.data=qt))}NM(gt,c)})}function rA(o,c,h){return{instance:o,listener:c,currentTarget:h}}function og(o,c){for(var h=c+"Capture",g=[];o!==null;){var m=o,S=m.stateNode;m.tag===5&&S!==null&&(m=S,S=zl(o,h),S!=null&&g.unshift(rA(o,S,m)),S=zl(o,c),S!=null&&g.push(rA(o,S,m))),o=o.return}return g}function bu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function G3(o,c,h,g,m){for(var S=c._reactName,b=[];h!==null&&h!==g;){var M=h,F=M.alternate,$=M.stateNode;if(F!==null&&F===g)break;M.tag===5&&$!==null&&(M=$,m?(F=zl(h,S),F!=null&&b.unshift(rA(h,F,M))):m||(F=zl(h,S),F!=null&&b.push(rA(h,F,M)))),h=h.return}b.length!==0&&o.push({event:c,listeners:b})}var git=/\r\n?/g,Eit=/\u0000|\uFFFD/g;function K3(o){return(typeof o=="string"?o:""+o).replace(git,`
`).replace(Eit,"")}function Df(o,c,h){if(c=K3(c),K3(o)!==c&&h)throw Error(yt(425))}function sg(){}var F0=null,j0=null;function V0(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var G0=typeof setTimeout=="function"?setTimeout:void 0,mit=typeof clearTimeout=="function"?clearTimeout:void 0,H3=typeof Promise=="function"?Promise:void 0,Iit=typeof queueMicrotask=="function"?queueMicrotask:typeof H3!="undefined"?function(o){return H3.resolve(null).then(o).catch(Cit)}:G0;function Cit(o){setTimeout(function(){throw o})}function u0(o,c){var h=c,g=0;do{var m=h.nextSibling;if(o.removeChild(h),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(g===0){o.removeChild(m),$l(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=m}while(h);$l(c)}function rs(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Y3(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var ed=Math.random().toString(36).slice(2),To="__reactFiber$"+ed,iA="__reactProps$"+ed,us="__reactContainer$"+ed,K0="__reactEvents$"+ed,_it="__reactListeners$"+ed,vit="__reactHandles$"+ed;function ic(o){var c=o[To];if(c)return c;for(var h=o.parentNode;h;){if(c=h[us]||h[To]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=Y3(o);o!==null;){if(h=o[To])return h;o=Y3(o)}return c}o=h,h=o.parentNode}return null}function pA(o){return o=o[To]||o[us],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Lu(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(yt(33))}function wg(o){return o[iA]||null}var H0=[],Bu=-1;function sa(o){return{current:o}}function tn(o){0>Bu||(o.current=H0[Bu],H0[Bu]=null,Bu--)}function qe(o,c){Bu++,H0[Bu]=o.current,o.current=c}var ra={},Ir=sa(ra),qr=sa(!1),cc=ra;function Ju(o,c){var h=o.type.contextTypes;if(!h)return ra;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var m={},S;for(S in h)m[S]=c[S];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=m),m}function zr(o){return o=o.childContextTypes,o!=null}function ag(){tn(qr),tn(Ir)}function W3(o,c,h){if(Ir.current!==ra)throw Error(yt(168));qe(Ir,c),qe(qr,h)}function DM(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var m in g)if(!(m in c))throw Error(yt(108,srt(o)||"Unknown",m));return pn({},h,g)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ra,cc=Ir.current,qe(Ir,o),qe(qr,qr.current),!0}function J3(o,c,h){var g=o.stateNode;if(!g)throw Error(yt(169));h?(o=DM(o,c,cc),g.__reactInternalMemoizedMergedChildContext=o,tn(qr),tn(Ir),qe(Ir,o)):tn(qr),qe(qr,h)}var ns=null,bg=!1,d0=!1;function kM(o){ns===null?ns=[o]:ns.push(o)}function Sit(o){bg=!0,kM(o)}function aa(){if(!d0&&ns!==null){d0=!0;var o=0,c=Qe;try{var h=ns;for(Qe=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}ns=null,bg=!1}catch(m){throw ns!==null&&(ns=ns.slice(o+1)),rM(_v,aa),m}finally{Qe=c,d0=!1}}return null}var yit=ls.ReactCurrentBatchConfig;function no(o,c){if(o&&o.defaultProps){c=pn({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}var ug=sa(null),dg=null,Mu=null,Ov=null;function Dv(){Ov=Mu=dg=null}function kv(o){var c=ug.current;tn(ug),o._currentValue=c}function Y0(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function Hu(o,c){dg=o,Ov=Mu=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Jr=!0),o.firstContext=null)}function ji(o){var c=o._currentValue;if(Ov!==o)if(o={context:o,memoizedValue:c,next:null},Mu===null){if(dg===null)throw Error(yt(308));Mu=o,dg.dependencies={lanes:0,firstContext:o}}else Mu=Mu.next=o;return c}var oo=null,Ks=!1;function Pv(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PM(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function as(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Zs(o,c){var h=o.updateQueue;h!==null&&(h=h.shared,vU(o)?(o=h.interleaved,o===null?(c.next=c,oo===null?oo=[h]:oo.push(h)):(c.next=o.next,o.next=c),h.interleaved=c):(o=h.pending,o===null?c.next=c:(c.next=o.next,o.next=c),h.pending=c))}function Kf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,vv(o,h)}}function q3(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var m=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var b={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};S===null?m=S=b:S=S.next=b,h=h.next}while(h!==null);S===null?m=S=c:S=S.next=c}else m=S=c;h={baseState:g.baseState,firstBaseUpdate:m,lastBaseUpdate:S,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function lg(o,c,h,g){var m=o.updateQueue;Ks=!1;var S=m.firstBaseUpdate,b=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var F=M,$=F.next;F.next=null,b===null?S=$:b.next=$,b=F;var At=o.alternate;At!==null&&(At=At.updateQueue,M=At.lastBaseUpdate,M!==b&&(M===null?At.firstBaseUpdate=$:M.next=$,At.lastBaseUpdate=F))}if(S!==null){var gt=m.baseState;b=0,At=$=F=null,M=S;do{var ct=M.lane,Bt=M.eventTime;if((g&ct)===ct){At!==null&&(At=At.next={eventTime:Bt,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});t:{var Rt=o,$t=M;switch(ct=c,Bt=h,$t.tag){case 1:if(Rt=$t.payload,typeof Rt=="function"){gt=Rt.call(Bt,gt,ct);break t}gt=Rt;break t;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=$t.payload,ct=typeof Rt=="function"?Rt.call(Bt,gt,ct):Rt,ct==null)break t;gt=pn({},gt,ct);break t;case 2:Ks=!0}}M.callback!==null&&M.lane!==0&&(o.flags|=64,ct=m.effects,ct===null?m.effects=[M]:ct.push(M))}else Bt={eventTime:Bt,lane:ct,tag:M.tag,payload:M.payload,callback:M.callback,next:null},At===null?($=At=Bt,F=gt):At=At.next=Bt,b|=ct;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;ct=M,M=ct.next,ct.next=null,m.lastBaseUpdate=ct,m.shared.pending=null}}while(1);if(At===null&&(F=gt),m.baseState=F,m.firstBaseUpdate=$,m.lastBaseUpdate=At,c=m.shared.interleaved,c!==null){m=c;do b|=m.lane,m=m.next;while(m!==c)}else S===null&&(m.shared.lanes=0);lc|=b,o.lanes=b,o.memoizedState=gt}}function z3(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],m=g.callback;if(m!==null){if(g.callback=null,g=h,typeof m!="function")throw Error(yt(191,m));m.call(g)}}}var LM=new M4.Component().refs;function W0(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:pn({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Ng={isMounted:function(o){return(o=o._reactInternals)?pc(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=Or(),m=ta(o),S=as(g,m);S.payload=c,h!=null&&(S.callback=h),Zs(o,S),c=Fi(o,m,g),c!==null&&Kf(c,o,m)},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=Or(),m=ta(o),S=as(g,m);S.tag=1,S.payload=c,h!=null&&(S.callback=h),Zs(o,S),c=Fi(o,m,g),c!==null&&Kf(c,o,m)},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Or(),g=ta(o),m=as(h,g);m.tag=2,c!=null&&(m.callback=c),Zs(o,m),c=Fi(o,g,h),c!==null&&Kf(c,o,g)}};function X3(o,c,h,g,m,S,b){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,b):c.prototype&&c.prototype.isPureReactComponent?!eA(h,g)||!eA(m,S):!0}function BM(o,c,h){var g=!1,m=ra,S=c.contextType;return typeof S=="object"&&S!==null?S=ji(S):(m=zr(c)?cc:Ir.current,g=c.contextTypes,S=(g=g!=null)?Ju(o,m):ra),c=new c(h,S),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Ng,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=m,o.__reactInternalMemoizedMaskedChildContext=S),c}function Z3(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&Ng.enqueueReplaceState(c,c.state,null)}function J0(o,c,h,g){var m=o.stateNode;m.props=h,m.state=o.memoizedState,m.refs=LM,Pv(o);var S=c.contextType;typeof S=="object"&&S!==null?m.context=ji(S):(S=zr(c)?cc:Ir.current,m.context=Ju(o,S)),m.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(W0(o,c,S,h),m.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(c=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),c!==m.state&&Ng.enqueueReplaceState(m,m.state,null),lg(o,h,m,g),m.state=o.memoizedState),typeof m.componentDidMount=="function"&&(o.flags|=4194308)}var Uu=[],xu=0,Ag=null,hg=0,Mi=[],Ui=0,uc=null,is=1,os="";function nc(o,c){Uu[xu++]=hg,Uu[xu++]=Ag,Ag=o,hg=c}function MM(o,c,h){Mi[Ui++]=is,Mi[Ui++]=os,Mi[Ui++]=uc,uc=o;var g=is;o=os;var m=32-so(g)-1;g&=~(1<<m),h+=1;var S=32-so(c)+m;if(30<S){var b=m-m%5;S=(g&(1<<b)-1).toString(32),g>>=b,m-=b,is=1<<32-so(c)+m|h<<m|g,os=S+o}else is=1<<S|h<<m|g,os=o}function Lv(o){o.return!==null&&(nc(o,1),MM(o,1,0))}function Bv(o){for(;o===Ag;)Ag=Uu[--xu],Uu[xu]=null,hg=Uu[--xu],Uu[xu]=null;for(;o===uc;)uc=Mi[--Ui],Mi[Ui]=null,os=Mi[--Ui],Mi[Ui]=null,is=Mi[--Ui],Mi[Ui]=null}var mi=null,Wr=null,on=!1,io=null;function UM(o,c){var h=xi(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function $3(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,mi=o,Wr=rs(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,mi=o,Wr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=uc!==null?{id:is,overflow:os}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=xi(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,mi=o,Wr=null,!0):!1;default:return!1}}function q0(o){return(o.mode&1)!==0&&(o.flags&128)===0}function z0(o){if(on){var c=Wr;if(c){var h=c;if(!$3(o,c)){if(q0(o))throw Error(yt(418));c=rs(h.nextSibling);var g=mi;c&&$3(o,c)?UM(g,h):(o.flags=o.flags&-4097|2,on=!1,mi=o)}}else{if(q0(o))throw Error(yt(418));o.flags=o.flags&-4097|2,on=!1,mi=o}}}function t4(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;mi=o}function Dl(o){if(o!==mi)return!1;if(!on)return t4(o),on=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!V0(o.type,o.memoizedProps)),c&&(c=Wr)){if(q0(o)){for(o=Wr;o;)o=rs(o.nextSibling);throw Error(yt(418))}for(;c;)UM(o,c),c=rs(c.nextSibling)}if(t4(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(yt(317));t:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Wr=rs(o.nextSibling);break t}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Wr=null}}else Wr=mi?rs(o.stateNode.nextSibling):null;return!0}function qu(){Wr=mi=null,on=!1}function Mv(o){io===null?io=[o]:io.push(o)}function kl(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(yt(309));var g=h.stateNode}if(!g)throw Error(yt(147,o));var m=g,S=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===S?c.ref:(c=function(b){var M=m.refs;M===LM&&(M=m.refs={}),b===null?delete M[S]:M[S]=b},c._stringRef=S,c)}if(typeof o!="string")throw Error(yt(284));if(!h._owner)throw Error(yt(290,o))}return o}function kf(o,c){throw o=Object.prototype.toString.call(c),Error(yt(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function e4(o){var c=o._init;return c(o._payload)}function xM(o){function c(et,W){if(o){var rt=et.deletions;rt===null?(et.deletions=[W],et.flags|=16):rt.push(W)}}function h(et,W){if(!o)return null;for(;W!==null;)c(et,W),W=W.sibling;return null}function g(et,W){for(et=new Map;W!==null;)W.key!==null?et.set(W.key,W):et.set(W.index,W),W=W.sibling;return et}function m(et,W){return et=ia(et,W),et.index=0,et.sibling=null,et}function S(et,W,rt){return et.index=rt,o?(rt=et.alternate,rt!==null?(rt=rt.index,rt<W?(et.flags|=2,W):rt):(et.flags|=2,W)):(et.flags|=1048576,W)}function b(et){return o&&et.alternate===null&&(et.flags|=2),et}function M(et,W,rt,vt){return W===null||W.tag!==6?(W=g0(rt,et.mode,vt),W.return=et,W):(W=m(W,rt),W.return=et,W)}function F(et,W,rt,vt){var Qt=rt.type;return Qt===Ou?At(et,W,rt.props.children,vt,rt.key):W!==null&&(W.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Gs&&e4(Qt)===W.type)?(vt=m(W,rt.props),vt.ref=kl(et,W,rt),vt.return=et,vt):(vt=qf(rt.type,rt.key,rt.props,null,et.mode,vt),vt.ref=kl(et,W,rt),vt.return=et,vt)}function $(et,W,rt,vt){return W===null||W.tag!==4||W.stateNode.containerInfo!==rt.containerInfo||W.stateNode.implementation!==rt.implementation?(W=E0(rt,et.mode,vt),W.return=et,W):(W=m(W,rt.children||[]),W.return=et,W)}function At(et,W,rt,vt,Qt){return W===null||W.tag!==7?(W=ac(rt,et.mode,vt,Qt),W.return=et,W):(W=m(W,rt),W.return=et,W)}function gt(et,W,rt){if(typeof W=="string"&&W!==""||typeof W=="number")return W=g0(""+W,et.mode,rt),W.return=et,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case vf:return rt=qf(W.type,W.key,W.props,null,et.mode,rt),rt.ref=kl(et,null,W),rt.return=et,rt;case Nu:return W=E0(W,et.mode,rt),W.return=et,W;case Gs:var vt=W._init;return gt(et,vt(W._payload),rt)}if(Ml(W)||Rl(W))return W=ac(W,et.mode,rt,null),W.return=et,W;kf(et,W)}return null}function ct(et,W,rt,vt){var Qt=W!==null?W.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return Qt!==null?null:M(et,W,""+rt,vt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case vf:return rt.key===Qt?F(et,W,rt,vt):null;case Nu:return rt.key===Qt?$(et,W,rt,vt):null;case Gs:return Qt=rt._init,ct(et,W,Qt(rt._payload),vt)}if(Ml(rt)||Rl(rt))return Qt!==null?null:At(et,W,rt,vt,null);kf(et,rt)}return null}function Bt(et,W,rt,vt,Qt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return et=et.get(rt)||null,M(W,et,""+vt,Qt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case vf:return et=et.get(vt.key===null?rt:vt.key)||null,F(W,et,vt,Qt);case Nu:return et=et.get(vt.key===null?rt:vt.key)||null,$(W,et,vt,Qt);case Gs:var Yt=vt._init;return Bt(et,W,rt,Yt(vt._payload),Qt)}if(Ml(vt)||Rl(vt))return et=et.get(rt)||null,At(W,et,vt,Qt,null);kf(W,vt)}return null}function Rt(et,W,rt,vt){for(var Qt=null,Yt=null,qt=W,Dt=W=0,en=null;qt!==null&&Dt<rt.length;Dt++){qt.index>Dt?(en=qt,qt=null):en=qt.sibling;var Se=ct(et,qt,rt[Dt],vt);if(Se===null){qt===null&&(qt=en);break}o&&qt&&Se.alternate===null&&c(et,qt),W=S(Se,W,Dt),Yt===null?Qt=Se:Yt.sibling=Se,Yt=Se,qt=en}if(Dt===rt.length)return h(et,qt),on&&nc(et,Dt),Qt;if(qt===null){for(;Dt<rt.length;Dt++)qt=gt(et,rt[Dt],vt),qt!==null&&(W=S(qt,W,Dt),Yt===null?Qt=qt:Yt.sibling=qt,Yt=qt);return on&&nc(et,Dt),Qt}for(qt=g(et,qt);Dt<rt.length;Dt++)en=Bt(qt,et,Dt,rt[Dt],vt),en!==null&&(o&&en.alternate!==null&&qt.delete(en.key===null?Dt:en.key),W=S(en,W,Dt),Yt===null?Qt=en:Yt.sibling=en,Yt=en);return o&&qt.forEach(function(Zr){return c(et,Zr)}),on&&nc(et,Dt),Qt}function $t(et,W,rt,vt){var Qt=Rl(rt);if(typeof Qt!="function")throw Error(yt(150));if(rt=Qt.call(rt),rt==null)throw Error(yt(151));for(var Yt=Qt=null,qt=W,Dt=W=0,en=null,Se=rt.next();qt!==null&&!Se.done;Dt++,Se=rt.next()){qt.index>Dt?(en=qt,qt=null):en=qt.sibling;var Zr=ct(et,qt,Se.value,vt);if(Zr===null){qt===null&&(qt=en);break}o&&qt&&Zr.alternate===null&&c(et,qt),W=S(Zr,W,Dt),Yt===null?Qt=Zr:Yt.sibling=Zr,Yt=Zr,qt=en}if(Se.done)return h(et,qt),on&&nc(et,Dt),Qt;if(qt===null){for(;!Se.done;Dt++,Se=rt.next())Se=gt(et,Se.value,vt),Se!==null&&(W=S(Se,W,Dt),Yt===null?Qt=Se:Yt.sibling=Se,Yt=Se);return on&&nc(et,Dt),Qt}for(qt=g(et,qt);!Se.done;Dt++,Se=rt.next())Se=Bt(qt,et,Dt,Se.value,vt),Se!==null&&(o&&Se.alternate!==null&&qt.delete(Se.key===null?Dt:Se.key),W=S(Se,W,Dt),Yt===null?Qt=Se:Yt.sibling=Se,Yt=Se);return o&&qt.forEach(function($r){return c(et,$r)}),on&&nc(et,Dt),Qt}function Ne(et,W,rt,vt){if(typeof rt=="object"&&rt!==null&&rt.type===Ou&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case vf:t:{for(var Qt=rt.key,Yt=W;Yt!==null;){if(Yt.key===Qt){if(Qt=rt.type,Qt===Ou){if(Yt.tag===7){h(et,Yt.sibling),W=m(Yt,rt.props.children),W.return=et,et=W;break t}}else if(Yt.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Gs&&e4(Qt)===Yt.type){h(et,Yt.sibling),W=m(Yt,rt.props),W.ref=kl(et,Yt,rt),W.return=et,et=W;break t}h(et,Yt);break}else c(et,Yt);Yt=Yt.sibling}rt.type===Ou?(W=ac(rt.props.children,et.mode,vt,rt.key),W.return=et,et=W):(vt=qf(rt.type,rt.key,rt.props,null,et.mode,vt),vt.ref=kl(et,W,rt),vt.return=et,et=vt)}return b(et);case Nu:t:{for(Yt=rt.key;W!==null;){if(W.key===Yt)if(W.tag===4&&W.stateNode.containerInfo===rt.containerInfo&&W.stateNode.implementation===rt.implementation){h(et,W.sibling),W=m(W,rt.children||[]),W.return=et,et=W;break t}else{h(et,W);break}else c(et,W);W=W.sibling}W=E0(rt,et.mode,vt),W.return=et,et=W}return b(et);case Gs:return Yt=rt._init,Ne(et,W,Yt(rt._payload),vt)}if(Ml(rt))return Rt(et,W,rt,vt);if(Rl(rt))return $t(et,W,rt,vt);kf(et,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,W!==null&&W.tag===6?(h(et,W.sibling),W=m(W,rt),W.return=et,et=W):(h(et,W),W=g0(rt,et.mode,vt),W.return=et,et=W),b(et)):h(et,W)}return Ne}var zu=xM(!0),QM=xM(!1),fA={},wo=sa(fA),oA=sa(fA),sA=sa(fA);function oc(o){if(o===fA)throw Error(yt(174));return o}function Uv(o,c){switch(qe(sA,c),qe(oA,o),qe(wo,fA),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:b0(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=b0(c,o)}tn(wo),qe(wo,c)}function Xu(){tn(wo),tn(oA),tn(sA)}function FM(o){oc(sA.current);var c=oc(wo.current),h=b0(c,o.type);c!==h&&(qe(oA,o),qe(wo,h))}function xv(o){oA.current===o&&(tn(wo),tn(oA))}var An=sa(0);function pg(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var l0=[];function Qv(){for(var o=0;o<l0.length;o++)l0[o]._workInProgressVersionPrimary=null;l0.length=0}var Hf=ls.ReactCurrentDispatcher,A0=ls.ReactCurrentBatchConfig,dc=0,hn=null,Kn=null,zn=null,fg=!1,Kl=!1,aA=0,Tit=0;function gr(){throw Error(yt(321))}function Fv(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!ao(o[h],c[h]))return!1;return!0}function jv(o,c,h,g,m,S){if(dc=S,hn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Hf.current=o===null||o.memoizedState===null?Nit:Oit,o=h(g,m),Kl){S=0;do{if(Kl=!1,aA=0,25<=S)throw Error(yt(301));S+=1,zn=Kn=null,c.updateQueue=null,Hf.current=Dit,o=h(g,m)}while(Kl)}if(Hf.current=gg,c=Kn!==null&&Kn.next!==null,dc=0,zn=Kn=hn=null,fg=!1,c)throw Error(yt(300));return o}function Vv(){var o=aA!==0;return aA=0,o}function yo(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?hn.memoizedState=zn=o:zn=zn.next=o,zn}function Vi(){if(Kn===null){var o=hn.alternate;o=o!==null?o.memoizedState:null}else o=Kn.next;var c=zn===null?hn.memoizedState:zn.next;if(c!==null)zn=c,Kn=o;else{if(o===null)throw Error(yt(310));Kn=o,o={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},zn===null?hn.memoizedState=zn=o:zn=zn.next=o}return zn}function cA(o,c){return typeof c=="function"?c(o):c}function h0(o){var c=Vi(),h=c.queue;if(h===null)throw Error(yt(311));h.lastRenderedReducer=o;var g=Kn,m=g.baseQueue,S=h.pending;if(S!==null){if(m!==null){var b=m.next;m.next=S.next,S.next=b}g.baseQueue=m=S,h.pending=null}if(m!==null){S=m.next,g=g.baseState;var M=b=null,F=null,$=S;do{var At=$.lane;if((dc&At)===At)F!==null&&(F=F.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),g=$.hasEagerState?$.eagerState:o(g,$.action);else{var gt={lane:At,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};F===null?(M=F=gt,b=g):F=F.next=gt,hn.lanes|=At,lc|=At}$=$.next}while($!==null&&$!==S);F===null?b=g:F.next=M,ao(g,c.memoizedState)||(Jr=!0),c.memoizedState=g,c.baseState=b,c.baseQueue=F,h.lastRenderedState=g}if(o=h.interleaved,o!==null){m=o;do S=m.lane,hn.lanes|=S,lc|=S,m=m.next;while(m!==o)}else m===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function p0(o){var c=Vi(),h=c.queue;if(h===null)throw Error(yt(311));h.lastRenderedReducer=o;var g=h.dispatch,m=h.pending,S=c.memoizedState;if(m!==null){h.pending=null;var b=m=m.next;do S=o(S,b.action),b=b.next;while(b!==m);ao(S,c.memoizedState)||(Jr=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),h.lastRenderedState=S}return[S,g]}function jM(){}function VM(o,c){var h=hn,g=Vi(),m=c(),S=!ao(g.memoizedState,m);if(S&&(g.memoizedState=m,Jr=!0),g=g.queue,Gv(HM.bind(null,h,g,o),[o]),g.getSnapshot!==c||S||zn!==null&&zn.memoizedState.tag&1){if(h.flags|=2048,uA(9,KM.bind(null,h,g,m,c),void 0,null),Yn===null)throw Error(yt(349));(dc&30)!==0||GM(h,c,m)}return m}function GM(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=hn.updateQueue,c===null?(c={lastEffect:null,stores:null},hn.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function KM(o,c,h,g){c.value=h,c.getSnapshot=g,YM(c)&&Fi(o,1,-1)}function HM(o,c,h){return h(function(){YM(c)&&Fi(o,1,-1)})}function YM(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!ao(o,h)}catch{return!0}}function n4(o){var c=yo();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cA,lastRenderedState:o},c.queue=o,o=o.dispatch=bit.bind(null,hn,o),[c.memoizedState,o]}function uA(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=hn.updateQueue,c===null?(c={lastEffect:null,stores:null},hn.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function WM(){return Vi().memoizedState}function Yf(o,c,h,g){var m=yo();hn.flags|=o,m.memoizedState=uA(1|c,h,void 0,g===void 0?null:g)}function Og(o,c,h,g){var m=Vi();g=g===void 0?null:g;var S=void 0;if(Kn!==null){var b=Kn.memoizedState;if(S=b.destroy,g!==null&&Fv(g,b.deps)){m.memoizedState=uA(c,h,S,g);return}}hn.flags|=o,m.memoizedState=uA(1|c,h,S,g)}function r4(o,c){return Yf(8390656,8,o,c)}function Gv(o,c){return Og(2048,8,o,c)}function JM(o,c){return Og(4,2,o,c)}function qM(o,c){return Og(4,4,o,c)}function zM(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function XM(o,c,h){return h=h!=null?h.concat([o]):null,Og(4,4,zM.bind(null,c,o),h)}function Kv(){}function ZM(o,c){var h=Vi();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Fv(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function $M(o,c){var h=Vi();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Fv(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function tU(o,c,h){return(dc&21)===0?(o.baseState&&(o.baseState=!1,Jr=!0),o.memoizedState=h):(ao(h,c)||(h=sM(),hn.lanes|=h,lc|=h,o.baseState=!0),c)}function Rit(o,c){var h=Qe;Qe=h!==0&&4>h?h:4,o(!0);var g=A0.transition;A0.transition={};try{o(!1),c()}finally{Qe=h,A0.transition=g}}function eU(){return Vi().memoizedState}function wit(o,c,h){var g=ta(o);h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},nU(o)?rU(c,h):(iU(o,c,h),h=Or(),o=Fi(o,g,h),o!==null&&oU(o,c,g))}function bit(o,c,h){var g=ta(o),m={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(nU(o))rU(c,m);else{iU(o,c,m);var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var b=c.lastRenderedState,M=S(b,h);if(m.hasEagerState=!0,m.eagerState=M,ao(M,b))return}catch{}finally{}h=Or(),o=Fi(o,g,h),o!==null&&oU(o,c,g)}}function nU(o){var c=o.alternate;return o===hn||c!==null&&c===hn}function rU(o,c){Kl=fg=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function iU(o,c,h){vU(o)?(o=c.interleaved,o===null?(h.next=h,oo===null?oo=[c]:oo.push(c)):(h.next=o.next,o.next=h),c.interleaved=h):(o=c.pending,o===null?h.next=h:(h.next=o.next,o.next=h),c.pending=h)}function oU(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,vv(o,h)}}var gg={readContext:ji,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},Nit={readContext:ji,useCallback:function(o,c){return yo().memoizedState=[o,c===void 0?null:c],o},useContext:ji,useEffect:r4,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Yf(4194308,4,zM.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Yf(4194308,4,o,c)},useInsertionEffect:function(o,c){return Yf(4,2,o,c)},useMemo:function(o,c){var h=yo();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=yo();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=wit.bind(null,hn,o),[g.memoizedState,o]},useRef:function(o){var c=yo();return o={current:o},c.memoizedState=o},useState:n4,useDebugValue:Kv,useDeferredValue:function(o){return yo().memoizedState=o},useTransition:function(){var o=n4(!1),c=o[0];return o=Rit.bind(null,o[1]),yo().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=hn,m=yo();if(on){if(h===void 0)throw Error(yt(407));h=h()}else{if(h=c(),Yn===null)throw Error(yt(349));(dc&30)!==0||GM(g,c,h)}m.memoizedState=h;var S={value:h,getSnapshot:c};return m.queue=S,r4(HM.bind(null,g,S,o),[o]),g.flags|=2048,uA(9,KM.bind(null,g,S,h,c),void 0,null),h},useId:function(){var o=yo(),c=Yn.identifierPrefix;if(on){var h=os,g=is;h=(g&~(1<<32-so(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=aA++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=Tit++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},Oit={readContext:ji,useCallback:ZM,useContext:ji,useEffect:Gv,useImperativeHandle:XM,useInsertionEffect:JM,useLayoutEffect:qM,useMemo:$M,useReducer:h0,useRef:WM,useState:function(){return h0(cA)},useDebugValue:Kv,useDeferredValue:function(o){var c=Vi();return tU(c,Kn.memoizedState,o)},useTransition:function(){var o=h0(cA)[0],c=Vi().memoizedState;return[o,c]},useMutableSource:jM,useSyncExternalStore:VM,useId:eU,unstable_isNewReconciler:!1},Dit={readContext:ji,useCallback:ZM,useContext:ji,useEffect:Gv,useImperativeHandle:XM,useInsertionEffect:JM,useLayoutEffect:qM,useMemo:$M,useReducer:p0,useRef:WM,useState:function(){return p0(cA)},useDebugValue:Kv,useDeferredValue:function(o){var c=Vi();return Kn===null?c.memoizedState=o:tU(c,Kn.memoizedState,o)},useTransition:function(){var o=p0(cA)[0],c=Vi().memoizedState;return[o,c]},useMutableSource:jM,useSyncExternalStore:VM,useId:eU,unstable_isNewReconciler:!1};function Hv(o,c){try{var h="",g=c;do h+=ort(g),g=g.return;while(g);var m=h}catch(S){m=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:c,stack:m}}function X0(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var kit=typeof WeakMap=="function"?WeakMap:Map;function sU(o,c,h){h=as(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){mg||(mg=!0,sv=g),X0(o,c)},h}function aU(o,c,h){h=as(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var m=c.value;h.payload=function(){return g(m)},h.callback=function(){X0(o,c)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(h.callback=function(){X0(o,c),typeof g!="function"&&($s===null?$s=new Set([this]):$s.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})}),h}function i4(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new kit;var m=new Set;g.set(c,m)}else m=g.get(c),m===void 0&&(m=new Set,g.set(c,m));m.has(h)||(m.add(h),o=Hit.bind(null,o,c,h),c.then(o,o))}function o4(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function s4(o,c,h,g,m){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=as(-1,1),c.tag=2,Zs(h,c))),h.lanes|=1),o):(o.flags|=65536,o.lanes=m,o)}var cU,Z0,uU,dU;cU=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}};Z0=function(){};uU=function(o,c,h,g){var m=o.memoizedProps;if(m!==g){o=c.stateNode,oc(wo.current);var S=null;switch(h){case"input":m=y0(o,m),g=y0(o,g),S=[];break;case"select":m=pn({},m,{value:void 0}),g=pn({},g,{value:void 0}),S=[];break;case"textarea":m=w0(o,m),g=w0(o,g),S=[];break;default:typeof m.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=sg)}N0(h,g);var b;h=null;for($ in m)if(!g.hasOwnProperty($)&&m.hasOwnProperty($)&&m[$]!=null)if($==="style"){var M=m[$];for(b in M)M.hasOwnProperty(b)&&(h||(h={}),h[b]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(Jl.hasOwnProperty($)?S||(S=[]):(S=S||[]).push($,null));for($ in g){var F=g[$];if(M=m!=null?m[$]:void 0,g.hasOwnProperty($)&&F!==M&&(F!=null||M!=null))if($==="style")if(M){for(b in M)!M.hasOwnProperty(b)||F&&F.hasOwnProperty(b)||(h||(h={}),h[b]="");for(b in F)F.hasOwnProperty(b)&&M[b]!==F[b]&&(h||(h={}),h[b]=F[b])}else h||(S||(S=[]),S.push($,h)),h=F;else $==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,M=M?M.__html:void 0,F!=null&&M!==F&&(S=S||[]).push($,F)):$==="children"?typeof F!="string"&&typeof F!="number"||(S=S||[]).push($,""+F):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(Jl.hasOwnProperty($)?(F!=null&&$==="onScroll"&&$e("scroll",o),S||M===F||(S=[])):(S=S||[]).push($,F))}h&&(S=S||[]).push("style",h);var $=S;(c.updateQueue=$)&&(c.flags|=4)}};dU=function(o,c,h,g){h!==g&&(c.flags|=4)};function Pl(o,c){if(!on)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Er(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var m=o.child;m!==null;)h|=m.lanes|m.childLanes,g|=m.subtreeFlags&14680064,g|=m.flags&14680064,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)h|=m.lanes|m.childLanes,g|=m.subtreeFlags,g|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function Pit(o,c,h){var g=c.pendingProps;switch(Bv(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(c),null;case 1:return zr(c.type)&&ag(),Er(c),null;case 3:return g=c.stateNode,Xu(),tn(qr),tn(Ir),Qv(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(Dl(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,io!==null&&(uv(io),io=null))),Z0(o,c),Er(c),null;case 5:xv(c);var m=oc(sA.current);if(h=c.type,o!==null&&c.stateNode!=null)uU(o,c,h,g,m),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(yt(166));return Er(c),null}if(o=oc(wo.current),Dl(c)){g=c.stateNode,h=c.type;var S=c.memoizedProps;switch(g[To]=c,g[iA]=S,o=(c.mode&1)!==0,h){case"dialog":$e("cancel",g),$e("close",g);break;case"iframe":case"object":case"embed":$e("load",g);break;case"video":case"audio":for(m=0;m<xl.length;m++)$e(xl[m],g);break;case"source":$e("error",g);break;case"img":case"image":case"link":$e("error",g),$e("load",g);break;case"details":$e("toggle",g);break;case"input":C3(g,S),$e("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},$e("invalid",g);break;case"textarea":v3(g,S),$e("invalid",g)}N0(h,S),m=null;for(var b in S)if(S.hasOwnProperty(b)){var M=S[b];b==="children"?typeof M=="string"?g.textContent!==M&&(S.suppressHydrationWarning!==!0&&Df(g.textContent,M,o),m=["children",M]):typeof M=="number"&&g.textContent!==""+M&&(S.suppressHydrationWarning!==!0&&Df(g.textContent,M,o),m=["children",""+M]):Jl.hasOwnProperty(b)&&M!=null&&b==="onScroll"&&$e("scroll",g)}switch(h){case"input":Sf(g),_3(g,S,!0);break;case"textarea":Sf(g),S3(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=sg)}g=m,c.updateQueue=g,g!==null&&(c.flags|=4)}else{b=m.nodeType===9?m:m.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=H4(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=b.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=b.createElement(h,{is:g.is}):(o=b.createElement(h),h==="select"&&(b=o,g.multiple?b.multiple=!0:g.size&&(b.size=g.size))):o=b.createElementNS(o,h),o[To]=c,o[iA]=g,cU(o,c,!1,!1),c.stateNode=o;t:{switch(b=O0(h,g),h){case"dialog":$e("cancel",o),$e("close",o),m=g;break;case"iframe":case"object":case"embed":$e("load",o),m=g;break;case"video":case"audio":for(m=0;m<xl.length;m++)$e(xl[m],o);m=g;break;case"source":$e("error",o),m=g;break;case"img":case"image":case"link":$e("error",o),$e("load",o),m=g;break;case"details":$e("toggle",o),m=g;break;case"input":C3(o,g),m=y0(o,g),$e("invalid",o);break;case"option":m=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},m=pn({},g,{value:void 0}),$e("invalid",o);break;case"textarea":v3(o,g),m=w0(o,g),$e("invalid",o);break;default:m=g}N0(h,m),M=m;for(S in M)if(M.hasOwnProperty(S)){var F=M[S];S==="style"?J4(o,F):S==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Y4(o,F)):S==="children"?typeof F=="string"?(h!=="textarea"||F!=="")&&ql(o,F):typeof F=="number"&&ql(o,""+F):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Jl.hasOwnProperty(S)?F!=null&&S==="onScroll"&&$e("scroll",o):F!=null&&gv(o,S,F,b))}switch(h){case"input":Sf(o),_3(o,g,!1);break;case"textarea":Sf(o),S3(o);break;case"option":g.value!=null&&o.setAttribute("value",""+na(g.value));break;case"select":o.multiple=!!g.multiple,S=g.value,S!=null?ju(o,!!g.multiple,S,!1):g.defaultValue!=null&&ju(o,!!g.multiple,g.defaultValue,!0);break;default:typeof m.onClick=="function"&&(o.onclick=sg)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break t;case"img":g=!0;break t;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Er(c),null;case 6:if(o&&c.stateNode!=null)dU(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(yt(166));if(h=oc(sA.current),oc(wo.current),Dl(c)){if(g=c.stateNode,h=c.memoizedProps,g[To]=c,(S=g.nodeValue!==h)&&(o=mi,o!==null))switch(o.tag){case 3:Df(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Df(g.nodeValue,h,(o.mode&1)!==0)}S&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[To]=c,c.stateNode=g}return Er(c),null;case 13:if(tn(An),g=c.memoizedState,on&&Wr!==null&&(c.mode&1)!==0&&(c.flags&128)===0){for(g=Wr;g;)g=rs(g.nextSibling);return qu(),c.flags|=98560,c}if(g!==null&&g.dehydrated!==null){if(g=Dl(c),o===null){if(!g)throw Error(yt(318));if(g=c.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(yt(317));g[To]=c}else qu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;return Er(c),null}return io!==null&&(uv(io),io=null),(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,h=!1,o===null?Dl(c):h=o.memoizedState!==null,g!==h&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(An.current&1)!==0?Hn===0&&(Hn=3):Xv())),c.updateQueue!==null&&(c.flags|=4),Er(c),null);case 4:return Xu(),Z0(o,c),o===null&&nA(c.stateNode.containerInfo),Er(c),null;case 10:return kv(c.type._context),Er(c),null;case 17:return zr(c.type)&&ag(),Er(c),null;case 19:if(tn(An),S=c.memoizedState,S===null)return Er(c),null;if(g=(c.flags&128)!==0,b=S.rendering,b===null)if(g)Pl(S,!1);else{if(Hn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(b=pg(o),b!==null){for(c.flags|=128,Pl(S,!1),g=b.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)S=h,o=g,S.flags&=14680066,b=S.alternate,b===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=b.childLanes,S.lanes=b.lanes,S.child=b.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=b.memoizedProps,S.memoizedState=b.memoizedState,S.updateQueue=b.updateQueue,S.type=b.type,o=b.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return qe(An,An.current&1|2),c.child}o=o.sibling}S.tail!==null&&Rn()>Zu&&(c.flags|=128,g=!0,Pl(S,!1),c.lanes=4194304)}else{if(!g)if(o=pg(b),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Pl(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!on)return Er(c),null}else 2*Rn()-S.renderingStartTime>Zu&&h!==1073741824&&(c.flags|=128,g=!0,Pl(S,!1),c.lanes=4194304);S.isBackwards?(b.sibling=c.child,c.child=b):(h=S.last,h!==null?h.sibling=b:c.child=b,S.last=b)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=Rn(),c.sibling=null,h=An.current,qe(An,g?h&1|2:h&1),c):(Er(c),null);case 22:case 23:return zv(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Ei&1073741824)!==0&&(Er(c),c.subtreeFlags&6&&(c.flags|=8192)):Er(c),null;case 24:return null;case 25:return null}throw Error(yt(156,c.tag))}var Lit=ls.ReactCurrentOwner,Jr=!1;function Nr(o,c,h,g){c.child=o===null?QM(c,null,h,g):zu(c,o.child,h,g)}function a4(o,c,h,g,m){h=h.render;var S=c.ref;return Hu(c,m),g=jv(o,c,h,g,S,m),h=Vv(),o!==null&&!Jr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~m,ds(o,c,m)):(on&&h&&Lv(c),c.flags|=1,Nr(o,c,g,m),c.child)}function c4(o,c,h,g,m){if(o===null){var S=h.type;return typeof S=="function"&&!Zv(S)&&S.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=S,lU(o,c,S,g,m)):(o=qf(h.type,null,g,c,c.mode,m),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,(o.lanes&m)===0){var b=S.memoizedProps;if(h=h.compare,h=h!==null?h:eA,h(b,g)&&o.ref===c.ref)return ds(o,c,m)}return c.flags|=1,o=ia(S,g),o.ref=c.ref,o.return=c,c.child=o}function lU(o,c,h,g,m){if(o!==null){var S=o.memoizedProps;if(eA(S,g)&&o.ref===c.ref)if(Jr=!1,c.pendingProps=g=S,(o.lanes&m)!==0)(o.flags&131072)!==0&&(Jr=!0);else return c.lanes=o.lanes,ds(o,c,m)}return $0(o,c,h,g,m)}function AU(o,c,h){var g=c.pendingProps,m=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Fu,Ei),Ei|=h;else if((h&1073741824)!==0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:h,qe(Fu,Ei),Ei|=g;else return o=S!==null?S.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,qe(Fu,Ei),Ei|=o,null;else S!==null?(g=S.baseLanes|h,c.memoizedState=null):g=h,qe(Fu,Ei),Ei|=g;return Nr(o,c,m,h),c.child}function hU(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function $0(o,c,h,g,m){var S=zr(h)?cc:Ir.current;return S=Ju(c,S),Hu(c,m),h=jv(o,c,h,g,S,m),g=Vv(),o!==null&&!Jr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~m,ds(o,c,m)):(on&&g&&Lv(c),c.flags|=1,Nr(o,c,h,m),c.child)}function u4(o,c,h,g,m){if(zr(h)){var S=!0;cg(c)}else S=!1;if(Hu(c,m),c.stateNode===null)o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2),BM(c,h,g),J0(c,h,g,m),g=!0;else if(o===null){var b=c.stateNode,M=c.memoizedProps;b.props=M;var F=b.context,$=h.contextType;typeof $=="object"&&$!==null?$=ji($):($=zr(h)?cc:Ir.current,$=Ju(c,$));var At=h.getDerivedStateFromProps,gt=typeof At=="function"||typeof b.getSnapshotBeforeUpdate=="function";gt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==g||F!==$)&&Z3(c,b,g,$),Ks=!1;var ct=c.memoizedState;b.state=ct,lg(c,g,b,m),F=c.memoizedState,M!==g||ct!==F||qr.current||Ks?(typeof At=="function"&&(W0(c,h,At,g),F=c.memoizedState),(M=Ks||X3(c,h,M,g,ct,F,$))?(gt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(c.flags|=4194308)):(typeof b.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=F),b.props=g,b.state=F,b.context=$,g=M):(typeof b.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{b=c.stateNode,PM(o,c),M=c.memoizedProps,$=c.type===c.elementType?M:no(c.type,M),b.props=$,gt=c.pendingProps,ct=b.context,F=h.contextType,typeof F=="object"&&F!==null?F=ji(F):(F=zr(h)?cc:Ir.current,F=Ju(c,F));var Bt=h.getDerivedStateFromProps;(At=typeof Bt=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==gt||ct!==F)&&Z3(c,b,g,F),Ks=!1,ct=c.memoizedState,b.state=ct,lg(c,g,b,m);var Rt=c.memoizedState;M!==gt||ct!==Rt||qr.current||Ks?(typeof Bt=="function"&&(W0(c,h,Bt,g),Rt=c.memoizedState),($=Ks||X3(c,h,$,g,ct,Rt,F)||!1)?(At||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,Rt,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,Rt,F)),typeof b.componentDidUpdate=="function"&&(c.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===o.memoizedProps&&ct===o.memoizedState||(c.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ct===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Rt),b.props=g,b.state=Rt,b.context=F,g=$):(typeof b.componentDidUpdate!="function"||M===o.memoizedProps&&ct===o.memoizedState||(c.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ct===o.memoizedState||(c.flags|=1024),g=!1)}return tv(o,c,h,g,S,m)}function tv(o,c,h,g,m,S){hU(o,c);var b=(c.flags&128)!==0;if(!g&&!b)return m&&J3(c,h,!1),ds(o,c,S);g=c.stateNode,Lit.current=c;var M=b&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&b?(c.child=zu(c,o.child,null,S),c.child=zu(c,null,M,S)):Nr(o,c,M,S),c.memoizedState=g.state,m&&J3(c,h,!0),c.child}function pU(o){var c=o.stateNode;c.pendingContext?W3(o,c.pendingContext,c.pendingContext!==c.context):c.context&&W3(o,c.context,!1),Uv(o,c.containerInfo)}function d4(o,c,h,g,m){return qu(),Mv(m),c.flags|=256,Nr(o,c,h,g),c.child}var Pf={dehydrated:null,treeContext:null,retryLane:0};function Lf(o){return{baseLanes:o,cachePool:null,transitions:null}}function l4(o,c){return{baseLanes:o.baseLanes|c,cachePool:null,transitions:o.transitions}}function fU(o,c,h){var g=c.pendingProps,m=An.current,S=!1,b=(c.flags&128)!==0,M;if((M=b)||(M=o!==null&&o.memoizedState===null?!1:(m&2)!==0),M?(S=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(m|=1),qe(An,m&1),o===null)return z0(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(m=g.children,o=g.fallback,S?(g=c.mode,S=c.child,m={mode:"hidden",children:m},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=m):S=_g(m,g,0,null),o=ac(o,g,h,null),S.return=c,o.return=c,S.sibling=o,c.child=S,c.child.memoizedState=Lf(h),c.memoizedState=Pf,o):ev(c,m));if(m=o.memoizedState,m!==null){if(M=m.dehydrated,M!==null){if(b)return c.flags&256?(c.flags&=-257,Bf(o,c,h,Error(yt(422)))):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(S=g.fallback,m=c.mode,g=_g({mode:"visible",children:g.children},m,0,null),S=ac(S,m,h,null),S.flags|=2,g.return=c,S.return=c,g.sibling=S,c.child=g,(c.mode&1)!==0&&zu(c,o.child,null,h),c.child.memoizedState=Lf(h),c.memoizedState=Pf,S);if((c.mode&1)===0)c=Bf(o,c,h,null);else if(M.data==="$!")c=Bf(o,c,h,Error(yt(419)));else if(g=(h&o.childLanes)!==0,Jr||g){if(g=Yn,g!==null){switch(h&-h){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}g=(S&(g.suspendedLanes|h))!==0?0:S,g!==0&&g!==m.retryLane&&(m.retryLane=g,Fi(o,g,-1))}Xv(),c=Bf(o,c,h,Error(yt(421)))}else M.data==="$?"?(c.flags|=128,c.child=o.child,c=Yit.bind(null,o),M._reactRetry=c,c=null):(h=m.treeContext,Wr=rs(M.nextSibling),mi=c,on=!0,io=null,h!==null&&(Mi[Ui++]=is,Mi[Ui++]=os,Mi[Ui++]=uc,is=h.id,os=h.overflow,uc=c),c=ev(c,c.pendingProps.children),c.flags|=4096);return c}return S?(g=h4(o,c,g.children,g.fallback,h),S=c.child,m=o.child.memoizedState,S.memoizedState=m===null?Lf(h):l4(m,h),S.childLanes=o.childLanes&~h,c.memoizedState=Pf,g):(h=A4(o,c,g.children,h),c.memoizedState=null,h)}return S?(g=h4(o,c,g.children,g.fallback,h),S=c.child,m=o.child.memoizedState,S.memoizedState=m===null?Lf(h):l4(m,h),S.childLanes=o.childLanes&~h,c.memoizedState=Pf,g):(h=A4(o,c,g.children,h),c.memoizedState=null,h)}function ev(o,c){return c=_g({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function A4(o,c,h,g){var m=o.child;return o=m.sibling,h=ia(m,{mode:"visible",children:h}),(c.mode&1)===0&&(h.lanes=g),h.return=c,h.sibling=null,o!==null&&(g=c.deletions,g===null?(c.deletions=[o],c.flags|=16):g.push(o)),c.child=h}function h4(o,c,h,g,m){var S=c.mode;o=o.child;var b=o.sibling,M={mode:"hidden",children:h};return(S&1)===0&&c.child!==o?(h=c.child,h.childLanes=0,h.pendingProps=M,c.deletions=null):(h=ia(o,M),h.subtreeFlags=o.subtreeFlags&14680064),b!==null?g=ia(b,g):(g=ac(g,S,m,null),g.flags|=2),g.return=c,h.return=c,h.sibling=g,c.child=h,g}function Bf(o,c,h,g){return g!==null&&Mv(g),zu(c,o.child,null,h),o=ev(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function p4(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Y0(o.return,c,h)}function f0(o,c,h,g,m){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:m}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=h,S.tailMode=m)}function gU(o,c,h){var g=c.pendingProps,m=g.revealOrder,S=g.tail;if(Nr(o,c,g.children,h),g=An.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&p4(o,h,c);else if(o.tag===19)p4(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(qe(An,g),(c.mode&1)===0)c.memoizedState=null;else switch(m){case"forwards":for(h=c.child,m=null;h!==null;)o=h.alternate,o!==null&&pg(o)===null&&(m=h),h=h.sibling;h=m,h===null?(m=c.child,c.child=null):(m=h.sibling,h.sibling=null),f0(c,!1,m,h,S);break;case"backwards":for(h=null,m=c.child,c.child=null;m!==null;){if(o=m.alternate,o!==null&&pg(o)===null){c.child=m;break}o=m.sibling,m.sibling=h,h=m,m=o}f0(c,!0,h,null,S);break;case"together":f0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ds(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),lc|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(yt(153));if(c.child!==null){for(o=c.child,h=ia(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=ia(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function Bit(o,c,h){switch(c.tag){case 3:pU(c),qu();break;case 5:FM(c);break;case 1:zr(c.type)&&cg(c);break;case 4:Uv(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,m=c.memoizedProps.value;qe(ug,g._currentValue),g._currentValue=m;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(qe(An,An.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?fU(o,c,h):(qe(An,An.current&1),o=ds(o,c,h),o!==null?o.sibling:null);qe(An,An.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return gU(o,c,h);c.flags|=128}if(m=c.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),qe(An,An.current),g)break;return null;case 22:case 23:return c.lanes=0,AU(o,c,h)}return ds(o,c,h)}function Mit(o,c){switch(Bv(c),c.tag){case 1:return zr(c.type)&&ag(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Xu(),tn(qr),tn(Ir),Qv(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return xv(c),null;case 13:if(tn(An),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(yt(340));qu()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return tn(An),null;case 4:return Xu(),null;case 10:return kv(c.type._context),null;case 22:case 23:return zv(),null;case 24:return null;default:return null}}var Mf=!1,mr=!1,Uit=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function Qu(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){vn(o,c,g)}else h.current=null}function nv(o,c,h){try{h()}catch(g){vn(o,c,g)}}var f4=!1;function xit(o,c){if(F0=rg,o=vM(),Nv(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else t:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var m=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break t}var b=0,M=-1,F=-1,$=0,At=0,gt=o,ct=null;e:for(;;){for(var Bt;gt!==h||m!==0&&gt.nodeType!==3||(M=b+m),gt!==S||g!==0&&gt.nodeType!==3||(F=b+g),gt.nodeType===3&&(b+=gt.nodeValue.length),(Bt=gt.firstChild)!==null;)ct=gt,gt=Bt;for(;;){if(gt===o)break e;if(ct===h&&++$===m&&(M=b),ct===S&&++At===g&&(F=b),(Bt=gt.nextSibling)!==null)break;gt=ct,ct=gt.parentNode}gt=Bt}h=M===-1||F===-1?null:{start:M,end:F}}else h=null}h=h||{start:0,end:0}}else h=null;for(j0={focusedElem:o,selectionRange:h},rg=!1,Vt=c;Vt!==null;)if(c=Vt,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Vt=o;else for(;Vt!==null;){c=Vt;try{var Rt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Rt!==null){var $t=Rt.memoizedProps,Ne=Rt.memoizedState,et=c.stateNode,W=et.getSnapshotBeforeUpdate(c.elementType===c.type?$t:no(c.type,$t),Ne);et.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var rt=c.stateNode.containerInfo;if(rt.nodeType===1)rt.textContent="";else if(rt.nodeType===9){var vt=rt.body;vt!=null&&(vt.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(yt(163))}}catch(Qt){vn(c,c.return,Qt)}if(o=c.sibling,o!==null){o.return=c.return,Vt=o;break}Vt=c.return}return Rt=f4,f4=!1,Rt}function Hl(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var m=g=g.next;do{if((m.tag&o)===o){var S=m.destroy;m.destroy=void 0,S!==void 0&&nv(c,h,S)}m=m.next}while(m!==g)}}function Dg(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function rv(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function EU(o){var c=o.alternate;c!==null&&(o.alternate=null,EU(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[To],delete c[iA],delete c[K0],delete c[_it],delete c[vit])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function mU(o){return o.tag===5||o.tag===3||o.tag===4}function g4(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||mU(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function iv(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=sg));else if(g!==4&&(o=o.child,o!==null))for(iv(o,c,h),o=o.sibling;o!==null;)iv(o,c,h),o=o.sibling}function ov(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(ov(o,c,h),o=o.sibling;o!==null;)ov(o,c,h),o=o.sibling}var sr=null,ro=!1;function Vs(o,c,h){for(h=h.child;h!==null;)IU(o,c,h),h=h.sibling}function IU(o,c,h){if(Ro&&typeof Ro.onCommitFiberUnmount=="function")try{Ro.onCommitFiberUnmount(Sg,h)}catch{}switch(h.tag){case 5:mr||Qu(h,c);case 6:var g=sr,m=ro;sr=null,Vs(o,c,h),sr=g,ro=m,sr!==null&&(ro?(o=sr,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):sr.removeChild(h.stateNode));break;case 18:sr!==null&&(ro?(o=sr,h=h.stateNode,o.nodeType===8?u0(o.parentNode,h):o.nodeType===1&&u0(o,h),$l(o)):u0(sr,h.stateNode));break;case 4:g=sr,m=ro,sr=h.stateNode.containerInfo,ro=!0,Vs(o,c,h),sr=g,ro=m;break;case 0:case 11:case 14:case 15:if(!mr&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){m=g=g.next;do{var S=m,b=S.destroy;S=S.tag,b!==void 0&&((S&2)!==0||(S&4)!==0)&&nv(h,c,b),m=m.next}while(m!==g)}Vs(o,c,h);break;case 1:if(!mr&&(Qu(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(M){vn(h,c,M)}Vs(o,c,h);break;case 21:Vs(o,c,h);break;case 22:h.mode&1?(mr=(g=mr)||h.memoizedState!==null,Vs(o,c,h),mr=g):Vs(o,c,h);break;default:Vs(o,c,h)}}function E4(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new Uit),c.forEach(function(g){var m=Wit.bind(null,o,g);h.has(g)||(h.add(g),g.then(m,m))})}}function eo(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var m=h[g];try{var S=o,b=c,M=b;t:for(;M!==null;){switch(M.tag){case 5:sr=M.stateNode,ro=!1;break t;case 3:sr=M.stateNode.containerInfo,ro=!0;break t;case 4:sr=M.stateNode.containerInfo,ro=!0;break t}M=M.return}if(sr===null)throw Error(yt(160));IU(S,b,m),sr=null,ro=!1;var F=m.alternate;F!==null&&(F.return=null),m.return=null}catch($){vn(m,c,$)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)CU(c,o),c=c.sibling}function CU(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(eo(c,o),So(o),g&4){try{Hl(3,o,o.return),Dg(3,o)}catch(Rt){vn(o,o.return,Rt)}try{Hl(5,o,o.return)}catch(Rt){vn(o,o.return,Rt)}}break;case 1:eo(c,o),So(o),g&512&&h!==null&&Qu(h,h.return);break;case 5:if(eo(c,o),So(o),g&512&&h!==null&&Qu(h,h.return),o.flags&32){var m=o.stateNode;try{ql(m,"")}catch(Rt){vn(o,o.return,Rt)}}if(g&4&&(m=o.stateNode,m!=null)){var S=o.memoizedProps,b=h!==null?h.memoizedProps:S,M=o.type,F=o.updateQueue;if(o.updateQueue=null,F!==null)try{M==="input"&&S.type==="radio"&&S.name!=null&&G4(m,S),O0(M,b);var $=O0(M,S);for(b=0;b<F.length;b+=2){var At=F[b],gt=F[b+1];At==="style"?J4(m,gt):At==="dangerouslySetInnerHTML"?Y4(m,gt):At==="children"?ql(m,gt):gv(m,At,gt,$)}switch(M){case"input":T0(m,S);break;case"textarea":K4(m,S);break;case"select":var ct=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!S.multiple;var Bt=S.value;Bt!=null?ju(m,!!S.multiple,Bt,!1):ct!==!!S.multiple&&(S.defaultValue!=null?ju(m,!!S.multiple,S.defaultValue,!0):ju(m,!!S.multiple,S.multiple?[]:"",!1))}m[iA]=S}catch(Rt){vn(o,o.return,Rt)}}break;case 6:if(eo(c,o),So(o),g&4){if(o.stateNode===null)throw Error(yt(162));$=o.stateNode,At=o.memoizedProps;try{$.nodeValue=At}catch(Rt){vn(o,o.return,Rt)}}break;case 3:if(eo(c,o),So(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{$l(c.containerInfo)}catch(Rt){vn(o,o.return,Rt)}break;case 4:eo(c,o),So(o);break;case 13:eo(c,o),So(o),$=o.child,$.flags&8192&&$.memoizedState!==null&&($.alternate===null||$.alternate.memoizedState===null)&&(Jv=Rn()),g&4&&E4(o);break;case 22:if($=h!==null&&h.memoizedState!==null,o.mode&1?(mr=(At=mr)||$,eo(c,o),mr=At):eo(c,o),So(o),g&8192){At=o.memoizedState!==null;t:for(gt=null,ct=o;;){if(ct.tag===5){if(gt===null){gt=ct;try{m=ct.stateNode,At?(S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(M=ct.stateNode,F=ct.memoizedProps.style,b=F!=null&&F.hasOwnProperty("display")?F.display:null,M.style.display=W4("display",b))}catch(Rt){vn(o,o.return,Rt)}}}else if(ct.tag===6){if(gt===null)try{ct.stateNode.nodeValue=At?"":ct.memoizedProps}catch(Rt){vn(o,o.return,Rt)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===o)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===o)break t;for(;ct.sibling===null;){if(ct.return===null||ct.return===o)break t;gt===ct&&(gt=null),ct=ct.return}gt===ct&&(gt=null),ct.sibling.return=ct.return,ct=ct.sibling}if(At&&!$&&(o.mode&1)!==0)for(Vt=o,o=o.child;o!==null;){for($=Vt=o;Vt!==null;){switch(At=Vt,gt=At.child,At.tag){case 0:case 11:case 14:case 15:Hl(4,At,At.return);break;case 1:if(Qu(At,At.return),S=At.stateNode,typeof S.componentWillUnmount=="function"){ct=At,Bt=At.return;try{m=ct,S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(Rt){vn(ct,Bt,Rt)}}break;case 5:Qu(At,At.return);break;case 22:if(At.memoizedState!==null){I4($);continue}}gt!==null?(gt.return=At,Vt=gt):I4($)}o=o.sibling}}break;case 19:eo(c,o),So(o),g&4&&E4(o);break;case 21:break;default:eo(c,o),So(o)}}function So(o){var c=o.flags;if(c&2){try{t:{for(var h=o.return;h!==null;){if(mU(h)){var g=h;break t}h=h.return}throw Error(yt(160))}switch(g.tag){case 5:var m=g.stateNode;g.flags&32&&(ql(m,""),g.flags&=-33);var S=g4(o);ov(o,S,m);break;case 3:case 4:var b=g.stateNode.containerInfo,M=g4(o);iv(o,M,b);break;default:throw Error(yt(161))}}catch(F){vn(o,o.return,F)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Qit(o,c,h){Vt=o,_U(o)}function _U(o,c,h){for(var g=(o.mode&1)!==0;Vt!==null;){var m=Vt,S=m.child;if(m.tag===22&&g){var b=m.memoizedState!==null||Mf;if(!b){var M=m.alternate,F=M!==null&&M.memoizedState!==null||mr;M=Mf;var $=mr;if(Mf=b,(mr=F)&&!$)for(Vt=m;Vt!==null;)b=Vt,F=b.child,b.tag===22&&b.memoizedState!==null?C4(m):F!==null?(F.return=b,Vt=F):C4(m);for(;S!==null;)Vt=S,_U(S),S=S.sibling;Vt=m,Mf=M,mr=$}m4(o)}else(m.subtreeFlags&8772)!==0&&S!==null?(S.return=m,Vt=S):m4(o)}}function m4(o){for(;Vt!==null;){var c=Vt;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:mr||Dg(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!mr)if(h===null)g.componentDidMount();else{var m=c.elementType===c.type?h.memoizedProps:no(c.type,h.memoizedProps);g.componentDidUpdate(m,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=c.updateQueue;S!==null&&z3(c,S,g);break;case 3:var b=c.updateQueue;if(b!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}z3(c,b,h)}break;case 5:var M=c.stateNode;if(h===null&&c.flags&4){h=M;var F=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&h.focus();break;case"img":F.src&&(h.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var $=c.alternate;if($!==null){var At=$.memoizedState;if(At!==null){var gt=At.dehydrated;gt!==null&&$l(gt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(yt(163))}mr||c.flags&512&&rv(c)}catch(ct){vn(c,c.return,ct)}}if(c===o){Vt=null;break}if(h=c.sibling,h!==null){h.return=c.return,Vt=h;break}Vt=c.return}}function I4(o){for(;Vt!==null;){var c=Vt;if(c===o){Vt=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Vt=h;break}Vt=c.return}}function C4(o){for(;Vt!==null;){var c=Vt;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Dg(4,c)}catch(F){vn(c,h,F)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var m=c.return;try{g.componentDidMount()}catch(F){vn(c,m,F)}}var S=c.return;try{rv(c)}catch(F){vn(c,S,F)}break;case 5:var b=c.return;try{rv(c)}catch(F){vn(c,b,F)}}}catch(F){vn(c,c.return,F)}if(c===o){Vt=null;break}var M=c.sibling;if(M!==null){M.return=c.return,Vt=M;break}Vt=c.return}}var Fit=Math.ceil,Eg=ls.ReactCurrentDispatcher,Yv=ls.ReactCurrentOwner,Qi=ls.ReactCurrentBatchConfig,De=0,Yn=null,Mn=null,ar=0,Ei=0,Fu=sa(0),Hn=0,dA=null,lc=0,kg=0,Wv=0,Yl=null,Yr=null,Jv=0,Zu=1/0,es=null,mg=!1,sv=null,$s=null,Uf=!1,Js=null,Ig=0,Wl=0,av=null,Wf=-1,Jf=0;function Or(){return(De&6)!==0?Rn():Wf!==-1?Wf:Wf=Rn()}function ta(o){return(o.mode&1)===0?1:(De&2)!==0&&ar!==0?ar&-ar:yit.transition!==null?(Jf===0&&(Jf=sM()),Jf):(o=Qe,o!==0||(o=window.event,o=o===void 0?16:hM(o.type)),o)}function Fi(o,c,h){if(50<Wl)throw Wl=0,av=null,Error(yt(185));var g=Pg(o,c);return g===null?null:(AA(g,c,h),((De&2)===0||g!==Yn)&&(g===Yn&&((De&2)===0&&(kg|=c),Hn===4&&Ys(g,ar)),Xr(g,h),c===1&&De===0&&(o.mode&1)===0&&(Zu=Rn()+500,bg&&aa())),g)}function Pg(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}function vU(o){return(Yn!==null||oo!==null)&&(o.mode&1)!==0&&(De&2)===0}function Xr(o,c){var h=o.callbackNode;yrt(o,c);var g=ng(o,o===Yn?ar:0);if(g===0)h!==null&&R3(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&R3(h),c===1)o.tag===0?Sit(_4.bind(null,o)):kM(_4.bind(null,o)),Iit(function(){De===0&&aa()}),h=null;else{switch(aM(g)){case 1:h=_v;break;case 4:h=iM;break;case 16:h=eg;break;case 536870912:h=oM;break;default:h=eg}h=OU(h,SU.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function SU(o,c){if(Wf=-1,Jf=0,(De&6)!==0)throw Error(yt(327));var h=o.callbackNode;if(Yu()&&o.callbackNode!==h)return null;var g=ng(o,o===Yn?ar:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=Cg(o,g);else{c=g;var m=De;De|=2;var S=TU();(Yn!==o||ar!==c)&&(es=null,Zu=Rn()+500,sc(o,c));do try{Git();break}catch(M){yU(o,M)}while(1);Dv(),Eg.current=S,De=m,Mn!==null?c=0:(Yn=null,ar=0,c=Hn)}if(c!==0){if(c===2&&(m=B0(o),m!==0&&(g=m,c=cv(o,m))),c===1)throw h=dA,sc(o,0),Ys(o,g),Xr(o,Rn()),h;if(c===6)Ys(o,g);else{if(m=o.current.alternate,(g&30)===0&&!jit(m)&&(c=Cg(o,g),c===2&&(S=B0(o),S!==0&&(g=S,c=cv(o,S))),c===1))throw h=dA,sc(o,0),Ys(o,g),Xr(o,Rn()),h;switch(o.finishedWork=m,o.finishedLanes=g,c){case 0:case 1:throw Error(yt(345));case 2:rc(o,Yr,es);break;case 3:if(Ys(o,g),(g&130023424)===g&&(c=Jv+500-Rn(),10<c)){if(ng(o,0)!==0)break;if(m=o.suspendedLanes,(m&g)!==g){Or(),o.pingedLanes|=o.suspendedLanes&m;break}o.timeoutHandle=G0(rc.bind(null,o,Yr,es),c);break}rc(o,Yr,es);break;case 4:if(Ys(o,g),(g&4194240)===g)break;for(c=o.eventTimes,m=-1;0<g;){var b=31-so(g);S=1<<b,b=c[b],b>m&&(m=b),g&=~S}if(g=m,g=Rn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Fit(g/1960))-g,10<g){o.timeoutHandle=G0(rc.bind(null,o,Yr,es),g);break}rc(o,Yr,es);break;case 5:rc(o,Yr,es);break;default:throw Error(yt(329))}}}return Xr(o,Rn()),o.callbackNode===h?SU.bind(null,o):null}function cv(o,c){var h=Yl;return o.current.memoizedState.isDehydrated&&(sc(o,c).flags|=256),o=Cg(o,c),o!==2&&(c=Yr,Yr=h,c!==null&&uv(c)),o}function uv(o){Yr===null?Yr=o:Yr.push.apply(Yr,o)}function jit(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var m=h[g],S=m.getSnapshot;m=m.value;try{if(!ao(S(),m))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ys(o,c){for(c&=~Wv,c&=~kg,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-so(c),g=1<<h;o[h]=-1,c&=~g}}function _4(o){if((De&6)!==0)throw Error(yt(327));Yu();var c=ng(o,0);if((c&1)===0)return Xr(o,Rn()),null;var h=Cg(o,c);if(o.tag!==0&&h===2){var g=B0(o);g!==0&&(c=g,h=cv(o,g))}if(h===1)throw h=dA,sc(o,0),Ys(o,c),Xr(o,Rn()),h;if(h===6)throw Error(yt(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,rc(o,Yr,es),Xr(o,Rn()),null}function qv(o,c){var h=De;De|=1;try{return o(c)}finally{De=h,De===0&&(Zu=Rn()+500,bg&&aa())}}function Ac(o){Js!==null&&Js.tag===0&&(De&6)===0&&Yu();var c=De;De|=1;var h=Qi.transition,g=Qe;try{if(Qi.transition=null,Qe=1,o)return o()}finally{Qe=g,Qi.transition=h,De=c,(De&6)===0&&aa()}}function zv(){Ei=Fu.current,tn(Fu)}function sc(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,mit(h)),Mn!==null)for(h=Mn.return;h!==null;){var g=h;switch(Bv(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&ag();break;case 3:Xu(),tn(qr),tn(Ir),Qv();break;case 5:xv(g);break;case 4:Xu();break;case 13:tn(An);break;case 19:tn(An);break;case 10:kv(g.type._context);break;case 22:case 23:zv()}h=h.return}if(Yn=o,Mn=o=ia(o.current,null),ar=Ei=c,Hn=0,dA=null,Wv=kg=lc=0,Yr=Yl=null,oo!==null){for(c=0;c<oo.length;c++)if(h=oo[c],g=h.interleaved,g!==null){h.interleaved=null;var m=g.next,S=h.pending;if(S!==null){var b=S.next;S.next=m,g.next=b}h.pending=g}oo=null}return o}function yU(o,c){do{var h=Mn;try{if(Dv(),Hf.current=gg,fg){for(var g=hn.memoizedState;g!==null;){var m=g.queue;m!==null&&(m.pending=null),g=g.next}fg=!1}if(dc=0,zn=Kn=hn=null,Kl=!1,aA=0,Yv.current=null,h===null||h.return===null){Hn=1,dA=c,Mn=null;break}t:{var S=o,b=h.return,M=h,F=c;if(c=ar,M.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var $=F,At=M,gt=At.tag;if((At.mode&1)===0&&(gt===0||gt===11||gt===15)){var ct=At.alternate;ct?(At.updateQueue=ct.updateQueue,At.memoizedState=ct.memoizedState,At.lanes=ct.lanes):(At.updateQueue=null,At.memoizedState=null)}var Bt=o4(b);if(Bt!==null){Bt.flags&=-257,s4(Bt,b,M,S,c),Bt.mode&1&&i4(S,$,c),c=Bt,F=$;var Rt=c.updateQueue;if(Rt===null){var $t=new Set;$t.add(F),c.updateQueue=$t}else Rt.add(F);break t}else{if((c&1)===0){i4(S,$,c),Xv();break t}F=Error(yt(426))}}else if(on&&M.mode&1){var Ne=o4(b);if(Ne!==null){(Ne.flags&65536)===0&&(Ne.flags|=256),s4(Ne,b,M,S,c),Mv(F);break t}}S=F,Hn!==4&&(Hn=2),Yl===null?Yl=[S]:Yl.push(S),F=Hv(F,M),M=b;do{switch(M.tag){case 3:M.flags|=65536,c&=-c,M.lanes|=c;var et=sU(M,F,c);q3(M,et);break t;case 1:S=F;var W=M.type,rt=M.stateNode;if((M.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&($s===null||!$s.has(rt)))){M.flags|=65536,c&=-c,M.lanes|=c;var vt=aU(M,S,c);q3(M,vt);break t}}M=M.return}while(M!==null)}wU(h)}catch(Qt){c=Qt,Mn===h&&h!==null&&(Mn=h=h.return);continue}break}while(1)}function TU(){var o=Eg.current;return Eg.current=gg,o===null?gg:o}function Xv(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),Yn===null||(lc&268435455)===0&&(kg&268435455)===0||Ys(Yn,ar)}function Cg(o,c){var h=De;De|=2;var g=TU();(Yn!==o||ar!==c)&&(es=null,sc(o,c));do try{Vit();break}catch(m){yU(o,m)}while(1);if(Dv(),De=h,Eg.current=g,Mn!==null)throw Error(yt(261));return Yn=null,ar=0,Hn}function Vit(){for(;Mn!==null;)RU(Mn)}function Git(){for(;Mn!==null&&!frt();)RU(Mn)}function RU(o){var c=NU(o.alternate,o,Ei);o.memoizedProps=o.pendingProps,c===null?wU(o):Mn=c,Yv.current=null}function wU(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=Pit(h,c,Ei),h!==null){Mn=h;return}}else{if(h=Mit(h,c),h!==null){h.flags&=32767,Mn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Hn=6,Mn=null;return}}if(c=c.sibling,c!==null){Mn=c;return}Mn=c=o}while(c!==null);Hn===0&&(Hn=5)}function rc(o,c,h){var g=Qe,m=Qi.transition;try{Qi.transition=null,Qe=1,Kit(o,c,h,g)}finally{Qi.transition=m,Qe=g}return null}function Kit(o,c,h,g){do Yu();while(Js!==null);if((De&6)!==0)throw Error(yt(327));h=o.finishedWork;var m=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(yt(177));o.callbackNode=null,o.callbackPriority=0;var S=h.lanes|h.childLanes;if(Trt(o,S),o===Yn&&(Mn=Yn=null,ar=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Uf||(Uf=!0,OU(eg,function(){return Yu(),null})),S=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||S){S=Qi.transition,Qi.transition=null;var b=Qe;Qe=1;var M=De;De|=4,Yv.current=null,xit(o,h),CU(h,o),lit(j0),rg=!!F0,j0=F0=null,o.current=h,Qit(h),grt(),De=M,Qe=b,Qi.transition=S}else o.current=h;if(Uf&&(Uf=!1,Js=o,Ig=m),S=o.pendingLanes,S===0&&($s=null),Irt(h.stateNode),Xr(o,Rn()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)g(c[h]);if(mg)throw mg=!1,o=sv,sv=null,o;return(Ig&1)!==0&&o.tag!==0&&Yu(),S=o.pendingLanes,(S&1)!==0?o===av?Wl++:(Wl=0,av=o):Wl=0,aa(),null}function Yu(){if(Js!==null){var o=aM(Ig),c=Qi.transition,h=Qe;try{if(Qi.transition=null,Qe=16>o?16:o,Js===null)var g=!1;else{if(o=Js,Js=null,Ig=0,(De&6)!==0)throw Error(yt(331));var m=De;for(De|=4,Vt=o.current;Vt!==null;){var S=Vt,b=S.child;if((Vt.flags&16)!==0){var M=S.deletions;if(M!==null){for(var F=0;F<M.length;F++){var $=M[F];for(Vt=$;Vt!==null;){var At=Vt;switch(At.tag){case 0:case 11:case 15:Hl(8,At,S)}var gt=At.child;if(gt!==null)gt.return=At,Vt=gt;else for(;Vt!==null;){At=Vt;var ct=At.sibling,Bt=At.return;if(EU(At),At===$){Vt=null;break}if(ct!==null){ct.return=Bt,Vt=ct;break}Vt=Bt}}}var Rt=S.alternate;if(Rt!==null){var $t=Rt.child;if($t!==null){Rt.child=null;do{var Ne=$t.sibling;$t.sibling=null,$t=Ne}while($t!==null)}}Vt=S}}if((S.subtreeFlags&2064)!==0&&b!==null)b.return=S,Vt=b;else t:for(;Vt!==null;){if(S=Vt,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Hl(9,S,S.return)}var et=S.sibling;if(et!==null){et.return=S.return,Vt=et;break t}Vt=S.return}}var W=o.current;for(Vt=W;Vt!==null;){b=Vt;var rt=b.child;if((b.subtreeFlags&2064)!==0&&rt!==null)rt.return=b,Vt=rt;else t:for(b=W;Vt!==null;){if(M=Vt,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Dg(9,M)}}catch(Qt){vn(M,M.return,Qt)}if(M===b){Vt=null;break t}var vt=M.sibling;if(vt!==null){vt.return=M.return,Vt=vt;break t}Vt=M.return}}if(De=m,aa(),Ro&&typeof Ro.onPostCommitFiberRoot=="function")try{Ro.onPostCommitFiberRoot(Sg,o)}catch{}g=!0}return g}finally{Qe=h,Qi.transition=c}}return!1}function v4(o,c,h){c=Hv(h,c),c=sU(o,c,1),Zs(o,c),c=Or(),o=Pg(o,1),o!==null&&(AA(o,1,c),Xr(o,c))}function vn(o,c,h){if(o.tag===3)v4(o,o,h);else for(;c!==null;){if(c.tag===3){v4(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&($s===null||!$s.has(g))){o=Hv(h,o),o=aU(c,o,1),Zs(c,o),o=Or(),c=Pg(c,1),c!==null&&(AA(c,1,o),Xr(c,o));break}}c=c.return}}function Hit(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=Or(),o.pingedLanes|=o.suspendedLanes&h,Yn===o&&(ar&h)===h&&(Hn===4||Hn===3&&(ar&130023424)===ar&&500>Rn()-Jv?sc(o,0):Wv|=h),Xr(o,c)}function bU(o,c){c===0&&((o.mode&1)===0?c=1:(c=Rf,Rf<<=1,(Rf&130023424)===0&&(Rf=4194304)));var h=Or();o=Pg(o,c),o!==null&&(AA(o,c,h),Xr(o,h))}function Yit(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),bU(o,h)}function Wit(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,m=o.memoizedState;m!==null&&(h=m.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(yt(314))}g!==null&&g.delete(c),bU(o,h)}var NU;NU=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||qr.current)Jr=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Jr=!1,Bit(o,c,h);Jr=(o.flags&131072)!==0}else Jr=!1,on&&(c.flags&1048576)!==0&&MM(c,hg,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2),o=c.pendingProps;var m=Ju(c,Ir.current);Hu(c,h),m=jv(null,c,g,o,m,h);var S=Vv();return c.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,zr(g)?(S=!0,cg(c)):S=!1,c.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Pv(c),m.updater=Ng,c.stateNode=m,m._reactInternals=c,J0(c,g,o,h),c=tv(null,c,g,!0,S,h)):(c.tag=0,on&&S&&Lv(c),Nr(null,c,m,h),c=c.child),c;case 16:g=c.elementType;t:{switch(o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2),o=c.pendingProps,m=g._init,g=m(g._payload),c.type=g,m=c.tag=qit(g),o=no(g,o),m){case 0:c=$0(null,c,g,o,h);break t;case 1:c=u4(null,c,g,o,h);break t;case 11:c=a4(null,c,g,o,h);break t;case 14:c=c4(null,c,g,no(g.type,o),h);break t}throw Error(yt(306,g,""))}return c;case 0:return g=c.type,m=c.pendingProps,m=c.elementType===g?m:no(g,m),$0(o,c,g,m,h);case 1:return g=c.type,m=c.pendingProps,m=c.elementType===g?m:no(g,m),u4(o,c,g,m,h);case 3:t:{if(pU(c),o===null)throw Error(yt(387));g=c.pendingProps,S=c.memoizedState,m=S.element,PM(o,c),lg(c,g,null,h);var b=c.memoizedState;if(g=b.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){m=Error(yt(423)),c=d4(o,c,g,h,m);break t}else if(g!==m){m=Error(yt(424)),c=d4(o,c,g,h,m);break t}else for(Wr=rs(c.stateNode.containerInfo.firstChild),mi=c,on=!0,io=null,h=QM(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(qu(),g===m){c=ds(o,c,h);break t}Nr(o,c,g,h)}c=c.child}return c;case 5:return FM(c),o===null&&z0(c),g=c.type,m=c.pendingProps,S=o!==null?o.memoizedProps:null,b=m.children,V0(g,m)?b=null:S!==null&&V0(g,S)&&(c.flags|=32),hU(o,c),Nr(o,c,b,h),c.child;case 6:return o===null&&z0(c),null;case 13:return fU(o,c,h);case 4:return Uv(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=zu(c,null,g,h):Nr(o,c,g,h),c.child;case 11:return g=c.type,m=c.pendingProps,m=c.elementType===g?m:no(g,m),a4(o,c,g,m,h);case 7:return Nr(o,c,c.pendingProps,h),c.child;case 8:return Nr(o,c,c.pendingProps.children,h),c.child;case 12:return Nr(o,c,c.pendingProps.children,h),c.child;case 10:t:{if(g=c.type._context,m=c.pendingProps,S=c.memoizedProps,b=m.value,qe(ug,g._currentValue),g._currentValue=b,S!==null)if(ao(S.value,b)){if(S.children===m.children&&!qr.current){c=ds(o,c,h);break t}}else for(S=c.child,S!==null&&(S.return=c);S!==null;){var M=S.dependencies;if(M!==null){b=S.child;for(var F=M.firstContext;F!==null;){if(F.context===g){if(S.tag===1){F=as(-1,h&-h),F.tag=2;var $=S.updateQueue;if($!==null){$=$.shared;var At=$.pending;At===null?F.next=F:(F.next=At.next,At.next=F),$.pending=F}}S.lanes|=h,F=S.alternate,F!==null&&(F.lanes|=h),Y0(S.return,h,c),M.lanes|=h;break}F=F.next}}else if(S.tag===10)b=S.type===c.type?null:S.child;else if(S.tag===18){if(b=S.return,b===null)throw Error(yt(341));b.lanes|=h,M=b.alternate,M!==null&&(M.lanes|=h),Y0(b,h,c),b=S.sibling}else b=S.child;if(b!==null)b.return=S;else for(b=S;b!==null;){if(b===c){b=null;break}if(S=b.sibling,S!==null){S.return=b.return,b=S;break}b=b.return}S=b}Nr(o,c,m.children,h),c=c.child}return c;case 9:return m=c.type,g=c.pendingProps.children,Hu(c,h),m=ji(m),g=g(m),c.flags|=1,Nr(o,c,g,h),c.child;case 14:return g=c.type,m=no(g,c.pendingProps),m=no(g.type,m),c4(o,c,g,m,h);case 15:return lU(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,m=c.pendingProps,m=c.elementType===g?m:no(g,m),o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,zr(g)?(o=!0,cg(c)):o=!1,Hu(c,h),BM(c,g,m),J0(c,g,m,h),tv(null,c,g,!0,o,h);case 19:return gU(o,c,h);case 22:return AU(o,c,h)}throw Error(yt(156,c.tag))};function OU(o,c){return rM(o,c)}function Jit(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(o,c,h,g){return new Jit(o,c,h,g)}function Zv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function qit(o){if(typeof o=="function")return Zv(o)?1:0;if(o!=null){if(o=o.$$typeof,o===mv)return 11;if(o===Iv)return 14}return 2}function ia(o,c){var h=o.alternate;return h===null?(h=xi(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function qf(o,c,h,g,m,S){var b=2;if(g=o,typeof o=="function")Zv(o)&&(b=1);else if(typeof o=="string")b=5;else t:switch(o){case Ou:return ac(h.children,m,S,c);case Ev:b=8,m|=8;break;case C0:return o=xi(12,h,c,m|2),o.elementType=C0,o.lanes=S,o;case _0:return o=xi(13,h,c,m),o.elementType=_0,o.lanes=S,o;case v0:return o=xi(19,h,c,m),o.elementType=v0,o.lanes=S,o;case F4:return _g(h,m,S,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case x4:b=10;break t;case Q4:b=9;break t;case mv:b=11;break t;case Iv:b=14;break t;case Gs:b=16,g=null;break t}throw Error(yt(130,o==null?o:typeof o,""))}return c=xi(b,h,c,m),c.elementType=o,c.type=g,c.lanes=S,c}function ac(o,c,h,g){return o=xi(7,o,g,c),o.lanes=h,o}function _g(o,c,h,g){return o=xi(22,o,g,c),o.elementType=F4,o.lanes=h,o.stateNode={},o}function g0(o,c,h){return o=xi(6,o,null,c),o.lanes=h,o}function E0(o,c,h){return c=xi(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function zit(o,c,h,g,m){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z_(0),this.expirationTimes=Z_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z_(0),this.identifierPrefix=g,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function $v(o,c,h,g,m,S,b,M,F){return o=new zit(o,c,h,M,F),c===1?(c=1,S===!0&&(c|=8)):c=0,S=xi(3,null,null,c),o.current=S,S.stateNode=o,S.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pv(S),o}function Xit(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nu,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function DU(o){if(!o)return ra;o=o._reactInternals;t:{if(pc(o)!==o||o.tag!==1)throw Error(yt(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(zr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(yt(171))}if(o.tag===1){var h=o.type;if(zr(h))return DM(o,h,c)}return c}function kU(o,c,h,g,m,S,b,M,F){return o=$v(h,g,!0,o,m,S,b,M,F),o.context=DU(null),h=o.current,g=Or(),m=ta(h),S=as(g,m),S.callback=c!=null?c:null,Zs(h,S),o.current.lanes=m,AA(o,m,g),Xr(o,g),o}function Lg(o,c,h,g){var m=c.current,S=Or(),b=ta(m);return h=DU(h),c.context===null?c.context=h:c.pendingContext=h,c=as(S,b),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),Zs(m,c),o=Fi(m,b,S),o!==null&&Kf(o,m,b),b}function vg(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function S4(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function tS(o,c){S4(o,c),(o=o.alternate)&&S4(o,c)}function Zit(){return null}var PU=typeof reportError=="function"?reportError:function(o){console.error(o)};function eS(o){this._internalRoot=o}Bg.prototype.render=eS.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(yt(409));Lg(o,c,null,null)};Bg.prototype.unmount=eS.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Ac(function(){Lg(null,o,null,null)}),c[us]=null}};function Bg(o){this._internalRoot=o}Bg.prototype.unstable_scheduleHydration=function(o){if(o){var c=dM();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Hs.length&&c!==0&&c<Hs[h].priority;h++);Hs.splice(h,0,o),h===0&&AM(o)}};function nS(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Mg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function y4(){}function $it(o,c,h,g,m){if(m){if(typeof g=="function"){var S=g;g=function(){var $=vg(b);S.call($)}}var b=kU(c,g,o,0,null,!1,!1,"",y4);return o._reactRootContainer=b,o[us]=b.current,nA(o.nodeType===8?o.parentNode:o),Ac(),b}for(;m=o.lastChild;)o.removeChild(m);if(typeof g=="function"){var M=g;g=function(){var $=vg(F);M.call($)}}var F=$v(o,0,!1,null,null,!1,!1,"",y4);return o._reactRootContainer=F,o[us]=F.current,nA(o.nodeType===8?o.parentNode:o),Ac(function(){Lg(c,F,h,g)}),F}function Ug(o,c,h,g,m){var S=h._reactRootContainer;if(S){var b=S;if(typeof m=="function"){var M=m;m=function(){var F=vg(b);M.call(F)}}Lg(c,b,o,m)}else b=$it(h,c,o,m,g);return vg(b)}cM=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Ul(c.pendingLanes);h!==0&&(vv(c,h|1),Xr(c,Rn()),(De&6)===0&&(Zu=Rn()+500,aa()))}break;case 13:var g=Or();Ac(function(){return Fi(o,1,g)}),tS(o,1)}};Sv=function(o){if(o.tag===13){var c=Or();Fi(o,134217728,c),tS(o,134217728)}};uM=function(o){if(o.tag===13){var c=Or(),h=ta(o);Fi(o,h,c),tS(o,h)}};dM=function(){return Qe};lM=function(o,c){var h=Qe;try{return Qe=o,c()}finally{Qe=h}};k0=function(o,c,h){switch(c){case"input":if(T0(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var m=wg(g);if(!m)throw Error(yt(90));V4(g),T0(g,m)}}}break;case"textarea":K4(o,h);break;case"select":c=h.value,c!=null&&ju(o,!!h.multiple,c,!1)}};X4=qv;Z4=Ac;var tot={usingClientEntryPoint:!1,Events:[pA,Lu,wg,q4,z4,qv]},Ll={findFiberByHostInstance:ic,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},eot={bundleType:Ll.bundleType,version:Ll.version,rendererPackageName:Ll.rendererPackageName,rendererConfig:Ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=eM(o),o===null?null:o.stateNode},findFiberByHostInstance:Ll.findFiberByHostInstance||Zit,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{Sg=xf.inject(eot),Ro=xf}catch{}}Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tot;Ci.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nS(c))throw Error(yt(200));return Xit(o,c,null,h)};Ci.createRoot=function(o,c){if(!nS(o))throw Error(yt(299));var h=!1,g="",m=PU;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(m=c.onRecoverableError)),c=$v(o,1,!1,null,null,h,!1,g,m),o[us]=c.current,nA(o.nodeType===8?o.parentNode:o),new eS(c)};Ci.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(yt(188)):(o=Object.keys(o).join(","),Error(yt(268,o)));return o=eM(c),o=o===null?null:o.stateNode,o};Ci.flushSync=function(o){return Ac(o)};Ci.hydrate=function(o,c,h){if(!Mg(c))throw Error(yt(200));return Ug(null,o,c,!0,h)};Ci.hydrateRoot=function(o,c,h){if(!nS(o))throw Error(yt(405));var g=h!=null&&h.hydratedSources||null,m=!1,S="",b=PU;if(h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(b=h.onRecoverableError)),c=kU(c,null,o,1,h!=null?h:null,m,!1,S,b),o[us]=c.current,nA(o),g)for(o=0;o<g.length;o++)h=g[o],m=h._getVersion,m=m(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,m]:c.mutableSourceEagerHydrationData.push(h,m);return new Bg(c)};Ci.render=function(o,c,h){if(!Mg(c))throw Error(yt(200));return Ug(null,o,c,!1,h)};Ci.unmountComponentAtNode=function(o){if(!Mg(o))throw Error(yt(40));return o._reactRootContainer?(Ac(function(){Ug(null,null,o,!1,function(){o._reactRootContainer=null,o[us]=null})}),!0):!1};Ci.unstable_batchedUpdates=qv;Ci.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!Mg(h))throw Error(yt(200));if(o==null||o._reactInternals===void 0)throw Error(yt(38));return Ug(o,c,h,!1,g)};Ci.version="18.1.0-next-22edb9f77-20220426";function LU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LU)}catch(o){console.error(o)}}LU(),P4.exports=Ci;var T4=P4.exports;m0.createRoot=T4.createRoot,m0.hydrateRoot=T4.hydrateRoot;var BU={exports:{}};(function(o,c){(function(h,g){o.exports=g()})(Y_,function(){var h=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Y_!="undefined"?Y_:typeof self!="undefined"?self:{},g=function(t){return t&&t.Math==Math&&t},m=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof h=="object"&&h)||function(){return this}()||Function("return this")(),S={},b=function(t){try{return!!t()}catch{return!0}},M=!b(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),F=!b(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),$=F,At=Function.prototype.call,gt=$?At.bind(At):function(){return At.apply(At,arguments)},ct={},Bt={}.propertyIsEnumerable,Rt=Object.getOwnPropertyDescriptor,$t=Rt&&!Bt.call({1:2},1);ct.f=$t?function(t){var e=Rt(this,t);return!!e&&e.enumerable}:Bt;var Ne,et,W=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},rt=F,vt=Function.prototype,Qt=vt.bind,Yt=vt.call,qt=rt&&Qt.bind(Yt,Yt),Dt=rt?function(t){return t&&qt(t)}:function(t){return t&&function(){return Yt.apply(t,arguments)}},en=Dt,Se=en({}.toString),Zr=en("".slice),$r=function(t){return Zr(Se(t),8,-1)},ca=Dt,gA=b,Qg=$r,ua=m.Object,nd=ca("".split),Ft=gA(function(){return!ua("z").propertyIsEnumerable(0)})?function(t){return Qg(t)=="String"?nd(t,""):ua(t)}:ua,he=m.TypeError,pe=function(t){if(t==null)throw he("Can't call method on "+t);return t},sn=Ft,wn=pe,co=function(t){return sn(wn(t))},Pe=function(t){return typeof t=="function"},rd=Pe,fn=function(t){return typeof t=="object"?t!==null:rd(t)},As=m,FU=Pe,jU=function(t){return FU(t)?t:void 0},ti=function(t,e){return arguments.length<2?jU(As[t]):As[t]&&As[t][e]},hs=Dt({}.isPrototypeOf),da=ti("navigator","userAgent")||"",iS=m,Fg=da,oS=iS.process,sS=iS.Deno,aS=oS&&oS.versions||sS&&sS.version,cS=aS&&aS.v8;cS&&(et=(Ne=cS.split("."))[0]>0&&Ne[0]<4?1:+(Ne[0]+Ne[1])),!et&&Fg&&(!(Ne=Fg.match(/Edge\/(\d+)/))||Ne[1]>=74)&&(Ne=Fg.match(/Chrome\/(\d+)/))&&(et=+Ne[1]);var jg=et,uS=jg,VU=b,dS=!!Object.getOwnPropertySymbols&&!VU(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&uS&&uS<41}),lS=dS&&!Symbol.sham&&typeof Symbol.iterator=="symbol",GU=ti,KU=Pe,HU=hs,YU=lS,WU=m.Object,Vg=YU?function(t){return typeof t=="symbol"}:function(t){var e=GU("Symbol");return KU(e)&&HU(e.prototype,WU(t))},JU=m.String,id=function(t){try{return JU(t)}catch{return"Object"}},qU=Pe,zU=id,XU=m.TypeError,fc=function(t){if(qU(t))return t;throw XU(zU(t)+" is not a function")},ZU=fc,EA=function(t,e){var n=t[e];return n==null?void 0:ZU(n)},Gg=gt,Kg=Pe,Hg=fn,$U=m.TypeError,mA={exports:{}},AS=m,tx=Object.defineProperty,Yg=function(t,e){try{tx(AS,t,{value:e,configurable:!0,writable:!0})}catch{AS[t]=e}return e},ex=Yg,hS="__core-js_shared__",Wg=m[hS]||ex(hS,{}),pS=Wg;(mA.exports=function(t,e){return pS[t]||(pS[t]=e!==void 0?e:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var nx=pe,rx=m.Object,la=function(t){return rx(nx(t))},ix=la,ox=Dt({}.hasOwnProperty),Xn=Object.hasOwn||function(t,e){return ox(ix(t),e)},sx=Dt,ax=0,cx=Math.random(),ux=sx(1 .toString),Jg=function(t){return"Symbol("+(t===void 0?"":t)+")_"+ux(++ax+cx,36)},dx=m,lx=mA.exports,fS=Xn,Ax=Jg,gS=dS,ES=lS,od=lx("wks"),Aa=dx.Symbol,mS=Aa&&Aa.for,hx=ES?Aa:Aa&&Aa.withoutSetter||Ax,bn=function(t){if(!fS(od,t)||!gS&&typeof od[t]!="string"){var e="Symbol."+t;gS&&fS(Aa,t)?od[t]=Aa[t]:od[t]=ES&&mS?mS(e):hx(e)}return od[t]},px=gt,IS=fn,CS=Vg,fx=EA,gx=function(t,e){var n,r;if(e==="string"&&Kg(n=t.toString)&&!Hg(r=Gg(n,t))||Kg(n=t.valueOf)&&!Hg(r=Gg(n,t))||e!=="string"&&Kg(n=t.toString)&&!Hg(r=Gg(n,t)))return r;throw $U("Can't convert object to primitive value")},Ex=bn,mx=m.TypeError,Ix=Ex("toPrimitive"),Cx=function(t,e){if(!IS(t)||CS(t))return t;var n,r=fx(t,Ix);if(r){if(e===void 0&&(e="default"),n=px(r,t,e),!IS(n)||CS(n))return n;throw mx("Can't convert object to primitive value")}return e===void 0&&(e="number"),gx(t,e)},_x=Vg,IA=function(t){var e=Cx(t,"string");return _x(e)?e:e+""},_S=fn,qg=m.document,vx=_S(qg)&&_S(qg.createElement),CA=function(t){return vx?qg.createElement(t):{}},Sx=CA,vS=!M&&!b(function(){return Object.defineProperty(Sx("div"),"a",{get:function(){return 7}}).a!=7}),yx=M,Tx=gt,Rx=ct,wx=W,bx=co,Nx=IA,Ox=Xn,Dx=vS,SS=Object.getOwnPropertyDescriptor;S.f=yx?SS:function(t,e){if(t=bx(t),e=Nx(e),Dx)try{return SS(t,e)}catch{}if(Ox(t,e))return wx(!Tx(Rx.f,t,e),t[e])};var Zn={},yS=M&&b(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),TS=m,kx=fn,Px=TS.String,Lx=TS.TypeError,ur=function(t){if(kx(t))return t;throw Lx(Px(t)+" is not an object")},Bx=M,Mx=vS,Ux=yS,_A=ur,RS=IA,xx=m.TypeError,zg=Object.defineProperty,Qx=Object.getOwnPropertyDescriptor,Fx="enumerable",jx="configurable",Vx="writable";Zn.f=Bx?Ux?function(t,e,n){if(_A(t),e=RS(e),_A(n),typeof t=="function"&&e==="prototype"&&"value"in n&&Vx in n&&!n.writable){var r=Qx(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:jx in n?n.configurable:r.configurable,enumerable:Fx in n?n.enumerable:r.enumerable,writable:!1})}return zg(t,e,n)}:zg:function(t,e,n){if(_A(t),e=RS(e),_A(n),Mx)try{return zg(t,e,n)}catch{}if("get"in n||"set"in n)throw xx("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Gx=Zn,Kx=W,vi=M?function(t,e,n){return Gx.f(t,e,Kx(1,n))}:function(t,e,n){return t[e]=n,t},Gi={exports:{}},Hx=Pe,Xg=Wg,Yx=Dt(Function.toString);Hx(Xg.inspectSource)||(Xg.inspectSource=function(t){return Yx(t)});var vA,sd,SA,yA=Xg.inspectSource,Wx=Pe,Jx=yA,wS=m.WeakMap,qx=Wx(wS)&&/native code/.test(Jx(wS)),zx=mA.exports,Xx=Jg,bS=zx("keys"),Zg=function(t){return bS[t]||(bS[t]=Xx(t))},$g={},Zx=qx,NS=m,tE=Dt,$x=fn,t5=vi,eE=Xn,nE=Wg,e5=Zg,n5=$g,OS="Object already initialized",rE=NS.TypeError,r5=NS.WeakMap;if(Zx||nE.state){var ha=nE.state||(nE.state=new r5),i5=tE(ha.get),DS=tE(ha.has),o5=tE(ha.set);vA=function(t,e){if(DS(ha,t))throw new rE(OS);return e.facade=t,o5(ha,t,e),e},sd=function(t){return i5(ha,t)||{}},SA=function(t){return DS(ha,t)}}else{var gc=e5("state");n5[gc]=!0,vA=function(t,e){if(eE(t,gc))throw new rE(OS);return e.facade=t,t5(t,gc,e),e},sd=function(t){return eE(t,gc)?t[gc]:{}},SA=function(t){return eE(t,gc)}}var Si={set:vA,get:sd,has:SA,enforce:function(t){return SA(t)?sd(t):vA(t,{})},getterFor:function(t){return function(e){var n;if(!$x(e)||(n=sd(e)).type!==t)throw rE("Incompatible receiver, "+t+" required");return n}}},iE=M,s5=Xn,kS=Function.prototype,a5=iE&&Object.getOwnPropertyDescriptor,oE=s5(kS,"name"),sE={EXISTS:oE,PROPER:oE&&function(){}.name==="something",CONFIGURABLE:oE&&(!iE||iE&&a5(kS,"name").configurable)},c5=m,PS=Pe,u5=Xn,LS=vi,d5=Yg,l5=yA,A5=sE.CONFIGURABLE,h5=Si.get,p5=Si.enforce,f5=String(String).split("String");(Gi.exports=function(t,e,n,r){var i,u=!!r&&!!r.unsafe,s=!!r&&!!r.enumerable,d=!!r&&!!r.noTargetGet,a=r&&r.name!==void 0?r.name:e;PS(n)&&(String(a).slice(0,7)==="Symbol("&&(a="["+String(a).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!u5(n,"name")||A5&&n.name!==a)&&LS(n,"name",a),(i=p5(n)).source||(i.source=f5.join(typeof a=="string"?a:""))),t!==c5?(u?!d&&t[e]&&(s=!0):delete t[e],s?t[e]=n:LS(t,e,n)):s?t[e]=n:d5(e,n)})(Function.prototype,"toString",function(){return PS(this)&&h5(this).source||l5(this)});var ad={},g5=Math.ceil,E5=Math.floor,ps=function(t){var e=+t;return e!=e||e===0?0:(e>0?E5:g5)(e)},m5=ps,I5=Math.max,C5=Math.min,TA=function(t,e){var n=m5(t);return n<0?I5(n+e,0):C5(n,e)},_5=ps,v5=Math.min,Ec=function(t){return t>0?v5(_5(t),9007199254740991):0},S5=Ec,fs=function(t){return S5(t.length)},y5=co,T5=TA,R5=fs,BS=function(t){return function(e,n,r){var i,u=y5(e),s=R5(u),d=T5(r,s);if(t&&n!=n){for(;s>d;)if((i=u[d++])!=i)return!0}else for(;s>d;d++)if((t||d in u)&&u[d]===n)return t||d||0;return!t&&-1}},w5={includes:BS(!0),indexOf:BS(!1)},aE=Xn,b5=co,N5=w5.indexOf,O5=$g,MS=Dt([].push),US=function(t,e){var n,r=b5(t),i=0,u=[];for(n in r)!aE(O5,n)&&aE(r,n)&&MS(u,n);for(;e.length>i;)aE(r,n=e[i++])&&(~N5(u,n)||MS(u,n));return u},cE=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],D5=US,k5=cE.concat("length","prototype");ad.f=Object.getOwnPropertyNames||function(t){return D5(t,k5)};var xS={};xS.f=Object.getOwnPropertySymbols;var P5=ti,L5=ad,B5=xS,M5=ur,U5=Dt([].concat),x5=P5("Reflect","ownKeys")||function(t){var e=L5.f(M5(t)),n=B5.f;return n?U5(e,n(t)):e},QS=Xn,Q5=x5,F5=S,j5=Zn,uE=function(t,e,n){for(var r=Q5(e),i=j5.f,u=F5.f,s=0;s<r.length;s++){var d=r[s];QS(t,d)||n&&QS(n,d)||i(t,d,u(e,d))}},V5=b,G5=Pe,K5=/#|\.prototype\./,cd=function(t,e){var n=Y5[H5(t)];return n==J5||n!=W5&&(G5(e)?V5(e):!!e)},H5=cd.normalize=function(t){return String(t).replace(K5,".").toLowerCase()},Y5=cd.data={},W5=cd.NATIVE="N",J5=cd.POLYFILL="P",dE=cd,lE=m,q5=S.f,z5=vi,X5=Gi.exports,Z5=Yg,$5=uE,tQ=dE,ei=function(t,e){var n,r,i,u,s,d=t.target,a=t.global,l=t.stat;if(n=a?lE:l?lE[d]||Z5(d,{}):(lE[d]||{}).prototype)for(r in e){if(u=e[r],i=t.noTargetGet?(s=q5(n,r))&&s.value:n[r],!tQ(a?r:d+(l?".":"#")+r,t.forced)&&i!==void 0){if(typeof u==typeof i)continue;$5(u,i)}(t.sham||i&&i.sham)&&z5(u,"sham",!0),X5(n,r,u,t)}},FS=m.Promise,eQ=Gi.exports,jS=function(t,e,n){for(var r in e)eQ(t,r,e[r],n);return t},VS=m,nQ=Pe,rQ=VS.String,iQ=VS.TypeError,oQ=Dt,sQ=ur,aQ=function(t){if(typeof t=="object"||nQ(t))return t;throw iQ("Can't set "+rQ(t)+" as a prototype")},pa=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=oQ(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch{}return function(r,i){return sQ(r),aQ(i),e?t(r,i):r.__proto__=i,r}}():void 0),cQ=Zn.f,uQ=Xn,GS=bn("toStringTag"),ud=function(t,e,n){t&&!n&&(t=t.prototype),t&&!uQ(t,GS)&&cQ(t,GS,{configurable:!0,value:e})},dQ=ti,lQ=Zn,AQ=M,KS=bn("species"),RA=function(t){var e=dQ(t),n=lQ.f;AQ&&e&&!e[KS]&&n(e,KS,{configurable:!0,get:function(){return this}})},hQ=hs,pQ=m.TypeError,dd=function(t,e){if(hQ(e,t))return t;throw pQ("Incorrect invocation")},fQ=fc,gQ=F,EQ=Dt(Dt.bind),ld=function(t,e){return fQ(t),e===void 0?t:gQ?EQ(t,e):function(){return t.apply(e,arguments)}},Ad={},mQ=Ad,IQ=bn("iterator"),CQ=Array.prototype,HS=function(t){return t!==void 0&&(mQ.Array===t||CQ[IQ]===t)},YS={};YS[bn("toStringTag")]="z";var _Q=m,vQ=String(YS)==="[object z]",SQ=Pe,wA=$r,yQ=bn("toStringTag"),TQ=_Q.Object,RQ=wA(function(){return arguments}())=="Arguments",hd=vQ?wA:function(t){var e,n,r;return t===void 0?"Undefined":t===null?"Null":typeof(n=function(i,u){try{return i[u]}catch{}}(e=TQ(t),yQ))=="string"?n:RQ?wA(e):(r=wA(e))=="Object"&&SQ(e.callee)?"Arguments":r},wQ=hd,WS=EA,bQ=Ad,NQ=bn("iterator"),AE=function(t){if(t!=null)return WS(t,NQ)||WS(t,"@@iterator")||bQ[wQ(t)]},OQ=gt,DQ=fc,kQ=ur,PQ=id,LQ=AE,BQ=m.TypeError,JS=function(t,e){var n=arguments.length<2?LQ(t):e;if(DQ(n))return kQ(OQ(n,t));throw BQ(PQ(t)+" is not iterable")},MQ=gt,qS=ur,UQ=EA,xQ=ld,QQ=gt,FQ=ur,jQ=id,VQ=HS,GQ=fs,zS=hs,KQ=JS,HQ=AE,XS=function(t,e,n){var r,i;qS(t);try{if(!(r=UQ(t,"return"))){if(e==="throw")throw n;return n}r=MQ(r,t)}catch(u){i=!0,r=u}if(e==="throw")throw n;if(i)throw r;return qS(r),n},YQ=m.TypeError,bA=function(t,e){this.stopped=t,this.result=e},ZS=bA.prototype,$S=bn("iterator"),ty=!1;try{var WQ=0,ey={next:function(){return{done:!!WQ++}},return:function(){ty=!0}};ey[$S]=function(){return this},Array.from(ey,function(){throw 2})}catch{}var ny=function(t,e){if(!e&&!ty)return!1;var n=!1;try{var r={};r[$S]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch{}return n},JQ=Dt,qQ=b,ry=Pe,zQ=hd,XQ=yA,iy=function(){},ZQ=[],oy=ti("Reflect","construct"),hE=/^\s*(?:class|function)\b/,$Q=JQ(hE.exec),t8=!hE.exec(iy),pd=function(t){if(!ry(t))return!1;try{return oy(iy,ZQ,t),!0}catch{return!1}},sy=function(t){if(!ry(t))return!1;switch(zQ(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return t8||!!$Q(hE,XQ(t))}catch{return!0}};sy.sham=!0;var fd,mc,ay,pE,cy=!oy||qQ(function(){var t;return pd(pd.call)||!pd(Object)||!pd(function(){t=!0})||t})?sy:pd,e8=cy,n8=id,r8=m.TypeError,uy=function(t){if(e8(t))return t;throw r8(n8(t)+" is not a constructor")},dy=ur,i8=uy,o8=bn("species"),fE=function(t,e){var n,r=dy(t).constructor;return r===void 0||(n=dy(r)[o8])==null?e:i8(n)},s8=F,ly=Function.prototype,Ay=ly.apply,hy=ly.call,NA=typeof Reflect=="object"&&Reflect.apply||(s8?hy.bind(Ay):function(){return hy.apply(Ay,arguments)}),py=ti("document","documentElement"),a8=Dt([].slice),fy=/(?:ipad|iphone|ipod).*applewebkit/i.test(da),OA=$r(m.process)=="process",ni=m,c8=NA,u8=ld,gy=Pe,d8=Xn,l8=b,Ey=py,A8=a8,my=CA,h8=fy,p8=OA,gE=ni.setImmediate,EE=ni.clearImmediate,f8=ni.process,mE=ni.Dispatch,g8=ni.Function,Iy=ni.MessageChannel,E8=ni.String,IE=0,gd={},m8="onreadystatechange";try{fd=ni.location}catch{}var CE=function(t){if(d8(gd,t)){var e=gd[t];delete gd[t],e()}},_E=function(t){return function(){CE(t)}},Cy=function(t){CE(t.data)},_y=function(t){ni.postMessage(E8(t),fd.protocol+"//"+fd.host)};gE&&EE||(gE=function(t){var e=A8(arguments,1);return gd[++IE]=function(){c8(gy(t)?t:g8(t),void 0,e)},mc(IE),IE},EE=function(t){delete gd[t]},p8?mc=function(t){f8.nextTick(_E(t))}:mE&&mE.now?mc=function(t){mE.now(_E(t))}:Iy&&!h8?(pE=(ay=new Iy).port2,ay.port1.onmessage=Cy,mc=u8(pE.postMessage,pE)):ni.addEventListener&&gy(ni.postMessage)&&!ni.importScripts&&fd&&fd.protocol!=="file:"&&!l8(_y)?(mc=_y,ni.addEventListener("message",Cy,!1)):mc=m8 in my("script")?function(t){Ey.appendChild(my("script")).onreadystatechange=function(){Ey.removeChild(this),CE(t)}}:function(t){setTimeout(_E(t),0)});var Ed,fa,md,Ic,vE,SE,yE,vy,Sy={set:gE,clear:EE},I8=m,C8=/ipad|iphone|ipod/i.test(da)&&I8.Pebble!==void 0,_8=/web0s(?!.*chrome)/i.test(da),ga=m,yy=ld,v8=S.f,TE=Sy.set,S8=fy,y8=C8,T8=_8,RE=OA,Ty=ga.MutationObserver||ga.WebKitMutationObserver,Ry=ga.document,wy=ga.process,DA=ga.Promise,by=v8(ga,"queueMicrotask"),Ny=by&&by.value;Ny||(Ed=function(){var t,e;for(RE&&(t=wy.domain)&&t.exit();fa;){e=fa.fn,fa=fa.next;try{e()}catch(n){throw fa?Ic():md=void 0,n}}md=void 0,t&&t.enter()},S8||RE||T8||!Ty||!Ry?!y8&&DA&&DA.resolve?((yE=DA.resolve(void 0)).constructor=DA,vy=yy(yE.then,yE),Ic=function(){vy(Ed)}):RE?Ic=function(){wy.nextTick(Ed)}:(TE=yy(TE,ga),Ic=function(){TE(Ed)}):(vE=!0,SE=Ry.createTextNode(""),new Ty(Ed).observe(SE,{characterData:!0}),Ic=function(){SE.data=vE=!vE}));var R8=Ny||function(t){var e={fn:t,next:void 0};md&&(md.next=e),fa||(fa=e,Ic()),md=e},wE={},Oy=fc,w8=function(t){var e,n;this.promise=new t(function(r,i){if(e!==void 0||n!==void 0)throw TypeError("Bad Promise constructor");e=r,n=i}),this.resolve=Oy(e),this.reject=Oy(n)};wE.f=function(t){return new w8(t)};var b8=ur,N8=fn,O8=wE,Dy=function(t,e){if(b8(t),N8(e)&&e.constructor===t)return e;var n=O8.f(t);return(0,n.resolve)(e),n.promise},D8=m,ky=function(){this.head=null,this.tail=null};ky.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var bE,Py,Ly,By,k8=ky,P8=typeof window=="object",kA=ei,bo=m,L8=ti,No=gt,PA=FS,My=Gi.exports,B8=jS,Uy=pa,M8=ud,U8=RA,NE=fc,Id=Pe,x8=fn,Q8=dd,F8=yA,xy=function(t,e,n){var r,i,u,s,d,a,l,A=n&&n.that,p=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),C=xQ(e,A),_=function(R){return r&&XS(r,"normal",R),new bA(!0,R)},y=function(R){return p?(FQ(R),E?C(R[0],R[1],_):C(R[0],R[1])):E?C(R,_):C(R)};if(f)r=t;else{if(!(i=HQ(t)))throw YQ(jQ(t)+" is not iterable");if(VQ(i)){for(u=0,s=GQ(t);s>u;u++)if((d=y(t[u]))&&zS(ZS,d))return d;return new bA(!1)}r=KQ(t,i)}for(a=r.next;!(l=QQ(a,r)).done;){try{d=y(l.value)}catch(R){XS(r,"throw",R)}if(typeof d=="object"&&d&&zS(ZS,d))return d}return new bA(!1)},j8=ny,V8=fE,Qy=Sy.set,OE=R8,G8=Dy,K8=function(t,e){var n=D8.console;n&&n.error&&(arguments.length==1?n.error(t):n.error(t,e))},Fy=wE,DE=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},H8=k8,kE=Si,Y8=dE,W8=P8,LA=OA,jy=jg,J8=bn("species"),uo="Promise",Vy=kE.getterFor(uo),q8=kE.set,z8=kE.getterFor(uo),Ea=PA&&PA.prototype,lo=PA,Cd=Ea,Gy=bo.TypeError,PE=bo.document,LE=bo.process,Cc=Fy.f,X8=Cc,Z8=!!(PE&&PE.createEvent&&bo.dispatchEvent),Ky=Id(bo.PromiseRejectionEvent),Hy="unhandledrejection",Yy=!1,_d=Y8(uo,function(){var t=F8(lo),e=t!==String(lo);if(!e&&jy===66)return!0;if(jy>=51&&/native code/.test(t))return!1;var n=new lo(function(i){i(1)}),r=function(i){i(function(){},function(){})};return(n.constructor={})[J8]=r,!(Yy=n.then(function(){})instanceof r)||!e&&W8&&!Ky}),$8=_d||!j8(function(t){lo.all(t).catch(function(){})}),Wy=function(t){var e;return!(!x8(t)||!Id(e=t.then))&&e},Jy=function(t,e){var n,r,i,u=e.value,s=e.state==1,d=s?t.ok:t.fail,a=t.resolve,l=t.reject,A=t.domain;try{d?(s||(e.rejection===2&&e6(e),e.rejection=1),d===!0?n=u:(A&&A.enter(),n=d(u),A&&(A.exit(),i=!0)),n===t.promise?l(Gy("Promise-chain cycle")):(r=Wy(n))?No(r,n,a,l):a(n)):l(u)}catch(p){A&&!i&&A.exit(),l(p)}},qy=function(t,e){t.notified||(t.notified=!0,OE(function(){for(var n,r=t.reactions;n=r.get();)Jy(n,t);t.notified=!1,e&&!t.rejection&&t6(t)}))},zy=function(t,e,n){var r,i;Z8?((r=PE.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),bo.dispatchEvent(r)):r={promise:e,reason:n},!Ky&&(i=bo["on"+t])?i(r):t===Hy&&K8("Unhandled promise rejection",n)},t6=function(t){No(Qy,bo,function(){var e,n=t.facade,r=t.value;if(Xy(t)&&(e=DE(function(){LA?LE.emit("unhandledRejection",r,n):zy(Hy,n,r)}),t.rejection=LA||Xy(t)?2:1,e.error))throw e.value})},Xy=function(t){return t.rejection!==1&&!t.parent},e6=function(t){No(Qy,bo,function(){var e=t.facade;LA?LE.emit("rejectionHandled",e):zy("rejectionhandled",e,t.value)})},_c=function(t,e,n){return function(r){t(e,r,n)}},vc=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,qy(t,!0))},BE=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Gy("Promise can't be resolved itself");var r=Wy(e);r?OE(function(){var i={done:!1};try{No(r,e,_c(BE,i,t),_c(vc,i,t))}catch(u){vc(i,u,t)}}):(t.value=e,t.state=1,qy(t,!1))}catch(i){vc({done:!1},i,t)}}};if(_d&&(Cd=(lo=function(t){Q8(this,Cd),NE(t),No(bE,this);var e=Vy(this);try{t(_c(BE,e),_c(vc,e))}catch(n){vc(e,n)}}).prototype,(bE=function(t){q8(this,{type:uo,done:!1,notified:!1,parent:!1,reactions:new H8,rejection:!1,state:0,value:void 0})}).prototype=B8(Cd,{then:function(t,e){var n=z8(this),r=Cc(V8(this,lo));return n.parent=!0,r.ok=!Id(t)||t,r.fail=Id(e)&&e,r.domain=LA?LE.domain:void 0,n.state==0?n.reactions.add(r):OE(function(){Jy(r,n)}),r.promise},catch:function(t){return this.then(void 0,t)}}),Py=function(){var t=new bE,e=Vy(t);this.promise=t,this.resolve=_c(BE,e),this.reject=_c(vc,e)},Fy.f=Cc=function(t){return t===lo||t===Ly?new Py(t):X8(t)},Id(PA)&&Ea!==Object.prototype)){By=Ea.then,Yy||(My(Ea,"then",function(t,e){var n=this;return new lo(function(r,i){No(By,n,r,i)}).then(t,e)},{unsafe:!0}),My(Ea,"catch",Cd.catch,{unsafe:!0}));try{delete Ea.constructor}catch{}Uy&&Uy(Ea,Cd)}kA({global:!0,wrap:!0,forced:_d},{Promise:lo}),M8(lo,uo,!1),U8(uo),Ly=L8(uo),kA({target:uo,stat:!0,forced:_d},{reject:function(t){var e=Cc(this);return No(e.reject,void 0,t),e.promise}}),kA({target:uo,stat:!0,forced:_d},{resolve:function(t){return G8(this,t)}}),kA({target:uo,stat:!0,forced:$8},{all:function(t){var e=this,n=Cc(e),r=n.resolve,i=n.reject,u=DE(function(){var s=NE(e.resolve),d=[],a=0,l=1;xy(t,function(A){var p=a++,f=!1;l++,No(s,e,A).then(function(E){f||(f=!0,d[p]=E,--l||r(d))},i)}),--l||r(d)});return u.error&&i(u.value),n.promise},race:function(t){var e=this,n=Cc(e),r=n.reject,i=DE(function(){var u=NE(e.resolve);xy(t,function(s){No(u,e,s).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}});var n6=ei,r6=ti,i6=NA,vd=Dt,o6=b,s6=m.Array,BA=r6("JSON","stringify"),MA=vd(/./.exec),Zy=vd("".charAt),a6=vd("".charCodeAt),c6=vd("".replace),u6=vd(1 .toString),d6=/[\uD800-\uDFFF]/g,$y=/^[\uD800-\uDBFF]$/,tT=/^[\uDC00-\uDFFF]$/,l6=function(t,e,n){var r=Zy(n,e-1),i=Zy(n,e+1);return MA($y,t)&&!MA(tT,i)||MA(tT,t)&&!MA($y,r)?"\\u"+u6(a6(t,0),16):t},A6=o6(function(){return BA("\uDF06\uD834")!=='"\\udf06\\ud834"'||BA("\uDEAD")!=='"\\udead"'});BA&&n6({target:"JSON",stat:!0,forced:A6},{stringify:function(t,e,n){for(var r=0,i=arguments.length,u=s6(i);r<i;r++)u[r]=arguments[r];var s=i6(BA,null,u);return typeof s=="string"?c6(s,d6,l6):s}});var gn=function(t){try{return!!t()}catch{return!0}},UA=!gn(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),eT=UA,nT=Function.prototype,h6=nT.bind,ME=nT.call,p6=eT&&h6.bind(ME,ME),Ve=eT?function(t){return t&&p6(t)}:function(t){return t&&function(){return ME.apply(t,arguments)}},ri=Ve({}.isPrototypeOf),xA=function(t){return t&&t.Math==Math&&t},se=xA(typeof globalThis=="object"&&globalThis)||xA(typeof window=="object"&&window)||xA(typeof self=="object"&&self)||xA(typeof h=="object"&&h)||function(){return this}()||Function("return this")(),f6=UA,rT=Function.prototype,iT=rT.apply,oT=rT.call,UE=typeof Reflect=="object"&&Reflect.apply||(f6?oT.bind(iT):function(){return oT.apply(iT,arguments)}),Un=function(t){return typeof t=="function"},Sd={},yi=!gn(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),g6=UA,QA=Function.prototype.call,Pr=g6?QA.bind(QA):function(){return QA.apply(QA,arguments)},FA={},sT={}.propertyIsEnumerable,aT=Object.getOwnPropertyDescriptor,E6=aT&&!sT.call({1:2},1);FA.f=E6?function(t){var e=aT(this,t);return!!e&&e.enumerable}:sT;var gs,jA,Es=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},cT=Ve,m6=cT({}.toString),I6=cT("".slice),yd=function(t){return I6(m6(t),8,-1)},C6=Ve,_6=gn,v6=yd,xE=se.Object,S6=C6("".split),VA=_6(function(){return!xE("z").propertyIsEnumerable(0)})?function(t){return v6(t)=="String"?S6(t,""):xE(t)}:xE,y6=se.TypeError,GA=function(t){if(t==null)throw y6("Can't call method on "+t);return t},T6=VA,R6=GA,ms=function(t){return T6(R6(t))},w6=Un,ii=function(t){return typeof t=="object"?t!==null:w6(t)},Oo={},QE=Oo,FE=se,b6=Un,uT=function(t){return b6(t)?t:void 0},Ki=function(t,e){return arguments.length<2?uT(QE[t])||uT(FE[t]):QE[t]&&QE[t][e]||FE[t]&&FE[t][e]},ma=Ki("navigator","userAgent")||"",dT=se,jE=ma,lT=dT.process,AT=dT.Deno,hT=lT&&lT.versions||AT&&AT.version,pT=hT&&hT.v8;pT&&(jA=(gs=pT.split("."))[0]>0&&gs[0]<4?1:+(gs[0]+gs[1])),!jA&&jE&&(!(gs=jE.match(/Edge\/(\d+)/))||gs[1]>=74)&&(gs=jE.match(/Chrome\/(\d+)/))&&(jA=+gs[1]);var Sc=jA,fT=Sc,N6=gn,VE=!!Object.getOwnPropertySymbols&&!N6(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&fT&&fT<41}),gT=VE&&!Symbol.sham&&typeof Symbol.iterator=="symbol",O6=Ki,D6=Un,k6=ri,P6=gT,L6=se.Object,GE=P6?function(t){return typeof t=="symbol"}:function(t){var e=O6("Symbol");return D6(e)&&k6(e.prototype,L6(t))},B6=se.String,KA=function(t){try{return B6(t)}catch{return"Object"}},M6=Un,U6=KA,x6=se.TypeError,Do=function(t){if(M6(t))return t;throw x6(U6(t)+" is not a function")},Q6=Do,KE=function(t,e){var n=t[e];return n==null?void 0:Q6(n)},HE=Pr,YE=Un,WE=ii,F6=se.TypeError,HA={exports:{}},ET=se,j6=Object.defineProperty,V6=function(t,e){try{j6(ET,t,{value:e,configurable:!0,writable:!0})}catch{ET[t]=e}return e},mT="__core-js_shared__",JE=se[mT]||V6(mT,{}),IT=JE;(HA.exports=function(t,e){return IT[t]||(IT[t]=e!==void 0?e:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var G6=GA,K6=se.Object,Ao=function(t){return K6(G6(t))},H6=Ao,Y6=Ve({}.hasOwnProperty),$n=Object.hasOwn||function(t,e){return Y6(H6(t),e)},W6=Ve,J6=0,q6=Math.random(),z6=W6(1 .toString),qE=function(t){return"Symbol("+(t===void 0?"":t)+")_"+z6(++J6+q6,36)},X6=se,Z6=HA.exports,CT=$n,$6=qE,_T=VE,vT=gT,Td=Z6("wks"),Ia=X6.Symbol,ST=Ia&&Ia.for,t9=vT?Ia:Ia&&Ia.withoutSetter||$6,En=function(t){if(!CT(Td,t)||!_T&&typeof Td[t]!="string"){var e="Symbol."+t;_T&&CT(Ia,t)?Td[t]=Ia[t]:Td[t]=vT&&ST?ST(e):t9(e)}return Td[t]},e9=Pr,yT=ii,TT=GE,n9=KE,r9=function(t,e){var n,r;if(e==="string"&&YE(n=t.toString)&&!WE(r=HE(n,t))||YE(n=t.valueOf)&&!WE(r=HE(n,t))||e!=="string"&&YE(n=t.toString)&&!WE(r=HE(n,t)))return r;throw F6("Can't convert object to primitive value")},i9=En,o9=se.TypeError,s9=i9("toPrimitive"),a9=function(t,e){if(!yT(t)||TT(t))return t;var n,r=n9(t,s9);if(r){if(e===void 0&&(e="default"),n=e9(r,t,e),!yT(n)||TT(n))return n;throw o9("Can't convert object to primitive value")}return e===void 0&&(e="number"),r9(t,e)},c9=GE,YA=function(t){var e=a9(t,"string");return c9(e)?e:e+""},RT=ii,zE=se.document,u9=RT(zE)&&RT(zE.createElement),XE=function(t){return u9?zE.createElement(t):{}},d9=XE,wT=!yi&&!gn(function(){return Object.defineProperty(d9("div"),"a",{get:function(){return 7}}).a!=7}),l9=yi,A9=Pr,h9=FA,p9=Es,f9=ms,g9=YA,E9=$n,m9=wT,bT=Object.getOwnPropertyDescriptor;Sd.f=l9?bT:function(t,e){if(t=f9(t),e=g9(e),m9)try{return bT(t,e)}catch{}if(E9(t,e))return p9(!A9(h9.f,t,e),t[e])};var I9=gn,C9=Un,_9=/#|\.prototype\./,Rd=function(t,e){var n=S9[v9(t)];return n==T9||n!=y9&&(C9(e)?I9(e):!!e)},v9=Rd.normalize=function(t){return String(t).replace(_9,".").toLowerCase()},S9=Rd.data={},y9=Rd.NATIVE="N",T9=Rd.POLYFILL="P",NT=Rd,R9=Do,w9=UA,b9=Ve(Ve.bind),Is=function(t,e){return R9(t),e===void 0?t:w9?b9(t,e):function(){return t.apply(e,arguments)}},Hi={},OT=yi&&gn(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),DT=se,N9=ii,O9=DT.String,D9=DT.TypeError,oi=function(t){if(N9(t))return t;throw D9(O9(t)+" is not an object")},k9=yi,P9=wT,L9=OT,WA=oi,kT=YA,B9=se.TypeError,ZE=Object.defineProperty,M9=Object.getOwnPropertyDescriptor,U9="enumerable",x9="configurable",Q9="writable";Hi.f=k9?L9?function(t,e,n){if(WA(t),e=kT(e),WA(n),typeof t=="function"&&e==="prototype"&&"value"in n&&Q9 in n&&!n.writable){var r=M9(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:x9 in n?n.configurable:r.configurable,enumerable:U9 in n?n.enumerable:r.enumerable,writable:!1})}return ZE(t,e,n)}:ZE:function(t,e,n){if(WA(t),e=kT(e),WA(n),P9)try{return ZE(t,e,n)}catch{}if("get"in n||"set"in n)throw B9("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var F9=Hi,j9=Es,Ca=yi?function(t,e,n){return F9.f(t,e,j9(1,n))}:function(t,e,n){return t[e]=n,t},JA=se,V9=UE,G9=Ve,K9=Un,H9=Sd.f,Y9=NT,yc=Oo,W9=Is,Tc=Ca,PT=$n,J9=function(t){var e=function(n,r,i){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,i)}return V9(t,this,arguments)};return e.prototype=t.prototype,e},xn=function(t,e){var n,r,i,u,s,d,a,l,A=t.target,p=t.global,f=t.stat,E=t.proto,C=p?JA:f?JA[A]:(JA[A]||{}).prototype,_=p?yc:yc[A]||Tc(yc,A,{})[A],y=_.prototype;for(i in e)n=!Y9(p?i:A+(f?".":"#")+i,t.forced)&&C&&PT(C,i),s=_[i],n&&(d=t.noTargetGet?(l=H9(C,i))&&l.value:C[i]),u=n&&d?d:e[i],n&&typeof s==typeof u||(a=t.bind&&n?W9(u,JA):t.wrap&&n?J9(u):E&&K9(u)?G9(u):u,(t.sham||u&&u.sham||s&&s.sham)&&Tc(a,"sham",!0),Tc(_,i,a),E&&(PT(yc,r=A+"Prototype")||Tc(yc,r,{}),Tc(yc[r],i,u),t.real&&y&&!y[i]&&Tc(y,i,u)))},q9=Math.ceil,z9=Math.floor,$E=function(t){var e=+t;return e!=e||e===0?0:(e>0?z9:q9)(e)},X9=$E,Z9=Math.min,$9=function(t){return t>0?Z9(X9(t),9007199254740991):0},ko=function(t){return $9(t.length)},t7=Do,e7=Ao,n7=VA,r7=ko,i7=se.TypeError,LT=function(t){return function(e,n,r,i){t7(n);var u=e7(e),s=n7(u),d=r7(u),a=t?d-1:0,l=t?-1:1;if(r<2)for(;;){if(a in s){i=s[a],a+=l;break}if(a+=l,t?a<0:d<=a)throw i7("Reduce of empty array with no initial value")}for(;t?a>=0:d>a;a+=l)a in s&&(i=n(i,s[a],a,u));return i}},o7={left:LT(!1),right:LT(!0)},s7=gn,tm=function(t,e){var n=[][t];return!!n&&s7(function(){n.call(null,e||function(){throw 1},1)})},qA=yd(se.process)=="process",a7=o7.left,BT=Sc,c7=qA;xn({target:"Array",proto:!0,forced:!tm("reduce")||!c7&&BT>79&&BT<83},{reduce:function(t){var e=arguments.length;return a7(this,t,e,e>1?arguments[1]:void 0)}});var u7=Oo,Cs=function(t){return u7[t+"Prototype"]},d7=Cs("Array").reduce,l7=ri,A7=d7,em=Array.prototype,MT=function(t){var e=t.reduce;return t===em||l7(em,t)&&e===em.reduce?A7:e},_a=MT,h7=hd,p7=m.String,Rc=function(t){if(h7(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return p7(t)},f7=ur,UT=function(){var t=f7(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},nm=b,rm=m.RegExp,im=nm(function(){var t=rm("a","y");return t.lastIndex=2,t.exec("abcd")!=null}),g7=im||nm(function(){return!rm("a","y").sticky}),xT={BROKEN_CARET:im||nm(function(){var t=rm("^r","gy");return t.lastIndex=2,t.exec("str")!=null}),MISSED_STICKY:g7,UNSUPPORTED_Y:im},om={},E7=US,m7=cE,I7=Object.keys||function(t){return E7(t,m7)},C7=M,_7=yS,v7=Zn,S7=ur,y7=co,T7=I7;om.f=C7&&!_7?Object.defineProperties:function(t,e){S7(t);for(var n,r=y7(e),i=T7(e),u=i.length,s=0;u>s;)v7.f(t,n=i[s++],r[n]);return t};var zA,R7=ur,w7=om,QT=cE,b7=$g,N7=py,O7=CA,FT=Zg("IE_PROTO"),sm=function(){},jT=function(t){return"<script>"+t+"<\/script>"},VT=function(t){t.write(jT("")),t.close();var e=t.parentWindow.Object;return t=null,e},XA=function(){try{zA=new ActiveXObject("htmlfile")}catch{}var t,e;XA=typeof document!="undefined"?document.domain&&zA?VT(zA):((e=O7("iframe")).style.display="none",N7.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(jT("document.F=Object")),t.close(),t.F):VT(zA);for(var n=QT.length;n--;)delete XA.prototype[QT[n]];return XA()};b7[FT]=!0;var wc=Object.create||function(t,e){var n;return t!==null?(sm.prototype=R7(t),n=new sm,sm.prototype=null,n[FT]=t):n=XA(),e===void 0?n:w7.f(n,e)},D7=b,k7=m.RegExp,am=D7(function(){var t=k7(".","s");return!(t.dotAll&&t.exec(`
`)&&t.flags==="s")}),P7=b,L7=m.RegExp,GT=P7(function(){var t=L7("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"}),bc=gt,ZA=Dt,B7=Rc,M7=UT,U7=xT,x7=mA.exports,Q7=wc,F7=Si.get,j7=am,V7=GT,G7=x7("native-string-replace",String.prototype.replace),$A=RegExp.prototype.exec,cm=$A,K7=ZA("".charAt),H7=ZA("".indexOf),Y7=ZA("".replace),um=ZA("".slice),dm=function(){var t=/a/,e=/b*/g;return bc($A,t,"a"),bc($A,e,"a"),t.lastIndex!==0||e.lastIndex!==0}(),KT=U7.BROKEN_CARET,lm=/()??/.exec("")[1]!==void 0;(dm||lm||KT||j7||V7)&&(cm=function(t){var e,n,r,i,u,s,d,a=this,l=F7(a),A=B7(t),p=l.raw;if(p)return p.lastIndex=a.lastIndex,e=bc(cm,p,A),a.lastIndex=p.lastIndex,e;var f=l.groups,E=KT&&a.sticky,C=bc(M7,a),_=a.source,y=0,R=A;if(E&&(C=Y7(C,"y",""),H7(C,"g")===-1&&(C+="g"),R=um(A,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&K7(A,a.lastIndex-1)!==`
`)&&(_="(?: "+_+")",R=" "+R,y++),n=new RegExp("^(?:"+_+")",C)),lm&&(n=new RegExp("^"+_+"$(?!\\s)",C)),dm&&(r=a.lastIndex),i=bc($A,E?n:a,R),E?i?(i.input=um(i.input,y),i[0]=um(i[0],y),i.index=a.lastIndex,a.lastIndex+=i[0].length):a.lastIndex=0:dm&&i&&(a.lastIndex=a.global?i.index+i[0].length:r),lm&&i&&i.length>1&&bc(G7,i[0],n,function(){for(u=1;u<arguments.length-2;u++)arguments[u]===void 0&&(i[u]=void 0)}),i&&f)for(i.groups=s=Q7(null),u=0;u<f.length;u++)s[(d=f[u])[0]]=i[d[1]];return i});var th=cm;ei({target:"RegExp",proto:!0,forced:/./.exec!==th},{exec:th});var W7=wc,J7=Zn,Am=bn("unscopables"),hm=Array.prototype;hm[Am]==null&&J7.f(hm,Am,{configurable:!0,value:W7(null)});var va,HT,YT,q7=!b(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),z7=m,X7=Xn,Z7=Pe,$7=la,tF=q7,WT=Zg("IE_PROTO"),pm=z7.Object,eF=pm.prototype,eh=tF?pm.getPrototypeOf:function(t){var e=$7(t);if(X7(e,WT))return e[WT];var n=e.constructor;return Z7(n)&&e instanceof n?n.prototype:e instanceof pm?eF:null},nF=b,rF=Pe,JT=eh,iF=Gi.exports,fm=bn("iterator"),qT=!1;[].keys&&("next"in(YT=[].keys())?(HT=JT(JT(YT)))!==Object.prototype&&(va=HT):qT=!0),(va==null||nF(function(){var t={};return va[fm].call(t)!==t}))&&(va={}),rF(va[fm])||iF(va,fm,function(){return this});var gm={IteratorPrototype:va,BUGGY_SAFARI_ITERATORS:qT},oF=gm.IteratorPrototype,sF=wc,aF=W,cF=ud,uF=Ad,dF=function(){return this},lF=ei,AF=gt,zT=sE,hF=Pe,pF=function(t,e,n,r){var i=e+" Iterator";return t.prototype=sF(oF,{next:aF(+!r,n)}),cF(t,i,!1),uF[i]=dF,t},XT=eh,ZT=pa,fF=ud,gF=vi,Em=Gi.exports,EF=Ad,mF=zT.PROPER,IF=zT.CONFIGURABLE,$T=gm.IteratorPrototype,nh=gm.BUGGY_SAFARI_ITERATORS,wd=bn("iterator"),tR="keys",bd="values",eR="entries",CF=function(){return this},_F=co,mm=function(t){hm[Am][t]=!0},nR=Ad,rR=Si,vF=Zn.f,SF=function(t,e,n,r,i,u,s){pF(n,e,r);var d,a,l,A=function(R){if(R===i&&_)return _;if(!nh&&R in E)return E[R];switch(R){case tR:case bd:case eR:return function(){return new n(this,R)}}return function(){return new n(this)}},p=e+" Iterator",f=!1,E=t.prototype,C=E[wd]||E["@@iterator"]||i&&E[i],_=!nh&&C||A(i),y=e=="Array"&&E.entries||C;if(y&&(d=XT(y.call(new t)))!==Object.prototype&&d.next&&(XT(d)!==$T&&(ZT?ZT(d,$T):hF(d[wd])||Em(d,wd,CF)),fF(d,p,!0)),mF&&i==bd&&C&&C.name!==bd&&(IF?gF(E,"name",bd):(f=!0,_=function(){return AF(C,this)})),i)if(a={values:A(bd),keys:u?_:A(tR),entries:A(eR)},s)for(l in a)(nh||f||!(l in E))&&Em(E,l,a[l]);else lF({target:e,proto:!0,forced:nh||f},a);return E[wd]!==_&&Em(E,wd,_,{name:i}),EF[e]=_,a},yF=M,iR="Array Iterator",TF=rR.set,RF=rR.getterFor(iR),wF=SF(Array,"Array",function(t,e){TF(this,{type:iR,target:_F(t),index:0,kind:e})},function(){var t=RF(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):n=="keys"?{value:r,done:!1}:n=="values"?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),oR=nR.Arguments=nR.Array;if(mm("keys"),mm("values"),mm("entries"),yF&&oR.name!=="values")try{vF(oR,"name",{value:"values"})}catch{}var Im=CA("span").classList,sR=Im&&Im.constructor&&Im.constructor.prototype,bF=sR===Object.prototype?void 0:sR,aR=m,cR={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},NF=bF,Nd=wF,Cm=vi,uR=bn,_m=uR("iterator"),dR=uR("toStringTag"),vm=Nd.values,lR=function(t,e){if(t){if(t[_m]!==vm)try{Cm(t,_m,vm)}catch{t[_m]=vm}if(t[dR]||Cm(t,dR,e),cR[e]){for(var n in Nd)if(t[n]!==Nd[n])try{Cm(t,n,Nd[n])}catch{t[n]=Nd[n]}}}};for(var Sm in cR)lR(aR[Sm]&&aR[Sm].prototype,Sm);lR(NF,"DOMTokenList");var OF=Pe,DF=fn,AR=pa,rh=function(t,e,n){var r,i;return AR&&OF(r=e.constructor)&&r!==n&&DF(i=r.prototype)&&i!==n.prototype&&AR(t,i),t},kF=Rc,ih=function(t,e){return t===void 0?arguments.length<2?"":e:kF(t)},PF=fn,LF=vi,BF=Dt("".replace),MF=String(Error("zxcasd").stack),hR=/\n\s*at [^:]*:[^\n]*/,UF=hR.test(MF),ym=function(t,e){if(UF&&typeof t=="string")for(;e--;)t=BF(t,hR,"");return t},xF=W,QF=!b(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",xF(1,7)),t.stack!==7)}),pR=ti,FF=Xn,Tm=vi,jF=hs,fR=pa,gR=uE,VF=rh,GF=ih,KF=function(t,e){PF(e)&&"cause"in e&&LF(t,"cause",e.cause)},HF=ym,YF=QF,ER=ei,ho=NA,mR=function(t,e,n,r){var i=r?2:1,u=t.split("."),s=u[u.length-1],d=pR.apply(null,u);if(d){var a=d.prototype;if(FF(a,"cause")&&delete a.cause,!n)return d;var l=pR("Error"),A=e(function(p,f){var E=GF(r?f:p,void 0),C=r?new d(p):new d;return E!==void 0&&Tm(C,"message",E),YF&&Tm(C,"stack",HF(C.stack,2)),this&&jF(a,this)&&VF(C,this,A),arguments.length>i&&KF(C,arguments[i]),C});A.prototype=a,s!=="Error"&&(fR?fR(A,l):gR(A,l,{name:!0})),gR(A,d);try{a.name!==s&&Tm(a,"name",s),a.constructor=A}catch{}return A}},WF="WebAssembly",IR=m.WebAssembly,oh=Error("e",{cause:7}).cause!==7,Sa=function(t,e){var n={};n[t]=mR(t,e,oh),ER({global:!0,forced:oh},n)},Rm=function(t,e){if(IR&&IR[t]){var n={};n[t]=mR("WebAssembly."+t,e,oh),ER({target:WF,stat:!0,forced:oh},n)}};Sa("Error",function(t){return function(e){return ho(t,this,arguments)}}),Sa("EvalError",function(t){return function(e){return ho(t,this,arguments)}}),Sa("RangeError",function(t){return function(e){return ho(t,this,arguments)}}),Sa("ReferenceError",function(t){return function(e){return ho(t,this,arguments)}}),Sa("SyntaxError",function(t){return function(e){return ho(t,this,arguments)}}),Sa("TypeError",function(t){return function(e){return ho(t,this,arguments)}}),Sa("URIError",function(t){return function(e){return ho(t,this,arguments)}}),Rm("CompileError",function(t){return function(e){return ho(t,this,arguments)}}),Rm("LinkError",function(t){return function(e){return ho(t,this,arguments)}}),Rm("RuntimeError",function(t){return function(e){return ho(t,this,arguments)}});let CR=!0,_R=!0;function Od(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Nc(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,d){if(s!==e)return i.apply(this,arguments);const a=l=>{const A=n(l);A&&(d.handleEvent?d.handleEvent(A):d(A))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(d,a),i.apply(this,[s,a])};const u=r.removeEventListener;r.removeEventListener=function(s,d){if(s!==e||!this._eventMap||!this._eventMap[e])return u.apply(this,arguments);if(!this._eventMap[e].has(d))return u.apply(this,arguments);const a=this._eventMap[e].get(d);return this._eventMap[e].delete(d),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[s,a])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function JF(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(CR=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function qF(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(_R=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function wm(){if(typeof window=="object"){if(CR)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function sh(t,e){_R&&console.warn(t+" is deprecated, please use "+e+" instead.")}function zF(t){const e={browser:null,version:null};if(t===void 0||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Od(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=Od(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=Od(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=Od(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype}return e}function vR(t){return Object.prototype.toString.call(t)==="[object Object]"}function SR(t){var e;return vR(t)?_a(e=Object.keys(t)).call(e,function(n,r){const i=vR(t[r]),u=i?SR(t[r]):t[r],s=i&&!Object.keys(u).length;return u===void 0||s?n:Object.assign(n,{[r]:u})},{}):t}function yR(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const u=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&u.push(s)}),u.forEach(s=>{t.forEach(d=>{d.type===r&&d.trackId===s.id&&function a(l,A,p){A&&!p.has(A.id)&&(p.set(A.id,A),Object.keys(A).forEach(f=>{f.endsWith("Id")?a(l,l.get(A[f]),p):f.endsWith("Ids")&&A[f].forEach(E=>{a(l,l.get(E),p)})}))}(t,d,i)})}),i}var XF=HA.exports,ZF=qE,TR=XF("keys"),ah=function(t){return TR[t]||(TR[t]=ZF(t))},$F=!gn(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),tj=se,ej=$n,nj=Un,rj=Ao,ij=$F,RR=ah("IE_PROTO"),bm=tj.Object,oj=bm.prototype,Nm=ij?bm.getPrototypeOf:function(t){var e=rj(t);if(ej(e,RR))return e[RR];var n=e.constructor;return nj(n)&&e instanceof n?n.prototype:e instanceof bm?oj:null},wR=se,sj=Un,aj=wR.String,cj=wR.TypeError,uj=Ve,dj=oi,lj=function(t){if(typeof t=="object"||sj(t))return t;throw cj("Can't set "+aj(t)+" as a prototype")},Aj=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=uj(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch{}return function(r,i){return dj(r),lj(i),e?t(r,i):r.__proto__=i,r}}():void 0),ch={},hj=$E,pj=Math.max,fj=Math.min,Om=function(t,e){var n=hj(t);return n<0?pj(n+e,0):fj(n,e)},gj=ms,Ej=Om,mj=ko,bR=function(t){return function(e,n,r){var i,u=gj(e),s=mj(u),d=Ej(r,s);if(t&&n!=n){for(;s>d;)if((i=u[d++])!=i)return!0}else for(;s>d;d++)if((t||d in u)&&u[d]===n)return t||d||0;return!t&&-1}},Ij={includes:bR(!0),indexOf:bR(!1)},uh={},Dm=$n,Cj=ms,_j=Ij.indexOf,vj=uh,NR=Ve([].push),OR=function(t,e){var n,r=Cj(t),i=0,u=[];for(n in r)!Dm(vj,n)&&Dm(r,n)&&NR(u,n);for(;e.length>i;)Dm(r,n=e[i++])&&(~_j(u,n)||NR(u,n));return u},km=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Sj=OR,yj=km.concat("length","prototype");ch.f=Object.getOwnPropertyNames||function(t){return Sj(t,yj)};var dh={};dh.f=Object.getOwnPropertySymbols;var Tj=Ki,Rj=ch,wj=dh,bj=oi,Nj=Ve([].concat),Oj=Tj("Reflect","ownKeys")||function(t){var e=Rj.f(bj(t)),n=wj.f;return n?Nj(e,n(t)):e},DR=$n,Dj=Oj,kj=Sd,Pj=Hi,lh={},Lj=OR,Bj=km,Ah=Object.keys||function(t){return Lj(t,Bj)},Mj=yi,Uj=OT,xj=Hi,Qj=oi,Fj=ms,jj=Ah;lh.f=Mj&&!Uj?Object.defineProperties:function(t,e){Qj(t);for(var n,r=Fj(e),i=jj(e),u=i.length,s=0;u>s;)xj.f(t,n=i[s++],r[n]);return t};var hh,kR=Ki("document","documentElement"),Vj=oi,Gj=lh,PR=km,Kj=uh,Hj=kR,Yj=XE,LR=ah("IE_PROTO"),Pm=function(){},BR=function(t){return"<script>"+t+"<\/script>"},MR=function(t){t.write(BR("")),t.close();var e=t.parentWindow.Object;return t=null,e},ph=function(){try{hh=new ActiveXObject("htmlfile")}catch{}var t,e;ph=typeof document!="undefined"?document.domain&&hh?MR(hh):((e=Yj("iframe")).style.display="none",Hj.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(BR("document.F=Object")),t.close(),t.F):MR(hh);for(var n=PR.length;n--;)delete ph.prototype[PR[n]];return ph()};Kj[LR]=!0;var Dd=Object.create||function(t,e){var n;return t!==null?(Pm.prototype=Vj(t),n=new Pm,Pm.prototype=null,n[LR]=t):n=ph(),e===void 0?n:Gj.f(n,e)},Wj=Ve("".replace),Jj=String(Error("zxcasd").stack),UR=/\n\s*at [^:]*:[^\n]*/,qj=UR.test(Jj),zj=ii,Xj=Ca,Oc={},Zj=Oc,$j=En("iterator"),tV=Array.prototype,xR=function(t){return t!==void 0&&(Zj.Array===t||tV[$j]===t)},QR={};QR[En("toStringTag")]="z";var Lm=String(QR)==="[object z]",eV=se,nV=Lm,rV=Un,fh=yd,iV=En("toStringTag"),oV=eV.Object,sV=fh(function(){return arguments}())=="Arguments",Po=nV?fh:function(t){var e,n,r;return t===void 0?"Undefined":t===null?"Null":typeof(n=function(i,u){try{return i[u]}catch{}}(e=oV(t),iV))=="string"?n:sV?fh(e):(r=fh(e))=="Object"&&rV(e.callee)?"Arguments":r},aV=Po,FR=KE,cV=Oc,uV=En("iterator"),gh=function(t){if(t!=null)return FR(t,uV)||FR(t,"@@iterator")||cV[aV(t)]},dV=Pr,lV=Do,AV=oi,hV=KA,pV=gh,fV=se.TypeError,Bm=function(t,e){var n=arguments.length<2?pV(t):e;if(lV(n))return AV(dV(n,t));throw fV(hV(t)+" is not iterable")},gV=Pr,jR=oi,EV=KE,VR=function(t,e,n){var r,i;jR(t);try{if(!(r=EV(t,"return"))){if(e==="throw")throw n;return n}r=gV(r,t)}catch(u){i=!0,r=u}if(e==="throw")throw n;if(i)throw r;return jR(r),n},mV=Is,IV=Pr,CV=oi,_V=KA,vV=xR,SV=ko,GR=ri,yV=Bm,TV=gh,KR=VR,RV=se.TypeError,Eh=function(t,e){this.stopped=t,this.result=e},HR=Eh.prototype,mh=function(t,e,n){var r,i,u,s,d,a,l,A=n&&n.that,p=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),C=mV(e,A),_=function(R){return r&&KR(r,"normal",R),new Eh(!0,R)},y=function(R){return p?(CV(R),E?C(R[0],R[1],_):C(R[0],R[1])):E?C(R,_):C(R)};if(f)r=t;else{if(!(i=TV(t)))throw RV(_V(t)+" is not iterable");if(vV(i)){for(u=0,s=SV(t);s>u;u++)if((d=y(t[u]))&&GR(HR,d))return d;return new Eh(!1)}r=yV(t,i)}for(a=r.next;!(l=IV(a,r)).done;){try{d=y(l.value)}catch(R){KR(r,"throw",R)}if(typeof d=="object"&&d&&GR(HR,d))return d}return new Eh(!1)},wV=Po,bV=se.String,_s=function(t){if(wV(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return bV(t)},NV=_s,OV=Es,DV=!gn(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",OV(1,7)),t.stack!==7)}),kV=xn,PV=se,LV=ri,BV=Nm,Ih=Aj,MV=function(t,e,n){for(var r=Dj(e),i=Pj.f,u=kj.f,s=0;s<r.length;s++){var d=r[s];DR(t,d)||n&&DR(n,d)||i(t,d,u(e,d))}},YR=Dd,Ch=Ca,Mm=Es,UV=function(t,e){if(qj&&typeof t=="string")for(;e--;)t=Wj(t,UR,"");return t},xV=function(t,e){zj(e)&&"cause"in e&&Xj(t,"cause",e.cause)},QV=mh,FV=function(t,e){return t===void 0?arguments.length<2?"":e:NV(t)},jV=DV,VV=En("toStringTag"),_h=PV.Error,GV=[].push,kd=function(t,e){var n,r=arguments.length>2?arguments[2]:void 0,i=LV(Um,this);Ih?n=Ih(new _h,i?BV(this):Um):(n=i?this:YR(Um),Ch(n,VV,"Error")),e!==void 0&&Ch(n,"message",FV(e)),jV&&Ch(n,"stack",UV(n.stack,1)),xV(n,r);var u=[];return QV(t,GV,{that:u}),Ch(n,"errors",u),n};Ih?Ih(kd,_h):MV(kd,_h,{name:!0});var Um=kd.prototype=YR(_h.prototype,{constructor:Mm(1,kd),message:Mm(1,""),name:Mm(1,"AggregateError")});kV({global:!0},{AggregateError:kd});var KV=Un,xm=JE,HV=Ve(Function.toString);KV(xm.inspectSource)||(xm.inspectSource=function(t){return HV(t)});var vh,Pd,Sh,Qm=xm.inspectSource,YV=Un,WV=Qm,WR=se.WeakMap,JV=YV(WR)&&/native code/.test(WV(WR)),JR=se,Fm=Ve,qV=ii,zV=Ca,jm=$n,Vm=JE,XV=ah,ZV=uh,qR="Object already initialized",Gm=JR.TypeError,$V=JR.WeakMap;if(JV||Vm.state){var ya=Vm.state||(Vm.state=new $V),tG=Fm(ya.get),zR=Fm(ya.has),eG=Fm(ya.set);vh=function(t,e){if(zR(ya,t))throw new Gm(qR);return e.facade=t,eG(ya,t,e),e},Pd=function(t){return tG(ya,t)||{}},Sh=function(t){return zR(ya,t)}}else{var Dc=XV("state");ZV[Dc]=!0,vh=function(t,e){if(jm(t,Dc))throw new Gm(qR);return e.facade=t,zV(t,Dc,e),e},Pd=function(t){return jm(t,Dc)?t[Dc]:{}},Sh=function(t){return jm(t,Dc)}}var Ta,XR,ZR,kc={set:vh,get:Pd,has:Sh,enforce:function(t){return Sh(t)?Pd(t):vh(t,{})},getterFor:function(t){return function(e){var n;if(!qV(e)||(n=Pd(e)).type!==t)throw Gm("Incompatible receiver, "+t+" required");return n}}},Km=yi,nG=$n,$R=Function.prototype,rG=Km&&Object.getOwnPropertyDescriptor,Hm=nG($R,"name"),t2={EXISTS:Hm,PROPER:Hm&&function(){}.name==="something",CONFIGURABLE:Hm&&(!Km||Km&&rG($R,"name").configurable)},iG=Ca,Pc=function(t,e,n,r){r&&r.enumerable?t[e]=n:iG(t,e,n)},oG=gn,sG=Un,aG=Dd,e2=Nm,cG=Pc,Ym=En("iterator"),n2=!1;[].keys&&("next"in(ZR=[].keys())?(XR=e2(e2(ZR)))!==Object.prototype&&(Ta=XR):n2=!0);var uG=Ta==null||oG(function(){var t={};return Ta[Ym].call(t)!==t});sG((Ta=uG?{}:aG(Ta))[Ym])||cG(Ta,Ym,function(){return this});var r2={IteratorPrototype:Ta,BUGGY_SAFARI_ITERATORS:n2},dG=Po,lG=Lm?{}.toString:function(){return"[object "+dG(this)+"]"},AG=Lm,hG=Hi.f,pG=Ca,fG=$n,gG=lG,i2=En("toStringTag"),Ra=function(t,e,n,r){if(t){var i=n?t:t.prototype;fG(i,i2)||hG(i,i2,{configurable:!0,value:e}),r&&!AG&&pG(i,"toString",gG)}},EG=r2.IteratorPrototype,mG=Dd,IG=Es,CG=Ra,_G=Oc,vG=function(){return this},o2=function(t,e,n,r){var i=e+" Iterator";return t.prototype=mG(EG,{next:IG(+!r,n)}),CG(t,i,!1,!0),_G[i]=vG,t},SG=xn,yG=Pr,TG=o2,RG=Nm,wG=Ra,s2=Pc,a2=Oc,bG=t2.PROPER,yh=r2.BUGGY_SAFARI_ITERATORS,Wm=En("iterator"),c2="keys",Th="values",u2="entries",NG=function(){return this},d2=function(t,e,n,r,i,u,s){TG(n,e,r);var d,a,l,A=function(R){if(R===i&&_)return _;if(!yh&&R in E)return E[R];switch(R){case c2:case Th:case u2:return function(){return new n(this,R)}}return function(){return new n(this)}},p=e+" Iterator",f=!1,E=t.prototype,C=E[Wm]||E["@@iterator"]||i&&E[i],_=!yh&&C||A(i),y=e=="Array"&&E.entries||C;if(y&&(d=RG(y.call(new t)))!==Object.prototype&&d.next&&(wG(d,p,!0,!0),a2[p]=NG),bG&&i==Th&&C&&C.name!==Th&&(f=!0,_=function(){return yG(C,this)}),i)if(a={values:A(Th),keys:u?_:A(c2),entries:A(u2)},s)for(l in a)(yh||f||!(l in E))&&s2(E,l,a[l]);else SG({target:e,proto:!0,forced:yh||f},a);return s&&E[Wm]!==_&&s2(E,Wm,_,{name:i}),a2[e]=_,a},OG=ms,l2=Oc,A2=kc;Hi.f;var DG=d2,h2="Array Iterator",kG=A2.set,PG=A2.getterFor(h2);DG(Array,"Array",function(t,e){kG(this,{type:h2,target:OG(t),index:0,kind:e})},function(){var t=PG(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):n=="keys"?{value:r,done:!1}:n=="values"?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),l2.Arguments=l2.Array;var p2=se.Promise,LG=Pc,f2=function(t,e,n){for(var r in e)n&&n.unsafe&&t[r]?t[r]=e[r]:LG(t,r,e[r],n);return t},BG=Ki,MG=Hi,UG=yi,g2=En("species"),xG=ri,QG=se.TypeError,Jm=function(t,e){if(xG(e,t))return t;throw QG("Incorrect invocation")},E2=En("iterator"),m2=!1;try{var FG=0,I2={next:function(){return{done:!!FG++}},return:function(){m2=!0}};I2[E2]=function(){return this},Array.from(I2,function(){throw 2})}catch{}var jG=Ve,VG=gn,C2=Un,GG=Po,KG=Qm,_2=function(){},HG=[],v2=Ki("Reflect","construct"),qm=/^\s*(?:class|function)\b/,YG=jG(qm.exec),WG=!qm.exec(_2),Ld=function(t){if(!C2(t))return!1;try{return v2(_2,HG,t),!0}catch{return!1}},S2=function(t){if(!C2(t))return!1;switch(GG(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return WG||!!YG(qm,KG(t))}catch{return!0}};S2.sham=!0;var Bd,Lc,y2,zm,Rh=!v2||VG(function(){var t;return Ld(Ld.call)||!Ld(Object)||!Ld(function(){t=!0})||t})?S2:Ld,JG=Rh,qG=KA,zG=se.TypeError,T2=oi,XG=function(t){if(JG(t))return t;throw zG(qG(t)+" is not a constructor")},ZG=En("species"),R2=function(t,e){var n,r=T2(t).constructor;return r===void 0||(n=T2(r)[ZG])==null?e:XG(n)},Xm=Ve([].slice),w2=/(?:ipad|iphone|ipod).*applewebkit/i.test(ma),si=se,$G=UE,tK=Is,b2=Un,eK=$n,nK=gn,N2=kR,rK=Xm,O2=XE,iK=w2,oK=qA,Zm=si.setImmediate,$m=si.clearImmediate,sK=si.process,t1=si.Dispatch,aK=si.Function,D2=si.MessageChannel,cK=si.String,e1=0,Md={},uK="onreadystatechange";try{Bd=si.location}catch{}var n1=function(t){if(eK(Md,t)){var e=Md[t];delete Md[t],e()}},r1=function(t){return function(){n1(t)}},k2=function(t){n1(t.data)},P2=function(t){si.postMessage(cK(t),Bd.protocol+"//"+Bd.host)};Zm&&$m||(Zm=function(t){var e=rK(arguments,1);return Md[++e1]=function(){$G(b2(t)?t:aK(t),void 0,e)},Lc(e1),e1},$m=function(t){delete Md[t]},oK?Lc=function(t){sK.nextTick(r1(t))}:t1&&t1.now?Lc=function(t){t1.now(r1(t))}:D2&&!iK?(zm=(y2=new D2).port2,y2.port1.onmessage=k2,Lc=tK(zm.postMessage,zm)):si.addEventListener&&b2(si.postMessage)&&!si.importScripts&&Bd&&Bd.protocol!=="file:"&&!nK(P2)?(Lc=P2,si.addEventListener("message",k2,!1)):Lc=uK in O2("script")?function(t){N2.appendChild(O2("script")).onreadystatechange=function(){N2.removeChild(this),n1(t)}}:function(t){setTimeout(r1(t),0)});var Ud,wa,xd,Bc,i1,o1,s1,L2,B2={set:Zm,clear:$m},dK=se,lK=/ipad|iphone|ipod/i.test(ma)&&dK.Pebble!==void 0,AK=/web0s(?!.*chrome)/i.test(ma),ba=se,M2=Is,hK=Sd.f,a1=B2.set,pK=w2,fK=lK,gK=AK,c1=qA,U2=ba.MutationObserver||ba.WebKitMutationObserver,x2=ba.document,Q2=ba.process,wh=ba.Promise,F2=hK(ba,"queueMicrotask"),j2=F2&&F2.value;j2||(Ud=function(){var t,e;for(c1&&(t=Q2.domain)&&t.exit();wa;){e=wa.fn,wa=wa.next;try{e()}catch(n){throw wa?Bc():xd=void 0,n}}xd=void 0,t&&t.enter()},pK||c1||gK||!U2||!x2?!fK&&wh&&wh.resolve?((s1=wh.resolve(void 0)).constructor=wh,L2=M2(s1.then,s1),Bc=function(){L2(Ud)}):c1?Bc=function(){Q2.nextTick(Ud)}:(a1=M2(a1,ba),Bc=function(){a1(Ud)}):(i1=!0,o1=x2.createTextNode(""),new U2(Ud).observe(o1,{characterData:!0}),Bc=function(){o1.data=i1=!i1}));var EK=j2||function(t){var e={fn:t,next:void 0};xd&&(xd.next=e),wa||(wa=e,Bc()),xd=e},Mc={},V2=Do,mK=function(t){var e,n;this.promise=new t(function(r,i){if(e!==void 0||n!==void 0)throw TypeError("Bad Promise constructor");e=r,n=i}),this.resolve=V2(e),this.reject=V2(n)};Mc.f=function(t){return new mK(t)};var IK=oi,CK=ii,_K=Mc,G2=function(t,e){if(IK(t),CK(e)&&e.constructor===t)return e;var n=_K.f(t);return(0,n.resolve)(e),n.promise},vK=se,bh=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},K2=function(){this.head=null,this.tail=null};K2.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var u1,H2,d1,SK=typeof window=="object",Nh=xn,Lo=se,yK=Ki,vs=Pr,l1=p2,TK=f2,RK=Ra,wK=function(t){var e=BG(t),n=MG.f;UG&&e&&!e[g2]&&n(e,g2,{configurable:!0,get:function(){return this}})},A1=Do,Oh=Un,bK=ii,NK=Jm,OK=Qm,Y2=mh,DK=function(t,e){if(!e&&!m2)return!1;var n=!1;try{var r={};r[E2]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch{}return n},kK=R2,W2=B2.set,h1=EK,PK=G2,LK=function(t,e){var n=vK.console;n&&n.error&&(arguments.length==1?n.error(t):n.error(t,e))},J2=Mc,p1=bh,BK=K2,f1=kc,MK=NT,UK=SK,Dh=qA,q2=Sc,xK=En("species"),po="Promise",z2=f1.getterFor(po),QK=f1.set,FK=f1.getterFor(po),jK=l1&&l1.prototype,fo=l1,kh=jK,X2=Lo.TypeError,g1=Lo.document,E1=Lo.process,Uc=J2.f,VK=Uc,GK=!!(g1&&g1.createEvent&&Lo.dispatchEvent),Z2=Oh(Lo.PromiseRejectionEvent),$2="unhandledrejection",Ph=MK(po,function(){var t=OK(fo),e=t!==String(fo);if(!e&&q2===66||!kh.finally)return!0;if(q2>=51&&/native code/.test(t))return!1;var n=new fo(function(i){i(1)}),r=function(i){i(function(){},function(){})};return(n.constructor={})[xK]=r,!(n.then(function(){})instanceof r)||!e&&UK&&!Z2}),KK=Ph||!DK(function(t){fo.all(t).catch(function(){})}),tw=function(t){var e;return!(!bK(t)||!Oh(e=t.then))&&e},ew=function(t,e){var n,r,i,u=e.value,s=e.state==1,d=s?t.ok:t.fail,a=t.resolve,l=t.reject,A=t.domain;try{d?(s||(e.rejection===2&&YK(e),e.rejection=1),d===!0?n=u:(A&&A.enter(),n=d(u),A&&(A.exit(),i=!0)),n===t.promise?l(X2("Promise-chain cycle")):(r=tw(n))?vs(r,n,a,l):a(n)):l(u)}catch(p){A&&!i&&A.exit(),l(p)}},nw=function(t,e){t.notified||(t.notified=!0,h1(function(){for(var n,r=t.reactions;n=r.get();)ew(n,t);t.notified=!1,e&&!t.rejection&&HK(t)}))},rw=function(t,e,n){var r,i;GK?((r=g1.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Lo.dispatchEvent(r)):r={promise:e,reason:n},!Z2&&(i=Lo["on"+t])?i(r):t===$2&&LK("Unhandled promise rejection",n)},HK=function(t){vs(W2,Lo,function(){var e,n=t.facade,r=t.value;if(iw(t)&&(e=p1(function(){Dh?E1.emit("unhandledRejection",r,n):rw($2,n,r)}),t.rejection=Dh||iw(t)?2:1,e.error))throw e.value})},iw=function(t){return t.rejection!==1&&!t.parent},YK=function(t){vs(W2,Lo,function(){var e=t.facade;Dh?E1.emit("rejectionHandled",e):rw("rejectionhandled",e,t.value)})},xc=function(t,e,n){return function(r){t(e,r,n)}},Qc=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,nw(t,!0))},m1=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw X2("Promise can't be resolved itself");var r=tw(e);r?h1(function(){var i={done:!1};try{vs(r,e,xc(m1,i,t),xc(Qc,i,t))}catch(u){Qc(i,u,t)}}):(t.value=e,t.state=1,nw(t,!1))}catch(i){Qc({done:!1},i,t)}}};Ph&&(kh=(fo=function(t){NK(this,kh),A1(t),vs(u1,this);var e=z2(this);try{t(xc(m1,e),xc(Qc,e))}catch(n){Qc(e,n)}}).prototype,(u1=function(t){QK(this,{type:po,done:!1,notified:!1,parent:!1,reactions:new BK,rejection:!1,state:0,value:void 0})}).prototype=TK(kh,{then:function(t,e){var n=FK(this),r=Uc(kK(this,fo));return n.parent=!0,r.ok=!Oh(t)||t,r.fail=Oh(e)&&e,r.domain=Dh?E1.domain:void 0,n.state==0?n.reactions.add(r):h1(function(){ew(r,n)}),r.promise},catch:function(t){return this.then(void 0,t)}}),H2=function(){var t=new u1,e=z2(t);this.promise=t,this.resolve=xc(m1,e),this.reject=xc(Qc,e)},J2.f=Uc=function(t){return t===fo||t===d1?new H2(t):VK(t)}),Nh({global:!0,wrap:!0,forced:Ph},{Promise:fo}),RK(fo,po,!1,!0),wK(po),d1=yK(po),Nh({target:po,stat:!0,forced:Ph},{reject:function(t){var e=Uc(this);return vs(e.reject,void 0,t),e.promise}}),Nh({target:po,stat:!0,forced:!0},{resolve:function(t){return PK(this===d1?fo:this,t)}}),Nh({target:po,stat:!0,forced:KK},{all:function(t){var e=this,n=Uc(e),r=n.resolve,i=n.reject,u=p1(function(){var s=A1(e.resolve),d=[],a=0,l=1;Y2(t,function(A){var p=a++,f=!1;l++,vs(s,e,A).then(function(E){f||(f=!0,d[p]=E,--l||r(d))},i)}),--l||r(d)});return u.error&&i(u.value),n.promise},race:function(t){var e=this,n=Uc(e),r=n.reject,i=p1(function(){var u=A1(e.resolve);Y2(t,function(s){vs(u,e,s).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}});var WK=Pr,JK=Do,qK=Mc,zK=bh,XK=mh;xn({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=qK.f(e),r=n.resolve,i=n.reject,u=zK(function(){var s=JK(e.resolve),d=[],a=0,l=1;XK(t,function(A){var p=a++,f=!1;l++,WK(s,e,A).then(function(E){f||(f=!0,d[p]={status:"fulfilled",value:E},--l||r(d))},function(E){f||(f=!0,d[p]={status:"rejected",reason:E},--l||r(d))})}),--l||r(d)});return u.error&&i(u.value),n.promise}});var ZK=Do,$K=Ki,tH=Pr,eH=Mc,nH=bh,rH=mh,ow="No one promise resolved";xn({target:"Promise",stat:!0},{any:function(t){var e=this,n=$K("AggregateError"),r=eH.f(e),i=r.resolve,u=r.reject,s=nH(function(){var d=ZK(e.resolve),a=[],l=0,A=1,p=!1;rH(t,function(f){var E=l++,C=!1;A++,tH(d,e,f).then(function(_){C||p||(p=!0,i(_))},function(_){C||p||(C=!0,a[E]=_,--A||u(new n(a,ow)))})}),--A||u(new n(a,ow))});return s.error&&u(s.value),r.promise}});var sw=p2,iH=Ki,oH=Un,sH=R2,aw=G2;xn({target:"Promise",proto:!0,real:!0,forced:!!sw&&gn(function(){sw.prototype.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=sH(this,iH("Promise")),n=oH(t);return this.then(n?function(r){return aw(e,t()).then(function(){return r})}:t,n?function(r){return aw(e,t()).then(function(){throw r})}:t)}});var I1=Ve,aH=$E,cH=_s,uH=GA,dH=I1("".charAt),cw=I1("".charCodeAt),lH=I1("".slice),uw=function(t){return function(e,n){var r,i,u=cH(uH(e)),s=aH(n),d=u.length;return s<0||s>=d?t?"":void 0:(r=cw(u,s))<55296||r>56319||s+1===d||(i=cw(u,s+1))<56320||i>57343?t?dH(u,s):r:t?lH(u,s,s+2):i-56320+(r-55296<<10)+65536}},dw={codeAt:uw(!1),charAt:uw(!0)},AH=dw.charAt,hH=_s,lw=kc,pH=d2,Aw="String Iterator",fH=lw.set,gH=lw.getterFor(Aw);pH(String,"String",function(t){fH(this,{type:Aw,string:hH(t),index:0})},function(){var t,e=gH(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=AH(n,r),e.index+=t.length,{value:t,done:!1})});var EH=Oo.Promise,mH={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},IH=se,CH=Po,_H=Ca,hw=Oc,pw=En("toStringTag");for(var C1 in mH){var fw=IH[C1],_1=fw&&fw.prototype;_1&&CH(_1)!==pw&&_H(_1,pw,C1),hw[C1]=hw.Array}var gw=EH,Nt=gw,vH=OA,SH=M,yH=b,TH=ur,RH=wc,Ew=ih,Lh=Error.prototype.toString,wH=yH(function(){if(SH){var t=RH(Object.defineProperty({},"name",{get:function(){return this===t}}));if(Lh.call(t)!=="true")return!0}return Lh.call({message:1,name:2})!=="2: 1"||Lh.call({})!=="Error"})?function(){var t=TH(this),e=Ew(t.name,"Error"),n=Ew(t.message);return e?n?e+": "+n:e:n}:Lh,mw={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},bH=ei,NH=function(t){try{if(vH)return Function('return require("'+t+'")')()}catch{}},Bh=ti,v1=b,OH=wc,S1=W,Qd=Zn.f,DH=om.f,kH=Gi.exports,Mh=Xn,PH=dd,LH=ur,Iw=wH,Cw=ih,Fc=mw,BH=ym,_w=Si,y1=M,jc="DOMException",MH="DATA_CLONE_ERR",Uh=Bh("Error"),Bo=Bh(jc)||function(){try{new(Bh("MessageChannel")||NH("worker_threads").MessageChannel)().port1.postMessage(new WeakMap)}catch(t){if(t.name==MH&&t.code==25)return t.constructor}}(),UH=Bo&&Bo.prototype,vw=Uh.prototype,xH=_w.set,QH=_w.getterFor(jc),FH="stack"in Uh(jc),Sw=function(t){return Mh(Fc,t)&&Fc[t].m?Fc[t].c:0},T1=function(){PH(this,R1);var t=arguments.length,e=Cw(t<1?void 0:arguments[0]),n=Cw(t<2?void 0:arguments[1],"Error"),r=Sw(n);if(xH(this,{type:jc,name:n,message:e,code:r}),y1||(this.name=n,this.message=e,this.code=r),FH){var i=Uh(e);i.name=jc,Qd(this,"stack",S1(1,BH(i.stack,1)))}},R1=T1.prototype=OH(vw),yw=function(t){return{enumerable:!0,configurable:!0,get:t}},w1=function(t){return yw(function(){return QH(this)[t]})};y1&&DH(R1,{name:w1("name"),message:w1("message"),code:w1("code")}),Qd(R1,"constructor",S1(1,T1));var Fd=v1(function(){return!(new Bo instanceof Uh)}),jH=Fd||v1(function(){return vw.toString!==Iw||String(new Bo(1,2))!=="2: 1"}),VH=Fd||v1(function(){return new Bo(1,"DataCloneError").code!==25});Fd||Bo.DATA_CLONE_ERR!==25||UH.DATA_CLONE_ERR,bH({global:!0,forced:Fd},{DOMException:Fd?T1:Bo});var jd=Bh(jc),xh=jd.prototype;for(var Tw in jH&&Bo===jd&&kH(xh,"toString",Iw),VH&&y1&&Bo===jd&&Qd(xh,"code",yw(function(){return Sw(LH(this).name)})),Fc)if(Mh(Fc,Tw)){var Rw=Fc[Tw],Qh=Rw.s,ww=S1(6,Rw.c);Mh(jd,Qh)||Qd(jd,Qh,ww),Mh(xh,Qh)||Qd(xh,Qh,ww)}var GH=ei,b1=ti,N1=W,O1=Zn.f,bw=Xn,KH=dd,HH=rh,Nw=ih,D1=mw,YH=ym,Fh="DOMException",Ow=b1("Error"),jh=b1(Fh),k1=function(){KH(this,WH);var t=arguments.length,e=Nw(t<1?void 0:arguments[0]),n=Nw(t<2?void 0:arguments[1],"Error"),r=new jh(e,n),i=Ow(e);return i.name=Fh,O1(r,"stack",N1(1,YH(i.stack,1))),HH(r,this,k1),r},WH=k1.prototype=jh.prototype,JH="stack"in Ow(Fh),qH="stack"in new jh(1,2),Dw=JH&&!qH;GH({global:!0,forced:Dw},{DOMException:Dw?k1:jh});var Vd=b1(Fh),kw=Vd.prototype;if(kw.constructor!==Vd){for(var Pw in O1(kw,"constructor",N1(1,Vd)),D1)if(bw(D1,Pw)){var Lw=D1[Pw],Bw=Lw.s;bw(Vd,Bw)||O1(Vd,Bw,N1(6,Lw.c))}}var Mw="DOMException";ud(ti(Mw),Mw);var Uw=Dt,xw=Gi.exports,zH=th,Qw=b,Fw=bn,XH=vi,ZH=Fw("species"),P1=RegExp.prototype,L1=Dt,$H=ps,tY=Rc,eY=pe,nY=L1("".charAt),jw=L1("".charCodeAt),rY=L1("".slice),Vw=function(t){return function(e,n){var r,i,u=tY(eY(e)),s=$H(n),d=u.length;return s<0||s>=d?t?"":void 0:(r=jw(u,s))<55296||r>56319||s+1===d||(i=jw(u,s+1))<56320||i>57343?t?nY(u,s):r:t?rY(u,s,s+2):i-56320+(r-55296<<10)+65536}},iY={codeAt:Vw(!1),charAt:Vw(!0)}.charAt,B1=Dt,oY=la,sY=Math.floor,M1=B1("".charAt),aY=B1("".replace),U1=B1("".slice),cY=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,uY=/\$([$&'`]|\d{1,2})/g,Gw=gt,dY=ur,lY=Pe,AY=$r,hY=th,pY=m.TypeError,fY=NA,Kw=gt,Vh=Dt,gY=function(t,e,n,r){var i=Fw(t),u=!Qw(function(){var l={};return l[i]=function(){return 7},""[t](l)!=7}),s=u&&!Qw(function(){var l=!1,A=/a/;return t==="split"&&((A={}).constructor={},A.constructor[ZH]=function(){return A},A.flags="",A[i]=/./[i]),A.exec=function(){return l=!0,null},A[i](""),!l});if(!u||!s||n){var d=Uw(/./[i]),a=e(i,""[t],function(l,A,p,f,E){var C=Uw(l),_=A.exec;return _===zH||_===P1.exec?u&&!E?{done:!0,value:d(A,p,f)}:{done:!0,value:C(p,A,f)}:{done:!1}});xw(String.prototype,t,a[0]),xw(P1,i,a[1])}r&&XH(P1[i],"sham",!0)},EY=b,mY=ur,IY=Pe,CY=ps,_Y=Ec,Vc=Rc,vY=pe,SY=function(t,e,n){return e+(n?iY(t,e).length:1)},yY=EA,TY=function(t,e,n,r,i,u){var s=n+t.length,d=r.length,a=uY;return i!==void 0&&(i=oY(i),a=cY),aY(u,a,function(l,A){var p;switch(M1(A,0)){case"$":return"$";case"&":return t;case"`":return U1(e,0,n);case"'":return U1(e,s);case"<":p=i[U1(A,1,-1)];break;default:var f=+A;if(f===0)return l;if(f>d){var E=sY(f/10);return E===0?l:E<=d?r[E-1]===void 0?M1(A,1):r[E-1]+M1(A,1):l}p=r[f-1]}return p===void 0?"":p})},RY=function(t,e){var n=t.exec;if(lY(n)){var r=Gw(n,t,e);return r!==null&&dY(r),r}if(AY(t)==="RegExp")return Gw(hY,t,e);throw pY("RegExp#exec called on incompatible receiver")},x1=bn("replace"),wY=Math.max,bY=Math.min,NY=Vh([].concat),Q1=Vh([].push),Hw=Vh("".indexOf),Yw=Vh("".slice),OY="a".replace(/./,"$0")==="$0",Ww=!!/./[x1]&&/./[x1]("a","$0")==="";gY("replace",function(t,e,n){var r=Ww?"$":"$0";return[function(i,u){var s=vY(this),d=i==null?void 0:yY(i,x1);return d?Kw(d,i,s,u):Kw(e,Vc(s),i,u)},function(i,u){var s=mY(this),d=Vc(i);if(typeof u=="string"&&Hw(u,r)===-1&&Hw(u,"$<")===-1){var a=n(e,s,d,u);if(a.done)return a.value}var l=IY(u);l||(u=Vc(u));var A=s.global;if(A){var p=s.unicode;s.lastIndex=0}for(var f=[];;){var E=RY(s,d);if(E===null||(Q1(f,E),!A))break;Vc(E[0])===""&&(s.lastIndex=SY(d,_Y(s.lastIndex),p))}for(var C,_="",y=0,R=0;R<f.length;R++){for(var O=Vc((E=f[R])[0]),D=wY(bY(CY(E.index),d.length),0),L=[],G=1;G<E.length;G++)Q1(L,(C=E[G])===void 0?C:String(C));var Z=E.groups;if(l){var nt=NY([O],L,D,d);Z!==void 0&&Q1(nt,Z);var it=Vc(fY(u,void 0,nt))}else it=TY(O,d,D,L,Z,u);D>=y&&(_+=Yw(d,y,D)+it,y=D+O.length)}return _+Yw(d,y)}]},!!EY(function(){var t=/./;return t.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(t,"$<a>")!=="7"})||!OY||Ww);var DY=fn,kY=$r,PY=bn("match"),LY=M,F1=m,Gc=Dt,BY=dE,MY=rh,UY=vi,xY=Zn.f,QY=ad.f,Jw=hs,FY=function(t){var e;return DY(t)&&((e=t[PY])!==void 0?!!e:kY(t)=="RegExp")},qw=Rc,jY=UT,zw=xT,VY=Gi.exports,GY=b,KY=Xn,HY=Si.enforce,YY=RA,Xw=am,Zw=GT,WY=bn("match"),Mo=F1.RegExp,Kc=Mo.prototype,JY=F1.SyntaxError,qY=Gc(jY),zY=Gc(Kc.exec),Gh=Gc("".charAt),$w=Gc("".replace),tb=Gc("".indexOf),XY=Gc("".slice),ZY=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Na=/a/g,j1=/a/g,$Y=new Mo(Na)!==Na,eb=zw.MISSED_STICKY,tW=zw.UNSUPPORTED_Y,eW=LY&&(!$Y||eb||Xw||Zw||GY(function(){return j1[WY]=!1,Mo(Na)!=Na||Mo(j1)==j1||Mo(Na,"i")!="/a/i"}));if(BY("RegExp",eW)){for(var Ss=function(t,e){var n,r,i,u,s,d,a=Jw(Kc,this),l=FY(t),A=e===void 0,p=[],f=t;if(!a&&l&&A&&t.constructor===Ss)return t;if((l||Jw(Kc,t))&&(t=t.source,A&&(e="flags"in f?f.flags:qY(f))),t=t===void 0?"":qw(t),e=e===void 0?"":qw(e),f=t,Xw&&"dotAll"in Na&&(r=!!e&&tb(e,"s")>-1)&&(e=$w(e,/s/g,"")),n=e,eb&&"sticky"in Na&&(i=!!e&&tb(e,"y")>-1)&&tW&&(e=$w(e,/y/g,"")),Zw&&(t=(u=function(E){for(var C,_=E.length,y=0,R="",O=[],D={},L=!1,G=!1,Z=0,nt="";y<=_;y++){if((C=Gh(E,y))==="\\")C+=Gh(E,++y);else if(C==="]")L=!1;else if(!L)switch(!0){case C==="[":L=!0;break;case C==="(":zY(ZY,XY(E,y+1))&&(y+=2,G=!0),R+=C,Z++;continue;case(C===">"&&G):if(nt===""||KY(D,nt))throw new JY("Invalid capture group name");D[nt]=!0,O[O.length]=[nt,Z],G=!1,nt="";continue}G?nt+=C:R+=C}return[R,O]}(t))[0],p=u[1]),s=MY(Mo(t,e),a?this:Kc,Ss),(r||i||p.length)&&(d=HY(s),r&&(d.dotAll=!0,d.raw=Ss(function(E){for(var C,_=E.length,y=0,R="",O=!1;y<=_;y++)(C=Gh(E,y))!=="\\"?O||C!=="."?(C==="["?O=!0:C==="]"&&(O=!1),R+=C):R+="[\\s\\S]":R+=C+Gh(E,++y);return R}(t),n)),i&&(d.sticky=!0),p.length&&(d.groups=p)),t!==f)try{UY(s,"source",f===""?"(?:)":f)}catch{}return s},nW=function(t){t in Ss||xY(Ss,t,{configurable:!0,get:function(){return Mo[t]},set:function(e){Mo[t]=e}})},nb=QY(Mo),rb=0;nb.length>rb;)nW(nb[rb++]);Kc.constructor=Ss,Ss.prototype=Kc,VY(F1,"RegExp",Ss)}YY("RegExp");var rW=m,iW=M,oW=am,sW=$r,aW=Zn.f,cW=Si.get,ib=RegExp.prototype,uW=rW.TypeError;iW&&oW&&aW(ib,"dotAll",{configurable:!0,get:function(){if(this!==ib){if(sW(this)==="RegExp")return!!cW(this).dotAll;throw uW("Incompatible receiver, RegExp required")}}});const ob=wm;function sb(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(s){if(typeof s!="object"||s.mandatory||s.optional)return s;const d={};return Object.keys(s).forEach(a=>{if(a==="require"||a==="advanced"||a==="mediaSource")return;const l=typeof s[a]=="object"?s[a]:{ideal:s[a]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);const A=function(p,f){return p?p+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(l.ideal!==void 0){d.optional=d.optional||[];let p={};typeof l.ideal=="number"?(p[A("min",a)]=l.ideal,d.optional.push(p),p={},p[A("max",a)]=l.ideal,d.optional.push(p)):(p[A("",a)]=l.ideal,d.optional.push(p))}l.exact!==void 0&&typeof l.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[A("",a)]=l.exact):["min","max"].forEach(p=>{l[p]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[A(p,a)]=l[p])})}),s.advanced&&(d.optional=(d.optional||[]).concat(s.advanced)),d},i=function(s,d){if(e.version>=61)return d(s);if((s=JSON.parse(JSON.stringify(s)))&&typeof s.audio=="object"){const a=function(l,A,p){A in l&&!(p in l)&&(l[p]=l[A],delete l[A])};a((s=JSON.parse(JSON.stringify(s))).audio,"autoGainControl","googAutoGainControl"),a(s.audio,"noiseSuppression","googNoiseSuppression"),s.audio=r(s.audio)}if(s&&typeof s.video=="object"){let a=s.video.facingMode;a=a&&(typeof a=="object"?a:{ideal:a});const l=e.version<66;if(a&&(a.exact==="user"||a.exact==="environment"||a.ideal==="user"||a.ideal==="environment")&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)){let A;if(delete s.video.facingMode,a.exact==="environment"||a.ideal==="environment"?A=["back","rear"]:a.exact!=="user"&&a.ideal!=="user"||(A=["front"]),A)return n.mediaDevices.enumerateDevices().then(p=>{let f=(p=p.filter(E=>E.kind==="videoinput")).find(E=>A.some(C=>E.label.toLowerCase().includes(C)));return!f&&p.length&&A.includes("back")&&(f=p[p.length-1]),f&&(s.video.deviceId=a.exact?{exact:f.deviceId}:{ideal:f.deviceId}),s.video=r(s.video),ob("chrome: "+JSON.stringify(s)),d(s)})}s.video=r(s.video)}return ob("chrome: "+JSON.stringify(s)),d(s)},u=function(s){return e.version>=64?s:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[s.name]||s.name,message:s.message,constraint:s.constraint||s.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(s,d,a){i(s,l=>{n.webkitGetUserMedia(l,d,A=>{a&&a(u(A))})})}.bind(n),n.mediaDevices.getUserMedia){const s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return i(d,a=>s(a).then(l=>{if(a.audio&&!l.getAudioTracks().length||a.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(A=>{A.stop()}),new DOMException("","NotFoundError");return l},l=>Nt.reject(u(l))))}}}function ab(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function cb(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",r=>{let i;i=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(s=>s.track&&s.track.id===r.track.id):{track:r.track};const u=new Event("track");u.track=r.track,u.receiver=i,u.transceiver={receiver:i},u.streams=[n.stream],this.dispatchEvent(u)}),n.stream.getTracks().forEach(r=>{let i;i=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(s=>s.track&&s.track.id===r.id):{track:r};const u=new Event("track");u.track=r,u.receiver=i,u.transceiver={receiver:i},u.streams=[n.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Nc(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function ub(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,u){return{track:u,get dtmf(){return this._dtmf===void 0&&(u.kind==="audio"?this._dtmf=i.createDTMFSender(u):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,d){let a=i.apply(this,arguments);return a||(a=e(this,s),this._senders.push(a)),a};const u=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){u.apply(this,arguments);const d=this._senders.indexOf(s);d!==-1&&this._senders.splice(d,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(u=>{const s=this._senders.find(d=>d.track===u);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(r=>r._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function db(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[n,r,i]=arguments;if(arguments.length>0&&typeof n=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof n!="function"))return e.apply(this,[]);const u=function(d){const a={};return d.result().forEach(l=>{const A={id:l.id,timestamp:l.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[l.type]||l.type};l.names().forEach(p=>{A[p]=l.stat(p)}),a[A.id]=A}),a},s=function(d){return new Map(Object.keys(d).map(a=>[a,d[a]]))};if(arguments.length>=2){const d=function(a){r(s(u(a)))};return e.apply(this,[d,n])}return new Nt((d,a)=>{e.apply(this,[function(l){d(s(u(l)))},a])}).then(r,i)}}function lb(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(u=>u._pc=this),i});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(u=>yR(u,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Nc(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(i=>yR(i,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype)||!("getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let r,i,u;return this.getSenders().forEach(s=>{s.track===n&&(r?u=!0:r=s)}),this.getReceivers().forEach(s=>(s.track===n&&(i?u=!0:i=s),s.track===n)),u||r&&i?Nt.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():i?i.getStats():Nt.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Ab(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,s){if(!s)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=e.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(d)===-1&&this._shimmedLocalStreams[s.id].push(d):this._shimmedLocalStreams[s.id]=[s,d],d};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(a=>{if(this.getSenders().find(l=>l.track===a))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(a=>s.indexOf(a)===-1);this._shimmedLocalStreams[u.id]=[u].concat(d)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const d=this._shimmedLocalStreams[s].indexOf(u);d!==-1&&this._shimmedLocalStreams[s].splice(d,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),i.apply(this,arguments)}}function hb(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Ab(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const l=n.apply(this);return this._reverseStreams=this._reverseStreams||{},l.map(A=>this._reverseStreams[A.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.getTracks().forEach(A=>{if(this.getSenders().find(p=>p.track===A))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[l.id]){const A=new t.MediaStream(l.getTracks());this._streams[l.id]=A,this._reverseStreams[A.id]=l,l=A}r.apply(this,[l])};const i=t.RTCPeerConnection.prototype.removeStream;function u(l,A){let p=A.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const E=l._reverseStreams[f],C=l._streams[E.id];p=p.replace(new RegExp(C.id,"g"),E.id)}),new RTCSessionDescription({type:A.type,sdp:p})}function s(l,A){let p=A.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const E=l._reverseStreams[f],C=l._streams[E.id];p=p.replace(new RegExp(E.id,"g"),C.id)}),new RTCSessionDescription({type:A.type,sdp:p})}t.RTCPeerConnection.prototype.removeStream=function(l){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[l.id]||l]),delete this._reverseStreams[this._streams[l.id]?this._streams[l.id].id:l.id],delete this._streams[l.id]},t.RTCPeerConnection.prototype.addTrack=function(l,A){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(C=>C===l))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===l))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const E=this._streams[A.id];if(E)E.addTrack(l),Nt.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new t.MediaStream([l]);this._streams[A.id]=C,this._reverseStreams[C.id]=A,this.addStream(C)}return this.getSenders().find(C=>C.track===l)},["createOffer","createAnswer"].forEach(function(l){const A=t.RTCPeerConnection.prototype[l],p={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?A.apply(this,[E=>{const C=u(this,E);f[0].apply(null,[C])},E=>{f[1]&&f[1].apply(null,E)},arguments[2]]):A.apply(this,arguments).then(E=>u(this,E))}};t.RTCPeerConnection.prototype[l]=p[l]});const d=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),d.apply(this,arguments)):d.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=a.get.apply(this);return l.type===""?l:u(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!l._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(l._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let A;this._streams=this._streams||{},Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(f=>l.track===f)&&(A=this._streams[p])}),A&&(A.getTracks().length===1?this.removeStream(this._reverseStreams[A.id]):A.removeTrack(l.track),this.dispatchEvent(new Event("negotiationneeded")))}}function V1(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function pb(t,e){Nc(t,"negotiationneeded",n=>{const r=n.target;if(!(e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")||r.signalingState==="stable")return n})}var fb=Object.freeze({__proto__:null,shimMediaStream:ab,shimOnTrack:cb,shimGetSendersWithDtmf:ub,shimGetStats:db,shimSenderReceiverGetStats:lb,shimAddTrackRemoveTrackWithNative:Ab,shimAddTrackRemoveTrack:hb,shimPeerConnection:V1,fixNegotiationNeeded:pb,shimGetUserMedia:sb,shimGetDisplayMedia:function(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(typeof e=="function"?t.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then(r=>{const i=n.video&&n.video.width,u=n.video&&n.video.height,s=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxFrameRate:s||3}},i&&(n.video.mandatory.maxWidth=i),u&&(n.video.mandatory.maxHeight=u),t.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),gb={exports:{}};(function(t){var e={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){return n.split(`
m=`).map(function(r,i){return(i>0?"m="+r:r).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){for(var r,i={foundation:(r=n.indexOf("a=candidate:")===0?n.substring(12).split(" "):n.substring(10).split(" "))[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},u=8;u<r.length;u+=2)switch(r[u]){case"raddr":i.relatedAddress=r[u+1];break;case"rport":i.relatedPort=parseInt(r[u+1],10);break;case"tcptype":i.tcpType=r[u+1];break;case"ufrag":i.ufrag=r[u+1],i.usernameFragment=r[u+1];break;default:i[r[u]]=r[u+1]}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r,i={},u=n.substr(n.indexOf(" ")+1).split(";"),s=0;s<u.length;s++)i[(r=u[s].trim().split("="))[0].trim()]=r[1];return i},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var u=[];Object.keys(n.parameters).forEach(function(s){n.parameters[s]?u.push(s+"="+n.parameters[s]):u.push(s)}),r+="a=fmtp:"+i+" "+u.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(u){r+="a=rtcp-fb:"+i+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},u=n.indexOf(":",r);return u>-1?(i.attribute=n.substr(r+1,u-r-1),i.value=n.substr(u+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(u){i+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),i},e.getIceParameters=function(n,r){var i=e.splitLines(n);return{usernameFragment:(i=i.concat(e.splitLines(r))).filter(function(u){return u.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:i.filter(function(u){return u.indexOf("a=ice-pwd:")===0})[0].substr(10)}},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n)[0].split(" "),u=3;u<i.length;u++){var s=i[u],d=e.matchPrefix(n,"a=rtpmap:"+s+" ")[0];if(d){var a=e.parseRtpMap(d),l=e.matchPrefix(n,"a=fmtp:"+s+" ");switch(a.parameters=l.length?e.parseFmtp(l[0]):{},a.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+s+" ").map(e.parseRtcpFb),r.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(a.name.toUpperCase())}}}return e.matchPrefix(n,"a=extmap:").forEach(function(A){r.headerExtensions.push(e.parseExtmap(A))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(s){return s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(s){i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});var u=0;return r.codecs.forEach(function(s){s.maxptime>u&&(u=s.maxptime)}),u>0&&(i+="a=maxptime:"+u+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(s){i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){var r,i=[],u=e.parseRtpParameters(n),s=u.fecMechanisms.indexOf("RED")!==-1,d=u.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(function(f){return e.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"}),l=a.length>0&&a[0].ssrc,A=e.matchPrefix(n,"a=ssrc-group:FID").map(function(f){return f.substr(17).split(" ").map(function(E){return parseInt(E,10)})});A.length>0&&A[0].length>1&&A[0][0]===l&&(r=A[0][1]),u.codecs.forEach(function(f){if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){var E={ssrc:l,codecPayloadType:parseInt(f.parameters.apt,10)};l&&r&&(E.rtx={ssrc:r}),i.push(E),s&&((E=JSON.parse(JSON.stringify(E))).fec={ssrc:l,mechanism:d?"red+ulpfec":"red"},i.push(E))}}),i.length===0&&l&&i.push({ssrc:l});var p=e.matchPrefix(n,"b=");return p.length&&(p=p[0].indexOf("b=TIAS:")===0?parseInt(p[0].substr(7),10):p[0].indexOf("b=AS:")===0?1e3*parseInt(p[0].substr(5),10)*.95-16e3:void 0,i.forEach(function(f){f.maxBitrate=p})),i},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(d){return e.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var u=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=u.length>0,r.compound=u.length===0;var s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return{stream:(r=i[0].substr(7).split(" "))[0],track:r[1]};var u=e.matchPrefix(n,"a=ssrc:").map(function(s){return e.parseSsrcMedia(s)}).filter(function(s){return s.attribute==="msid"});return u.length>0?{stream:(r=u[0].value.split(" "))[0],track:r[1]}:void 0},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var u=r!==void 0?r:2;return`v=0\r
o=`+(i||"thisisadapterortc")+" "+(n||e.generateSessionId())+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,u){var s=e.writeRtpDescription(n.kind,r);if(s+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),s+="a=mid:"+n.mid+`\r
`,n.direction?s+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?s+=`a=sendrecv\r
`:n.rtpSender?s+=`a=sendonly\r
`:n.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,n.rtpSender){var d="msid:"+u.id+" "+n.rtpSender.track.id+`\r
`;s+="a="+d,s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+d,n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+d,s+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),s},e.getDirection=function(n,r){for(var i=e.splitLines(n),u=0;u<i.length;u++)switch(i[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[u].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(gb);var re=gb.exports;function Eb(t,e,n,r,i){var u=re.writeRtpDescription(t.kind,e);if(u+=re.writeIceParameters(t.iceGatherer.getLocalParameters()),u+=re.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),u+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?u+=`a=sendrecv\r
`:t.rtpSender?u+=`a=sendonly\r
`:t.rtpReceiver?u+=`a=recvonly\r
`:u+=`a=inactive\r
`,t.rtpSender){var s=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=s;var d="msid:"+(r?r.id:"-")+" "+s+`\r
`;u+="a="+d,u+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+d,t.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+d,u+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return u+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+re.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+re.localCName+`\r
`),u}function Kh(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(u,s){u=parseInt(u,10);for(var d=0;d<s.length;d++)if(s[d].payloadType===u||s[d].preferredPayloadType===u)return s[d]},i=function(u,s,d,a){var l=r(u.parameters.apt,d),A=r(s.parameters.apt,a);return l&&A&&l.name.toLowerCase()===A.name.toLowerCase()};return t.codecs.forEach(function(u){for(var s=0;s<e.codecs.length;s++){var d=e.codecs[s];if(u.name.toLowerCase()===d.name.toLowerCase()&&u.clockRate===d.clockRate){if(u.name.toLowerCase()==="rtx"&&u.parameters&&d.parameters.apt&&!i(u,d,t.codecs,e.codecs))continue;(d=JSON.parse(JSON.stringify(d))).numChannels=Math.min(u.numChannels,d.numChannels),n.codecs.push(d),d.rtcpFeedback=d.rtcpFeedback.filter(function(a){for(var l=0;l<u.rtcpFeedback.length;l++)if(u.rtcpFeedback[l].type===a.type&&u.rtcpFeedback[l].parameter===a.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(u){for(var s=0;s<e.headerExtensions.length;s++){var d=e.headerExtensions[s];if(u.uri===d.uri){n.headerExtensions.push(d);break}}}),n}function mb(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function G1(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function dr(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var dW=function(t,e){function n(s,d){d.addTrack(s),d.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:s}))}function r(s,d,a,l){var A=new Event("track");A.track=d,A.receiver=a,A.transceiver={receiver:a},A.streams=l,t.setTimeout(function(){s._dispatchEvent("track",A)})}var i=function(s){var d=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(A){d[A]=a[A].bind(a)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw dr("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all"}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced"}if(s.iceServers=function(A,p){var f=!1;return(A=JSON.parse(JSON.stringify(A))).filter(function(E){if(E&&(E.urls||E.url)){var C=E.urls||E.url;E.url&&!E.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var _=typeof C=="string";return _&&(C=[C]),C=C.filter(function(y){return y.indexOf("turn:")!==0||y.indexOf("transport=udp")===-1||y.indexOf("turn:[")!==-1||f?y.indexOf("stun:")===0&&p>=14393&&y.indexOf("?transport=udp")===-1:(f=!0,!0)}),delete E.url,E.urls=_?C[0]:C,!!C.length}})}(s.iceServers||[],e),this._iceGatherers=[],s.iceCandidatePoolSize)for(var l=s.iceCandidatePoolSize;l>0;l--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=re.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(s,d){this._isClosed||(this.dispatchEvent(d),typeof this["on"+s]=="function"&&this["on"+s](d))},i.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(s,d){var a=this.transceivers.length>0,l={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&a)l.iceTransport=this.transceivers[0].iceTransport,l.dtlsTransport=this.transceivers[0].dtlsTransport;else{var A=this._createIceAndDtlsTransports();l.iceTransport=A.iceTransport,l.dtlsTransport=A.dtlsTransport}return d||this.transceivers.push(l),l},i.prototype.addTrack=function(s,d){if(this._isClosed)throw dr("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var a;if(this.transceivers.find(function(A){return A.track===s}))throw dr("InvalidAccessError","Track already exists.");for(var l=0;l<this.transceivers.length;l++)this.transceivers[l].track||this.transceivers[l].kind!==s.kind||(a=this.transceivers[l]);return a||(a=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(d)===-1&&this.localStreams.push(d),a.track=s,a.stream=d,a.rtpSender=new t.RTCRtpSender(s,a.dtlsTransport),a.rtpSender},i.prototype.addStream=function(s){var d=this;if(e>=15025)s.getTracks().forEach(function(l){d.addTrack(l,s)});else{var a=s.clone();s.getTracks().forEach(function(l,A){var p=a.getTracks()[A];l.addEventListener("enabled",function(f){p.enabled=f.enabled})}),a.getTracks().forEach(function(l){d.addTrack(l,a)})}},i.prototype.removeTrack=function(s){if(this._isClosed)throw dr("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var d=this.transceivers.find(function(l){return l.rtpSender===s});if(!d)throw dr("InvalidAccessError","Sender was not created by this connection.");var a=d.stream;d.rtpSender.stop(),d.rtpSender=null,d.track=null,d.stream=null,this.transceivers.map(function(l){return l.stream}).indexOf(a)===-1&&this.localStreams.indexOf(a)>-1&&this.localStreams.splice(this.localStreams.indexOf(a),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(s){var d=this;s.getTracks().forEach(function(a){var l=d.getSenders().find(function(A){return A.track===a});l&&d.removeTrack(l)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},i.prototype._createIceGatherer=function(s,d){var a=this;if(d&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var l=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(l,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(A){var p=!A.candidate||Object.keys(A.candidate).length===0;l.state=p?"completed":"gathering",a.transceivers[s].bufferedCandidateEvents!==null&&a.transceivers[s].bufferedCandidateEvents.push(A)},l.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),l},i.prototype._gather=function(s,d){var a=this,l=this.transceivers[d].iceGatherer;if(!l.onlocalcandidate){var A=this.transceivers[d].bufferedCandidateEvents;this.transceivers[d].bufferedCandidateEvents=null,l.removeEventListener("localcandidate",this.transceivers[d].bufferCandidates),l.onlocalcandidate=function(p){if(!(a.usingBundle&&d>0)){var f=new Event("icecandidate");f.candidate={sdpMid:s,sdpMLineIndex:d};var E=p.candidate,C=!E||Object.keys(E).length===0;if(C)l.state!=="new"&&l.state!=="gathering"||(l.state="completed");else{l.state==="new"&&(l.state="gathering"),E.component=1,E.ufrag=l.getLocalParameters().usernameFragment;var _=re.writeCandidate(E);f.candidate=Object.assign(f.candidate,re.parseCandidate(_)),f.candidate.candidate=_,f.candidate.toJSON=function(){return{candidate:f.candidate.candidate,sdpMid:f.candidate.sdpMid,sdpMLineIndex:f.candidate.sdpMLineIndex,usernameFragment:f.candidate.usernameFragment}}}var y=re.getMediaSections(a._localDescription.sdp);y[f.candidate.sdpMLineIndex]+=C?`a=end-of-candidates\r
`:"a="+f.candidate.candidate+`\r
`,a._localDescription.sdp=re.getDescription(a._localDescription.sdp)+y.join("");var R=a.transceivers.every(function(O){return O.iceGatherer&&O.iceGatherer.state==="completed"});a.iceGatheringState!=="gathering"&&(a.iceGatheringState="gathering",a._emitGatheringStateChange()),C||a._dispatchEvent("icecandidate",f),R&&(a._dispatchEvent("icecandidate",new Event("icecandidate")),a.iceGatheringState="complete",a._emitGatheringStateChange())}},t.setTimeout(function(){A.forEach(function(p){l.onlocalcandidate(p)})},0)}},i.prototype._createIceAndDtlsTransports=function(){var s=this,d=new t.RTCIceTransport(null);d.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var a=new t.RTCDtlsTransport(d);return a.ondtlsstatechange=function(){s._updateConnectionState()},a.onerror=function(){Object.defineProperty(a,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:d,dtlsTransport:a}},i.prototype._disposeIceAndDtlsTransports=function(s){var d=this.transceivers[s].iceGatherer;d&&(delete d.onlocalcandidate,delete this.transceivers[s].iceGatherer);var a=this.transceivers[s].iceTransport;a&&(delete a.onicestatechange,delete this.transceivers[s].iceTransport);var l=this.transceivers[s].dtlsTransport;l&&(delete l.ondtlsstatechange,delete l.onerror,delete this.transceivers[s].dtlsTransport)},i.prototype._transceive=function(s,d,a){var l=Kh(s.localCapabilities,s.remoteCapabilities);d&&s.rtpSender&&(l.encodings=s.sendEncodingParameters,l.rtcp={cname:re.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(l.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(l)),a&&s.rtpReceiver&&l.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&e<15019&&s.recvEncodingParameters.forEach(function(A){delete A.rtx}),s.recvEncodingParameters.length?l.encodings=s.recvEncodingParameters:l.encodings=[{}],l.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(l.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(l.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(l))},i.prototype.setLocalDescription=function(s){var d,a,l=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(dr("TypeError",'Unsupported type "'+s.type+'"'));if(!mb("setLocalDescription",s.type,l.signalingState)||l._isClosed)return Promise.reject(dr("InvalidStateError","Can not set local "+s.type+" in state "+l.signalingState));if(s.type==="offer")d=re.splitSections(s.sdp),a=d.shift(),d.forEach(function(p,f){var E=re.parseRtpParameters(p);l.transceivers[f].localCapabilities=E}),l.transceivers.forEach(function(p,f){l._gather(p.mid,f)});else if(s.type==="answer"){d=re.splitSections(l._remoteDescription.sdp),a=d.shift();var A=re.matchPrefix(a,"a=ice-lite").length>0;d.forEach(function(p,f){var E=l.transceivers[f],C=E.iceGatherer,_=E.iceTransport,y=E.dtlsTransport,R=E.localCapabilities,O=E.remoteCapabilities;if(!(re.isRejected(p)&&re.matchPrefix(p,"a=bundle-only").length===0)&&!E.rejected){var D=re.getIceParameters(p,a),L=re.getDtlsParameters(p,a);A&&(L.role="server"),l.usingBundle&&f!==0||(l._gather(E.mid,f),_.state==="new"&&_.start(C,D,A?"controlling":"controlled"),y.state==="new"&&y.start(L));var G=Kh(R,O);l._transceive(E,G.codecs.length>0,!1)}})}return l._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?l._updateSignalingState("have-local-offer"):l._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(s){var d=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(dr("TypeError",'Unsupported type "'+s.type+'"'));if(!mb("setRemoteDescription",s.type,d.signalingState)||d._isClosed)return Promise.reject(dr("InvalidStateError","Can not set remote "+s.type+" in state "+d.signalingState));var a={};d.remoteStreams.forEach(function(_){a[_.id]=_});var l=[],A=re.splitSections(s.sdp),p=A.shift(),f=re.matchPrefix(p,"a=ice-lite").length>0,E=re.matchPrefix(p,"a=group:BUNDLE ").length>0;d.usingBundle=E;var C=re.matchPrefix(p,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!C&&C.substr(14).split(" ").indexOf("trickle")>=0,A.forEach(function(_,y){var R=re.splitLines(_),O=re.getKind(_),D=re.isRejected(_)&&re.matchPrefix(_,"a=bundle-only").length===0,L=R[0].substr(2).split(" ")[2],G=re.getDirection(_,p),Z=re.parseMsid(_),nt=re.getMid(_)||re.generateIdentifier();if(D||O==="application"&&(L==="DTLS/SCTP"||L==="UDP/DTLS/SCTP"))d.transceivers[y]={mid:nt,kind:O,protocol:L,rejected:!0};else{var it,St,ht,It,J,U,j,Y,ft;!D&&d.transceivers[y]&&d.transceivers[y].rejected&&(d.transceivers[y]=d._createTransceiver(O,!0));var x,V,q=re.parseRtpParameters(_);D||(x=re.getIceParameters(_,p),(V=re.getDtlsParameters(_,p)).role="client"),j=re.parseRtpEncodingParameters(_);var dt=re.parseRtcpParameters(_),mt=re.matchPrefix(_,"a=end-of-candidates",p).length>0,tt=re.matchPrefix(_,"a=candidate:").map(function(k){return re.parseCandidate(k)}).filter(function(k){return k.component===1});if((s.type==="offer"||s.type==="answer")&&!D&&E&&y>0&&d.transceivers[y]&&(d._disposeIceAndDtlsTransports(y),d.transceivers[y].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[y].iceTransport=d.transceivers[0].iceTransport,d.transceivers[y].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[y].rtpSender&&d.transceivers[y].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[y].rtpReceiver&&d.transceivers[y].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),s.type!=="offer"||D)s.type==="answer"&&!D&&(St=(it=d.transceivers[y]).iceGatherer,ht=it.iceTransport,It=it.dtlsTransport,J=it.rtpReceiver,U=it.sendEncodingParameters,Y=it.localCapabilities,d.transceivers[y].recvEncodingParameters=j,d.transceivers[y].remoteCapabilities=q,d.transceivers[y].rtcpParameters=dt,tt.length&&ht.state==="new"&&(!f&&!mt||E&&y!==0?tt.forEach(function(k){G1(it.iceTransport,k)}):ht.setRemoteCandidates(tt)),E&&y!==0||(ht.state==="new"&&ht.start(St,x,"controlling"),It.state==="new"&&It.start(V)),!Kh(it.localCapabilities,it.remoteCapabilities).codecs.filter(function(k){return k.name.toLowerCase()==="rtx"}).length&&it.sendEncodingParameters[0].rtx&&delete it.sendEncodingParameters[0].rtx,d._transceive(it,G==="sendrecv"||G==="recvonly",G==="sendrecv"||G==="sendonly"),!J||G!=="sendrecv"&&G!=="sendonly"?delete it.rtpReceiver:(ft=J.track,Z?(a[Z.stream]||(a[Z.stream]=new t.MediaStream),n(ft,a[Z.stream]),l.push([ft,J,a[Z.stream]])):(a.default||(a.default=new t.MediaStream),n(ft,a.default),l.push([ft,J,a.default]))));else{(it=d.transceivers[y]||d._createTransceiver(O)).mid=nt,it.iceGatherer||(it.iceGatherer=d._createIceGatherer(y,E)),tt.length&&it.iceTransport.state==="new"&&(!mt||E&&y!==0?tt.forEach(function(k){G1(it.iceTransport,k)}):it.iceTransport.setRemoteCandidates(tt)),Y=t.RTCRtpReceiver.getCapabilities(O),e<15019&&(Y.codecs=Y.codecs.filter(function(k){return k.name!=="rtx"})),U=it.sendEncodingParameters||[{ssrc:1001*(2*y+2)}];var I,w=!1;G==="sendrecv"||G==="sendonly"?(w=!it.rtpReceiver,J=it.rtpReceiver||new t.RTCRtpReceiver(it.dtlsTransport,O),w&&(ft=J.track,Z&&Z.stream==="-"||(Z?(a[Z.stream]||(a[Z.stream]=new t.MediaStream,Object.defineProperty(a[Z.stream],"id",{get:function(){return Z.stream}})),Object.defineProperty(ft,"id",{get:function(){return Z.track}}),I=a[Z.stream]):(a.default||(a.default=new t.MediaStream),I=a.default)),I&&(n(ft,I),it.associatedRemoteMediaStreams.push(I)),l.push([ft,J,I]))):it.rtpReceiver&&it.rtpReceiver.track&&(it.associatedRemoteMediaStreams.forEach(function(k){var X=k.getTracks().find(function(pt){return pt.id===it.rtpReceiver.track.id});X&&function(pt,Ht){Ht.removeTrack(pt),Ht.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:pt}))}(X,k)}),it.associatedRemoteMediaStreams=[]),it.localCapabilities=Y,it.remoteCapabilities=q,it.rtpReceiver=J,it.rtcpParameters=dt,it.sendEncodingParameters=U,it.recvEncodingParameters=j,d._transceive(d.transceivers[y],!1,w)}}}),d._dtlsRole===void 0&&(d._dtlsRole=s.type==="offer"?"active":"passive"),d._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(a).forEach(function(_){var y=a[_];if(y.getTracks().length){if(d.remoteStreams.indexOf(y)===-1){d.remoteStreams.push(y);var R=new Event("addstream");R.stream=y,t.setTimeout(function(){d._dispatchEvent("addstream",R)})}l.forEach(function(O){var D=O[0],L=O[1];y.id===O[2].id&&r(d,D,L,[y])})}}),l.forEach(function(_){_[2]||r(d,_[0],_[1],[])}),t.setTimeout(function(){d&&d.transceivers&&d.transceivers.forEach(function(_){_.iceTransport&&_.iceTransport.state==="new"&&_.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),_.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(s){this.signalingState=s;var d=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",d)},i.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,t.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var d=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",d)}},0))},i.prototype._updateIceConnectionState=function(){var s,d={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(l){l.iceTransport&&!l.rejected&&d[l.iceTransport.state]++}),s="new",d.failed>0?s="failed":d.checking>0?s="checking":d.disconnected>0?s="disconnected":d.new>0?s="new":d.connected>0?s="connected":d.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var a=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",a)}},i.prototype._updateConnectionState=function(){var s,d={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(l){l.iceTransport&&l.dtlsTransport&&!l.rejected&&(d[l.iceTransport.state]++,d[l.dtlsTransport.state]++)}),d.connected+=d.completed,s="new",d.failed>0?s="failed":d.connecting>0?s="connecting":d.disconnected>0?s="disconnected":d.new>0?s="new":d.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var a=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",a)}},i.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(dr("InvalidStateError","Can not call createOffer after close"));var d=s.transceivers.filter(function(f){return f.kind==="audio"}).length,a=s.transceivers.filter(function(f){return f.kind==="video"}).length,l=arguments[0];if(l){if(l.mandatory||l.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");l.offerToReceiveAudio!==void 0&&(d=l.offerToReceiveAudio===!0?1:l.offerToReceiveAudio===!1?0:l.offerToReceiveAudio),l.offerToReceiveVideo!==void 0&&(a=l.offerToReceiveVideo===!0?1:l.offerToReceiveVideo===!1?0:l.offerToReceiveVideo)}for(s.transceivers.forEach(function(f){f.kind==="audio"?--d<0&&(f.wantReceive=!1):f.kind==="video"&&--a<0&&(f.wantReceive=!1)});d>0||a>0;)d>0&&(s._createTransceiver("audio"),d--),a>0&&(s._createTransceiver("video"),a--);var A=re.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(f,E){var C=f.track,_=f.kind,y=f.mid||re.generateIdentifier();f.mid=y,f.iceGatherer||(f.iceGatherer=s._createIceGatherer(E,s.usingBundle));var R=t.RTCRtpSender.getCapabilities(_);e<15019&&(R.codecs=R.codecs.filter(function(D){return D.name!=="rtx"})),R.codecs.forEach(function(D){D.name==="H264"&&D.parameters["level-asymmetry-allowed"]===void 0&&(D.parameters["level-asymmetry-allowed"]="1"),f.remoteCapabilities&&f.remoteCapabilities.codecs&&f.remoteCapabilities.codecs.forEach(function(L){D.name.toLowerCase()===L.name.toLowerCase()&&D.clockRate===L.clockRate&&(D.preferredPayloadType=L.payloadType)})}),R.headerExtensions.forEach(function(D){(f.remoteCapabilities&&f.remoteCapabilities.headerExtensions||[]).forEach(function(L){D.uri===L.uri&&(D.id=L.id)})});var O=f.sendEncodingParameters||[{ssrc:1001*(2*E+1)}];C&&e>=15019&&_==="video"&&!O[0].rtx&&(O[0].rtx={ssrc:O[0].ssrc+1}),f.wantReceive&&(f.rtpReceiver=new t.RTCRtpReceiver(f.dtlsTransport,_)),f.localCapabilities=R,f.sendEncodingParameters=O}),s._config.bundlePolicy!=="max-compat"&&(A+="a=group:BUNDLE "+s.transceivers.map(function(f){return f.mid}).join(" ")+`\r
`),A+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(f,E){A+=Eb(f,f.localCapabilities,"offer",f.stream,s._dtlsRole),A+=`a=rtcp-rsize\r
`,!f.iceGatherer||s.iceGatheringState==="new"||E!==0&&s.usingBundle||(f.iceGatherer.getLocalCandidates().forEach(function(C){C.component=1,A+="a="+re.writeCandidate(C)+`\r
`}),f.iceGatherer.state==="completed"&&(A+=`a=end-of-candidates\r
`))});var p=new t.RTCSessionDescription({type:"offer",sdp:A});return Promise.resolve(p)},i.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(dr("InvalidStateError","Can not call createAnswer after close"));if(s.signalingState!=="have-remote-offer"&&s.signalingState!=="have-local-pranswer")return Promise.reject(dr("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var d=re.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(d+="a=group:BUNDLE "+s.transceivers.map(function(A){return A.mid}).join(" ")+`\r
`),d+=`a=ice-options:trickle\r
`;var a=re.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(A,p){if(!(p+1>a)){if(A.rejected)return A.kind==="application"?A.protocol==="DTLS/SCTP"?d+=`m=application 0 DTLS/SCTP 5000\r
`:d+="m=application 0 "+A.protocol+` webrtc-datachannel\r
`:A.kind==="audio"?d+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:A.kind==="video"&&(d+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(d+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+A.mid+`\r
`);var f;A.stream&&(A.kind==="audio"?f=A.stream.getAudioTracks()[0]:A.kind==="video"&&(f=A.stream.getVideoTracks()[0]),f&&e>=15019&&A.kind==="video"&&!A.sendEncodingParameters[0].rtx&&(A.sendEncodingParameters[0].rtx={ssrc:A.sendEncodingParameters[0].ssrc+1}));var E=Kh(A.localCapabilities,A.remoteCapabilities);!E.codecs.filter(function(C){return C.name.toLowerCase()==="rtx"}).length&&A.sendEncodingParameters[0].rtx&&delete A.sendEncodingParameters[0].rtx,d+=Eb(A,E,"answer",A.stream,s._dtlsRole),A.rtcpParameters&&A.rtcpParameters.reducedSize&&(d+=`a=rtcp-rsize\r
`)}});var l=new t.RTCSessionDescription({type:"answer",sdp:d});return Promise.resolve(l)},i.prototype.addIceCandidate=function(s){var d,a=this;return s&&s.sdpMLineIndex===void 0&&!s.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(l,A){if(!a._remoteDescription)return A(dr("InvalidStateError","Can not add ICE candidate without a remote description"));if(s&&s.candidate!==""){var p=s.sdpMLineIndex;if(s.sdpMid){for(var f=0;f<a.transceivers.length;f++)if(a.transceivers[f].mid===s.sdpMid){p=f;break}}var E=a.transceivers[p];if(!E)return A(dr("OperationError","Can not add ICE candidate"));if(E.rejected)return l();var C=Object.keys(s.candidate).length>0?re.parseCandidate(s.candidate):{};if(C.protocol==="tcp"&&(C.port===0||C.port===9)||C.component&&C.component!==1)return l();if((p===0||p>0&&E.iceTransport!==a.transceivers[0].iceTransport)&&!G1(E.iceTransport,C))return A(dr("OperationError","Can not add ICE candidate"));var _=s.candidate.trim();_.indexOf("a=")===0&&(_=_.substr(2)),(d=re.getMediaSections(a._remoteDescription.sdp))[p]+="a="+(C.type?_:"end-of-candidates")+`\r
`,a._remoteDescription.sdp=re.getDescription(a._remoteDescription.sdp)+d.join("")}else for(var y=0;y<a.transceivers.length&&(a.transceivers[y].rejected||(a.transceivers[y].iceTransport.addRemoteCandidate({}),(d=re.getMediaSections(a._remoteDescription.sdp))[y]+=`a=end-of-candidates\r
`,a._remoteDescription.sdp=re.getDescription(a._remoteDescription.sdp)+d.join(""),!a.usingBundle));y++);l()})},i.prototype.getStats=function(s){if(s&&s instanceof t.MediaStreamTrack){var d=null;if(this.transceivers.forEach(function(l){l.rtpSender&&l.rtpSender.track===s?d=l.rtpSender:l.rtpReceiver&&l.rtpReceiver.track===s&&(d=l.rtpReceiver)}),!d)throw dr("InvalidAccessError","Invalid selector.");return d.getStats()}var a=[];return this.transceivers.forEach(function(l){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(A){l[A]&&a.push(l[A].getStats())})}),Promise.all(a).then(function(l){var A=new Map;return l.forEach(function(p){p.forEach(function(f){A.set(f.id,f)})}),A})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(s){var d=t[s];if(d&&d.prototype&&d.prototype.getStats){var a=d.prototype.getStats;d.prototype.getStats=function(){return a.apply(this).then(function(l){var A=new Map;return Object.keys(l).forEach(function(p){var f;l[p].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(f=l[p]).type]||f.type,A.set(p,l[p])}),A})}}});var u=["createOffer","createAnswer"];return u.forEach(function(s){var d=i.prototype[s];i.prototype[s]=function(){var a=arguments;return typeof a[0]=="function"||typeof a[1]=="function"?d.apply(this,[arguments[2]]).then(function(l){typeof a[0]=="function"&&a[0].apply(null,[l])},function(l){typeof a[1]=="function"&&a[1].apply(null,[l])}):d.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(s){var d=i.prototype[s];i.prototype[s]=function(){var a=arguments;return typeof a[1]=="function"||typeof a[2]=="function"?d.apply(this,arguments).then(function(){typeof a[1]=="function"&&a[1].apply(null)},function(l){typeof a[2]=="function"&&a[2].apply(null,[l])}):d.apply(this,arguments)}}),["getStats"].forEach(function(s){var d=i.prototype[s];i.prototype[s]=function(){var a=arguments;return typeof a[1]=="function"?d.apply(this,arguments).then(function(){typeof a[1]=="function"&&a[1].apply(null)}):d.apply(this,arguments)}}),i};function Ib(t){const e=t&&t.navigator,n=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(r){return n(r).catch(i=>Nt.reject(function(u){return{name:{PermissionDeniedError:"NotAllowedError"}[u.name]||u.name,message:u.message,constraint:u.constraint,toString(){return this.name}}}(i)))}}function Cb(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function K1(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(r){return r}),t.RTCSessionDescription||(t.RTCSessionDescription=function(r){return r}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const u=new Event("enabled");u.enabled=i,this.dispatchEvent(u)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=dW(t,e.version);t.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=function(i,u){let s=!1;return(i=JSON.parse(JSON.stringify(i))).filter(d=>{if(d&&(d.urls||d.url)){let a=d.urls||d.url;d.url&&!d.urls&&sh("RTCIceServer.url","RTCIceServer.urls");const l=typeof a=="string";return l&&(a=[a]),a=a.filter(A=>{if(A.indexOf("stun:")===0)return!1;const p=A.startsWith("turn")&&!A.startsWith("turn:[")&&A.includes("transport=udp");return p&&!s?(s=!0,!0):p&&!s}),delete d.url,d.urls=l?a[0]:a,!!a.length}})}(r.iceServers,e.version),wm("ICE servers after filtering:",r.iceServers)),new n(r)},t.RTCPeerConnection.prototype=n.prototype}function _b(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}var vb=Object.freeze({__proto__:null,shimPeerConnection:K1,shimReplaceTrack:_b,shimGetUserMedia:Ib,shimGetDisplayMedia:Cb}),lW=ei,Gd=FS,AW=b,Sb=ti,yb=Pe,hW=fE,Tb=Dy,pW=Gi.exports;if(lW({target:"Promise",proto:!0,real:!0,forced:!!Gd&&AW(function(){Gd.prototype.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=hW(this,Sb("Promise")),n=yb(t);return this.then(n?function(r){return Tb(e,t()).then(function(){return r})}:t,n?function(r){return Tb(e,t()).then(function(){throw r})}:t)}}),yb(Gd)){var Rb=Sb("Promise").prototype.finally;Gd.prototype.finally!==Rb&&pW(Gd.prototype,"finally",Rb,{unsafe:!0})}function wb(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,u,s){sh("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(u,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,d,a){d in s&&!(a in s)&&(s[a]=s[d],delete s[d])},u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),u(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const d=s.apply(this,arguments);return i(d,"mozAutoGainControl","autoGainControl"),i(d,"mozNoiseSuppression","noiseSuppression"),d}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),i(d,"autoGainControl","mozAutoGainControl"),i(d,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[d])}}}}function bb(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function H1(t,e){if(typeof t!="object"||!t.RTCPeerConnection&&!t.mozRTCPeerConnection)return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const u=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),u.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,u,s]=arguments;return r.apply(this,[i||null]).then(d=>{if(e.version<53&&!u)try{d.forEach(a=>{a.type=n[a.type]||a.type})}catch(a){if(a.name!=="TypeError")throw a;d.forEach((l,A)=>{d.set(A,Object.assign({},l,{type:n[l.type]||l.type}))})}return d}).then(u,s)}}function Nb(t){if(typeof t!="object"||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Nt.resolve(new Map)}}function Ob(t){if(typeof t!="object"||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(r=>r._pc=this),n}),Nc(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Db(t){t.RTCPeerConnection&&!("removeStream"in t.RTCPeerConnection.prototype)&&(t.RTCPeerConnection.prototype.removeStream=function(e){sh("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&e.getTracks().includes(n.track)&&this.removeTrack(n)})})}function kb(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Pb(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const n=arguments[1],r=n&&"sendEncodings"in n;r&&n.sendEncodings.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(r){const{sender:u}=i,s=u.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=n.sendEncodings,u.sendEncodings=n.sendEncodings,this.setParametersPromises.push(u.setParameters(s).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return i})}function Lb(t){if(typeof t!="object"||!t.RTCRtpSender)return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Bb(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Nt.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Mb(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Nt.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var Ub=Object.freeze({__proto__:null,shimOnTrack:bb,shimPeerConnection:H1,shimSenderGetStats:Nb,shimReceiverGetStats:Ob,shimRemoveStream:Db,shimRTCDataChannel:kb,shimAddTransceiver:Pb,shimGetParameters:Lb,shimCreateOffer:Bb,shimCreateAnswer:Mb,shimGetUserMedia:wb,shimGetDisplayMedia:function(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Nt.reject(r)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}});function xb(t){if(typeof t=="object"&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(r=>e.call(this,r,n)),n.getVideoTracks().forEach(r=>e.call(this,r,n))},t.RTCPeerConnection.prototype.addTrack=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(e);if(n===-1)return;this._localStreams.splice(n,1);const r=e.getTracks();this.getSenders().forEach(i=>{r.includes(i.track)&&this.removeTrack(i)})})}}function Qb(t){if(typeof t=="object"&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const u=new Event("addstream");u.stream=i,this.dispatchEvent(u)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(i=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(i)>=0)return;n._remoteStreams.push(i);const u=new Event("addstream");u.stream=i,n.dispatchEvent(u)})}),e.apply(n,arguments)}}}function Fb(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,u=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(a,l){const A=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[A]);return l?(p.then(a,l),Nt.resolve()):p},e.createAnswer=function(a,l){const A=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[A]);return l?(p.then(a,l),Nt.resolve()):p};let d=function(a,l,A){const p=i.apply(this,[a]);return A?(p.then(l,A),Nt.resolve()):p};e.setLocalDescription=d,d=function(a,l,A){const p=u.apply(this,[a]);return A?(p.then(l,A),Nt.resolve()):p},e.setRemoteDescription=d,d=function(a,l,A){const p=s.apply(this,[a]);return A?(p.then(l,A),Nt.resolve()):p},e.addIceCandidate=d}function jb(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(Vb(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(n,r,i){e.mediaDevices.getUserMedia(n).then(r,i)}.bind(e))}function Vb(t){return t&&t.video!==void 0?Object.assign({},t,{video:SR(t.video)}):t}function Gb(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,r){if(n&&n.iceServers){const i=[];for(let u=0;u<n.iceServers.length;u++){let s=n.iceServers[u];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(sh("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,i.push(s)):i.push(n.iceServers[u])}n.iceServers=i}return new e(n,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function Kb(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Hb(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){n.offerToReceiveAudio!==void 0&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const r=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):n.offerToReceiveAudio!==!0||r||this.addTransceiver("audio"),n.offerToReceiveVideo!==void 0&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const i=this.getTransceivers().find(u=>u.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo!==!0||i||this.addTransceiver("video")}return e.apply(this,arguments)}}function Yb(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var Wb=Object.freeze({__proto__:null,shimLocalStreamsAPI:xb,shimRemoteStreamsAPI:Qb,shimCallbacksAPI:Fb,shimGetUserMedia:jb,shimConstraints:Vb,shimRTCIceServerUrls:Gb,shimTrackEventTransceiver:Kb,shimCreateOfferLegacy:Hb,shimAudioContext:Yb}),fW=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,gW=GA,EW=_s,Jb=Ve("".replace),Hh=`[	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]`,mW=RegExp("^"+Hh+Hh+"*"),IW=RegExp(Hh+Hh+"*$"),Y1=function(t){return function(e){var n=EW(gW(e));return 1&t&&(n=Jb(n,mW,"")),2&t&&(n=Jb(n,IW,"")),n}},CW={start:Y1(1),end:Y1(2),trim:Y1(3)},_W=t2.PROPER,vW=gn,qb=fW,SW=CW.trim;xn({target:"String",proto:!0,forced:function(t){return vW(function(){return!!qb[t]()||"\u200B\x85\u180E"[t]()!=="\u200B\x85\u180E"||_W&&qb[t].name!==t})}("trim")},{trim:function(){return SW(this)}});var yW=Cs("String").trim,TW=ri,RW=yW,W1=String.prototype,Oa=function(t){var e=t.trim;return typeof t=="string"||t===W1||TW(W1,t)&&e===W1.trim?RW:e},wW=gt;ei({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return wW(URL.prototype.toString,this)}});var zb={exports:{}};(function(t){var e={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};e.localCName=e.generateIdentifier(),e.splitLines=function(n){return Oa(n).call(n).split(`
`).map(function(r){return Oa(r).call(r)})},e.splitSections=function(n){return n.split(`
m=`).map(function(r,i){var u;return Oa(u=i>0?"m="+r:r).call(u)+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){for(var r,i={foundation:(r=n.indexOf("a=candidate:")===0?n.substring(12).split(" "):n.substring(10).split(" "))[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},u=8;u<r.length;u+=2)switch(r[u]){case"raddr":i.relatedAddress=r[u+1];break;case"rport":i.relatedPort=parseInt(r[u+1],10);break;case"tcptype":i.tcpType=r[u+1];break;case"ufrag":i.ufrag=r[u+1],i.usernameFragment=r[u+1];break;default:i[r[u]]=r[u+1]}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r,i={},u=n.substr(n.indexOf(" ")+1).split(";"),s=0;s<u.length;s++){var d,a;r=Oa(d=u[s]).call(d).split("="),i[Oa(a=r[0]).call(a)]=r[1]}return i},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var u=[];Object.keys(n.parameters).forEach(function(s){n.parameters[s]?u.push(s+"="+n.parameters[s]):u.push(s)}),r+="a=fmtp:"+i+" "+u.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(u){r+="a=rtcp-fb:"+i+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},u=n.indexOf(":",r);return u>-1?(i.attribute=n.substr(r+1,u-r-1),i.value=n.substr(u+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(u){i+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),i},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],u=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&u?{usernameFragment:i.substr(12),password:u.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n)[0].split(" "),u=3;u<i.length;u++){var s=i[u],d=e.matchPrefix(n,"a=rtpmap:"+s+" ")[0];if(d){var a=e.parseRtpMap(d),l=e.matchPrefix(n,"a=fmtp:"+s+" ");switch(a.parameters=l.length?e.parseFmtp(l[0]):{},a.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+s+" ").map(e.parseRtcpFb),r.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(a.name.toUpperCase())}}}return e.matchPrefix(n,"a=extmap:").forEach(function(A){r.headerExtensions.push(e.parseExtmap(A))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(s){return s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(s){i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});var u=0;return r.codecs.forEach(function(s){s.maxptime>u&&(u=s.maxptime)}),u>0&&(i+="a=maxptime:"+u+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(s){i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){var r,i=[],u=e.parseRtpParameters(n),s=u.fecMechanisms.indexOf("RED")!==-1,d=u.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(function(f){return e.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"}),l=a.length>0&&a[0].ssrc,A=e.matchPrefix(n,"a=ssrc-group:FID").map(function(f){return f.substr(17).split(" ").map(function(E){return parseInt(E,10)})});A.length>0&&A[0].length>1&&A[0][0]===l&&(r=A[0][1]),u.codecs.forEach(function(f){if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){var E={ssrc:l,codecPayloadType:parseInt(f.parameters.apt,10)};l&&r&&(E.rtx={ssrc:r}),i.push(E),s&&((E=JSON.parse(JSON.stringify(E))).fec={ssrc:l,mechanism:d?"red+ulpfec":"red"},i.push(E))}}),i.length===0&&l&&i.push({ssrc:l});var p=e.matchPrefix(n,"b=");return p.length&&(p=p[0].indexOf("b=TIAS:")===0?parseInt(p[0].substr(7),10):p[0].indexOf("b=AS:")===0?1e3*parseInt(p[0].substr(5),10)*.95-16e3:void 0,i.forEach(function(f){f.maxBitrate=p})),i},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(d){return e.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var u=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=u.length>0,r.compound=u.length===0;var s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return{stream:(r=i[0].substr(7).split(" "))[0],track:r[1]};var u=e.matchPrefix(n,"a=ssrc:").map(function(s){return e.parseSsrcMedia(s)}).filter(function(s){return s.attribute==="msid"});return u.length>0?{stream:(r=u[0].value.split(" "))[0],track:r[1]}:void 0},e.parseSctpDescription=function(n){var r,i=e.parseMLine(n),u=e.matchPrefix(n,"a=max-message-size:");u.length>0&&(r=parseInt(u[0].substr(19),10)),isNaN(r)&&(r=65536);var s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:i.fmt,maxMessageSize:r};if(e.matchPrefix(n,"a=sctpmap:").length>0){var d=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:r}}},e.writeSctpDescription=function(n,r){var i=[];return i=n.protocol!=="DTLS/SCTP"?["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var u=r!==void 0?r:2;return`v=0\r
o=`+(i||"thisisadapterortc")+" "+(n||e.generateSessionId())+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,u){var s=e.writeRtpDescription(n.kind,r);if(s+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),s+="a=mid:"+n.mid+`\r
`,n.direction?s+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?s+=`a=sendrecv\r
`:n.rtpSender?s+=`a=sendonly\r
`:n.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,n.rtpSender){var d="msid:"+u.id+" "+n.rtpSender.track.id+`\r
`;s+="a="+d,s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+d,n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+d,s+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),s},e.getDirection=function(n,r){for(var i=e.splitLines(n),u=0;u<i.length;u++)switch(i[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[u].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(zb);var Yh=zb.exports;function Wh(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&((n=JSON.parse(JSON.stringify(n))).candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const r=new e(n),i=Yh.parseCandidate(n.candidate),u=Object.assign(r,i);return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,Nc(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Kd(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const n=function(d){if(!d||!d.sdp)return!1;const a=Yh.splitSections(d.sdp);return a.shift(),a.some(l=>{const A=Yh.parseMLine(l);return A&&A.kind==="application"&&A.protocol.indexOf("SCTP")!==-1})},r=function(d){const a=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const l=parseInt(a[1],10);return l!=l?-1:l},i=function(d){let a=65536;return e.browser==="firefox"&&(a=e.version<57?d===-1?16384:2147483637:e.version<60?e.version===57?65535:65536:2147483637),a},u=function(d,a){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const A=Yh.matchPrefix(d.sdp,"a=max-message-size:");return A.length>0?l=parseInt(A[0].substr(19),10):e.browser==="firefox"&&a!==-1&&(l=2147483637),l},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=r(arguments[0]),a=i(d),l=u(arguments[0],d);let A;A=a===0&&l===0?Number.POSITIVE_INFINITY:a===0||l===0?Math.max(a,l):Math.min(a,l);const p={};Object.defineProperty(p,"maxMessageSize",{get:()=>A}),this._sctp=p}return s.apply(this,arguments)}}function Hd(t){if(!t.RTCPeerConnection||!("createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const u=r.send;r.send=function(){const s=arguments[0],d=s.length||s.size||s.byteLength;if(r.readyState==="open"&&i.sctp&&d>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return u.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},Nc(t,"datachannel",r=>(e(r.channel,r.target),r))}function J1(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const u=i.target;if(u._lastConnectionState!==u.connectionState){u._lastConnectionState=u.connectionState;const s=new Event("connectionstatechange",i);u.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function q1(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=r.sdp.split(`
`).filter(u=>Oa(u).call(u)!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:i}):r.sdp=i}return n.apply(this,arguments)}}function Jh(t,e){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const n=t.RTCPeerConnection.prototype.addIceCandidate;n&&n.length!==0&&(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Nt.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Nt.resolve())})}var bW=Object.freeze({__proto__:null,shimRTCIceCandidate:Wh,shimMaxMessageSize:Kd,shimSendThrowTypeError:Hd,shimConnectionState:J1,removeExtmapAllowMixed:q1,shimAddIceCandidateNullOrEmpty:Jh});let Sn,me;(function(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const n=wm,r=zF(t),i={browserDetails:r,commonShim:bW,extractVersion:Od,disableLog:JF,disableWarnings:qF};switch(r.browser){case"chrome":if(!fb||!V1||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=fb,Jh(t,r),sb(t,r),ab(t),V1(t,r),cb(t),hb(t,r),ub(t),db(t),lb(t),pb(t,r),Wh(t),J1(t),Kd(t,r),Hd(t),q1(t,r);break;case"firefox":if(!Ub||!H1||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Ub,Jh(t,r),wb(t,r),H1(t,r),bb(t),Db(t),Nb(t),Ob(t),kb(t),Pb(t),Lb(t),Bb(t),Mb(t),Wh(t),J1(t),Kd(t,r),Hd(t);break;case"edge":if(!vb||!K1||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=vb,Ib(t),Cb(t),K1(t,r),_b(t),Kd(t,r),Hd(t);break;case"safari":if(!Wb||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Wb,Jh(t,r),Gb(t),Hb(t),Fb(t),xb(t),Qb(t),Kb(t),jb(t),Yb(t),Wh(t),Kd(t,r),Hd(t),q1(t,r);break;default:n("Unsupported browser!")}})({window:typeof window=="undefined"?void 0:window}),function(t){t.WIN_10="Windows 10",t.WIN_81="Windows 8.1",t.WIN_8="Windows 8",t.WIN_7="Windows 7",t.WIN_VISTA="Windows Vista",t.WIN_SERVER_2003="Windows Server 2003",t.WIN_XP="Windows XP",t.WIN_2000="Windows 2000",t.ANDROID="Android",t.OPEN_BSD="Open BSD",t.SUN_OS="Sun OS",t.LINUX="Linux",t.IOS="iOS",t.MAC_OS="Mac OS",t.QNX="QNX",t.UNIX="UNIX",t.BEOS="BeOS",t.OS_2="OS/2",t.SEARCH_BOT="Search Bot"}(Sn||(Sn={})),function(t){t.CHROME="Chrome",t.SAFARI="Safari",t.EDGE="Edge",t.FIREFOX="Firefox",t.OPERA="OPR",t.QQ="QQBrowser",t.WECHAT="MicroMessenger"}(me||(me={}));var z1={exports:{}};/*!@license
	 * UAParser.js v0.7.28
	 * Lightweight JavaScript-based User-Agent string parser
	 * https://github.com/faisalman/ua-parser-js
	 *
	 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
	 * Licensed under MIT License
	 */(function(t,e){(function(n,r){var i="function",u="object",s="string",d="model",a="name",l="type",A="vendor",p="version",f="architecture",E="console",C="mobile",_="tablet",y="smarttv",R="wearable",O="embedded",D={extend:function(ht,It){var J={};for(var U in ht)It[U]&&It[U].length%2==0?J[U]=It[U].concat(ht[U]):J[U]=ht[U];return J},has:function(ht,It){return typeof ht===s&&It.toLowerCase().indexOf(ht.toLowerCase())!==-1},lowerize:function(ht){return ht.toLowerCase()},major:function(ht){return typeof ht===s?ht.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(ht,It){return ht=ht.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),It===void 0?ht:ht.substring(0,255)}},L={rgx:function(ht,It){for(var J,U,j,Y,ft,x,V=0;V<It.length&&!ft;){var q=It[V],dt=It[V+1];for(J=U=0;J<q.length&&!ft;)if(ft=q[J++].exec(ht))for(j=0;j<dt.length;j++)x=ft[++U],typeof(Y=dt[j])===u&&Y.length>0?Y.length==2?typeof Y[1]==i?this[Y[0]]=Y[1].call(this,x):this[Y[0]]=Y[1]:Y.length==3?typeof Y[1]!==i||Y[1].exec&&Y[1].test?this[Y[0]]=x?x.replace(Y[1],Y[2]):r:this[Y[0]]=x?Y[1].call(this,x,Y[2]):r:Y.length==4&&(this[Y[0]]=x?Y[3].call(this,x.replace(Y[1],Y[2])):r):this[Y]=x||r;V+=2}},str:function(ht,It){for(var J in It)if(typeof It[J]===u&&It[J].length>0){for(var U=0;U<It[J].length;U++)if(D.has(It[J][U],ht))return J==="?"?r:J}else if(D.has(It[J],ht))return J==="?"?r:J;return ht}},G={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[a,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[a,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[a,p],[/opios[\/\s]+([\w\.]+)/i],[p,[a,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[p,[a,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[a,p],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[p,[a,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[p,[a,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[a,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[a,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[p,[a,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[a,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[a,/(.+)/,"$1 Secure Browser"],p],[/focus\/([\w\.]+)/i],[p,[a,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[p,[a,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[p,[a,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[a,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[a,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[a,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[p,[a,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[a,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[a,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],p],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[a,p],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[a],[/;fbav\/([\w\.]+);/i],[p,[a,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[a,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[a,p],[/\bgsa\/([\w\.]+)\s.*safari\//i],[p,[a,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,"Chrome WebView"],p],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[p,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,p],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[a,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[p,L.str,G.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[a,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],p],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[p,[a,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,D.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",D.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,D.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[d,[A,"Samsung"],[l,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[d,[A,"Samsung"],[l,C]],[/\((ip(?:hone|od)[\s\w]*);/i],[d,[A,"Apple"],[l,C]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[A,"Apple"],[l,_]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[d,[A,"Huawei"],[l,_]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[d,[A,"Huawei"],[l,C]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[d,/_/g," "],[A,"Xiaomi"],[l,C]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[d,/_/g," "],[A,"Xiaomi"],[l,_]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[d,[A,"OPPO"],[l,C]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[d,[A,"Vivo"],[l,C]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[d,[A,"Realme"],[l,C]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[d,[A,"Motorola"],[l,C]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[A,"Motorola"],[l,_]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[d,[A,"LG"],[l,_]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[d,[A,"LG"],[l,C]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[d,[A,"Lenovo"],[l,_]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[d,/_/g," "],[A,"Nokia"],[l,C]],[/droid.+;\s(pixel\sc)[\s)]/i],[d,[A,"Google"],[l,_]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[d,[A,"Google"],[l,C]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[A,"Sony"],[l,C]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[d,"Xperia Tablet"],[A,"Sony"],[l,_]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[d,[A,"OnePlus"],[l,C]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[d,[A,"Amazon"],[l,_]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[d,"Fire Phone"],[A,"Amazon"],[l,C]],[/\((playbook);[\w\s\),;-]+(rim)/i],[d,A,[l,_]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[d,[A,"BlackBerry"],[l,C]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[d,[A,"ASUS"],[l,_]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[d,[A,"ASUS"],[l,C]],[/(nexus\s9)/i],[d,[A,"HTC"],[l,_]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[A,[d,/_/g," "],[l,C]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[d,[A,"Acer"],[l,_]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[d,[A,"Meizu"],[l,C]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[A,d,[l,C]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[A,d,[l,_]],[/\s(surface\sduo)\s/i],[d,[A,"Microsoft"],[l,_]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[d,[A,"Fairphone"],[l,C]],[/\s(u304aa)\sbuild/i],[d,[A,"AT&T"],[l,C]],[/sie-(\w*)/i],[d,[A,"Siemens"],[l,C]],[/[;\/]\s?(rct\w+)\sbuild/i],[d,[A,"RCA"],[l,_]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[d,[A,"Dell"],[l,_]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[d,[A,"Verizon"],[l,_]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[d,[A,"Barnes & Noble"],[l,_]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[d,[A,"NuVision"],[l,_]],[/;\s(k88)\sbuild/i],[d,[A,"ZTE"],[l,_]],[/;\s(nx\d{3}j)\sbuild/i],[d,[A,"ZTE"],[l,C]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[d,[A,"Swiss"],[l,C]],[/[;\/]\s?(zur\d{3})\sbuild/i],[d,[A,"Swiss"],[l,_]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[d,[A,"Zeki"],[l,_]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[A,"Dragon Touch"],d,[l,_]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[d,[A,"Insignia"],[l,_]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[d,[A,"NextBook"],[l,_]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[A,"Voice"],d,[l,C]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[A,"LvTel"],d,[l,C]],[/;\s(ph-1)\s/i],[d,[A,"Essential"],[l,C]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[d,[A,"Envizen"],[l,_]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[d,[A,"MachSpeed"],[l,_]],[/[;\/]\s?tu_(1491)\sbuild/i],[d,[A,"Rotor"],[l,_]],[/(shield[\w\s]+)\sbuild/i],[d,[A,"Nvidia"],[l,_]],[/(sprint)\s(\w+)/i],[A,d,[l,C]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[A,"Microsoft"],[l,C]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[A,"Zebra"],[l,_]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[A,"Zebra"],[l,C]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[A,d,[l,E]],[/droid.+;\s(shield)\sbuild/i],[d,[A,"Nvidia"],[l,E]],[/(playstation\s[345portablevi]+)/i],[d,[A,"Sony"],[l,E]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[d,[A,"Microsoft"],[l,E]],[/smart-tv.+(samsung)/i],[A,[l,y]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[A,"Samsung"],[l,y]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[A,"LG"],[l,y]],[/(apple)\s?tv/i],[A,[d,"Apple TV"],[l,y]],[/crkey/i],[[d,"Chromecast"],[A,"Google"],[l,y]],[/droid.+aft([\w])(\sbuild\/|\))/i],[d,[A,"Amazon"],[l,y]],[/\(dtv[\);].+(aquos)/i],[d,[A,"Sharp"],[l,y]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[A,D.trim],[d,D.trim],[l,y]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[l,y]],[/((pebble))app\/[\d\.]+\s/i],[A,d,[l,R]],[/droid.+;\s(glass)\s\d/i],[d,[A,"Google"],[l,R]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[d,[A,"Zebra"],[l,R]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[A,[l,O]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[d,[l,C]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[d,[l,_]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,D.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[d,[A,"Generic"]],[/(phone)/i],[[l,C]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[a,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[a,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[a,[p,L.str,G.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[p,L.str,G.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[a,"Mac OS"],[p,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[a,p],[/\(bb(10);/i],[p,[a,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[p,[a,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[a,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[a,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],p],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[a,p],[/(sunos)\s?([\w\.\d]*)/i],[[a,"Solaris"],p],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[a,p]]},nt=function(ht,It){if(typeof ht=="object"&&(It=ht,ht=r),!(this instanceof nt))return new nt(ht,It).getResult();var J=ht||(n!==void 0&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),U=It?D.extend(Z,It):Z;return this.getBrowser=function(){var j={name:r,version:r};return L.rgx.call(j,J,U.browser),j.major=D.major(j.version),j},this.getCPU=function(){var j={architecture:r};return L.rgx.call(j,J,U.cpu),j},this.getDevice=function(){var j={vendor:r,model:r,type:r};return L.rgx.call(j,J,U.device),j},this.getEngine=function(){var j={name:r,version:r};return L.rgx.call(j,J,U.engine),j},this.getOS=function(){var j={name:r,version:r};return L.rgx.call(j,J,U.os),j},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return J},this.setUA=function(j){return J=typeof j===s&&j.length>255?D.trim(j,255):j,this},this.setUA(J),this};nt.VERSION="0.7.28",nt.BROWSER={NAME:a,MAJOR:"major",VERSION:p},nt.CPU={ARCHITECTURE:f},nt.DEVICE={MODEL:d,VENDOR:A,TYPE:l,CONSOLE:E,MOBILE:C,SMARTTV:y,TABLET:_,WEARABLE:R,EMBEDDED:O},nt.ENGINE={NAME:a,VERSION:p},nt.OS={NAME:a,VERSION:p},t.exports&&(e=t.exports=nt),e.UAParser=nt;var it=n!==void 0&&(n.jQuery||n.Zepto);if(it&&!it.ua){var St=new nt;it.ua=St.getResult(),it.ua.get=function(){return St.getUA()},it.ua.set=function(ht){St.setUA(ht);var It=St.getResult();for(var J in It)it.ua[J]=It[J]}}})(typeof window=="object"?window:h)})(z1,z1.exports);const X1=new z1.exports;let Uo=X1.getResult();function ye(t){return t&&X1.setUA(t),Uo=X1.getResult(),{name:NW(Uo),version:OW(Uo),os:DW(Uo),osVersion:Uo.os.version}}function NW(t){if(t.engine.name==="Blink"&&t.browser.name!=="WeChat")return me.CHROME;switch(t.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return me.CHROME;case"Safari":case"Mobile Safari":return me.SAFARI;case"Edge":return me.EDGE;case"Firefox":return me.FIREFOX;case"QQBrowser":return me.QQ;case"Opera":return me.OPERA;case"WeChat":return me.WECHAT;default:return t.browser.name||""}}function OW(t){let e;return e=t.engine.name==="Blink"?t.engine.version||"":t.browser.version||"",e.split(".")[0]}function DW(t){switch(t.os.name){case"Windows":return t.os.version?t.os.name+" "+t.os.version:t.os.name;default:return t.os.name||""}}function Xb(){return ye().os}function qh(){const t=ye();return!!(Uo.engine.name==="WebKit"&&t.os===Sn.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&t.name!==me.SAFARI||_r()&&t.name!==me.SAFARI)}function kW(){const t=ye();if(qh()){if(t.os===Sn.MAC_OS)return!0;if(t.os===Sn.IOS){const e=Uo.os.version&&Uo.os.version.split(".");if(e&&Number(e[0])===14&&e[1]&&Number(e[1])>=3||e&&Number(e[0])>14)return!0}}return!1}function PW(){return Uo.engine.name==="WebKit"}function Z1(){return ye().name===me.CHROME}function Lr(){return ye().name===me.SAFARI}function Cr(){return ye().name===me.FIREFOX}function _r(){return ye().os===Sn.IOS}function Zb(){const t=ye();if(t.os!==Sn.IOS||!t.osVersion)return!1;const e=t.osVersion.split(".");return Number(e[0])===13}function Hc(){const t=ye();if(t.os!==Sn.IOS||!t.osVersion)return!1;const e=t.osVersion.split(".");return Number(e[0])===15}function $b(){const t=ye();if(t.os!==Sn.IOS||!t.osVersion)return!1;const e=t.osVersion.split(".");return Number(e[0])===15&&Number(e[1])===0}function tN(){const t=ye();if(t.os!==Sn.IOS||!t.osVersion)return!1;const e=t.osVersion.split(".");return Number(e[0])===15&&Number(e[1])>=1}function $1(){const t=ye();if(t.os!==Sn.IOS||!t.osVersion)return!1;const e=t.osVersion.split(".");return Number(e[0])===15&&Number(e[1])>=2}function xo(){return Lr()&&navigator.maxTouchPoints>0}function eN(){return ye().name===me.WECHAT}function nN(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Yc(){const t=ye();return t.name===me.EDGE||t.name===me.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function rN(){return ye().os===Sn.ANDROID}var iN={exports:{}},LW=xn,BW=yi,oN=Hi.f;LW({target:"Object",stat:!0,forced:Object.defineProperty!==oN,sham:!BW},{defineProperty:oN});var sN=Oo.Object,MW=iN.exports=function(t,e,n){return sN.defineProperty(t,e,n)};sN.defineProperty.sham&&(MW.sham=!0);var aN=iN.exports;function v(t,e,n){return e in t?aN(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tI={exports:{}},cN=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},UW=cN,xW=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},Wc=Object.prototype.toString;function uN(t){return Wc.call(t)==="[object Array]"}function dN(t){return t!==null&&typeof t=="object"}function lN(t){return Wc.call(t)==="[object Function]"}function zh(t,e){if(t!=null)if(typeof t!="object"&&(t=[t]),uN(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var ai={isArray:uN,isArrayBuffer:function(t){return Wc.call(t)==="[object ArrayBuffer]"},isBuffer:xW,isFormData:function(t){return typeof FormData!="undefined"&&t instanceof FormData},isArrayBufferView:function(t){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return typeof t=="string"},isNumber:function(t){return typeof t=="number"},isObject:dN,isUndefined:function(t){return t===void 0},isDate:function(t){return Wc.call(t)==="[object Date]"},isFile:function(t){return Wc.call(t)==="[object File]"},isBlob:function(t){return Wc.call(t)==="[object Blob]"},isFunction:lN,isStream:function(t){return dN(t)&&lN(t.pipe)},isURLSearchParams:function(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator=="undefined"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window!="undefined"&&typeof document!="undefined"},forEach:zh,merge:function t(){var e={};function n(u,s){typeof e[s]=="object"&&typeof u=="object"?e[s]=t(e[s],u):e[s]=u}for(var r=0,i=arguments.length;r<i;r++)zh(arguments[r],n);return e},deepMerge:function t(){var e={};function n(u,s){typeof e[s]=="object"&&typeof u=="object"?e[s]=t(e[s],u):e[s]=typeof u=="object"?t({},u):u}for(var r=0,i=arguments.length;r<i;r++)zh(arguments[r],n);return e},extend:function(t,e,n){return zh(e,function(r,i){t[i]=n&&typeof r=="function"?UW(r,n):r}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}},Jc=ai;function AN(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var hN=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(Jc.isURLSearchParams(e))r=e.toString();else{var i=[];Jc.forEach(e,function(s,d){s!=null&&(Jc.isArray(s)?d+="[]":s=[s],Jc.forEach(s,function(a){Jc.isDate(a)?a=a.toISOString():Jc.isObject(a)&&(a=JSON.stringify(a)),i.push(AN(d)+"="+AN(a))}))}),r=i.join("&")}if(r){var u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t},QW=ai;function Xh(){this.handlers=[]}Xh.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},Xh.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Xh.prototype.forEach=function(t){QW.forEach(this.handlers,function(e){e!==null&&t(e)})};var FW=Xh,jW=ai,pN=function(t){return!(!t||!t.__CANCEL__)},VW=ai,GW=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},fN=function(t,e,n,r,i){var u=new Error(t);return GW(u,e,n,r,i)},KW=fN,eI=ai,HW=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],gN=ai,YW=gN.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(i){var u=i;return e&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(i){var u=gN.isString(i)?r(i):i;return u.protocol===t.protocol&&u.host===t.host}}():function(){return!0},Zh=ai,WW=Zh.isStandardBrowserEnv()?{write:function(t,e,n,r,i,u){var s=[];s.push(t+"="+encodeURIComponent(e)),Zh.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Zh.isString(r)&&s.push("path="+r),Zh.isString(i)&&s.push("domain="+i),u===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},nI=ai,JW=function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(KW("Request failed with status code "+n.status,n.config,null,n.request,n))},qW=hN,zW=function(t){var e,n,r,i={};return t&&eI.forEach(t.split(`
`),function(u){if(r=u.indexOf(":"),e=eI.trim(u.substr(0,r)).toLowerCase(),n=eI.trim(u.substr(r+1)),e){if(i[e]&&HW.indexOf(e)>=0)return;i[e]=e==="set-cookie"?(i[e]?i[e]:[]).concat([n]):i[e]?i[e]+", "+n:n}}),i},XW=YW,rI=fN,ZW=function(t){return new Promise(function(e,n){var r=t.data,i=t.headers;nI.isFormData(r)&&delete i["Content-Type"];var u=new XMLHttpRequest;if(t.auth){var s=t.auth.username||"",d=t.auth.password||"";i.Authorization="Basic "+btoa(s+":"+d)}if(u.open(t.method.toUpperCase(),qW(t.url,t.params,t.paramsSerializer),!0),u.timeout=t.timeout,u.onreadystatechange=function(){if(u&&u.readyState===4&&(u.status!==0||u.responseURL&&u.responseURL.indexOf("file:")===0)){var A="getAllResponseHeaders"in u?zW(u.getAllResponseHeaders()):null,p={data:t.responseType&&t.responseType!=="text"?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:A,config:t,request:u};JW(e,n,p),u=null}},u.onabort=function(){u&&(n(rI("Request aborted",t,"ECONNABORTED",u)),u=null)},u.onerror=function(){n(rI("Network Error",t,null,u)),u=null},u.ontimeout=function(){n(rI("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",u)),u=null},nI.isStandardBrowserEnv()){var a=WW,l=(t.withCredentials||XW(t.url))&&t.xsrfCookieName?a.read(t.xsrfCookieName):void 0;l&&(i[t.xsrfHeaderName]=l)}if("setRequestHeader"in u&&nI.forEach(i,function(A,p){r===void 0&&p.toLowerCase()==="content-type"?delete i[p]:u.setRequestHeader(p,A)}),t.withCredentials&&(u.withCredentials=!0),t.responseType)try{u.responseType=t.responseType}catch(A){if(t.responseType!=="json")throw A}typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(A){u&&(u.abort(),n(A),u=null)}),r===void 0&&(r=null),u.send(r)})},Br=ai,EN=function(t,e){VW.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})},$W={"Content-Type":"application/x-www-form-urlencoded"};function mN(t,e){!Br.isUndefined(t)&&Br.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var IN,$h={adapter:((typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"||typeof XMLHttpRequest!="undefined")&&(IN=ZW),IN),transformRequest:[function(t,e){return EN(e,"Accept"),EN(e,"Content-Type"),Br.isFormData(t)||Br.isArrayBuffer(t)||Br.isBuffer(t)||Br.isStream(t)||Br.isFile(t)||Br.isBlob(t)?t:Br.isArrayBufferView(t)?t.buffer:Br.isURLSearchParams(t)?(mN(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Br.isObject(t)?(mN(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if(typeof t=="string")try{t=JSON.parse(t)}catch{}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};$h.headers={common:{Accept:"application/json, text/plain, */*"}},Br.forEach(["delete","get","head"],function(t){$h.headers[t]={}}),Br.forEach(["post","put","patch"],function(t){$h.headers[t]=Br.merge($W)});var CN=$h,_N=ai,iI=function(t,e,n){return jW.forEach(n,function(r){t=r(t,e)}),t},tJ=pN,eJ=CN,nJ=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},rJ=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t};function oI(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Da=ai,vN=function(t,e){e=e||{};var n={};return Da.forEach(["url","method","params","data"],function(r){e[r]!==void 0&&(n[r]=e[r])}),Da.forEach(["headers","auth","proxy"],function(r){Da.isObject(e[r])?n[r]=Da.deepMerge(t[r],e[r]):e[r]!==void 0?n[r]=e[r]:Da.isObject(t[r])?n[r]=Da.deepMerge(t[r]):t[r]!==void 0&&(n[r]=t[r])}),Da.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(r){e[r]!==void 0?n[r]=e[r]:t[r]!==void 0&&(n[r]=t[r])}),n},tp=ai,iJ=hN,SN=FW,oJ=function(t){return oI(t),t.baseURL&&!nJ(t.url)&&(t.url=rJ(t.baseURL,t.url)),t.headers=t.headers||{},t.data=iI(t.data,t.headers,t.transformRequest),t.headers=_N.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),_N.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||eJ.adapter)(t).then(function(e){return oI(t),e.data=iI(e.data,e.headers,t.transformResponse),e},function(e){return tJ(e)||(oI(t),e&&e.response&&(e.response.data=iI(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})},yN=vN;function Yd(t){this.defaults=t,this.interceptors={request:new SN,response:new SN}}Yd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=yN(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[oJ,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(r){e.unshift(r.fulfilled,r.rejected)}),this.interceptors.response.forEach(function(r){e.push(r.fulfilled,r.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},Yd.prototype.getUri=function(t){return t=yN(this.defaults,t),iJ(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},tp.forEach(["delete","get","head","options"],function(t){Yd.prototype[t]=function(e,n){return this.request(tp.merge(n||{},{method:t,url:e}))}}),tp.forEach(["post","put","patch"],function(t){Yd.prototype[t]=function(e,n,r){return this.request(tp.merge(r||{},{method:t,url:e,data:n}))}});var sJ=Yd;function sI(t){this.message=t}sI.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},sI.prototype.__CANCEL__=!0;var TN=sI,aJ=TN;function ep(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(r){e=r});var n=this;t(function(r){n.reason||(n.reason=new aJ(r),e(n.reason))})}ep.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ep.source=function(){var t;return{token:new ep(function(e){t=e}),cancel:t}};var cJ=ep,RN=ai,uJ=cN,np=sJ,dJ=vN;function wN(t){var e=new np(t),n=uJ(np.prototype.request,e);return RN.extend(n,np.prototype,e),RN.extend(n,e),n}var go=wN(CN);go.Axios=np,go.create=function(t){return wN(dJ(go.defaults,t))},go.Cancel=TN,go.CancelToken=cJ,go.isCancel=pN,go.all=function(t){return Promise.all(t)},go.spread=function(t){return function(e){return t.apply(null,e)}},tI.exports=go,tI.exports.default=go;var Yi=tI.exports;class lJ{constructor(e){v(this,"logger",void 0),v(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.logger.debug(...this.prefixLists,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.logger.info(...this.prefixLists,...n)}warning(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.logger.warning(...this.prefixLists,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.logger.error(...this.prefixLists,...n)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}class Ge{constructor(){v(this,"_events",{}),v(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map(n=>n.listener):[]}on(e,n){this._events[e]||(this._events[e]=[]);const r=this._events[e];this._indexOfListener(r,n)===-1&&r.push({listener:n,once:!1})}once(e,n){this._events[e]||(this._events[e]=[]);const r=this._events[e];this._indexOfListener(r,n)===-1&&r.push({listener:n,once:!0})}off(e,n){if(!this._events[e])return;const r=this._events[e],i=this._indexOfListener(r,n);i!==-1&&r.splice(i,1),this._events[e].length===0&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const n=this._events[e].map(s=>s);for(var r=arguments.length,i=new Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];for(let s=0;s<n.length;s+=1){const d=n[s];d.once&&this.off(e,d.listener),d.listener.apply(this,i||[])}}_indexOfListener(e,n){let r=e.length;for(;r--;)if(e[r].listener===n)return r;return-1}}const rp=new class extends Ge{reportLogUploadError(t){this.emit("REPORT_LOG_UPLOAD",t)}};let P;(function(t){t.UNEXPECTED_ERROR="UNEXPECTED_ERROR",t.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",t.TIMEOUT="TIMEOUT",t.INVALID_PARAMS="INVALID_PARAMS",t.NOT_READABLE="NOT_READABLE",t.NOT_SUPPORTED="NOT_SUPPORTED",t.INVALID_OPERATION="INVALID_OPERATION",t.OPERATION_ABORTED="OPERATION_ABORTED",t.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",t.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",t.NETWORK_ERROR="NETWORK_ERROR",t.NETWORK_TIMEOUT="NETWORK_TIMEOUT",t.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",t.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",t.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",t.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",t.ELECTRON_IS_NULL="ELECTRON_IS_NULL",t.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",t.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",t.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",t.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",t.PERMISSION_DENIED="PERMISSION_DENIED",t.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",t.TRACK_IS_DISABLED="TRACK_IS_DISABLED",t.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",t.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",t.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",t.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",t.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",t.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",t.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",t.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",t.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",t.UID_CONFLICT="UID_CONFLICT",t.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",t.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",t.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",t.INVALID_TRACK="INVALID_TRACK",t.SENDER_NOT_FOUND="SENDER_NOT_FOUND",t.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",t.SET_ANSWER_FAILED="SET_ANSWER_FAILED",t.ICE_FAILED="ICE_FAILED",t.PC_CLOSED="PC_CLOSED",t.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",t.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",t.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",t.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",t.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",t.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",t.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",t.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",t.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",t.INVALID_REMOTE_USER="INVALID_REMOTE_USER",t.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",t.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",t.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",t.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",t.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",t.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",t.WS_ABORT="WS_ABORT",t.WS_DISCONNECT="WS_DISCONNECT",t.WS_ERR="WS_ERR",t.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",t.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",t.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",t.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",t.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",t.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",t.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",t.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",t.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",t.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",t.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",t.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",t.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",t.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",t.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",t.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",t.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",t.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",t.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",t.INVALID_PLUGIN="INVALID_PLUGIN",t.DISCONNECT_P2P="DISCONNECT_P2P",t.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT"})(P||(P={}));class B extends Error{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;super(n),v(this,"code",void 0),v(this,"message",void 0),v(this,"data",void 0),v(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(n),this.data=r}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return e==="error"&&T.error(this.toString()),e==="warning"&&T.warning(this.toString()),this}throw(){throw this.print(),this}}const ze={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function aI(t,e){const n=Math.floor(e.timeout*Math.pow(e.timeoutFactor,t));return Math.min(e.maxRetryTimeout,n)}function ci(t,e,n,r){const i=Object.assign({},ze,r);let u=i.timeout;const s=async()=>{await function(l){return new Nt(A=>{window.setTimeout(A,l)})}(u),u*=i.timeoutFactor,u=Math.min(i.maxRetryTimeout,u)};let d=!1;const a=new Nt(async(l,A)=>{e=e||(()=>!1),n=n||(()=>!0);for(let p=0;p<i.maxRetryCount;p+=1){if(d)return A(new B(P.OPERATION_ABORTED));try{const f=await t();if(!e(f,p)||p+1===i.maxRetryCount)return l(f);await s()}catch(f){if(!n(f,p)||p+1===i.maxRetryCount)return A(f);await s()}}});return a.cancel=()=>d=!0,a}function cI(){const t=new Date;return t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()}const ui={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},ip=Date.now(),uI=t=>{for(const e in ui)if(Object.prototype.hasOwnProperty.call(ui,e)&&ui[e]===t)return e;return"DEFAULT"},T=new class{constructor(){v(this,"proxyServerURL",void 0),v(this,"logLevel",ui.DEBUG),v(this,"uploadState","collecting"),v(this,"uploadLogWaitingList",[]),v(this,"uploadLogUploadingList",[]),v(this,"uploadErrorCount",0),v(this,"currentLogID",0),v(this,"url",void 0),v(this,"extLog",(t,e)=>{this.appendLogToWaitingList(t,e)})}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=[ui.DEBUG].concat(e);this.log.apply(this,r)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=[ui.INFO].concat(e);this.log.apply(this,r)}warning(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=[ui.WARNING].concat(e);this.log.apply(this,r)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=[ui.ERROR].concat(e);this.log.apply(this,r)}upload(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=[ui.DEBUG].concat(e);this.uploadLog.apply(this,r)}setLogLevel(t){t=Math.min(Math.max(0,t),4),this.logLevel=t}enableLogUpload(){Wn("UPLOAD_LOG",!0)}disableLogUpload(){Wn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(t){this.proxyServerURL=t}prefix(t){return new lJ(this).prefix(t)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(Date.now()-ip<100)return void setTimeout(()=>{this.log(...e)},Date.now()-ip);const r=Math.max(0,Math.min(4,e[0]));if(e[0]=cI()+" Agora-SDK [".concat(uI(r),"]:"),this.appendLogToWaitingList(r,e),r<this.logLevel)return;const i=cI()+" %cAgora-SDK [".concat(uI(r),"]:");let u=[];if(!st("USE_NEW_LOG"))switch(r){case ui.DEBUG:u=[i,"color: #64B5F6;"].concat(e.slice(1)),console.log.apply(console,u);break;case ui.INFO:u=[i,"color: #1E88E5; font-weight: bold;"].concat(e.slice(1)),console.log.apply(console,u);break;case ui.WARNING:u=[i,"color: #FB8C00; font-weight: bold;"].concat(e.slice(1)),console.warn.apply(console,u);break;case ui.ERROR:u=[i,"color: #B00020; font-weight: bold;"].concat(e.slice(1)),console.error.apply(console,u)}}uploadLog(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(Date.now()-ip<100)return void setTimeout(()=>{this.uploadLog(...e)},Date.now()-ip);const r=Math.max(0,Math.min(4,e[0]));e[0]=cI()+" Agora-SDK [".concat(uI(r),"]:"),this.appendLogToWaitingList(r,e)}appendLogToWaitingList(t){if(!st("UPLOAD_LOG"))return;let e="";for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach(u=>{typeof u=="object"&&(u=JSON.stringify(u)),e+="".concat(u," ")}),this.uploadLogWaitingList.push({payload_str:e,log_level:t,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const t=this.uploadLogUploadingList,e={sdk_version:lr,process_id:st("PROCESS_ID"),payload:JSON.stringify(t)};return ci(async()=>{const n=await Yi.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(st("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(st("LOG_UPLOAD_SERVER"),"/upload/v1")),e,{responseType:"text"});if(n.data!=="OK"){const r=new Error("unexpected upload log response");throw r.response=n,r}},()=>(this.uploadLogUploadingList=[],!1),n=>(n.response?rp.reportLogUploadError({status:n.response.status,data:n.response.data,headers:n.response.headers,message:n.message}):n.request?rp.reportLogUploadError({status:n.request.status,message:n.message}):rp.reportLogUploadError({status:-1,message:n.message}),!0),{timeout:2e3,maxRetryTimeout:2e4})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,10)),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),3e3)}).catch(t=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),200):window.setTimeout(()=>this.uploadLogInterval(),1e3)}))}},op={debug:console.log,info:console.log,warning:console.warn,error:console.error},sp={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},AJ={debug:0,info:1,warning:2,error:3},ap=[];let dI,bN=0,NN=0,ON=!1;function cp(){const t=new Date;return[t.getTime(),t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()]}function up(t){if(!st("UPLOAD_LOG"))return;let e;switch(t.type){case Te.MISC:e=[t.timestamp,t.level,t.type,t.module,t.instanceId,[t.msg]];break;case Te.INTERNAL_EVENT:case Te.PUBLIC_EVENT:case Te.WEB_EVENT:e=[t.timestamp,t.level,t.type,t.module,t.instanceId,[t.event,t.msg]];break;case Te.INTERNAL_API:case Te.PUBLIC_API:case Te.WEB_API:e=[t.timestamp,t.level,t.type,t.module,t.instanceId,[t.api,t.args,t.result]]}ap.push(e)}function DN(t,e){const[n,r]=cp(),i="warning",u="".concat(r," %cAgora-SDK [").concat(i,"] [INTERNAL API]:"),s={[Te.WEB_API]:"logWebAPI",[Te.PUBLIC_API]:"logPublicAPI",[Te.INTERNAL_API]:"logInternalAPI",[Te.WEB_EVENT]:"logWebEvent",[Te.PUBLIC_EVENT]:"logPublicEvent",[Te.INTERNAL_EVENT]:"logInternalEvent",[Te.MISC]:"logMisc"}[t],d=[u,sp.warning,"Log.".concat(s),e];st("USE_NEW_LOG")&&(dp(i)&&op.warning.apply(console,d),up({timestamp:n,level:i,module:"Log",instanceId:void 0,type:Te.INTERNAL_API,api:s,args:void 0,result:e.toString()}))}function lI(t){if(Array.isArray(t)){let[r,i]=t;return r||(r="Global"),{module:r,instanceId:i}}let e,n;if(typeof t.__moduleName!="string")throw new Error("Cannot get __moduleName from log instance.");e=t.__moduleName;try{n=t.__instanceId}catch{throw new Error("Cannot get __instanceId from log instance.")}return{module:e,instanceId:n}}function dp(t){return AJ[t]>=NN}function AI(t,e,n,r,i,u){if(t===Te.PUBLIC_API||t===Te.WEB_API||t===Te.INTERNAL_API)try{const{module:s,instanceId:d}=lI(n);i=i&&JSON.stringify(i),u=u instanceof Error?u.toString():u&&JSON.stringify(u);const[a,l]=cp(),A=["".concat(l," %cAgora-SDK [").concat(e,"] [").concat({[Te.PUBLIC_API]:"PUBLIC API",[Te.WEB_API]:"WEB API",[Te.INTERNAL_API]:"INTERNAL API"}[t],"]:"),sp[e],"".concat(s).concat(d?"<".concat(d,">"):"",".").concat(r),i,u];st("USE_NEW_LOG")&&(dp(e)&&op[e].apply(console,A),up({timestamp:a,level:e,module:s,instanceId:d,type:t,api:r,args:i,result:u}))}catch(s){DN(t,s)}}function hI(t,e,n,r,i){if(t===Te.WEB_EVENT||t===Te.INTERNAL_EVENT||t===Te.PUBLIC_EVENT)try{const{module:u,instanceId:s}=lI(n);typeof i!="string"&&(i=i instanceof Error?i.toString():JSON.stringify(i));const[d,a]=cp(),l=["".concat(a," %cAgora-SDK [").concat(e,"] [").concat({[Te.WEB_EVENT]:"WEB EVENT",[Te.PUBLIC_EVENT]:"PUBLIC EVENT",[Te.INTERNAL_EVENT]:"INTERNAL EVENT"}[t],"]:"),sp[e],"".concat(u).concat(s?"<".concat(s,">"):"",".on(").concat(r,")"),i||""];st("USE_NEW_LOG")&&(dp(e)&&op[e].apply(console,l),up({timestamp:d,level:e,module:u,instanceId:s,type:t,event:r,msg:i}))}catch(u){DN(t,u)}}function ka(t){dI=t}function wt(t,e,n){try{const{module:r,instanceId:i}=lI(e),[u,s]=cp(),d=["".concat(s," %cAgora-SDK [").concat(t,"] [MISC]:"),sp[t],"".concat(r).concat(i?"<".concat(i,">"):""),'"'.concat(n,'"')];st("USE_NEW_LOG")&&(dp(t)&&op[t].apply(console,d),up({timestamp:u,level:t,module:r,instanceId:i,type:Te.MISC,msg:n}))}catch(r){at("warning",["log"],"logMisc",void 0,r)}}function ke(t,e,n,r){hI(Te.INTERNAL_EVENT,t,e,n,r)}function di(t,e,n,r){hI(Te.PUBLIC_EVENT,t,e,n,r)}function Qo(t,e,n,r){hI(Te.WEB_EVENT,t,e,n,r)}function at(t,e,n,r,i){AI(Te.INTERNAL_API,t,e,n,r,i)}function qc(t,e,n,r,i){AI(Te.WEB_API,t,e,n,r,i)}function Mt(t,e,n,r,i){AI(Te.PUBLIC_API,t,e,n,r,i)}function Qn(t,e){return function(n){return class extends n{get __moduleName(){return t}get __instanceId(){if(e){if(typeof this[e]=="function")return this[e]();{const r=e.split(".");return r.length>0?_a(r).call(r,(i,u)=>{try{return i&&i[u]}catch{return}},this):this[e]}}}}}}async function lp(t){if(!t&&ON)return;if(ON=!0,!st("UPLOAD_LOG"))return void setTimeout(()=>lp(!0),5e3);if(ap.length===0)return void setTimeout(()=>lp(!0),3e3);const e=ap.slice(0,10),n={sdk_version:lr,log_version:st("LOG_VERSION"),process_id:st("PROCESS_ID"),index:bN,logs:JSON.stringify(e)};await ci(async()=>{const r=await Yi.post(dI?"https://".concat(dI,"/ls/?h=").concat(st("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(st("LOG_UPLOAD_SERVER"),"/upload/v1"),n,{responseType:"text"});if(r.data!=="OK")throw new Error("Log service response error ".concat(r.data));return r},void 0,void 0,{timeout:3e3,maxRetryTimeout:1e4}),ap.splice(0,10),bN+=e.length,setTimeout(()=>lp(!0),3e3)}const Ap="v4.11.1-0-gcd0777ab(5/9/2022, 6:52:38 PM)",lr=function(t){if(t.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return t;const e=t.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(e&&e[1]&&e[2]){const r=e[1],i=e[2];return"".concat(r,".").concat(i)}const n=t.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(n&&n[1]&&n[2]){const r=n[1],i=n[2];return"".concat(r,".").concat(100*(Number(i)+1))}return"4.0.0.999"}("4.11.1"),pI=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),an={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},hJ={"90p":ne(160,90),"90p_1":ne(160,90),"120p":ne(160,120,15,30,65),"120p_1":ne(160,120,15,30,65),"120p_3":ne(120,120,15,30,50),"120p_4":ne(212,120),"180p":ne(320,180,15,30,140),"180p_1":ne(320,180,15,30,140),"180p_3":ne(180,180,15,30,100),"180p_4":ne(240,180,15,30,120),"240p":ne(320,240,15,40,200),"240p_1":ne(320,240,15,40,200),"240p_3":ne(240,240,15,40,140),"240p_4":ne(424,240,15,40,220),"360p":ne(640,360,15,80,400),"360p_1":ne(640,360,15,80,400),"360p_3":ne(360,360,15,80,260),"360p_4":ne(640,360,30,80,600),"360p_6":ne(360,360,30,80,400),"360p_7":ne(480,360,15,80,320),"360p_8":ne(480,360,30,80,490),"360p_9":ne(640,360,15,80,800),"360p_10":ne(640,360,24,80,800),"360p_11":ne(640,360,24,80,1e3),"480p":ne(640,480,15,100,500),"480p_1":ne(640,480,15,100,500),"480p_2":ne(640,480,30,100,1e3),"480p_3":ne(480,480,15,100,400),"480p_4":ne(640,480,30,100,750),"480p_6":ne(480,480,30,100,600),"480p_8":ne(848,480,15,100,610),"480p_9":ne(848,480,30,100,930),"480p_10":ne(640,480,10,100,400),"720p":ne(1280,720,15,120,1130),"720p_1":ne(1280,720,15,120,1130),"720p_2":ne(1280,720,30,120,2e3),"720p_3":ne(1280,720,30,120,1710),"720p_5":ne(960,720,15,120,910),"720p_6":ne(960,720,30,120,1380),"1080p":ne(1920,1080,15,120,2080),"1080p_1":ne(1920,1080,15,120,2080),"1080p_2":ne(1920,1080,30,120,3e3),"1080p_3":ne(1920,1080,30,120,3150),"1080p_5":ne(1920,1080,60,120,4780),"1440p":ne(2560,1440,30,120,4850),"1440p_1":ne(2560,1440,30,120,4850),"1440p_2":ne(2560,1440,60,120,7350),"4k":ne(3840,2160,30,120,8910),"4k_1":ne(3840,2160,30,120,8910),"4k_3":ne(3840,2160,60,120,13500)},pJ={"480p":Ti(640,480,5),"480p_1":Ti(640,480,5),"480p_2":Ti(640,480,30),"480p_3":Ti(640,480,15),"720p":Ti(1280,720,5),"720p_1":Ti(1280,720,5),"720p_2":Ti(1280,720,30),"720p_3":Ti(1280,720,15),"1080p":Ti(1920,1080,5),"1080p_1":Ti(1920,1080,5),"1080p_2":Ti(1920,1080,30),"1080p_3":Ti(1920,1080,15)},fJ={"1SL1TL":EI(1,1),"3SL3TL":EI(3,3),"2SL3TL":EI(2,3)};function zc(t){return typeof t=="string"?Object.assign({},hJ[t]):t}function fI(t){return typeof t=="string"?Object.assign({},pJ[t]):t}function hp(t){return typeof t=="string"?Object.assign({},fJ[t]):t}const gJ={speech_low_quality:Xc(16e3,!1),speech_standard:Xc(32e3,!1,18),music_standard:Xc(48e3,!1),standard_stereo:Xc(48e3,!0,56),high_quality:Xc(48e3,!1,128),high_quality_stereo:Xc(48e3,!0,192)};function pp(t){return typeof t=="string"?Object.assign({},gJ[t]):t}function Wn(t,e,n){Object.keys(Ar).includes(t)&&(!n&&Object.keys(gI).includes(t)||(Ar[t]=e))}function st(t){return Ar[t]}const Ar={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},STATS_COLLECTOR_PORT:443},gI={};function Xc(t,e,n){return{sampleRate:t,stereo:e,bitrate:n}}function ne(t,e,n,r,i){return{width:t,height:e,frameRate:n,bitrateMin:r,bitrateMax:i}}function Ti(t,e,n,r,i){return{width:{max:t},height:{max:e},frameRate:n,bitrateMin:r,bitrateMax:i}}function EI(t,e){return{numSpatialLayers:t,numTemporalLayers:e}}pI||(Ar.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Ar.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Ar.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Ar.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Ar.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Ar.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Ar.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Ar.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Ar.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Ar.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Ar.AREAS=["NORTH_AMERICA","OVERSEA"]);const EJ=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Zc=[],Wd=[];var mJ=YA,IJ=Hi,CJ=Es,fp=function(t,e,n){var r=mJ(e);r in t?IJ.f(t,r,CJ(0,n)):t[r]=n},kN=Om,_J=ko,vJ=fp,SJ=se.Array,yJ=Math.max,mI=function(t,e,n){for(var r=_J(t),i=kN(e,r),u=kN(n===void 0?r:n,r),s=SJ(yJ(u-i,0)),d=0;i<u;i++,d++)vJ(s,d,t[i]);return s.length=d,s},PN=mI,TJ=Math.floor,II=function(t,e){var n=t.length,r=TJ(n/2);return n<8?RJ(t,e):wJ(t,II(PN(t,0,r),e),II(PN(t,r),e),e)},RJ=function(t,e){for(var n,r,i=t.length,u=1;u<i;){for(r=u,n=t[u];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==u++&&(t[r]=n)}return t},wJ=function(t,e,n,r){for(var i=e.length,u=n.length,s=0,d=0;s<i||d<u;)t[s+d]=s<i&&d<u?r(e[s],n[d])<=0?e[s++]:n[d++]:s<i?e[s++]:n[d++];return t},LN=II,BN=ma.match(/firefox\/(\d+)/i),bJ=!!BN&&+BN[1],NJ=/MSIE|Trident/.test(ma),MN=ma.match(/AppleWebKit\/(\d+)\./),OJ=!!MN&&+MN[1],DJ=xn,UN=Ve,kJ=Do,PJ=Ao,LJ=ko,xN=_s,CI=gn,BJ=LN,MJ=tm,QN=bJ,UJ=NJ,FN=Sc,jN=OJ,ys=[],VN=UN(ys.sort),xJ=UN(ys.push),QJ=CI(function(){ys.sort(void 0)}),FJ=CI(function(){ys.sort(null)}),jJ=MJ("sort"),GN=!CI(function(){if(FN)return FN<70;if(!(QN&&QN>3)){if(UJ)return!0;if(jN)return jN<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)ys.push({k:e+r,v:n})}for(ys.sort(function(u,s){return s.v-u.v}),r=0;r<ys.length;r++)e=ys[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return i!=="DGBEFHACIJK"}});DJ({target:"Array",proto:!0,forced:QJ||!FJ||!jJ||!GN},{sort:function(t){t!==void 0&&kJ(t);var e=PJ(this);if(GN)return t===void 0?VN(e):VN(e,t);var n,r,i=[],u=LJ(e);for(r=0;r<u;r++)r in e&&xJ(i,e[r]);for(BJ(i,function(s){return function(d,a){return a===void 0?-1:d===void 0?1:s!==void 0?+s(d,a)||0:xN(d)>xN(a)?1:-1}}(t)),n=i.length,r=0;r<n;)e[r]=i[r++];for(;r<u;)delete e[r++];return e}});var VJ=Cs("Array").sort,GJ=ri,KJ=VJ,_I=Array.prototype,vI=function(t){var e=t.sort;return t===_I||GJ(_I,t)&&e===_I.sort?KJ:e};function gp(t,e){if(typeof t!="boolean")throw new B(P.INVALID_PARAMS,"Invalid ".concat(e,": The value is of the boolean type."))}function Nn(t,e,n){if(!n.includes(t))throw new B(P.INVALID_PARAMS,"".concat(e," can only be set as ").concat(JSON.stringify(n)))}function we(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(t<n||t>r||i&&!HJ(t))throw new B(P.INVALID_PARAMS,"invalid ".concat(e,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function Jn(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(t==null)throw new B(P.INVALID_PARAMS,"".concat(e||"param"," cannot be empty"));if(!KN(t,n,r,i))throw new B(P.INVALID_PARAMS,"Invalid ".concat(e||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function Jd(t,e){if(!Array.isArray(t))throw new B(P.INVALID_PARAMS,"".concat(e," should be an array"))}function SI(t){if(typeof t!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(t))throw T.error("Invalid Channel Name ".concat(t)),new B(P.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function yI(t){if(e=t,!(typeof e=="number"&&Math.floor(e)===e&&0<=e&&e<=4294967295||KN(t,1,255)))throw T.error("Invalid UID ".concat(t," ").concat(typeof t)),new B(P.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var e;typeof t=="string"&&T.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Oe(t){return t==null}function KN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof t=="string"&&t.length<=n&&t.length>=e&&(!r||YJ(t))}function HJ(t){return typeof t=="number"&&t%1==0}function YJ(t){if(typeof t!="string")return!1;for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<0||n>255)return!1}return!0}let HN,Te,Fn;(function(t){t.FREE="free",t.UPLOADING="uploading"})(HN||(HN={})),function(t){t[t.MISC=0]="MISC",t[t.INTERNAL_EVENT=1]="INTERNAL_EVENT",t[t.PUBLIC_EVENT=2]="PUBLIC_EVENT",t[t.WEB_EVENT=3]="WEB_EVENT",t[t.INTERNAL_API=4]="INTERNAL_API",t[t.WEB_API=5]="WEB_API",t[t.PUBLIC_API=6]="PUBLIC_API"}(Te||(Te={})),function(t){t.NONE="none",t.INIT="init",t.CANPLAY="canplay",t.PLAYING="playing",t.PAUSED="paused",t.SUSPEND="suspend",t.STALLED="stalled",t.WAITING="waiting",t.ERROR="error",t.DESTROYED="destroyed",t.ABORT="abort",t.ENDED="ended",t.EMPTIED="emptied",t.LOADEDDATA="loadeddata"}(Fn||(Fn={}));const TI={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function WJ(t){return Jn(t.reportId,"params.reportId",0,100,!1),Jn(t.category,"params.category",0,100,!1),Jn(t.event,"params.event",0,100,!1),Jn(t.label,"params.label",0,100,!1),we(t.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const JJ={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let On,Me,YN,Ut,Pt,Pa,Fo,$c,qd,Mr,Dn,jt,RI,mn,ie,tr,In,te,oe,hr,_e,WN,vr;function JN(t){return we(t.timeout,"config.timeout",0,1e5),we(t.timeoutFactor,"config.timeoutFactor",0,100,!1),we(t.maxRetryCount,"config.maxRetryConfig",0,1/0),we(t.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function qJ(t){return Nn(t.codec,"config.codec",["vp8","vp9","av1","h264"]),Nn(t.mode,"config.mode",["rtc","live"]),t.audioCodec!==void 0&&Nn(t.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),t.proxyServer!==void 0&&Jn(t.proxyServer,"config.proxyServer",1,1e4),t.turnServer!==void 0&&qN(t.turnServer),t.httpRetryConfig!==void 0&&JN(t.httpRetryConfig),t.websocketRetryConfig!==void 0&&JN(t.websocketRetryConfig),!0}function wI(t){if(!Array.isArray(t)||t.length<1)return!1;try{t.forEach(e=>{if(!e.urls)throw Error()})}catch{return!1}return!0}function qN(t){return Jn(t.turnServerURL,"turnServerURL"),Jn(t.username,"username"),Jn(t.password,"password"),t.udpport&&we(t.udpport,"udpport",1,99999,!0),t.forceturn&&gp(t.forceturn,"forceturn"),t.security&&gp(t.security,"security"),t.tcpport&&we(t.tcpport,"tcpport",1,99999,!0),!0}function zN(t){return t.level!==void 0&&Nn(t.level,"level",[1,2,3]),!0}(function(t){t.PUBLISH="publish",t.SUBSCRIBE="subscribe",t.WS_COMPRESSOR_INIT="ws_compressor_init",t.SESSION_INIT="session_init",t.JOIN_CHOOSE_SERVER="join_choose_server",t.REQ_USER_ACCOUNT="req_user_account",t.JOIN_GATEWAY="join_gateway",t.REJOIN_GATEWAY="rejoin_gateway",t.STREAM_SWITCH="stream_switch",t.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",t.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",t.FIRST_VIDEO_RECEIVED="first_video_received",t.FIRST_AUDIO_RECEIVED="first_audio_received",t.FIRST_VIDEO_DECODE="first_video_decode",t.FIRST_AUDIO_DECODE="first_audio_decode",t.ON_ADD_AUDIO_STREAM="on_add_audio_stream",t.ON_ADD_VIDEO_STREAM="on_add_video_stream",t.ON_UPDATE_STREAM="on_update_stream",t.ON_REMOVE_STREAM="on_remove_stream",t.USER_ANALYTICS="req_user_analytics"})(On||(On={})),function(t){t.SESSION="io.agora.pb.Wrtc.Session",t.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",t.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",t.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",t.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",t.PUBLISH="io.agora.pb.Wrtc.Publish",t.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",t.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",t.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",t.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",t.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",t.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",t.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",t.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",t.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",t.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",t.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",t.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",t.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",t.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",t.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",t.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",t.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",t.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",t.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",t.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",t.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",t.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",t.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",t.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(Me||(Me={})),function(t){t[t.WORKER_EVENT=156]="WORKER_EVENT",t[t.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(YN||(YN={})),function(t){t.CREATE_CLIENT="createClient",t.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",t.SET_AREA="setArea",t.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",t.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",t.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",t.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",t.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",t.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",t.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",t.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",t.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",t.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",t.START_PROXY_SERVER="Client.startProxyServer",t.STOP_PROXY_SERVER="Client.stopProxyServer",t.SET_PROXY_SERVER="Client.setProxyServer",t.SET_TURN_SERVER="Client.setTurnServer",t.SET_CLIENT_ROLE="Client.setClientRole",t.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",t.ENABLE_DUAL_STREAM="Client.enableDualStream",t.DISABLE_DUAL_STREAM="Client.disableDualStream",t.JOIN="Client.join",t.LEAVE="Client.leave",t.PUBLISH="Client.publish",t.UNPUBLISH="Client.unpublish",t.SUBSCRIBE="Client.subscribe",t.MASS_SUBSCRIBE="Client.massSubscribe",t.MASS_UNSUBSCRIBE="Client.massUnsubscribe",t.UNSUBSCRIBE="Client.unsubscribe",t.RENEW_TOKEN="Client.renewToken",t.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",t.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",t.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",t.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",t.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",t.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",t.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",t.START_LIVE_STREAMING="Client.startLiveStreaming",t.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",t.STOP_LIVE_STREAMING="Client.stopLiveStreaming",t.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",t.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",t.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",t.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",t.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",t.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",t.SET_CONFIG_DISTRIBUTE="_configDistribute",t.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",t.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",t.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",t.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",t.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",t.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",t.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",t.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",t.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",t.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",t.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",t.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",t.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",t.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",t.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",t.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",t.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",t.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",t.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",t.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",t.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",t.STREAM_TYPE_CHANGE="streamTypeChange",t.CONNECTION_STATE_CHANGE="connectionStateChange",t.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(Ut||(Ut={})),function(t){t.TRACER="tracer"}(Pt||(Pt={})),function(t){t.IDLE="IDLE",t.INITING="INITING",t.INITEND="INITEND"}(Pa||(Pa={})),function(t){t.STATE_CHANGE="state_change",t.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",t.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",t.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Fo||(Fo={})),function(t){t[t.ACCESS_POINT=101]="ACCESS_POINT",t[t.UNILBS=201]="UNILBS",t[t.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}($c||($c={})),function(t){t[t.IIIEGAL_APPID=1]="IIIEGAL_APPID",t[t.IIIEGAL_UID=2]="IIIEGAL_UID",t[t.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(qd||(qd={})),function(t){t[t.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",t[t.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",t[t.INTERNAL_ERROR=8]="INTERNAL_ERROR",t[t.NO_AUTHORIZED=9]="NO_AUTHORIZED",t[t.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",t[t.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",t[t.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",t[t.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",t[t.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",t[t.USER_OVERLOAD=16]="USER_OVERLOAD",t[t.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",t[t.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Mr||(Mr={})),function(t){t[t.NO_FLAG_SET=100]="NO_FLAG_SET",t[t.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",t[t.INVALID_FALG_SET=102]="INVALID_FALG_SET",t[t.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",t[t.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",t[t.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",t[t.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",t[t.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",t[t.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",t[t.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",t[t.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",t[t.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",t[t.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",t[t.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",t[t.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",t[t.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",t[t.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",t[t.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",t[t.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Dn||(Dn={})),function(t){t[t.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",t[t.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",t[t.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",t[t.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",t[t.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",t[t.K_TICKET_INVALID=7]="K_TICKET_INVALID",t[t.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",t[t.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",t[t.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",t[t.K_UID_BANNED=14]="K_UID_BANNED",t[t.K_IP_BANNED=15]="K_IP_BANNED",t[t.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",t[t.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",t[t.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",t[t.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",t[t.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",t[t.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",t[t.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",t[t.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",t[t.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",t[t.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",t[t.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",t[t.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",t[t.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",t[t.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",t[t.ERR_INVALID_UID=117]="ERR_INVALID_UID",t[t.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",t[t.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",t[t.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",t[t.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",t[t.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",t[t.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",t[t.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",t[t.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",t[t.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",t[t.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",t[t.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",t[t.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",t[t.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",t[t.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",t[t.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",t[t.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",t[t.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",t[t.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",t[t.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",t[t.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",t[t.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",t[t.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",t[t.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",t[t.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",t[t.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",t[t.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",t[t.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",t[t.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",t[t.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",t[t.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",t[t.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(jt||(jt={})),function(t){t[t.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",t[t.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",t[t.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(RI||(RI={})),function(t){t.LEAVE="LEAVE",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.UID_BANNED="UID_BANNED",t.IP_BANNED="IP_BANNED",t.CHANNEL_BANNED="CHANNEL_BANNED",t.FALLBACK="FALLBACK"}(mn||(mn={})),function(t){t.CONNECTION_STATE_CHANGE="connection-state-change",t.MEDIA_RECONNECT_START="media-reconnect-start",t.MEDIA_RECONNECT_END="media-reconnect-end",t.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",t.USER_JOINED="user-joined",t.USER_LEAVED="user-left",t.USER_PUBLISHED="user-published",t.USER_UNPUBLISHED="user-unpublished",t.USER_INFO_UPDATED="user-info-updated",t.CLIENT_BANNED="client-banned",t.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",t.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",t.VOLUME_INDICATOR="volume-indicator",t.CRYPT_ERROR="crypt-error",t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",t.NETWORK_QUALITY="network-quality",t.STREAM_TYPE_CHANGED="stream-type-changed",t.STREAM_FALLBACK="stream-fallback",t.RECEIVE_METADATA="receive-metadata",t.STREAM_MESSAGE="stream-message",t.LIVE_STREAMING_ERROR="live-streaming-error",t.LIVE_STREAMING_WARNING="live-streaming-warning",t.INJECT_STREAM_STATUS="stream-inject-status",t.EXCEPTION="exception",t.ERROR="error",t.P2P_LOST="p2p_lost",t.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",t.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",t.PUBLISHED_USER_LIST="published-user-list"}(ie||(ie={})),function(t){t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.MULTI_IP="MULTI_IP",t.TIMEOUT="TIMEOUT",t.OFFLINE="OFFLINE",t.LEAVE="LEAVE",t.P2P_FAILED="P2P_FAILED",t.FALLBACK="FALLBACK"}(tr||(tr={})),function(t){t.CONNECTING="connecting",t.CONNECTED="connected",t.RECONNECTING="reconnecting",t.CLOSED="closed"}(In||(In={})),function(t){t.WS_CONNECTED="ws_connected",t.WS_RECONNECTING="ws_reconnecting",t.WS_CLOSED="ws_closed",t.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",t.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",t.ON_BINARY_DATA="on_binary_data",t.REQUEST_RECOVER="request_recover",t.REQUEST_JOIN_INFO="request_join_info",t.REQUEST_REJOIN_INFO="req_rejoin_info",t.IS_P2P_DISCONNECTED="is_p2p_dis",t.DISCONNECT_P2P="dis_p2p",t.ABORT_P2P_EXECUTION="abort_p2p_execution",t.NEED_RENEW_SESSION="need-sid",t.REPORT_JOIN_GATEWAY="report_join_gateway",t.REQUEST_TIMEOUT="request_timeout",t.REQUEST_SUCCESS="request_success",t.JOIN_RESPONSE="join_response"}(te||(te={})),function(t){t.PING="ping",t.PING_BACK="ping_back",t.JOIN="join_v3",t.REJOIN="rejoin_v3",t.LEAVE="leave",t.SET_CLIENT_ROLE="set_client_role",t.PUBLISH="publish",t.UNPUBLISH="unpublish",t.SUBSCRIBE="subscribe",t.SUBSCRIBE_STREAMS="subscribe_streams",t.UNSUBSCRIBE="unsubscribe",t.UNSUBSCRIBE_STREAMS="unsubscribe_streams",t.SUBSCRIBE_CHANGE="subscribe_change",t.TRAFFIC_STATS="traffic_stats",t.RENEW_TOKEN="renew_token",t.SWITCH_VIDEO_STREAM="switch_video_stream",t.DEFAULT_VIDEO_STREAM="default_video_stream",t.SET_FALLBACK_OPTION="set_fallback_option",t.GATEWAY_INFO="gateway_info",t.CONTROL="control",t.SEND_METADATA="send_metadata",t.DATA_STREAM="data_stream",t.PICK_SVC_LAYER="pick_svc_layer",t.RESTART_ICE="restart_ice",t.CONNECT_PC="connect_pc",t.SET_VIDEO_PROFILE="set_video_profile"}(oe||(oe={})),function(t){t.PUBLISH_STATS="publish_stats",t.PUBLISH_RELATED_STATS="publish_related_stats",t.SUBSCRIBE_STATS="subscribe_stats",t.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",t.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",t.DENOISER_STATS="denoiser_stats",t.TRANSPORT_STATS="transport_stats"}(hr||(hr={})),function(t){t.ON_USER_ONLINE="on_user_online",t.ON_USER_OFFLINE="on_user_offline",t.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",t.ON_PUBLISH_STREAM="on_publish_stream",t.ON_UPLINK_STATS="on_uplink_stats",t.ON_P2P_LOST="on_p2p_lost",t.ON_REMOVE_STREAM="on_remove_stream",t.ON_ADD_AUDIO_STREAM="on_add_audio_stream",t.ON_ADD_VIDEO_STREAM="on_add_video_stream",t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",t.ON_USER_BANNED="on_user_banned",t.ON_NOTIFICATION="on_notification",t.ON_CRYPT_ERROR="on_crypt_error",t.MUTE_AUDIO="mute_audio",t.MUTE_VIDEO="mute_video",t.UNMUTE_AUDIO="unmute_audio",t.UNMUTE_VIDEO="unmute_video",t.ON_P2P_OK="on_p2p_ok",t.RECEIVE_METADATA="receive_metadata",t.ON_DATA_STREAM="on_data_stream",t.ENABLE_LOCAL_VIDEO="enable_local_video",t.DISABLE_LOCAL_VIDEO="disable_local_video",t.ENABLE_LOCAL_AUDIO="enable_local_audio",t.DISABLE_LOCAL_AUDIO="disable_local_audio",t.ON_PUBLISHED_USER_LIST="on_published_user_list"}(_e||(_e={})),function(t){t.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",t.NEED_ANSWER="NEED_ANSWER",t.NEED_RENEGOTIATE="NEED_RENEGOTIATE",t.P2P_LOST="P2P_LOST",t.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",t.NEED_UNPUB="NEED_UNPUB",t.NEED_UNSUB="NEED_UNSUB",t.NEED_UPLOAD="NEED_UPLOAD",t.NEED_CONTROL="NEED_CONTROL",t.START_RECONNECT="START_RECONNECT",t.END_RECONNECT="END_RECONNECT",t.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(WN||(WN={})),function(t){t.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",t.RECEIVE_TRACK_BUFFER="receive_track_buffer",t.ON_AUDIO_BUFFER="on_audio_buffer",t.UPDATE_SOURCE="update_source"}(vr||(vr={}));const bI={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},NI={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},XN={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},zJ={uplinkNetworkQuality:0,downlinkNetworkQuality:0},ZN={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let ue,Ke,Ts;(function(t){t.CONNECTED="websocket:connected",t.RECONNECTING="websocket:reconnecting",t.WILL_RECONNECT="websocket:will_reconnect",t.CLOSED="websocket:closed",t.FAILED="websocket:failed",t.ON_MESSAGE="websocket:on_message",t.REQUEST_NEW_URLS="websocket:request_new_urls",t.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",t.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(ue||(ue={})),function(t){t.TRANSCODE="mix_streaming",t.RAW="raw_streaming",t.INJECT="inject_streaming"}(Ke||(Ke={})),function(t){t[t.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",t[t.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",t[t.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",t[t.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",t[t.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",t[t.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",t[t.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",t[t.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",t[t.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",t[t.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",t[t.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Ts||(Ts={}));const XJ={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},OI={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function DI(t,e){Jn(t.url,"".concat(e,".url"),1,1e3,!1),Oe(t.x)||we(t.x,"".concat(e,".x"),0,1e4),Oe(t.y)||we(t.y,"".concat(e,".y"),0,1e4),Oe(t.width)||we(t.width,"".concat(e,".width"),0,1e4),Oe(t.height)||we(t.height,"".concat(e,".height"),0,1e4),Oe(t.zOrder)||we(t.zOrder,"".concat(e,".zOrder"),0,255),Oe(t.alpha)||we(t.alpha,"".concat(e,".alpha"),0,1,!1)}const ZJ={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},$J={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let Ri,tu,Ue,$N,qn,Wi,er,Rs,He,Xe,Fe,xt,jn,kI,PI,ws,eu,de;function tO(t){if(!t.channelName)throw new B(P.INVALID_PARAMS,"invalid channelName in info");if(!t.uid||typeof t.uid!="number")throw new B(P.INVALID_PARAMS,"invalid uid in info, uid must be a number");return t.token&&Jn(t.token,"info.token",1,2047),yI(t.uid),SI(t.channelName),!0}function eO(t){return Nn(t,"mediaSource",["screen","window","application"]),!0}(function(t){t.WARNING="@live_uap-warning",t.ERROR="@line_uap-error",t.PUBLISH_STREAM_STATUS="@live_uap-publish-status",t.INJECT_STREAM_STATUS="@live_uap-inject-status",t.WORKER_STATUS="@live_uap-worker-status",t.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(Ri||(Ri={})),function(t){t.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(tu||(tu={})),function(t){t[t.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",t[t.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",t[t.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",t[t.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",t[t.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",t[t.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",t[t.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",t[t.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",t[t.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",t[t.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",t[t.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",t[t.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",t[t.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",t[t.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",t[t.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",t[t.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",t[t.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",t[t.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(Ue||(Ue={})),function(t){t.CONNECT_FAILED="connect failed",t.CONNECT_TIMEOUT="connect timeout",t.WS_DISCONNECTED="websocket disconnected",t.REQUEST_TIMEOUT="request timeout",t.REQUEST_FAILED="request failed",t.WAIT_STATUS_TIMEOUT="wait status timeout",t.WAIT_STATUS_ERROR="wait status error",t.BAD_STATE="bad state",t.WS_ABORT="ws abort",t.AP_REQUEST_TIMEOUT="AP request timeout",t.AP_JSON_PARSE_ERROR="AP json parse error",t.AP_REQUEST_ERROR="AP request error",t.AP_REQUEST_ABORT="AP request abort"}($N||($N={})),function(t){t[t.SetSdkProfile=0]="SetSdkProfile",t[t.SetSourceChannel=1]="SetSourceChannel",t[t.SetSourceUserId=2]="SetSourceUserId",t[t.SetDestChannel=3]="SetDestChannel",t[t.StartPacketTransfer=4]="StartPacketTransfer",t[t.StopPacketTransfer=5]="StopPacketTransfer",t[t.UpdateDestChannel=6]="UpdateDestChannel",t[t.Reconnect=7]="Reconnect",t[t.SetVideoProfile=8]="SetVideoProfile"}(qn||(qn={})),function(t){t.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",t.NETWORK_CONNECTED="NETWORK_CONNECTED",t.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",t.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",t.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",t.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",t.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",t.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",t.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",t.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Wi||(Wi={})),function(t){t.RELAY_STATE_IDLE="RELAY_STATE_IDLE",t.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",t.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",t.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(er||(er={})),function(t){t.RELAY_OK="RELAY_OK",t.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",t.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",t.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Rs||(Rs={})),function(t){t.High="high",t.Low="low",t.Audio="audio",t.Screen="screen",t.ScreenLow="screen_low"}(He||(He={})),function(t){t.DISCONNECT="disconnect",t.CONNECTION_STATE_CHANGE="connection-state-change",t.NETWORK_QUALITY="network-quality",t.STREAM_TYPE_CHANGE="stream-type-change",t.IS_P2P_DISCONNECTED="is-p2p-dis",t.DISCONNECT_P2P="dis-p2p",t.REQUEST_NEW_GATEWAY_LIST="req-gate-url",t.NEED_RENEW_SESSION="need-sid",t.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",t.JOIN_RESPONSE="join-response"}(Xe||(Xe={})),function(t){t[t.Nothing=0]="Nothing",t[t.Audio=1]="Audio",t[t.LwoVideo=2]="LwoVideo",t[t.Video=4]="Video",t[t.Data=8]="Data"}(Fe||(Fe={})),function(t){t.NEED_RENEGOTIATE="@need_renegotiate",t.NEED_REPLACE_TRACK="@need_replace_track",t.NEED_CLOSE="@need_close",t.NEED_ENABLE_TRACK="@need_enable_track",t.NEED_DISABLE_TRACK="@need_disable_track",t.NEED_SESSION_ID="@need_sid",t.SET_OPTIMIZATION_MODE="@set_optimization_mode",t.GET_STATS="@get_stats",t.GET_LOW_VIDEO_TRACK="@get_low_video_track",t.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",t.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",t.NEED_MUTE_TRACK="@need_mute_track",t.NEED_UNMUTE_TRACK="@need_unmute_track"}(xt||(xt={})),function(t){t.SCREEN_TRACK="screen_track",t.LOW_STREAM="low_stream"}(jn||(jn={})),function(t){t[t.HIGH_STREAM=0]="HIGH_STREAM",t[t.LOW_STREAM=1]="LOW_STREAM"}(kI||(kI={})),function(t){t[t.DISABLE=0]="DISABLE",t[t.LOW_STREAM=1]="LOW_STREAM",t[t.AUDIO_ONLY=2]="AUDIO_ONLY"}(PI||(PI={})),function(t){t.SOURCE_STATE_CHANGE="source-state-change",t.TRACK_ENDED="track-ended",t.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",t.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",t.CLOSED="closed"}(ws||(ws={})),function(t){t.FIRST_FRAME_DECODED="first-frame-decoded",t.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(eu||(eu={})),function(t){t.CHINA="CHINA",t.ASIA="ASIA",t.NORTH_AMERICA="NORTH_AMERICA",t.EUROPE="EUROPE",t.JAPAN="JAPAN",t.INDIA="INDIA",t.KOREA="KOREA",t.HKMC="HKMC",t.US="US",t.OCEANIA="OCEANIA",t.SOUTH_AMERICA="SOUTH_AMERICA",t.AFRICA="AFRICA",t.OVERSEA="OVERSEA",t.GLOBAL="GLOBAL"}(de||(de={}));const tq=[de.AFRICA,de.ASIA,de.CHINA,de.EUROPE,de.GLOBAL,de.INDIA,de.JAPAN,de.NORTH_AMERICA,de.OCEANIA,de.OVERSEA,de.SOUTH_AMERICA];let cn;(function(t){t.CHINA="CN",t.ASIA="AS",t.NORTH_AMERICA="NA",t.EUROPE="EU",t.JAPAN="JP",t.INDIA="IN",t.KOREA="KR",t.HKMC="HK",t.US="US",t.OCEANIA="OC",t.SOUTH_AMERICA="SA",t.AFRICA="AF",t.OVERSEA="OVERSEA",t.GLOBAL="GLOBAL"})(cn||(cn={}));const LI={CHINA:{},ASIA:{CODE:cn.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:cn.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:cn.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:cn.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:cn.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:cn.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:cn.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:cn.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:cn.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:cn.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:cn.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:cn.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:cn.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let zd,nO,ee,_t,Ur,le,Sr,La;pI&&(LI.CHINA={CODE:cn.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(t){t.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(zd||(zd={}));class rO extends Ge{constructor(e,n){super(),v(this,"onICEConnectionStateChange",void 0),v(this,"onConnectionStateChange",void 0),v(this,"onDTLSTransportStateChange",void 0),v(this,"onDTLSTransportError",void 0),v(this,"onICETransportStateChange",void 0),v(this,"onFirstAudioReceived",void 0),v(this,"onFirstVideoReceived",void 0),v(this,"onFirstAudioDecoded",void 0),v(this,"onFirstVideoDecoded",void 0),v(this,"onSelectedLocalCandidateChanged",void 0),v(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(t){t.SEND="sendonly",t.RECV="recvonly",t.SENDRECV="sendrecv",t.INACTIVE="inactive"})(nO||(nO={})),function(t){t.VIDEO="video",t.AUDIO="audio"}(ee||(ee={})),function(t){t.LocalVideoTrack="videoTrack",t.LocalAudioTrack="audioTrack",t.LocalVideoLowTrack="videoLowTrack"}(_t||(_t={})),function(t){t.New="new",t.Connected="connected",t.Reconnecting="reconnecting",t.Disconnected="disconnected"}(Ur||(Ur={})),function(t){t.StateChange="stateChange",t.IceConnectionStateChange="iceConnectionStateChange",t.RequestMuteLocal="requestMuteLocal",t.RequestUnmuteLocal="requestUnmuteLocal",t.RequestRePublish="requestRePublish",t.RequestReSubscribe="requestReSubscribe",t.RequestUploadStats="requestUploadStats",t.MediaReconnectStart="MediaReconnectStart",t.MediaReconnectEnd="MediaReconnectEnd",t.NeedSignalRTT="NeedSignalRTT",t.RequestRestartICE="RequestRestartIce",t.PeerConnectionStateChange="PeerConnectionStateChange",t.RequestReconnect="RequestReconnect",t.RequestReconnectPC="RequestReconnectPC",t.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",t.P2PLost="P2PLost",t.UpdateVideoEncoder="UpdateVideoEncoder",t.ConnectionTypeChange="ConnectionTypeChange"}(le||(le={})),function(t){t.ONLINE="ONLINE",t.OFFLINE="OFFLINE"}(Sr||(Sr={})),function(t){t.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",t.ONLINE="ONLINE",t.OFFLINE="OFFLINE"}(La||(La={}));const eq={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let xr,pr;(function(t){t.ON_TRACK="on_track",t.ON_NODE="on_node"})(xr||(xr={})),function(t){t.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",t.REQUEST_CONSTRAINTS="request_constraints"}(pr||(pr={}));const nr={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function rr(){return nr}var iO=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined",nq=ps,rq=Ec,iq=m.RangeError,oO=function(t){if(t===void 0)return 0;var e=nq(t),n=rq(e);if(e!==n)throw iq("Wrong length or index");return n},oq=m.Array,sq=Math.abs,jo=Math.pow,aq=Math.floor,cq=Math.log,uq=Math.LN2,dq={pack:function(t,e,n){var r,i,u,s=oq(n),d=8*n-e-1,a=(1<<d)-1,l=a>>1,A=e===23?jo(2,-24)-jo(2,-77):0,p=t<0||t===0&&1/t<0?1:0,f=0;for((t=sq(t))!=t||t===1/0?(i=t!=t?1:0,r=a):(r=aq(cq(t)/uq),t*(u=jo(2,-r))<1&&(r--,u*=2),(t+=r+l>=1?A/u:A*jo(2,1-l))*u>=2&&(r++,u/=2),r+l>=a?(i=0,r=a):r+l>=1?(i=(t*u-1)*jo(2,e),r+=l):(i=t*jo(2,l-1)*jo(2,e),r=0));e>=8;)s[f++]=255&i,i/=256,e-=8;for(r=r<<e|i,d+=e;d>0;)s[f++]=255&r,r/=256,d-=8;return s[--f]|=128*p,s},unpack:function(t,e){var n,r=t.length,i=8*r-e-1,u=(1<<i)-1,s=u>>1,d=i-7,a=r-1,l=t[a--],A=127&l;for(l>>=7;d>0;)A=256*A+t[a--],d-=8;for(n=A&(1<<-d)-1,A>>=-d,d+=e;d>0;)n=256*n+t[a--],d-=8;if(A===0)A=1-s;else{if(A===u)return n?NaN:l?-1/0:1/0;n+=jo(2,e),A-=s}return(l?-1:1)*n*jo(2,A-e)}},lq=la,sO=TA,Aq=fs,hq=IA,pq=Zn,fq=W,aO=TA,gq=fs,Eq=function(t,e,n){var r=hq(e);r in t?pq.f(t,r,fq(0,n)):t[r]=n},mq=m.Array,Iq=Math.max,cO=function(t,e,n){for(var r=gq(t),i=aO(e,r),u=aO(n===void 0?r:n,r),s=mq(Iq(u-i,0)),d=0;i<u;i++,d++)Eq(s,d,t[i]);return s.length=d,s},Ep=m,BI=Dt,MI=M,Cq=iO,uO=sE,dO=vi,lO=jS,UI=b,mp=dd,_q=ps,vq=Ec,Ip=oO,AO=dq,Sq=eh,hO=pa,yq=ad.f,Tq=Zn.f,Rq=function(t){for(var e=lq(this),n=Aq(e),r=arguments.length,i=sO(r>1?arguments[1]:void 0,n),u=r>2?arguments[2]:void 0,s=u===void 0?n:sO(u,n);s>i;)e[i++]=t;return e},wq=cO,pO=ud,bq=uO.PROPER,fO=uO.CONFIGURABLE,nu=Si.get,gO=Si.set,xI="ArrayBuffer",Nq="DataView",EO="Wrong index",Ji=Ep.ArrayBuffer,qi=Ji,ru=qi&&qi.prototype,Vo=Ep.DataView,Ba=Vo&&Vo.prototype,mO=Object.prototype,Oq=Ep.Array,Cp=Ep.RangeError,Dq=BI(Rq),kq=BI([].reverse),IO=AO.pack,CO=AO.unpack,_O=function(t){return[255&t]},vO=function(t){return[255&t,t>>8&255]},SO=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},yO=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Pq=function(t){return IO(t,23,4)},Lq=function(t){return IO(t,52,8)},_p=function(t,e){Tq(t.prototype,e,{get:function(){return nu(this)[e]}})},bs=function(t,e,n,r){var i=Ip(n),u=nu(t);if(i+e>u.byteLength)throw Cp(EO);var s=nu(u.buffer).bytes,d=i+u.byteOffset,a=wq(s,d,d+e);return r?a:kq(a)},Ns=function(t,e,n,r,i,u){var s=Ip(n),d=nu(t);if(s+e>d.byteLength)throw Cp(EO);for(var a=nu(d.buffer).bytes,l=s+d.byteOffset,A=r(+i),p=0;p<e;p++)a[l+p]=A[u?p:e-p-1]};if(Cq){var TO=bq&&Ji.name!==xI;if(UI(function(){Ji(1)})&&UI(function(){new Ji(-1)})&&!UI(function(){return new Ji,new Ji(1.5),new Ji(NaN),TO&&!fO}))TO&&fO&&dO(Ji,"name",xI);else{(qi=function(t){return mp(this,ru),new Ji(Ip(t))}).prototype=ru;for(var QI,RO=yq(Ji),wO=0;RO.length>wO;)(QI=RO[wO++])in qi||dO(qi,QI,Ji[QI]);ru.constructor=qi}hO&&Sq(Ba)!==mO&&hO(Ba,mO);var vp=new Vo(new qi(2)),bO=BI(Ba.setInt8);vp.setInt8(0,2147483648),vp.setInt8(1,2147483649),!vp.getInt8(0)&&vp.getInt8(1)||lO(Ba,{setInt8:function(t,e){bO(this,t,e<<24>>24)},setUint8:function(t,e){bO(this,t,e<<24>>24)}},{unsafe:!0})}else ru=(qi=function(t){mp(this,ru);var e=Ip(t);gO(this,{bytes:Dq(Oq(e),0),byteLength:e}),MI||(this.byteLength=e)}).prototype,Ba=(Vo=function(t,e,n){mp(this,Ba),mp(t,ru);var r=nu(t).byteLength,i=_q(e);if(i<0||i>r)throw Cp("Wrong offset");if(i+(n=n===void 0?r-i:vq(n))>r)throw Cp("Wrong length");gO(this,{buffer:t,byteLength:n,byteOffset:i}),MI||(this.buffer=t,this.byteLength=n,this.byteOffset=i)}).prototype,MI&&(_p(qi,"byteLength"),_p(Vo,"buffer"),_p(Vo,"byteLength"),_p(Vo,"byteOffset")),lO(Ba,{getInt8:function(t){return bs(this,1,t)[0]<<24>>24},getUint8:function(t){return bs(this,1,t)[0]},getInt16:function(t){var e=bs(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=bs(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return yO(bs(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return yO(bs(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return CO(bs(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return CO(bs(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Ns(this,1,t,_O,e)},setUint8:function(t,e){Ns(this,1,t,_O,e)},setInt16:function(t,e){Ns(this,2,t,vO,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Ns(this,2,t,vO,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Ns(this,4,t,SO,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Ns(this,4,t,SO,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Ns(this,4,t,Pq,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Ns(this,8,t,Lq,e,arguments.length>2?arguments[2]:void 0)}});pO(qi,xI),pO(Vo,Nq);var Sp={ArrayBuffer:qi,DataView:Vo},Bq=ei,FI=Dt,Mq=b,NO=ur,OO=TA,Uq=Ec,xq=fE,jI=Sp.ArrayBuffer,VI=Sp.DataView,DO=VI.prototype,kO=FI(jI.prototype.slice),Qq=FI(DO.getUint8),Fq=FI(DO.setUint8);Bq({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Mq(function(){return!new jI(2).slice(1,void 0).byteLength})},{slice:function(t,e){if(kO&&e===void 0)return kO(NO(this),t);for(var n=NO(this).byteLength,r=OO(t,n),i=OO(e===void 0?n:e,n),u=new(xq(this,jI))(Uq(i-r)),s=new VI(this),d=new VI(u),a=0;r<i;)Fq(d,a++,Qq(s,r++));return u}});var Qr,iu,yp,Eo={exports:{}},jq=iO,GI=M,yr=m,PO=Pe,KI=fn,Ma=Xn,HI=hd,Vq=id,YI=vi,WI=Gi.exports,Gq=Zn.f,Kq=hs,JI=eh,ou=pa,Hq=bn,LO=Jg,Tp=yr.Int8Array,qI=Tp&&Tp.prototype,BO=yr.Uint8ClampedArray,MO=BO&&BO.prototype,mo=Tp&&JI(Tp),zi=qI&&JI(qI),Yq=Object.prototype,zI=yr.TypeError,UO=Hq("toStringTag"),XI=LO("TYPED_ARRAY_TAG"),ZI=LO("TYPED_ARRAY_CONSTRUCTOR"),Go=jq&&!!ou&&HI(yr.opera)!=="Opera",xO=!1,Ko={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},$I={BigInt64Array:8,BigUint64Array:8},QO=function(t){if(!KI(t))return!1;var e=HI(t);return Ma(Ko,e)||Ma($I,e)};for(Qr in Ko)(yp=(iu=yr[Qr])&&iu.prototype)?YI(yp,ZI,iu):Go=!1;for(Qr in $I)(yp=(iu=yr[Qr])&&iu.prototype)&&YI(yp,ZI,iu);if((!Go||!PO(mo)||mo===Function.prototype)&&(mo=function(){throw zI("Incorrect invocation")},Go))for(Qr in Ko)yr[Qr]&&ou(yr[Qr],mo);if((!Go||!zi||zi===Yq)&&(zi=mo.prototype,Go))for(Qr in Ko)yr[Qr]&&ou(yr[Qr].prototype,zi);if(Go&&JI(MO)!==zi&&ou(MO,zi),GI&&!Ma(zi,UO))for(Qr in xO=!0,Gq(zi,UO,{get:function(){return KI(this)?this[XI]:void 0}}),Ko)yr[Qr]&&YI(yr[Qr],XI,Qr);var Ua={NATIVE_ARRAY_BUFFER_VIEWS:Go,TYPED_ARRAY_CONSTRUCTOR:ZI,TYPED_ARRAY_TAG:xO&&XI,aTypedArray:function(t){if(QO(t))return t;throw zI("Target is not a typed array")},aTypedArrayConstructor:function(t){if(PO(t)&&(!ou||Kq(mo,t)))return t;throw zI(Vq(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(GI){if(n)for(var i in Ko){var u=yr[i];if(u&&Ma(u.prototype,t))try{delete u.prototype[t]}catch{try{u.prototype[t]=e}catch{}}}zi[t]&&!n||WI(zi,t,n?e:Go&&qI[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(GI){if(ou){if(n){for(r in Ko)if((i=yr[r])&&Ma(i,t))try{delete i[t]}catch{}}if(mo[t]&&!n)return;try{return WI(mo,t,n?e:Go&&mo[t]||e)}catch{}}for(r in Ko)!(i=yr[r])||i[t]&&!n||WI(i,t,e)}},isView:function(t){if(!KI(t))return!1;var e=HI(t);return e==="DataView"||Ma(Ko,e)||Ma($I,e)},isTypedArray:QO,TypedArray:mo,TypedArrayPrototype:zi},FO=m,tC=b,Wq=ny,Jq=Ua.NATIVE_ARRAY_BUFFER_VIEWS,qq=FO.ArrayBuffer,xa=FO.Int8Array,zq=!Jq||!tC(function(){xa(1)})||!tC(function(){new xa(-1)})||!Wq(function(t){new xa,new xa(null),new xa(1.5),new xa(t)},!0)||tC(function(){return new xa(new qq(2),1,void 0).length!==1}),Xq=fn,Zq=Math.floor,$q=Number.isInteger||function(t){return!Xq(t)&&isFinite(t)&&Zq(t)===t},tz=ps,ez=m.RangeError,nz=function(t){var e=tz(t);if(e<0)throw ez("The argument can't be less than 0");return e},rz=m.RangeError,jO=function(t,e){var n=nz(t);if(n%e)throw rz("Wrong offset");return n},iz=ld,oz=gt,sz=uy,az=la,cz=fs,uz=JS,dz=AE,lz=HS,Az=Ua.aTypedArrayConstructor,hz=$r,pz=m,VO=Array.isArray||function(t){return hz(t)=="Array"},fz=cy,gz=fn,Ez=bn("species"),GO=pz.Array,mz=function(t){var e;return VO(t)&&(e=t.constructor,(fz(e)&&(e===GO||VO(e.prototype))||gz(e)&&(e=e[Ez])===null)&&(e=void 0)),e===void 0?GO:e},Iz=ld,Cz=Ft,_z=la,vz=fs,Sz=function(t,e){return new(mz(t))(e===0?0:e)},KO=Dt([].push),Os=function(t){var e=t==1,n=t==2,r=t==3,i=t==4,u=t==6,s=t==7,d=t==5||u;return function(a,l,A,p){for(var f,E,C=_z(a),_=Cz(C),y=Iz(l,A),R=vz(_),O=0,D=p||Sz,L=e?D(a,R):n||s?D(a,0):void 0;R>O;O++)if((d||O in _)&&(E=y(f=_[O],O,C),t))if(e)L[O]=E;else if(E)switch(t){case 3:return!0;case 5:return f;case 6:return O;case 2:KO(L,f)}else switch(t){case 4:return!1;case 7:KO(L,f)}return u?-1:r||i?i:L}},yz={forEach:Os(0),map:Os(1),filter:Os(2),some:Os(3),every:Os(4),find:Os(5),findIndex:Os(6),filterReject:Os(7)},HO=ei,YO=m,WO=gt,Tz=M,Rz=zq,Qa=Ua,JO=Sp,qO=dd,wz=W,su=vi,bz=$q,Nz=Ec,zO=oO,eC=jO,XO=IA,Xd=Xn,Oz=hd,nC=fn,Dz=Vg,kz=wc,Pz=hs,Rp=pa,Lz=ad.f,ZO=function(t){var e,n,r,i,u,s,d=sz(this),a=az(t),l=arguments.length,A=l>1?arguments[1]:void 0,p=A!==void 0,f=dz(a);if(f&&!lz(f))for(s=(u=uz(a,f)).next,a=[];!(i=oz(s,u)).done;)a.push(i.value);for(p&&l>2&&(A=iz(A,arguments[2])),n=cz(a),r=new(Az(d))(n),e=0;n>e;e++)r[e]=p?A(a[e],e):a[e];return r},Bz=yz.forEach,Mz=RA,$O=Zn,tD=S,Uz=rh,rC=Si.get,xz=Si.set,iC=$O.f,Qz=tD.f,Fz=Math.round,oC=YO.RangeError,eD=JO.ArrayBuffer,jz=eD.prototype,Vz=JO.DataView,wp=Qa.NATIVE_ARRAY_BUFFER_VIEWS,Gz=Qa.TYPED_ARRAY_CONSTRUCTOR,nD=Qa.TYPED_ARRAY_TAG,rD=Qa.TypedArray,Zd=Qa.TypedArrayPrototype,Kz=Qa.aTypedArrayConstructor,sC=Qa.isTypedArray,bp="BYTES_PER_ELEMENT",aC="Wrong length",iD=function(t,e){Kz(t);for(var n=0,r=e.length,i=new t(r);r>n;)i[n]=e[n++];return i},Np=function(t,e){iC(t,e,{get:function(){return rC(this)[e]}})},oD=function(t){var e;return Pz(jz,t)||(e=Oz(t))=="ArrayBuffer"||e=="SharedArrayBuffer"},sD=function(t,e){return sC(t)&&!Dz(e)&&e in t&&bz(+e)&&e>=0},aD=function(t,e){return e=XO(e),sD(t,e)?wz(2,t[e]):Qz(t,e)},cD=function(t,e,n){return e=XO(e),!(sD(t,e)&&nC(n)&&Xd(n,"value"))||Xd(n,"get")||Xd(n,"set")||n.configurable||Xd(n,"writable")&&!n.writable||Xd(n,"enumerable")&&!n.enumerable?iC(t,e,n):(t[e]=n.value,t)};Tz?(wp||(tD.f=aD,$O.f=cD,Np(Zd,"buffer"),Np(Zd,"byteOffset"),Np(Zd,"byteLength"),Np(Zd,"length")),HO({target:"Object",stat:!0,forced:!wp},{getOwnPropertyDescriptor:aD,defineProperty:cD}),Eo.exports=function(t,e,n){var r=t.match(/\d+$/)[0]/8,i=t+(n?"Clamped":"")+"Array",u="get"+t,s="set"+t,d=YO[i],a=d,l=a&&a.prototype,A={},p=function(f,E){iC(f,E,{get:function(){return function(C,_){var y=rC(C);return y.view[u](_*r+y.byteOffset,!0)}(this,E)},set:function(C){return function(_,y,R){var O=rC(_);n&&(R=(R=Fz(R))<0?0:R>255?255:255&R),O.view[s](y*r+O.byteOffset,R,!0)}(this,E,C)},enumerable:!0})};wp?Rz&&(a=e(function(f,E,C,_){return qO(f,l),Uz(nC(E)?oD(E)?_!==void 0?new d(E,eC(C,r),_):C!==void 0?new d(E,eC(C,r)):new d(E):sC(E)?iD(a,E):WO(ZO,a,E):new d(zO(E)),f,a)}),Rp&&Rp(a,rD),Bz(Lz(d),function(f){f in a||su(a,f,d[f])}),a.prototype=l):(a=e(function(f,E,C,_){qO(f,l);var y,R,O,D=0,L=0;if(nC(E)){if(!oD(E))return sC(E)?iD(a,E):WO(ZO,a,E);y=E,L=eC(C,r);var G=E.byteLength;if(_===void 0){if(G%r||(R=G-L)<0)throw oC(aC)}else if((R=Nz(_)*r)+L>G)throw oC(aC);O=R/r}else O=zO(E),y=new eD(R=O*r);for(xz(f,{buffer:y,byteOffset:L,byteLength:R,length:O,view:new Vz(y)});D<O;)p(f,D++)}),Rp&&Rp(a,rD),l=a.prototype=kz(Zd)),l.constructor!==a&&su(l,"constructor",a),su(l,Gz,a),nD&&su(l,nD,i),A[i]=a,HO({global:!0,forced:a!=d,sham:!wp},A),bp in a||su(a,bp,r),bp in l||su(l,bp,r),Mz(i)}):Eo.exports=function(){},(0,Eo.exports)("Uint8",function(t){return function(e,n,r){return t(this,e,n,r)}});var Hz=fs,Yz=ps,Wz=Ua.aTypedArray;(0,Ua.exportTypedArrayMethod)("at",function(t){var e=Wz(this),n=Hz(e),r=Yz(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:e[i]});var uD=m,dD=gt,cC=Ua,Jz=fs,qz=jO,zz=la,lD=b,Xz=uD.RangeError,uC=uD.Int8Array,AD=uC&&uC.prototype,hD=AD&&AD.set,Zz=cC.aTypedArray,$z=cC.exportTypedArrayMethod,dC=!lD(function(){var t=new Uint8ClampedArray(2);return dD(hD,t,{length:1,0:3},1),t[1]!==3}),tX=dC&&cC.NATIVE_ARRAY_BUFFER_VIEWS&&lD(function(){var t=new uC(2);return t.set(1),t.set("2",1),t[0]!==0||t[1]!==2});$z("set",function(t){Zz(this);var e=qz(arguments.length>1?arguments[1]:void 0,1),n=zz(t);if(dC)return dD(hD,this,n,e);var r=this.length,i=Jz(n),u=0;if(i+e>r)throw Xz("Wrong length");for(;u<i;)this[e+u]=n[u++]},!dC||tX);var pD=cO,eX=Math.floor,lC=function(t,e){var n=t.length,r=eX(n/2);return n<8?nX(t,e):rX(t,lC(pD(t,0,r),e),lC(pD(t,r),e),e)},nX=function(t,e){for(var n,r,i=t.length,u=1;u<i;){for(r=u,n=t[u];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==u++&&(t[r]=n)}return t},rX=function(t,e,n,r){for(var i=e.length,u=n.length,s=0,d=0;s<i||d<u;)t[s+d]=s<i&&d<u?r(e[s],n[d])<=0?e[s++]:n[d++]:s<i?e[s++]:n[d++];return t},iX=lC,fD=da.match(/firefox\/(\d+)/i),oX=!!fD&&+fD[1],sX=/MSIE|Trident/.test(da),gD=da.match(/AppleWebKit\/(\d+)\./),aX=!!gD&&+gD[1],ED=m,cX=Dt,AC=b,uX=fc,dX=iX,mD=Ua,ID=oX,lX=sX,CD=jg,_D=aX,AX=ED.Array,hX=mD.aTypedArray,pX=mD.exportTypedArrayMethod,$d=ED.Uint16Array,au=$d&&cX($d.prototype.sort),fX=!(!au||AC(function(){au(new $d(2),null)})&&AC(function(){au(new $d(2),{})})),vD=!!au&&!AC(function(){if(CD)return CD<74;if(ID)return ID<67;if(lX)return!0;if(_D)return _D<602;var t,e,n=new $d(516),r=AX(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(au(n,function(i,u){return(i/4|0)-(u/4|0)}),t=0;t<516;t++)if(n[t]!==r[t])return!0});pX("sort",function(t){return t!==void 0&&uX(t),vD?au(this,t):dX(hX(this),function(e){return function(n,r){return e!==void 0?+e(n,r)||0:r!=r?-1:n!=n?1:n===0&&r===0?1/n>0&&1/r<0?1:-1:n>r}}(t))},!vD||fX);var gX=RA,EX="ArrayBuffer",SD=Sp.ArrayBuffer;let nn;ei({global:!0,forced:m.ArrayBuffer!==SD},{ArrayBuffer:SD}),gX(EX),function(t){t[t.CHOOSE_SERVER=11]="CHOOSE_SERVER",t[t.CLOUD_PROXY=18]="CLOUD_PROXY",t[t.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",t[t.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(nn||(nn={}));var mX=yd,tl=Array.isArray||function(t){return mX(t)=="Array"},IX=se,yD=tl,CX=Rh,_X=ii,vX=En("species"),TD=IX.Array,SX=function(t){var e;return yD(t)&&(e=t.constructor,(CX(e)&&(e===TD||yD(e.prototype))||_X(e)&&(e=e[vX])===null)&&(e=void 0)),e===void 0?TD:e},RD=function(t,e){return new(SX(t))(e===0?0:e)},yX=Is,TX=VA,RX=Ao,wX=ko,bX=RD,wD=Ve([].push),Ds=function(t){var e=t==1,n=t==2,r=t==3,i=t==4,u=t==6,s=t==7,d=t==5||u;return function(a,l,A,p){for(var f,E,C=RX(a),_=TX(C),y=yX(l,A),R=wX(_),O=0,D=p||bX,L=e?D(a,R):n||s?D(a,0):void 0;R>O;O++)if((d||O in _)&&(E=y(f=_[O],O,C),t))if(e)L[O]=E;else if(E)switch(t){case 3:return!0;case 5:return f;case 6:return O;case 2:wD(L,f)}else switch(t){case 4:return!1;case 7:wD(L,f)}return u?-1:r||i?i:L}},bD={forEach:Ds(0),map:Ds(1),filter:Ds(2),some:Ds(3),every:Ds(4),find:Ds(5),findIndex:Ds(6),filterReject:Ds(7)},NX=bD.forEach,ND=tm("forEach")?[].forEach:function(t){return NX(this,t,arguments.length>1?arguments[1]:void 0)};xn({target:"Array",proto:!0,forced:[].forEach!=ND},{forEach:ND});var OX=Cs("Array").forEach,DX=Po,kX=$n,PX=ri,LX=OX,hC=Array.prototype,BX={DOMTokenList:!0,NodeList:!0},MX=function(t){var e=t.forEach;return t===hC||PX(hC,t)&&e===hC.forEach||kX(BX,DX(t))?LX:e},UX=Ao,OD=Ah;xn({target:"Object",stat:!0,forced:gn(function(){OD(1)})},{keys:function(t){return OD(UX(t))}});var xX=Oo.Object.keys,QX=MT,FX=xn,jX=tl,VX=Ve([].reverse),DD=[1,2];FX({target:"Array",proto:!0,forced:String(DD)===String(DD.reverse())},{reverse:function(){return jX(this)&&(this.length=this.length),VX(this)}});var GX=Cs("Array").reverse,KX=ri,HX=GX,pC=Array.prototype,YX=function(t){var e=t.reverse;return t===pC||KX(pC,t)&&e===pC.reverse?HX:e},WX=gn,JX=Sc,qX=En("species"),kD=function(t){return JX>=51||!WX(function(){var e=[];return(e.constructor={})[qX]=function(){return{foo:1}},e[t](Boolean).foo!==1})},zX=xn,XX=se,PD=tl,ZX=Rh,$X=ii,LD=Om,tZ=ko,eZ=ms,nZ=fp,rZ=En,iZ=Xm,oZ=kD("slice"),sZ=rZ("species"),fC=XX.Array,aZ=Math.max;zX({target:"Array",proto:!0,forced:!oZ},{slice:function(t,e){var n,r,i,u=eZ(this),s=tZ(u),d=LD(t,s),a=LD(e===void 0?s:e,s);if(PD(u)&&(n=u.constructor,(ZX(n)&&(n===fC||PD(n.prototype))||$X(n)&&(n=n[sZ])===null)&&(n=void 0),n===fC||n===void 0))return iZ(u,d,a);for(r=new(n===void 0?fC:n)(aZ(a-d,0)),i=0;d<a;d++,i++)d in u&&nZ(r,i,u[d]);return r.length=i,r}});var cZ=Cs("Array").slice,uZ=ri,dZ=cZ,gC=Array.prototype,lZ=function(t){var e=t.slice;return t===gC||uZ(gC,t)&&e===gC.slice?dZ:e};function Lt(t,e,n,r,i){var u,s,d,a={};return MX(u=xX(r)).call(u,function(l){a[l]=r[l]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=QX(s=YX(d=lZ(n).call(n)).call(d)).call(s,function(l,A){return A(t,e,l)||l},a),i&&a.initializer!==void 0&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),a.initializer===void 0&&(aN(t,e,a),a=null),a}var AZ=Cs("Array").values,hZ=Po,pZ=$n,fZ=ri,gZ=AZ,EC=Array.prototype,EZ={DOMTokenList:!0,NodeList:!0},Ho=function(t){var e=t.values;return t===EC||fZ(EC,t)&&e===EC.values||pZ(EZ,hZ(t))?gZ:e},mZ=Cs("Array").keys,IZ=Po,CZ=$n,_Z=ri,vZ=mZ,mC=Array.prototype,SZ={DOMTokenList:!0,NodeList:!0},Fa=function(t){var e=t.keys;return t===mC||_Z(mC,t)&&e===mC.keys||CZ(SZ,IZ(t))?vZ:e};function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}let Op=0,IC=0;function wi(t,e,n){return new Nt((r,i)=>{e.timeout=e.timeout||st("HTTP_CONNECT_TIMEOUT"),e.responseType=e.responseType||"json",e.data&&!n?(e.data=JSON.stringify(e.data),Op+=Au(e.data)):n&&(e.data.size?Op+=e.data.size:e.data instanceof FormData?Op+=function(u){let s=0;return/DingTalk/i.test(navigator.userAgent)&&u.realFormData&&(u=u.realFormData),u.forEach(d=>{s+=typeof d=="string"?Au(d):d.size}),s+138}(e.data):Op+=Au(JSON.stringify(e.data))),e.headers=e.headers||{},e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.method="POST",e.url=t,Yi.request(e).then(u=>{typeof u.data=="string"?IC+=Au(u.data):u.data instanceof ArrayBuffer||u.data instanceof Uint8Array?IC+=u.data.byteLength:IC+=Au(JSON.stringify(u.data)),r(u.data)}).catch(u=>{Yi.isCancel(u)?i(new B(P.OPERATION_ABORTED,"cancel token canceled")):u.code==="ECONNABORTED"?i(new B(P.NETWORK_TIMEOUT,u.message)):u.response?i(new B(P.NETWORK_RESPONSE_ERROR,u.response.status)):i(new B(P.NETWORK_ERROR,u.message))})})}async function yZ(t,e){const n=new Blob([e.data],{type:"buffer"});return await wi(t,MD(MD({},e),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const yn=new class extends Ge{set networkState(t){T.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+t),this.emit(La.NETWORK_STATE_CHANGE,t,this._networkState),t===Sr.ONLINE?this.emit(La.ONLINE):t===Sr.OFFLINE&&(this.onlineWaiter=new Nt(e=>{this.once(La.ONLINE,()=>{this.onlineWaiter=void 0,e(Sr.ONLINE)})}),this.emit(La.OFFLINE)),this._networkState=t}get networkState(){return this._networkState}constructor(){super(),v(this,"_moduleName","network-indicator"),v(this,"_networkState",Sr.ONLINE),v(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Sr.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Sr.OFFLINE})}};let CC=!1;const Fr=new class extends Ge{constructor(){super(...arguments),v(this,"onAutoplayFailed",void 0),v(this,"onAudioAutoplayFailed",void 0)}};function UD(){const t=ye();if(!CC){const e=n=>{n.preventDefault(),CC=!1,t.os!=="Android"||t.name!=="Chrome"&&t.name!==me.WECHAT?(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0)):document.body.removeEventListener("click",e,!0)};CC=!0,t.os!=="Android"||t.name!=="Chrome"&&t.name!==me.WECHAT?(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)):document.body.addEventListener("click",e,!0),T.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Fr.onAutoplayFailed?Fr.onAutoplayFailed():Fr.onAudioAutoplayFailed?T.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):T.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Fr.emit("autoplay-failed")}}var xD;function QD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cu(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{report:ot};return function(e,n,r){const i=e[n];if(typeof i=="function"){const u=e.constructor.name==="AgoraRTCClient"?"Client":e.constructor.name;r.value=function(){for(var s=arguments.length,d=new Array(s),a=0;a<s;a++)d[a]=arguments[a];const l=t.report.reportApiInvoke(this._sessionId||null,{name:"".concat(u,".").concat(n),options:d,tag:Pt.TRACER,reportResult:t.reportResult});try{const A=i.apply(this,d);return l.onSuccess(t.reportResult&&A),A}catch(A){throw l.onError(A),A}}}return r}}function Dp(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{report:ot};return function(e,n,r){const i=e[n];if(typeof i=="function"){const u=e.constructor.name==="AgoraRTCClient"?"Client":e.constructor.name;r.value=async function(){for(var s=arguments.length,d=new Array(s),a=0;a<s;a++)d[a]=arguments[a];const l=t.report.reportApiInvoke(this._sessionId||null,{name:"".concat(u,".").concat(n),options:d,tag:Pt.TRACER});try{const A=await i.apply(this,d);return l.onSuccess(),A}catch(A){throw l.onError(A),A}}}return r}}const ot=new(Qn("AgoraRTCEventReport")(xD=class{constructor(){v(this,"baseInfoMap",new Map),v(this,"proxyServer",void 0),v(this,"clientList",Zc),v(this,"eventUploadTimer",void 0),v(this,"setSessionIdTimer",void 0),v(this,"url",void 0),v(this,"backupUrl",void 0),v(this,"keyEventUploadPendingItems",[]),v(this,"normalEventUploadPendingItems",[]),v(this,"apiInvokeUploadPendingItems",[]),v(this,"apiInvokeCount",0),v(this,"ltsList",[]),v(this,"lastSendNormalEventTime",Date.now()),v(this,"customReportCounterTimer",void 0),v(this,"customReportCount",0),v(this,"extApiInvoke",async t=>{for(const e of t){const n=Zt(Zt({},e),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Pt.TRACER});this.sendApiInvoke(n)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),st("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),st("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(t){if(!this.baseInfoMap.has(t)&&!this.baseInfoMap.get(t))return T.error("adjust session ".concat(t," start time, sid is not exist or info is undefined")),void at("error",this,"adjustSessionStartTime","adjust session ".concat(t," start time, sid is not exist or info is undefined"));const e=this.baseInfoMap.get(t),n=Date.now(),r=e.startTime;e.startTime=n,T.debug("rewrite session ".concat(t," startTime: ").concat(n," , ").concat(n-r,"ms")),at("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(t," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(t,e)}reportApiInvoke(t,e,n){e.timeout=e.timeout||6e4,e.reportResult=e.reportResult===void 0||e.reportResult;const r=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,u=()=>({tag:e.tag,invokeId:i,sid:t,name:e.name,apiInvokeTime:r,options:e.options,states:e.states||null}),s=!!st("SHOW_REPORT_INVOKER_LOG");s&&T.info("".concat(e.name," start"),e.options);let d=!1;Vn(e.timeout).then(()=>{d||(this.sendApiInvoke(Zt(Zt({},u()),{},{error:P.API_INVOKE_TIMEOUT,success:!1})),T.debug("".concat(e.name," timeout")))});const a=new B(P.UNEXPECTED_ERROR,"".concat(e.name,": this api invoke is end"));return{onSuccess:l=>{const A=()=>{if(d)throw a;return d=!0,this.sendApiInvoke(Zt(Zt({},u()),{},{success:!0},e.reportResult&&{result:l})),s&&T.info("".concat(e.name," onSuccess")),l};return n?Uk(A,e.name+"Success",n,()=>d=!0):A()},onError:l=>{const A=()=>{if(d)throw l;d=!0,this.sendApiInvoke(Zt(Zt({},u()),{},{success:!1,error:l.toString()})),s&&T.info("".concat(e.name," onFailure"),l.toString())};return n?Uk(A,e.name+"Error",n,()=>d=!0):A()}}}sessionInit(t,e){if(this.baseInfoMap.has(t))return;const n=Date.now(),r=this.createBaseInfo(t,n);r.cname=e.cname;const i=Object.assign({},{willUploadConsoleLog:st("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:pI?"global":"oversea",areas:st("AREAS")&&st("AREAS").join(",")},e.extend),u=Date.now(),s=Zt(Zt({},r),{},{eventType:On.SESSION_INIT,appid:e.appid,browser:navigator.userAgent,build:Ap,lts:u,elapse:u-n,extend:JSON.stringify(i),mode:e.mode,process:st("PROCESS_ID"),success:!0,version:lr});this.send({type:Me.SESSION,data:s},!0)}joinChooseServer(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt({},r),{},{eventType:On.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-e.lts,chooseServerAddr:e.csAddr,errorCode:e.ec,elapse:i-n.startTime,success:e.succ,chooseServerAddrList:JSON.stringify(e.serverList),uid:e.uid?parseInt(e.uid):null,cid:e.cid?parseInt(e.cid):null,chooseServerIp:e.csIp||"",opid:e.opid,unilbsServerIds:e.unilbsServerIds,extend:e.extend||void 0});this.send({type:Me.JOIN_CHOOSE_SERVER,data:u},!0)}reqUserAccount(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt({},r),{},{eventType:On.REQ_USER_ACCOUNT,lts:i,success:e.success,serverAddress:e.serverAddr,stringUid:e.stringUid,uid:e.uid,errorCode:e.errorCode,elapse:i-n.startTime,eventElapse:i-e.lts,extend:JSON.stringify(e.extend)});this.send({type:Me.REQ_USER_ACCOUNT,data:u},!0)}joinGateway(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info;e.vid&&(r.vid=e.vid),r.uid=e.uid,r.cid=e.cid;const i=Date.now(),{firstSuccess:u,avoidJoinStartTime:s,isProxy:d,addr:a}=e,l=i-(u&&s?s:n.startTime),A=Zt(Zt({},r),{},{eventType:On.JOIN_GATEWAY,lts:i,gatewayAddr:e.addr,success:e.succ,errorCode:e.ec,elapse:l,eventElapse:i-e.lts,firstSuccess:u}),p=A.success?1:0;if(e.succ&&(n.lastJoinSuccessTime=i),u)this.send({type:Me.JOIN_GATEWAT,data:A},!0);else{let f;if(a)if(d){const C=a.match(/h=(\d{1,3}-){3}\d{1,3}/g),_=a.match(/p=[0-9]{1,6}/g);f={isSuccess:p,gatewayIp:C&&C.length?C[0].split("=")[1].replace(/-/g,"."):"",port:_&&_.length?_[0].split("=")[1]:"",isProxy:d?1:0}}else{const C=a.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),_=a.match(/:[0-9]{1,6}/g);f={isSuccess:p,gatewayIp:C&&C.length?C[0].split("//")[1].replace(/-/g,"."):"",port:_&&_.length?_[0].split(":")[1]:"",isProxy:d?1:0}}else f={isSuccess:p,gatewayIp:"",port:"",isProxy:d?1:0};delete A.success,delete A.eventType,delete A.firstSuccess,A.vid=Number(A.vid);const E=Object.assign({},A,f,{eventType:On.REJOIN_GATEWAY});this.send({type:Me.RE_JOIN_GATEWAY,data:E},!0)}}joinChannelTimeout(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=Date.now(),i=Zt(Zt({},n.info),{},{lts:r,timeout:e,elapse:r-n.startTime});this.send({type:Me.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt({},r),{},{eventType:On.PUBLISH,lts:i,eventElapse:e.eventElapse,elapse:i-n.startTime,success:e.succ,errorCode:e.ec,videoName:e.videoName,audioName:e.audioName,screenName:e.screenName,screenshare:e.screenshare,audio:e.audio,video:e.video,p2pid:e.p2pid,publishRequestid:e.publishRequestid});this.send({type:Me.PUBLISH,data:u},!0)}subscribe(t,e,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,u=Date.now(),s=Zt(Zt({},i),{},{eventType:On.SUBSCRIBE,lts:u,eventElapse:e.eventElapse,elapse:u-r.startTime,success:e.succ,errorCode:e.ec,video:e.video,audio:e.audio,subscribeRequestid:e.subscribeRequestid,p2pid:e.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof e.peerid=="string"?s.peerSuid=e.peerid:s.peer=e.peerid,this.send({type:Me.SUBSCRIBE,data:s},!0)}wsCompressorInit(t){var e;const n=[...Fa(e=this.baseInfoMap).call(e)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const u=i.info,s=Date.now(),d=Zt(Zt({},u),{},{eventType:On.WS_COMPRESSOR_INIT,lts:s,eventElapse:t.eventElapse,elapse:s-i.startTime,status:t.status?1:2});this.send({type:Me.WS_COMPRESSOR_INIT,data:d},!0)}firstRemoteFrame(t,e,n,r){const i=this.baseInfoMap.get(t);if(!i)return;const u=i.info,s=Date.now(),d=Zt(Zt(Zt({},u),r),{},{elapse:s-i.startTime,eventType:e,lts:s});this.send({type:n,data:d},!0)}onGatewayStream(t,e,n,r){const i=this.baseInfoMap.get(t);if(!i)return;const u=i.info,s=Date.now(),d=Zt(Zt(Zt({},u),r),{},{eventType:e,lts:s});this.send({type:n,data:d},!0)}streamSwitch(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt({},r),{},{eventType:On.STREAM_SWITCH,lts:i,isDual:e.isdual,elapse:i-n.startTime,success:e.succ});this.send({type:Me.STREAM_SWITCH,data:u},!0)}requestProxyAppCenter(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt({},r),{},{eventType:On.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-e.lts,elapse:i-n.startTime,APAddr:e.APAddr,workerManagerList:e.workerManagerList,response:e.response,errorCode:e.ec,success:e.succ});this.send({type:Me.REQUEST_PROXY_APPCENTER,data:u},!0)}requestProxyWorkerManager(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt({},r),{},{eventType:On.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-e.lts,elapse:i-n.startTime,workerManagerAddr:e.workerManagerAddr,response:e.response,errorCode:e.ec,success:e.succ});this.send({type:Me.REQUEST_PROXY_WORKER_MANAGER,data:u},!0)}setProxyServer(t){this.proxyServer=t,t?T.debug("reportProxyServerurl: ".concat(t)):T.debug("disable reportProxyServerurl: ".concat(t)),at("debug",this,"setProxyServer",t)}peerPublishStatus(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt({},r),{},{subscribeElapse:e.subscribeElapse,peer:e.peer,peerPublishDuration:Math.max(e.audioPublishDuration,e.videoPublishDuration),audiotag:e.audioPublishDuration>0?1:-1,videotag:e.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i)});this.send({type:Me.PEER_PUBLISH_STATUS,data:u},!0)}workerEvent(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now();(function(u,s,d){const a=u[s];if(!a||typeof a!="string")return[u];u[s]="";const l=Au(JSON.stringify(u));let A=0;const p=[];let f=0;for(let E=0;E<a.length;E++)f+=a.charCodeAt(E)<=127?1:3,f<=d-l||(p[p.length]=Ga(Ga({},u),{},{[s]:a.substring(A,E)}),A=E,f=a.charCodeAt(E)<=127?1:3);return A!==a.length-1&&(p[p.length]=Ga(Ga({},u),{},{[s]:a.substring(A)})),p})(Zt(Zt(Zt({},r),e),{},{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300).forEach(u=>this.send({type:Me.WORKER_EVENT,data:u},!0))}apworkerEvent(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt(Zt({},r),e),{},{elapse:i-n.startTime,lts:i});this.send({type:Me.AP_WORKER_EVENT,data:u},!0)}joinWebProxyAP(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt(Zt({},r),e),{},{elapse:i-n.startTime,lts:i,extend:e.extend||void 0});this.send({type:Me.JOIN_WEB_PROXY_AP,data:u},!0)}WebSocketQuit(t,e){const n=this.baseInfoMap.get(t);if(!n)return;const r=n.info,i=Date.now(),u=Zt(Zt(Zt({},r),e),{},{elapse:i-n.startTime,lts:i});this.send({type:Me.WEBSOCKET_QUIT,data:u},!0)}async sendCustomReportMessage(t,e){if(this.customReportCount+=e.length,this.customReportCount>st("CUSTOM_REPORT_LIMIT"))throw new B(P.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const n=e.map(i=>({type:Me.USER_ANALYTICS,data:Zt({sid:t},i)})),r={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(i=>JSON.stringify(i))};try{await this.postDataToStatsCollector(r)}catch(i){throw T.error("send custom report message failed",i.toString()),new B(P.CUSTOM_REPORT_SEND_FAILED,i.message)}}autoplayFailed(t,e,n,r){if(!t)return;const i=this.baseInfoMap.get(t);if(!i)return;const u=i.info,s=Date.now(),d=Zt(Zt({},u),{},{vid:u.vid===void 0?0:Number(u.vid),lts:s,elapse:s-i.startTime,cbRegistered:Fr.onAutoplayFailed||Fr.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:e,trackId:r,extend:void 0});this.send({type:Me.AUTOPLAY_FAILED,data:d},!0)}sendApiInvoke(t){const e=st("NOT_REPORT_EVENT");if(t.tag&&e.includes&&e.includes(t.tag))return!1;if(t.sid===null)return this.apiInvokeUploadPendingItems.push(t),!1;const n=this.baseInfoMap.get(t.sid);if(!n)return this.apiInvokeUploadPendingItems.push(t),!1;const{cname:r,uid:i,cid:u}=n.info;t.lts=t.lts||Date.now();const s={invokeId:t.invokeId,sid:t.sid,cname:r,cid:u,uid:i,lts:t.lts,success:t.success,elapse:t.lts-n.startTime,execElapse:t.lts-t.apiInvokeTime,apiName:t.name,options:t.options?JSON.stringify(t.options):void 0,execStates:t.states?JSON.stringify(t.states):void 0,execResult:t.result?JSON.stringify(t.result):void 0,errorCode:t.error?JSON.stringify(t.error):void 0};return this.send({type:Me.API_INVOKE,data:s},!1),!0}appendSessionId(){this.clientList.forEach(t=>{if(t._sessionId){const e=this.apiInvokeUploadPendingItems.length;for(let n=0;n<e;n++){const r=this.apiInvokeUploadPendingItems.shift();r&&(r.sid=t._sessionId,this.sendApiInvoke(Object.assign({},r)))}}})}send(t,e){if(e)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>st("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,e){const n=[],r=[];for(;t.length;){const s=t.shift();n.length<20?n.push(s):r.push(s)}t.push(...r);for(const s of[...n]){var i;this.ltsList.indexOf(s.data.lts)!==-1?(s.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(s.data.lts)):(this.ltsList.push(s.data.lts),vI(i=this.ltsList).call(i,(d,a)=>d-a))}e||(this.lastSendNormalEventTime=Date.now());const u={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(s=>JSON.stringify(s)),vid:(s=>{const d=s&&s.data.sid&&this.baseInfoMap.get(s.data.sid);return d&&d.info.vid&&+d.info.vid||0})(n[0])};return n.length&&this.postDataToStatsCollector(u).catch((s=>d=>{st("EVENT_REPORT_RETRY")&&(e?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(s):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(s),this.normalEventUploadPendingItems.length>st("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-st("NORMAL_EVENT_QUEUE_CAPACITY")),T.warning("report: drop normal events"))))})(n)),t}async postDataToStatsCollector(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];yn.networkState===Sr.OFFLINE&&await Nt.race([yn.onlineWaiter,Vn(2*ze.maxRetryTimeout)]);const n=e?"/events/proto-raws":"/events/messages";let r=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(st("EVENT_REPORT_DOMAIN"),"&p=").concat(st("STATS_COLLECTOR_PORT"),"&d=").concat(n):"https://".concat(st("EVENT_REPORT_DOMAIN"),":").concat(st("STATS_COLLECTOR_PORT")).concat(n));for(let i=0;i<2;i+=1){i===1&&(r=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(st("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(st("STATS_COLLECTOR_PORT"),"&d=").concat(n):"https://".concat(st("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(st("STATS_COLLECTOR_PORT")).concat(n)));try{e?await yZ(r,{timeout:1e4,data:t}):await wi(r,{timeout:1e4,data:t})}catch(u){if(i===1)throw u;continue}return}}createBaseInfo(t,e){const n=Object.assign({},JJ);return n.sid=t,this.baseInfoMap.set(t,{info:n,startTime:e}),n}reportResourceTiming(t,e){const n=performance.getEntriesByName(t),r=n[n.length-1];r&&this.reportApiInvoke(e,{name:"Client.resourceTiming",options:r,tag:Pt.TRACER}).onSuccess()}})||xD);rp.on("REPORT_LOG_UPLOAD",t=>{t.networkState=yn.networkState,ot.reportApiInvoke(null,{name:"logUploadError",options:t,tag:Pt.TRACER})});class FD extends Ge{constructor(e,n){super(),v(this,"trackMediaType",void 0),v(this,"_ID",void 0),v(this,"_hints",[]),v(this,"_isClosed",!1),v(this,"_originMediaStreamTrack",void 0),v(this,"_mediaStreamTrack",void 0),v(this,"_external",{}),this._ID=n||Ye(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,function(r){Wd.includes(r)||Wd.push(r)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const n=ot.reportApiInvoke(null,{name:Ut.GET_MEDIA_STREAM_TRACK,options:[],tag:Pt.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?n.onSuccess(this._mediaStreamTrack.label):n.onSuccess("")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(e){const n=Wd.indexOf(e);n!==-1&&Wd.splice(n,1)}(this),this.emit(ws.CLOSED)}}let rn,_C,jD,TZ=1;class Tr{constructor(e){v(this,"lockingPromise",Nt.resolve()),v(this,"locks",0),v(this,"name",""),v(this,"lockId",void 0),this.lockId=TZ++,e&&(this.name=e),T.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let n;this.locks+=1,T.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:""));const r=new Nt(u=>{n=()=>{this.locks-=1,T.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:"")),u()}}),i=this.lockingPromise.then(()=>n);return this.lockingPromise=this.lockingPromise.then(()=>r),i}}function uu(t,e){return function(n,r,i){const u=n[r];if(typeof u!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const s=this[e];if(!s)throw new Error("mutex property key ".concat(e," doesn't exist on ").concat(t));const d=await s.lock("From ".concat(t,".").concat(r));try{for(var a=arguments.length,l=new Array(a),A=0;A<a;A++)l[A]=arguments[A];return await u.apply(this,l)}finally{d()}},i}}class vC extends FD{get muted(){return this._muted}get enabled(){return this._enabled}constructor(e,n){super(e,n),v(this,"_enabled",!0),v(this,"_muted",!1),v(this,"_isClosed",!1),v(this,"_trackProcessors",[]),v(this,"_enabledMutex",void 0),v(this,"processor",void 0),v(this,"processorContext",void 0),v(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Tr("".concat(n)),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(e=>e.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,T.debug("[".concat(this.getTrackId(),"] close")),at("debug",this,"close"),this.emit(xt.NEED_CLOSE),super.close())}async _registerTrackProcessor(e){if(this._trackProcessors.indexOf(e)!==-1)return;const n=this._trackProcessors[this._trackProcessors.length-1];this._trackProcessors.push(e),e.onOutputChange=async()=>{const r=e.output||this._originMediaStreamTrack;this._mediaStreamTrack=r,this._updatePlayerSource(),await Be(this,xt.NEED_REPLACE_TRACK,this)},n?(n.onOutputChange=async()=>{n.output&&await e.setInput(n.output)},await e.setInput(n.output||n.input||this._originMediaStreamTrack)):await e.setInput(this._originMediaStreamTrack)}_getOutputFromProcessors(){if(this._trackProcessors.length===0)return this._originMediaStreamTrack;const e=this._trackProcessors[this._trackProcessors.length-1];return e.output||e.input||this._originMediaStreamTrack}async _updateOriginMediaStreamTrack(e,n){if(e!==this._originMediaStreamTrack){if(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._trackProcessors.length>0){await this._trackProcessors[0].setInput(e);const r=this._getOutputFromProcessors();this._mediaStreamTrack=r}else this._mediaStreamTrack=this._originMediaStreamTrack;this._updatePlayerSource(),await Be(this,xt.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}}_getDefaultPlayerConfig(){return{}}onTrackEnded(){T.debug("[".concat(this.getTrackId(),"] track ended")),Qo("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(ws.TRACK_ENDED)}stateCheck(e,n){if(T.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(n,"]")),at("debug",this,"stateCheck",{stateName:e,state:n,muted:this._muted,enabled:this._enabled}),gp(n,e),this._enabled&&this._muted&&e==="enabled"&&n===!1)throw new B(P.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&e==="muted"&&n===!0)throw new B(P.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(t){t.IOS_15_INTERRUPTION_START="ios15-interruption-start",t.IOS_15_INTERRUPTION_END="ios15-interruption-end",t.IOS_INTERRUPTION_START="ios-interruption-start",t.IOS_INTERRUPTION_END="ios-interruption-end",t.STATE_CHANGE="state-change"})(rn||(rn={})),function(t){t.AUDIO_CONTEXT_CREATED="audio_context_created"}(_C||(_C={})),function(t){t.AIDenoiser="AIDenoiser"}(jD||(jD={}));const SC={audioContextInitOptions:{}},kp=new class extends Ge{constructor(){super(),v(this,"registeredPlugins",[])}setOptions(t,e){SC[t]&&(SC[t]=e)}getOptions(t){return SC[t]}installPlugin(t){t instanceof Object&&t.name&&this.registeredPlugins.push(t.name)}},VD=window.AudioContext||window.webkitAudioContext;let li=null;const ae=new class extends Ge{constructor(){super(...arguments),v(this,"prevState",void 0),v(this,"curState",void 0),v(this,"interruptDetectorTrack",void 0),v(this,"onLocalAudioTrackMute",()=>{T.info("ios15-interruption-start"),ke("info",["WebAudio"],"ios15-interruption-start"),this.emit(rn.IOS_15_INTERRUPTION_START)}),v(this,"onLocalAudioTrackUnmute",async()=>{T.info("ios15-interruption-end"),ke("info",["WebAudio"],"ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?T.info("ios15-interruption-end-canceled"):(li&&await li.suspend(),this.emit(rn.IOS_15_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(t){T.debug("webaudio bindInterruptDetectorTrack ".concat(t.getTrackId())),at("debug",["WebAudio"],"bindInterruptDetectorTrack",t.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=t,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(t){T.debug("webaudio unbindInterruptDetectorTrack ".concat(t.getTrackId())),at("debug",["WebAudio"],"unbindInterruptDetectorTrack",t.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===t&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function RZ(){if(!VD)return T.error("your browser is not support web audio"),void wt("error",["WebAudio"],"your browser is not support web audio");T.info("create audio context"),qc("info",["WebAudio"],"WebAudioContext");const t=kp.getOptions("audioContextInitOptions");T.debug("audio content init option:",JSON.stringify(t)),li=new VD(t),kp.emit(_C.AUDIO_CONTEXT_CREATED,li),ae.curState=li.state,li.onstatechange=()=>{ae.prevState=ae.curState,ae.curState=li?li.state:void 0,(_r()||xo())&&ae.prevState==="running"&&ae.curState==="interrupted"&&(T.info("ios-interruption-start"),ke("info",["AudioState"],"ios-interruption-start"),ae.emit(rn.IOS_INTERRUPTION_START)),(_r()||xo())&&ae.prevState==="interrupted"&&ae.curState==="running"&&(T.info("ios-interruption-end"),ke("info",["AudioState"],"ios-interruption-end"),ae.emit(rn.IOS_INTERRUPTION_END)),ae.prevState!==ae.curState&&(T.debug("AudioContext State Change","".concat(ae.prevState,"=>").concat(ae.curState)),Qo("debug",["AudioContext",void 0],"statechange","".concat(ae.prevState,"=>").concat(ae.curState)),ae.emit(rn.STATE_CHANGE))},async function(e){const n=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let r,i=!1,u=!1,s=!1;function d(y){e.state==="running"?a(!1):_r()||xo()?e.state==="suspended"&&(a(!0),y&&e.resume().then(A,A)):e.state!=="closed"&&(a(!0),y&&e.resume().then(A,A))}function a(y){if(i!==y){i=y;for(let R=0,O=n;R<O.length;R+=1){const D=O[R];y?window.addEventListener(D,p,{capture:!0,passive:!0}):window.removeEventListener(D,p,{capture:!0,passive:!0})}}}function l(){d(!0)}function A(){d(!1)}function p(){d(!0)}function f(y){if(!s)if(r.paused)if(y){E(!1),s=!0;let R;try{R=r.play(),R?R.then(C,C):(r.addEventListener("playing",C),r.addEventListener("abort",C),r.addEventListener("error",C))}catch{C()}}else E(!0);else E(!1)}function E(y){if(u!==y){u=y;for(let R=0,O=n;R<O.length;R++){const D=O[R];y?window.addEventListener(D,_,{capture:!0,passive:!0}):window.removeEventListener(D,_,{capture:!0,passive:!0})}}}function C(){r.removeEventListener("playing",C),r.removeEventListener("abort",C),r.removeEventListener("error",C),s=!1,f(!1)}function _(){f(!0)}if(_r()){const y=e.createMediaStreamDestination(),R=document.createElement("div");R.innerHTML="<audio x-webkit-airplay='deny'></audio>",r=R.children.item(0),r.controls=!1,r.disableRemotePlayback=!0,r.preload="auto",r.srcObject=y.stream,f(!0)}ae.on(rn.STATE_CHANGE,l),d(!1)}(li)}function el(){if(!li){if(RZ(),!li)throw new B(P.NOT_SUPPORTED,"can not create audio context");return li}return li}function nl(t){if(function(){if(yC!==null)return yC;const r=el(),i=r.createBufferSource(),u=r.createGain(),s=r.createGain();i.connect(u),i.connect(s),i.disconnect(u);let d=!1;try{i.disconnect(u)}catch{d=!0}return i.disconnect(),yC=d,d}())return;at("debug",["WebAudio"],"polyfillAudioNode");const e=t.connect,n=t.disconnect;t.connect=(r,i,u)=>(t._inputNodes||(t._inputNodes=[]),t._inputNodes.includes(r)||(r instanceof AudioNode?(t._inputNodes.push(r),e.call(t,r,i,u)):e.call(t,r,i)),t),t.disconnect=(r,i,u)=>{n.call(t),r?OC(t._inputNodes,r):t._inputNodes=[];for(const s of t._inputNodes)e.call(t,s)}}let yC=null;function TC(t,e){const n=1/e,r=el();let i=r.createGain();i.gain.value=0,i.connect(r.destination);let u=!1;const s=()=>{if(u)return void(i=null);const d=r.createOscillator();d.onended=s,d.connect(i),d.start(0),d.stop(r.currentTime+n),t(r.currentTime)};return s(),()=>{u=!0}}const ks=T.prefix("[inject-node]");class wZ{constructor(){v(this,"nodeLists",[]),v(this,"prevNode",void 0),v(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(e,n){ks.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),e.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(n),this.nodeLists.forEach((r,i)=>{const u=this.nodeLists[i+1];u&&r.connect(u)})):e.connect(n),this.nextNode=n,this.prevNode=e}disconnect(){var e;ks.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(n=>{n.disconnect()}),(e=this.prevNode)===null||e===void 0||e.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(e){ks.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(ks.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(e),e.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(e),e.connect(this.nextNode)),this.nodeLists.push(e)):ks.debug("add node is called before inject node connected")}removeNode(e){ks.debug("remove node in inject node, current list:",this.nodeLists.length);const n=this.nodeLists.indexOf(e);if(n===-1)return void ks.debug("$[inject-node] cannot find the node to be removed");const r=this.nodeLists[n+1],i=this.nodeLists[n-1];n===0&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(e),r?this.prevNode.connect(r):this.prevNode.connect(this.nextNode)),n===this.nodeLists.length-1&&this.nextNode&&i&&(i.disconnect(e),i.connect(this.nextNode)),n!==0&&n!==this.nodeLists.length-1&&(i.disconnect(e),i.connect(r)),ks.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class GD extends Ge{get processSourceNode(){return this.sourceNode}set processedNode(e){var n;if(!this.isDestroyed&&this._processedNode!==e){try{var r;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.outputNode)}catch{}(n=this._processedNode)===null||n===void 0||n.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),v(this,"outputNode",void 0),v(this,"outputTrack",void 0),v(this,"isPlayed",!1),v(this,"sourceNode",void 0),v(this,"analyserNode",void 0),v(this,"context",void 0),v(this,"audioBufferNode",void 0),v(this,"destNode",void 0),v(this,"injectNode",void 0),v(this,"audioOutputLevel",0),v(this,"_processedNode",void 0),v(this,"playNode",void 0),v(this,"isDestroyed",!1),v(this,"onNoAudioInput",void 0),v(this,"isNoAudioInput",!1),v(this,"_noAudioInputCount",0),this.context=el(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),nl(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new wZ}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=n=>{this.emit(vr.ON_AUDIO_BUFFER,function(r){for(let i=0;i<r.outputBuffer.numberOfChannels;i+=1){const u=r.outputBuffer.getChannelData(i);for(let s=0;s<u.length;s+=1)u[s]=0}return r.inputBuffer}(n))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!rr().webAudioMediaStreamDest)throw new B(P.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){this.context.state!=="running"&&pi(()=>{ae.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||_r()||xo()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode)return 0;const e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);let n=0;for(let r=0;r<e.length;r++)n+=r<64?Math.abs(10*e[r]):Math.abs(6*e[r]/15);return n/e.length/255}async checkHasAudioInput(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;if(_r()||xo()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume(),!this.analyserNode)return!1;const n=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(n);let r=!1;for(let i=0;i<n.length;i++)n[i]!==0&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await Vn(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(e){this.injectNode.addNode(e)}removeAudioNode(e){this.injectNode.removeNode(e)}disconnect(){var e,n;(e=this.processedNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?(e=this.processedNode)===null||e===void 0||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class KD extends GD{get isFreeze(){return!1}constructor(e,n){var r;if(super(),v(this,"sourceNode",void 0),v(this,"track",void 0),v(this,"audioElement",void 0),v(this,"isCurrentTrackCloned",!1),v(this,"isRemoteTrack",!1),v(this,"rebuildWebAudio",async()=>{if(T.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void T.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>T.info("resume success")),T.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const s=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?s.stop():this.isCurrentTrackCloned=!0;const d=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(d),nl(this.sourceNode),this.analyserNode=this.context.createAnalyser();const a=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(a,this.context.currentTime),nl(this.outputNode),this.emit(vr.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=d,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),e.kind!=="audio")throw new B(P.UNEXPECTED_ERROR);this.track=e;const i=new MediaStream([this.track]);this.isRemoteTrack=!!n,this.sourceNode=this.context.createMediaStreamSource(i),nl(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;const u=ye();n&&u.os===Sn.IOS&&Number((r=u.osVersion)===null||r===void 0?void 0:r.split(".")[0])<15&&(ae.on(rn.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(s=>{s||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const n=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(n),nl(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(vr.UPDATE_SOURCE),this.audioElement.srcObject=n}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),ae.off("state-change",this.rebuildWebAudio),super.destroy()}}async function HD(t,e){const n=(i,u)=>i?typeof i!="number"?i.max||i.exact||i.ideal||i.min||u:i:u,r={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxHeight:n(e.height,1080),maxWidth:n(e.width,1920)}}};return e.frameRate&&typeof e.frameRate!="number"?(r.video.mandatory.maxFrameRate=e.frameRate.max,r.video.mandatory.minFrameRate=e.frameRate.min):typeof e.frameRate=="number"&&(r.video.mandatory.maxFrameRate=e.frameRate),await navigator.mediaDevices.getUserMedia(r)}async function bZ(t){const e=await YD(t.mediaSource),n=await function(r){return new Nt((i,u)=>{const s=document.createElement("div");s.innerText="share screen",s.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const d=document.createElement("div");d.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const a=document.createElement("div");a.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",a.setAttribute("style","height: 12%;");const l=document.createElement("div");l.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const A=document.createElement("div");A.setAttribute("style","text-align: right; padding: 16px 0;");const p=document.createElement("button");p.innerHTML="cancel",p.setAttribute("style","width: 85px;"),p.onclick=()=>{document.body.removeChild(f);const E=new Error("NotAllowedError");E.name="NotAllowedError",u(E)},A.appendChild(p),d.appendChild(a),d.appendChild(l),d.appendChild(A);const f=document.createElement("div");f.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),f.appendChild(s),f.appendChild(d),document.body.appendChild(f),r.map(E=>{if(E.id){const C=document.createElement("div");C.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let _=E.thumbnail;const{width:y}=_.getSize();y>1920&&(_=_.resize({width:1920})),C.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+_.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(E.name.replace(/[\u00A0-\u9999<>\&]/g,function(R){return"&#"+R.charCodeAt(0)+";"})+"</span>"),C.onclick=()=>{document.body.removeChild(f),i(E.id)},l.appendChild(C)}})})}(e);return await HD(n,t)}async function YD(t){let e=["window","screen"];t!=="application"&&t!=="window"||(e=["window"]),t==="screen"&&(e=["screen"]);const n=WD();if(!n)throw new B(P.ELECTRON_IS_NULL);let r=null;try{r=n.desktopCapturer.getSources({types:e})}catch{r=null}r&&r.then||(r=new Nt((i,u)=>{n.desktopCapturer.getSources({types:e},(s,d)=>{s?u(s):i(d)})}));try{return await r}catch(i){throw new B(P.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,i.toString())}}let Pp=null;function WD(){if(Pp)return Pp;try{return Pp=window.require("electron"),Pp}catch{return null}}const RC=new Tr("safari");let JD=!1,qD=!1;async function bi(t,e){let n=0,r=null;for(;n<2;)try{r=await NZ(t,e,n>0);break}catch(i){if(i instanceof B)throw T.error("[".concat(e,"] ").concat(i.toString())),at("error",[],"getLocalStream",{config:t,id:e},i.toString()),i;const u=Lp(i.name||i.code||i,i.message);if(u.code===P.MEDIA_OPTION_INVALID){T.debug("[".concat(e,"] detect media option invalid, retry")),wt("debug",[],"[".concat(e,"] detect media option invalid, retry")),n+=1,await Vn(500);continue}throw T.error("[".concat(e,"] ").concat(u.toString())),at("error",[],"getLocalStream",{config:t,id:e},u.toString()),u}if(!r)throw new B(P.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function NZ(t,e,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new B(P.NOT_SUPPORTED,"can not find getUserMedia");n&&(t.video&&(delete t.video.width,delete t.video.height),t.screen&&(delete t.screen.width,delete t.screen.height));const r=rr(),i=new MediaStream;if(t.audioSource&&i.addTrack(t.audioSource),t.videoSource&&i.addTrack(t.videoSource),!t.audio&&!t.video&&!t.screen)return T.debug("Using Video Source/ Audio Source"),wt("debug",[],"Using Video Source/ Audio Source"),i;if(t.screen)if(WD())t.screen.sourceId?du(i,await HD(t.screen.sourceId,t.screen)):du(i,await bZ(t.screen));else if(Z1()&&t.screen.extensionId&&t.screen.mandatory){if(!r.getStreamFromExtension)throw new B(P.NOT_SUPPORTED,"This browser does not support screen sharing");T.debug("[".concat(e,'] Screen access on chrome stable, looking for extension"')),wt("debug",[],"[".concat(e,'] Screen access on chrome stable, looking for extension"'));const p=await(u=t.screen.extensionId,s=e,new Nt((f,E)=>{try{chrome.runtime.sendMessage(u,{getStream:!0},C=>{if(!C||!C.streamId)return T.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),C),at("error",[],"getSourceIdFromExtension",{extensionId:u,streamId:s},"No response from Chrome Plugin. Plugin not installed properly, ".concat(C)),void E(new B(P.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));f(C.streamId)})}catch(C){T.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(u,")"),C.toString()),at("error",[],"getSourceIdFromExtension",{extensionId:u,streamId:s},"AgoraRTC screensharing plugin is not accessible(".concat(u,"), ").concat(C.toString())),E(new B(P.CHROME_PLUGIN_NOT_INSTALL))}}));t.screen.mandatory.chromeMediaSourceId=p,du(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:t.screen.mandatory}}))}else if(r.getDisplayMedia){t.screen.mediaSource&&eO(t.screen.mediaSource);const p={width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate,displaySurface:t.screen.mediaSource==="screen"?"monitor":t.screen.mediaSource};T.debug("[".concat(e,"] getDisplayMedia:"),JSON.stringify({video:p,audio:!!t.screenAudio})),qc("debug",["mediaDevices",e],"getDisplayMedia",{video:p,audio:!!t.screenAudio,trackId:e}),du(i,await navigator.mediaDevices.getDisplayMedia({video:p,audio:!!t.screenAudio}))}else{if(!Cr())throw T.error("[".concat(e,"] This browser does not support screenSharing")),new B(P.NOT_SUPPORTED,"This browser does not support screen sharing");{t.screen.mediaSource&&eO(t.screen.mediaSource);const p={video:{mediaSource:t.screen.mediaSource,width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate}};T.debug("[".concat(e,"] getUserMedia: ").concat(JSON.stringify(p))),qc("debug",["mediaDevices",e],"getUserMedia",p),du(i,await navigator.mediaDevices.getUserMedia(p))}}var u,s;if(!t.video&&!t.audio)return i;let d={video:t.video,audio:t.audio},a=st("MEDIA_DEVICE_CONSTRAINTS");if(a)try{typeof a=="string"&&(a=JSON.parse(a)),d=function p(f,E){if(!xk(f)||!xk(E)||Array.isArray(f)&&!Array.isArray(E)||!Array.isArray(f)&&Array.isArray(E))return E;if(Array.isArray(E)&&Array.isArray(f)){const C=[...f];for(let _=0;_<E.length;_++)C[_]=p(f[_],E[_]);return C}{const C=Ga({},f);for(const _ in E)Object.prototype.hasOwnProperty.call(E,_)&&(Object.prototype.hasOwnProperty.call(f,_)?C[_]=p(f[_],E[_]):C[_]=E[_]);return C}}(d,a),wt("debug",["mediaDevices",e],"merge configConstraints ".concat(JSON.stringify(a)))}catch{}T.debug("[".concat(e,"] GetUserMedia"),JSON.stringify(d)),qc("debug",["mediaDevices",e],"getUserMedia",d),ye();let l,A=null;(Lr()||_r()||qh())&&(A=await RC.lock());try{l=await navigator.mediaDevices.getUserMedia(d)}catch(p){throw A&&A(),p}return d.audio&&(JD=!0),d.video&&(qD=!0),du(i,l),A&&A(),i}function Lp(t,e){switch(t){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new B(P.MEDIA_OPTION_INVALID,"".concat(t,": ").concat(e));case"NotFoundError":case"DevicesNotFoundError":return new B(P.DEVICE_NOT_FOUND,"".concat(t,": ").concat(e));case"NotSupportedError":return new B(P.NOT_SUPPORTED,"".concat(t,": ").concat(e));case"NotReadableError":return new B(P.NOT_READABLE,"".concat(t,": ").concat(e));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new B(P.PERMISSION_DENIED,"".concat(t,": ").concat(e));case"ConstraintNotSatisfiedError":return new B(P.CONSTRAINT_NOT_SATISFIED,"".concat(t,": ").concat(e));default:return T.error("getUserMedia unexpected error",t),at("error",[],"handleGetUserMediaError",void 0,t),new B(P.UNEXPECTED_ERROR,"".concat(t,": ").concat(e))}}function du(t,e){const n=t.getVideoTracks()[0],r=t.getAudioTracks()[0],i=e.getVideoTracks()[0],u=e.getAudioTracks()[0];u&&(r&&t.removeTrack(r),t.addTrack(u)),i&&(n&&t.removeTrack(n),t.addTrack(i))}const Rr=new class extends Ge{get state(){return this._state}set state(t){t!==this._state&&(this.emit(Fo.STATE_CHANGE,t),this._state=t)}constructor(){super(),v(this,"_state",Pa.IDLE),v(this,"isAccessMicrophonePermission",!1),v(this,"isAccessCameraPermission",!1),v(this,"lastAccessMicrophonePermission",!1),v(this,"lastAccessCameraPermission",!1),v(this,"checkdeviceMatched",!1),v(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(st("ENUMERATE_DEVICES_INTERVAL")||rN()&&Yc())&&this.updateDevicesInfo()},st("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(t=>T.error(t.toString()))}async enumerateDevices(t,e){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new B(P.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let u=!this.isAccessMicrophonePermission&&t,s=!this.isAccessCameraPermission&&e;i.audio&&(u=!1),i.video&&(s=!1);let d=null,a=null,l=null;if(!n&&(u||s)){if(RC.isLocked&&(T.debug("[device manager] wait GUM lock"),(await RC.lock())(),T.debug("[device manager] GUM unlock")),JD&&(u=!1,this.isAccessMicrophonePermission=!0),qD&&(s=!1,this.isAccessCameraPermission=!0),T.debug("[device manager] check media device permissions",t,e,u,s),u&&s){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(A){const p=Lp(A.name||A.code||A,A.message);if(p.code===P.PERMISSION_DENIED)throw p;T.warning("getUserMedia failed in getDevices",p)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(u){try{d=await navigator.mediaDevices.getUserMedia({audio:t})}catch(A){const p=Lp(A.name||A.code||A,A.message);if(p.code===P.PERMISSION_DENIED)throw p;T.warning("getUserMedia failed in getDevices",p)}this.isAccessMicrophonePermission=!0}else if(s){try{a=await navigator.mediaDevices.getUserMedia({video:e})}catch(A){const p=Lp(A.name||A.code||A,A.message);if(p.code===P.PERMISSION_DENIED)throw p;T.warning("getUserMedia failed in getDevices",p)}this.isAccessCameraPermission=!0}T.debug("[device manager] mic permission",t,"cam permission",e)}try{const A=await navigator.mediaDevices.enumerateDevices();return d&&d.getTracks().forEach(p=>p.stop()),a&&a.getTracks().forEach(p=>p.stop()),l&&l.getTracks().forEach(p=>p.stop()),d=null,a=null,l=null,A}catch(A){return d&&d.getTracks().forEach(p=>p.stop()),a&&a.getTracks().forEach(p=>p.stop()),l&&l.getTracks().forEach(p=>p.stop()),d=null,a=null,l=null,new B(P.ENUMERATE_DEVICES_FAILED,A.toString()).throw()}}async getRecordingDevices(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,t)).filter(e=>e.kind==="audioinput")}async getCamerasDevices(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,t)).filter(e=>e.kind==="videoinput")}async getSpeakers(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,t)).filter(e=>e.kind==="audiooutput")}searchDeviceIdByName(t){let e=null;return this.deviceInfoMap.forEach(n=>{n.device.label===t&&(e=n.device.deviceId)}),e}async getDeviceById(t){const e=(await this.enumerateDevices(!0,!0,!0)).find(n=>n.deviceId===t);if(!e)throw new B(P.DEVICE_NOT_FOUND,"deviceId: ".concat(t));return e}async init(){this.state=Pa.INITING;try{await this.updateDevicesInfo(),this.state=Pa.INITEND}catch(t){throw T.warning("Device Detection functionality cannot start properly.",t.toString()),this.state=Pa.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new B(P.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),t}}async updateDevicesInfo(){const t=await this.enumerateDevices(!0,!0,!0),e=Date.now(),n=[];if(t[0]&&t[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const i=t.find(s=>s.kind==="audioinput"&&s.deviceId==="default"),u=t.find(s=>s.kind==="audiooutput"&&s.deviceId==="default");i&&u?u.groupId===i.groupId?T.debug("[device-check] default input ".concat(i.label," and output ").concat(u.label," is the same group")):T.warning("[device-check] default input ".concat(i.label," and output ").concat(u.label," is not the same group")):T.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(t);if(t.forEach(i=>{if(!i.deviceId)return;const u=this.deviceInfoMap.get("".concat(i.kind,"_").concat(i.deviceId));if((u?u.state:"INACTIVE")!=="ACTIVE"){const s={initAt:e,updateAt:e,device:i,state:"ACTIVE"};this.deviceInfoMap.set("".concat(i.kind,"_").concat(i.deviceId),s),n.push(s)}u&&(u.updateAt=e)}),this.deviceInfoMap.forEach((i,u)=>{i.state==="ACTIVE"&&i.updateAt!==e&&(i.state="INACTIVE",n.push(i))}),this.state!==Pa.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach(i=>{switch(i.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Fo.RECORDING_DEVICE_CHANGED,i);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Fo.CAMERA_DEVICE_CHANGED,i);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Fo.PLAYOUT_DEVICE_CHANGED,i)}}),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(t){const e=t.filter(i=>i.kind==="audioinput"),n=t.filter(i=>i.kind==="videoinput"),r={audio:!1,video:!1};for(const i of e)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}};var zD;let OZ=Qn("AudioElementPlayCenter")(zD=class{constructor(){v(this,"onAutoplayFailed",void 0),v(this,"elementMap",new Map),v(this,"elementStateMap",new Map),v(this,"elementsNeedToResume",[]),v(this,"sinkIdMap",new Map),v(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(t=>{let[e,n]=t;const r=this.elementStateMap.get(e),i=n.srcObject.getAudioTracks()[0];Hc()?i&&i.readyState==="live"&&ae.curState==="running"&&(T.debug("auto resume after interruption for iOS 15"),wt("debug",["AudioElementPlayCenter",e],"auto resume after interruption for iOS15"),n.pause(),n.play()):r&&r==="paused"&&i&&i.readyState==="live"&&ae.curState==="running"&&(T.debug("auto resume after interruption for iOS"),wt("debug",["AudioElementPlayCenter",e],"auto resume after interruption for iOS"),n.play())})}),v(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(t=>{let[e,n]=t;const r=n.srcObject.getAudioTracks()[0];r&&r.readyState==="live"&&(T.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),at("debug",["AudioElementPlayCenter",e],"autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())})}),this.autoResumeAudioElement(),ae.on(rn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ae.on(rn.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),ae.on(rn.STATE_CHANGE,()=>{_r()&&ae.prevState==="suspended"&&ae.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(t,e){const n=this.elementMap.get(t);if(this.sinkIdMap.set(t,e),n)try{await n.setSinkId(e)}catch(r){throw new B(P.PERMISSION_DENIED,"can not set sink id: "+r.toString())}}play(t,e,n,r){if(this.elementMap.has(e))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([t]),this.bindAudioElementEvents(e,i),this.elementMap.set(e,i),this.elementStateMap.set(e,Fn.INIT),this.setVolume(e,n);const u=this.sinkIdMap.get(e);if(u)try{i.setSinkId(u).catch(d=>{T.warning("[".concat(e,"] set sink id failed"),d.toString()),qc("warning",["HTMLAudioElement",e],"setSinkId",d.toString())})}catch(d){T.warning("[".concat(e,"] set sink id failed"),d.toString())}const s=i.play();s&&s.then&&s.catch(d=>{r&&ot.autoplayFailed(r,"audio",d.message,e),T.warning("audio element play warning",d.toString()),qc("warning",["HTMLAudioElement",e],"play",d.toString()),this.elementMap.has(e)&&d.name==="NotAllowedError"&&(T.warning("detected audio element autoplay failed"),at("warning",["AudioElementPlayCenter",e],"play",d.toString()),this.elementsNeedToResume.push(i),pi(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),UD()}))})}updateTrack(t,e){const n=this.elementMap.get(t);n&&(n.srcObject=new MediaStream([e]))}isPlaying(t){return this.elementMap.has(t)}setVolume(t,e){const n=this.elementMap.get(t);n&&(e=Math.max(0,Math.min(100,e)),n.volume=e/100)}stop(t){const e=this.elementMap.get(t);if(this.sinkIdMap.delete(t),!e)return;const n=this.elementsNeedToResume.indexOf(e);this.elementsNeedToResume.splice(n,1),e.srcObject=null,e.remove(),this.elementMap.delete(t),this.elementStateMap.delete(t)}bindAudioElementEvents(t,e){DZ.forEach(n=>{e.addEventListener(n,r=>{const i=this.elementStateMap.get(t),u=r.type==="pause"?"paused":r.type;T.debug("[".concat(t,"] audio-element-status change ").concat(i," => ").concat(u)),Qo("debug",["HTMLAudioElement",t],"statusChange","".concat(i," => ").concat(u)),this.elementStateMap.set(t,u)})})}getPlayerState(t){return this.elementStateMap.get(t)||"uninit"}autoResumeAudioElement(){const t=()=>{this.elementsNeedToResume.forEach(e=>{e.play().then(n=>{T.debug("Auto resume audio element success"),at("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(n=>{T.warning("Auto resume audio element failed!",n),at("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",n.toString())})}),this.elementsNeedToResume=[]};new Nt(e=>{document.body?e():window.addEventListener("load",()=>e())}).then(()=>{const e=ye();e.os!=="Android"||e.name!=="Chrome"&&e.name!==me.WECHAT?(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)):document.body.addEventListener("click",t,!0)})}})||zD;const DZ=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],wr=new OZ;function je(){return function(t,e,n){const r=t[e];typeof r=="function"&&(n.value=function(){this._isClosed&&new B(P.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var i=arguments.length,u=new Array(i),s=0;s<i;s++)u[s]=arguments[s];const d=r.apply(this,u);return d instanceof Nt?new Nt((a,l)=>{d.then(a).catch(l)}):d})}}var XD,ZD,$D,tk,ek,nk,rk,ik,ok,sk,ak,ck,Cn,uk,dk,lk,Ak,hk,ja,pk,fk,gk,Ek,mk,Ik,Ck,fr,_k;function vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vk(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}let kn=(XD=Qn("LocalAudioTrack","getTrackId"),ZD=je(),$D=uu("LocalAudioTrack","_enabledMutex"),tk=je(),ek=uu("LocalAudioTrack","_enabledMutex"),nk=je(),rk=Dp({report:ot}),ik=je(),ok=je(),sk=je(),ak=je(),XD((Lt((Cn=class extends vC{get isPlaying(){return this._useAudioElement?wr.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(t,e,n){super(t,n),v(this,"trackMediaType","audio"),v(this,"_encoderConfig",void 0),v(this,"_source",void 0),v(this,"_enabled",!0),v(this,"_volume",100),v(this,"_useAudioElement",!1),v(this,"_bypassWebAudio",!1),v(this,"processor",void 0),v(this,"processorContext",void 0),v(this,"processorDestination",void 0),this._encoderConfig=e,this._source=new KD(t),st("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new LZ(this._source.context,this.getTrackId()),this.processorDestination=new PZ(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(vr.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(t){we(t,"volume",0,1e3);const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),t]},300);this._volume=t,this._source.setVolume(t/100),this._useAudioElement&&wr.setVolume(this.getTrackId(),t);try{if(this._bypassWebAudio)return T.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void e.onSuccess();const n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,Be(this,xt.NEED_REPLACE_TRACK,this).then(()=>{T.debug("[".concat(this.getTrackId(),"] replace web audio track success")),wt("debug",this,"replace web audio track success")}).catch(r=>{T.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),r),wt("warning",this,"replace web audio track failed ".concat(r.toString()))}))}catch{}e.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}async setPlaybackDevice(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),t]});if(!this._useAudioElement)throw new B(P.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await wr.setSinkID(this.getTrackId(),t)}catch(n){throw e.onError(n),n}e.onSuccess()}async setEnabled(t,e,n){if(!n){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(T.info("[".concat(this.getTrackId(),"] start setEnabled"),t),at("info",this,"setEnabled",t),t){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await Be(this,xt.NEED_ENABLE_TRACK,this),T.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(t," success")),at("info",this,"setEnabled",t,"success")}catch(r){throw n||(this._enabled=!1),T.error("[".concat(this.getTrackId(),"] setEnabled to true error"),r.toString()),at("error",this,"setEnabled",t,r.toString()),r}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await Be(this,xt.NEED_DISABLE_TRACK,this)}catch(r){throw n||(this._enabled=!0),T.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),at("info",this,"setEnabled",t,r.toString()),r}}}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._mediaStreamTrack.enabled=!t,T.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),at("debug",this,"setMuted",t),t?await Be(this,xt.NEED_MUTE_TRACK,this):await Be(this,xt.NEED_UNMUTE_TRACK,this))}getStats(){return il(()=>{T.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),wt("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ha(this,xt.GET_STATS)||wC({},bI)}setAudioFrameCallback(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!t)return this._source.removeAllListeners(vr.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(e),this._source.removeAllListeners(vr.ON_AUDIO_BUFFER),this._source.on(vr.ON_AUDIO_BUFFER,n=>t(n))}play(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});T.debug("[".concat(this.getTrackId(),"] start audio playback")),at("debug",this,"play"),this._useAudioElement?(T.debug("[".concat(this.getTrackId(),"] start audio playback in element")),wt("debug",this,"start audio playback in element"),wr.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),t.onSuccess()}stop(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});T.debug("[".concat(this.getTrackId(),"] stop audio playback")),at("debug",this,"stop"),this._useAudioElement?wr.stop(this.getTrackId()):this._source.stop(),t.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){T.debug("[".concat(this.getTrackId(),"] update player source track")),at("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wr.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(t,e){this._originMediaStreamTrack!==t&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t.addEventListener("ended",this._handleTrackEnded),e&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=t,this.processor&&this.processor.updateInput({track:t,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Be(this,xt.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack))}renewMediaStreamTrack(t){return Nt.resolve(void 0)}pipe(t){if(this._bypassWebAudio)throw new B(P.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===t)return t;if(t._source)throw new B(P.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),t}unpipe(){var t;if(!this.processor)return;const e=this.processor;(t=this._source.processSourceNode)===null||t===void 0||t.disconnect(),this.processor._source=!1,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(xr.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(),await Be(this,xt.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Be(this,xt.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(xr.ON_NODE,t=>{this._source.processedNode=t})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(xr.ON_TRACK),this.processorDestination.removeAllListeners(xr.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(pr.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(pr.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[ZD],Object.getOwnPropertyDescriptor(Cn.prototype,"setPlaybackDevice"),Cn.prototype),Lt(Cn.prototype,"setEnabled",[$D,tk],Object.getOwnPropertyDescriptor(Cn.prototype,"setEnabled"),Cn.prototype),Lt(Cn.prototype,"setMuted",[ek,nk,rk],Object.getOwnPropertyDescriptor(Cn.prototype,"setMuted"),Cn.prototype),Lt(Cn.prototype,"getStats",[ik],Object.getOwnPropertyDescriptor(Cn.prototype,"getStats"),Cn.prototype),Lt(Cn.prototype,"setAudioFrameCallback",[ok],Object.getOwnPropertyDescriptor(Cn.prototype,"setAudioFrameCallback"),Cn.prototype),Lt(Cn.prototype,"play",[sk],Object.getOwnPropertyDescriptor(Cn.prototype,"play"),Cn.prototype),Lt(Cn.prototype,"stop",[ak],Object.getOwnPropertyDescriptor(Cn.prototype,"stop"),Cn.prototype),ck=Cn))||ck),rl=(uk=Qn("MicrophoneAudioTrack","getTrackId"),dk=je(),lk=uu("MicrophoneAudioTrack","_enabledMutex"),Ak=je(),uk((Lt((ja=class extends kn{constructor(t,e,n,r){super(t,e.encoderConfig?pp(e.encoderConfig):{},r),v(this,"_config",void 0),v(this,"_deviceName","default"),v(this,"_constraints",void 0),v(this,"_originalConstraints",void 0),v(this,"_enabled",!0),Mt("info",this,"constructor",{trackId:r,deviceId:t.label,constraints:n}),this._config=e,this._constraints=n,this._originalConstraints=n,this._deviceName=t.label,typeof e.bypassWebAudio=="boolean"&&(this._bypassWebAudio=e.bypassWebAudio),Hc()&&ae.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}async setDevice(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.MIC_AUDIO_TRACK_SET_DEVICE,options:[this.getTrackId(),t]});if(T.info("[".concat(this.getTrackId(),"] start set device to ").concat(t)),at("info",this,"setDevice",t),this._enabled)try{const n=await Rr.getDeviceById(t),r={};r.audio=wC({},this._constraints),r.audio.deviceId={exact:t},this._originMediaStreamTrack.stop();let i=null;try{i=await bi(r,this.getTrackId())}catch(u){throw T.error("[".concat(this.getTrackId(),"] setDevice failed"),u.toString()),at("error",this,"setDevice",t,u.toString()),i=await bi({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1),u}await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t}}catch(n){throw e.onError(n),T.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),at("error",this,"setDevice",t,n.toString()),n}else try{const n=await Rr.getDeviceById(t);this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t}}catch(n){throw e.onError(n),T.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),at("error",this,"setDevice",t,n.toString()),n}e.onSuccess(),T.info("[".concat(this.getTrackId(),"] set device to ").concat(t," success")),at("info",this,"setDevice",t,"success")}async setEnabled(t,e,n){if(e)return T.debug("[".concat(this.getTrackId,"] setEnabled false (do not close microphone)")),wt("debug",this,"setEnabled false (do not close microphone)"),await super.setEnabled(t);if(!n){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(T.info("[".concat(this.getTrackId(),"] start setEnabled"),t),at("info",this,"setEnabled",t),!t){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),n||(this._enabled=!1);try{await Be(this,xt.NEED_DISABLE_TRACK,this)}catch(u){throw T.error("[".concat(this.getTrackId(),"] setEnabled false failed"),u.toString()),at("error",this,"setEnabled",t,u.toString()),u}return}const r=wC({},this._constraints),i=Rr.searchDeviceIdByName(this._deviceName);i&&!r.deviceId&&(r.deviceId=i);try{n||(this._enabled=!0);const u=await bi({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(u.getAudioTracks()[0],!1),await Be(this,xt.NEED_ENABLE_TRACK,this)}catch(u){throw n||(this._enabled=!1),T.error("[".concat(this.getTrackId(),"] setEnabled true failed"),u.toString()),at("error",this,"setEnabled",t,u.toString()),u}T.info("[".concat(this.getTrackId(),"] setEnabled success")),at("info",this,"setEnabled",t,"success")}close(){super.close(),Hc()&&ae.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((_r()||xo())&&this._enabled&&!this._isClosed&&ae.duringInterruption){const t=async()=>{ae.off(rn.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(T.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),wt("debug",this,"try capture microphone media device for interrupted iOS device"),await this.setEnabled(!1),await this.setEnabled(!0))};ae.on(rn.IOS_INTERRUPTION_END,t)}else T.debug("[".concat(this.getTrackId(),"] track ended")),Qo("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(ws.TRACK_ENDED)}async renewMediaStreamTrack(t){const e=t||this._constraints,n=Rr.searchDeviceIdByName(this._deviceName);n&&!e.deviceId&&(e.deviceId=n),this._constraints=e,this._originMediaStreamTrack.stop();const r=await bi({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!0)}bindProcessorContextEvents(){this.processorContext.on(pr.REQUEST_UPDATE_CONSTRAINTS,async(t,e,n)=>{try{const r=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(r),e()}catch(r){n(r)}}),this.processorContext.on(pr.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[dk],Object.getOwnPropertyDescriptor(ja.prototype,"setDevice"),ja.prototype),Lt(ja.prototype,"setEnabled",[lk,Ak],Object.getOwnPropertyDescriptor(ja.prototype,"setEnabled"),ja.prototype),hk=ja))||hk),kZ=(pk=Qn("BufferSourceAudioTrack","getTrackId"),fk=je(),gk=je(),Ek=je(),mk=je(),Ik=je(),pk((Lt((fr=class extends kn{constructor(t,e,n,r){super(e.createOutputTrack(),n,r),v(this,"source",void 0),v(this,"_bufferSource",void 0),Mt("info",this,"constructor",{trackId:r}),this.source=t,this._bufferSource=e,this._bufferSource.on(vr.AUDIO_SOURCE_STATE_CHANGE,i=>{this.emit(ws.SOURCE_STATE_CHANGE,i)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),t,this.duration]});t&&this._bufferSource.updateOptions(t),this._bufferSource.startProcessAudioBuffer(),e.onSuccess()}pauseProcessAudioBuffer(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),t.onSuccess()}seekAudioBuffer(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(t),e.onSuccess()}resumeProcessAudioBuffer(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),t.onSuccess()}stopProcessAudioBuffer(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),t.onSuccess()}}).prototype,"startProcessAudioBuffer",[fk],Object.getOwnPropertyDescriptor(fr.prototype,"startProcessAudioBuffer"),fr.prototype),Lt(fr.prototype,"pauseProcessAudioBuffer",[gk],Object.getOwnPropertyDescriptor(fr.prototype,"pauseProcessAudioBuffer"),fr.prototype),Lt(fr.prototype,"seekAudioBuffer",[Ek],Object.getOwnPropertyDescriptor(fr.prototype,"seekAudioBuffer"),fr.prototype),Lt(fr.prototype,"resumeProcessAudioBuffer",[mk],Object.getOwnPropertyDescriptor(fr.prototype,"resumeProcessAudioBuffer"),fr.prototype),Lt(fr.prototype,"stopProcessAudioBuffer",[Ik],Object.getOwnPropertyDescriptor(fr.prototype,"stopProcessAudioBuffer"),fr.prototype),Ck=fr))||Ck),Ai=Qn("MixingAudioTrack","getTrackId")(_k=class extends kn{get isActive(){for(const t of this.trackList)if(t._enabled&&!t._isClosed&&!t.muted)return!0;return!1}constructor(){const t=el().createMediaStreamDestination();super(t.stream.getAudioTracks()[0],void 0,Ye(8,"track-mix-")),v(this,"trackList",void 0),v(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=t,this.trackList=[]}hasAudioTrack(t){return this.trackList.indexOf(t)!==-1}addAudioTrack(t){if(this.trackList.indexOf(t)!==-1)return T.debug("track ".concat(t.getTrackId()," is already added")),void wt("debug",this,"track already added");T.debug("add ".concat(t.getTrackId()," to mixing track")),at("debug",this,"addAudioTrack",t.getTrackId()),t._source.outputNode.connect(this.destNode),this.trackList.push(t),this.updateEncoderConfig()}removeAudioTrack(t){if(this.trackList.indexOf(t)!==-1){T.debug("remove ".concat(t.getTrackId()," from mixing track")),at("debug",this,"removeAudioTrack",t.getTrackId());try{t._source.outputNode.disconnect(this.destNode)}catch{}OC(this.trackList,t),this.updateEncoderConfig()}}updateEncoderConfig(){const t={};this.trackList.forEach(e=>{e._encoderConfig&&((e._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=e._encoderConfig.bitrate),(e._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=e._encoderConfig.sampleRate),(e._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=e._encoderConfig.sampleSize),e._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}})||_k;class PZ extends Ge{constructor(e){super(),v(this,"name","AudioProcessorDestination"),v(this,"ID","0"),v(this,"inputTrack",void 0),v(this,"inputNode",void 0),v(this,"audioProcessorContext",void 0),v(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new B(P.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new B(P.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(xr.ON_TRACK,void 0),this.emit(xr.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);e.track&&this.inputTrack!==e.track&&(this.inputTrack=e.track,this.emit(xr.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.inputNode=e.node,this.emit(xr.ON_NODE,this.inputNode))}}class LZ extends Ge{constructor(e,n){super(),v(this,"constraintsMap",new Map),v(this,"statsRegistry",[]),v(this,"audioContext",void 0),v(this,"trackId",void 0),this.audioContext=e,this.trackId=n}async getConstraints(){return jr(this,pr.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,n){var r;return T.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(n,e),Be(this,pr.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ho(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var n;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Be(this,pr.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ho(n=this.constraintsMap).call(n)))}registerStats(e,n,r){this.statsRegistry.find(i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===n)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:n,cb:r})}unregisterStats(e,n){}gatherStats(){return this.statsRegistry.map(e=>{let{processorID:n,processorName:r,type:i,cb:u}=e;return{processorID:n,processorName:r,type:i,stats:u()}})}}class BZ extends Ge{constructor(){super(...arguments),v(this,"resultStorage",new Map)}setLocalAudioStats(e,n,r){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(r,n)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(r,n))}setLocalVideoStats(e,n,r){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(r,n)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(r,n)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(r))}setRemoteAudioStats(e,n){const r=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",r,this.checkAudioOutputLevel(n))}setRemoteVideoStats(e,n){const r=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",r,this.checkVideoDecode(n))}record(e,n,r){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const i=this.resultStorage.get(e);if(i&&(i.result.push(r),i.result.length>=5)){const u=i.result.includes(!0);i.isPrevNormal&&!u&&this.emit("exception",Sk[e],e,n),!i.isPrevNormal&&u&&this.emit("exception",Sk[e]+2e3,e+"_RECOVER",n),i.isPrevNormal=u,i.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&e.receiveLevel===0)}checkAudioInputLevel(e,n){return n instanceof Ai&&!n.isActive||!!n.muted||e.sendVolumeLevel!==0}checkFramerateInput(e,n){let r=null;n._encoderConfig&&n._encoderConfig.frameRate&&(r=Ps(n._encoderConfig.frameRate));const i=e.captureFrameRate;return!r||!i||!(r>10&&i<5||r<10&&r>=5&&i<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,n){return!!n.muted||e.sendBitrate!==0}checkSendAudioBitrate(e,n){return n instanceof Ai&&!n.isActive||!!n.muted||e.sendBitrate!==0}checkVideoDecode(e){return e.receiveBitrate===0||e.decodeFrameRate!==0}}const Sk={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},hi=new class{markSubscribeStart(t,e){performance.mark("agora-web-sdk/".concat(t,"/subscribe-").concat(e))}markPublishStart(t,e){performance.mark("agora-web-sdk/".concat(t,"/publish-").concat(e))}measureFromSubscribeStart(t,e){const n=performance.getEntriesByName("agora-web-sdk/".concat(t,"/subscribe-").concat(e));if(n.length>0){const r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}measureFromPublishStart(t,e){const n=performance.getEntriesByName("agora-web-sdk/".concat(t,"/publish-").concat(e));if(n.length>0){const r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}};function yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Va(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yk(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class lu{constructor(e){v(this,"store",void 0),v(this,"onStatsException",void 0),v(this,"onUploadPublishDuration",void 0),v(this,"localStats",new Map),v(this,"remoteStats",new Map),v(this,"updateStatsInterval",void 0),v(this,"trafficStats",void 0),v(this,"trafficStatsPeerList",[]),v(this,"uplinkStats",void 0),v(this,"exceptionMonitor",void 0),v(this,"p2pChannel",void 0),v(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new BZ,this.exceptionMonitor.on("exception",(n,r,i)=>{this.onStatsException&&this.onStatsException(n,r,i)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(_t.LocalAudioTrack)||Va({},bI)}getLocalVideoTrackStats(){return this.localStats.get(_t.LocalVideoTrack)||Va({},NI)}getRemoteAudioTrackStats(e){const n=(u,s)=>{if(!this.trafficStats)return s;const d=this.trafficStats.peer_delay.find(a=>a.peer_uid===u);return d&&(s.publishDuration=d.B_ppad+(Date.now()-this.trafficStats.timestamp)),s},r={};if(e){var i;const u=(i=this.remoteStats.get(e))===null||i===void 0?void 0:i.audioStats;u&&(r[e]=n(e,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[s,{audioStats:d}]=u;d&&(r[s]=n(s,d))});return r}getRemoteNetworkQualityStats(e){const n={};if(e){var r;const i=(r=this.remoteStats.get(e))===null||r===void 0?void 0:r.networkStats;i&&(n[e]=i)}else Array.from(this.remoteStats.entries()).forEach(i=>{let[u,{networkStats:s}]=i;s&&(n[u]=s)});return n}getRemoteVideoTrackStats(e){const n=(u,s)=>{if(!this.trafficStats)return s;const d=this.trafficStats.peer_delay.find(a=>a.peer_uid===u);return d&&(s.publishDuration=d.B_ppvd+(Date.now()-this.trafficStats.timestamp)),s},r={};if(e){var i;const u=(i=this.remoteStats.get(e))===null||i===void 0?void 0:i.videoStats;u&&(r[e]=n(e,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[s,{videoStats:d}]=u;d&&(r[s]=n(s,d))});return r}getRTCStats(){let e=0,n=0,r=0,i=0;const u=this.localStats.get(_t.LocalAudioTrack);u&&(e+=u.sendBytes,n+=u.sendBitrate);const s=this.localStats.get(_t.LocalVideoTrack);s&&(e+=s.sendBytes,n+=s.sendBitrate);const d=this.localStats.get(_t.LocalVideoLowTrack);d&&(e+=d.sendBytes,n+=d.sendBitrate),this.remoteStats.forEach(l=>{let{audioStats:A,videoStats:p}=l;A&&(r+=A.receiveBytes,i+=A.receiveBitrate),p&&(r+=p.receiveBytes,i+=p.receiveBitrate)});let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:n,SendBytes:e,RecvBytes:r,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter(n=>n.B_ppad!==void 0||n.B_ppvd!==void 0),e.peer_delay.filter(n=>this.trafficStatsPeerList.indexOf(n.peer_uid)===-1).forEach(n=>{var r;const i=(r=this.p2pChannel)===null||r===void 0?void 0:r.getRemoteMedia(n.peer_uid),u=i!=null&&i.videoSSRC?hi.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,s=i!=null&&i.audioSSRC?hi.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;n.B_ppad!==void 0&&n.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(n.peer_uid,n.B_ppad,n.B_ppvd,u>s?u:s),this.trafficStatsPeerList.push(n.peer_uid))}),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&T.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,n,r){if(!e)return!1;const i=!!r&&n.framesDecodeFreezeTime>r.framesDecodeFreezeTime,u=!r||n.framesDecodeCount>r.framesDecodeCount;return i||!u}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach(n=>{let[r,i]=n;switch(r){case _t.LocalVideoTrack:case _t.LocalVideoLowTrack:{const u=i,s=Va({},NI),d=e.getStats(),a=e.getLocalMedia(r);if(d){const l=d.videoSend.find(A=>A.ssrc===(a==null?void 0:a.ssrcs[0].ssrcId));if(l){const A=e.getLocalVideoSize(),p=e.getEncoderConfig(_t.LocalVideoTrack);l.codec!=="H264"&&l.codec!=="VP8"&&l.codec!=="VP9"&&l.codec!=="AV1X"&&l.codec!=="AV1"||(s.codecType=l.codec),s.sendBytes=l.bytes,s.sendBitrate=u?8*Math.max(0,s.sendBytes-u.sendBytes):0,l.inputFrame?(s.captureFrameRate=l.inputFrame.frameRate,s.captureResolutionHeight=l.inputFrame.height,s.captureResolutionWidth=l.inputFrame.width):A&&(s.captureResolutionWidth=A.width,s.captureResolutionHeight=A.height),l.sentFrame?(s.sendFrameRate=l.sentFrame.frameRate,s.sendResolutionHeight=l.sentFrame.height,s.sendResolutionWidth=l.sentFrame.width):A&&(s.sendResolutionWidth=A.width,s.sendResolutionHeight=A.height),l.avgEncodeMs&&(s.encodeDelay=l.avgEncodeMs),p&&p.bitrateMax&&(s.targetSendBitrate=1e3*p.bitrateMax),s.sendPackets=l.packets,s.sendPacketsLost=l.packetsLost,s.totalDuration=u?u.totalDuration+1:1,s.totalFreezeTime=u?u.totalFreezeTime:0,this.isLocalVideoFreeze(l)&&(s.totalFreezeTime+=1)}this.trafficStats&&(s.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(r,s),s&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,s);break}case _t.LocalAudioTrack:{const u=i,s=Va({},bI),d=e.getStats(),a=e.getLocalMedia(r);if(d){const l=d.audioSend.find(A=>A.ssrc===(a==null?void 0:a.ssrcs[0].ssrcId));if(l){if(l.codec!=="opus"&&l.codec!=="aac"&&l.codec!=="PCMU"&&l.codec!=="PCMA"&&l.codec!=="G722"||(s.codecType=l.codec),l.inputLevel)s.sendVolumeLevel=Math.round(32767*l.inputLevel);else{const A=e.getLocalAudioVolume();A&&(s.sendVolumeLevel=Math.round(32767*A))}s.sendBytes=l.bytes,s.sendPackets=l.packets,s.sendPacketsLost=l.packetsLost,s.sendBitrate=u?8*Math.max(0,s.sendBytes-u.sendBytes):0}}this.trafficStats&&(s.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(_t.LocalAudioTrack,s),s&&a&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,a.track,s);break}}})}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach(n=>{let[r,{videoStats:i,audioStats:u,videoPcStats:s}]=n;const d=u,a=i,l=s,A=Va({},XN),p=Va({},ZN),f=Va({},zJ),{audioTrack:E,videoTrack:C,audioSSRC:_,videoSSRC:y}=e.getRemoteMedia(r),R=e.getStats(),O=R==null?void 0:R.audioRecv.find(G=>G.ssrc===_),D=R==null?void 0:R.videoRecv.find(G=>G.ssrc===y),L=this.trafficStats&&this.trafficStats.peer_delay.find(G=>G.peer_uid===r);if(O&&(O.codec!=="opus"&&O.codec!=="aac"&&O.codec!=="PCMU"&&O.codec!=="PCMA"&&O.codec!=="G722"||(A.codecType=O.codec),O.outputLevel?A.receiveLevel=Math.round(32767*O.outputLevel):E&&(A.receiveLevel=Math.round(32767*E.getVolumeLevel())),A.receiveBytes=O.bytes,A.receivePackets=O.packets,A.receivePacketsLost=O.packetsLost,A.packetLossRate=A.receivePacketsLost/(A.receivePackets+A.receivePacketsLost),A.receiveBitrate=d?8*Math.max(0,A.receiveBytes-d.receiveBytes):0,A.totalDuration=d?d.totalDuration+1:1,A.totalFreezeTime=d?d.totalFreezeTime:0,A.freezeRate=A.totalFreezeTime/A.totalDuration,A.receiveDelay=O.jitterBufferMs,A.totalDuration>10&&lu.isRemoteAudioFreeze(E)&&(A.totalFreezeTime+=1)),D){D.codec!=="H264"&&D.codec!=="VP8"&&D.codec!=="VP9"&&D.codec!=="AV1X"&&D.codec!=="AV1"||(p.codecType=D.codec),p.receiveBytes=D.bytes,p.receiveBitrate=a?8*Math.max(0,p.receiveBytes-a.receiveBytes):0,p.decodeFrameRate=D.decodeFrameRate<0?0:D.decodeFrameRate,p.renderFrameRate=D.decodeFrameRate<0?0:D.decodeFrameRate,D.outputFrame&&(p.renderFrameRate=D.outputFrame.frameRate),D.receivedFrame?(p.receiveFrameRate=D.receivedFrame.frameRate,p.receiveResolutionHeight=D.receivedFrame.height,p.receiveResolutionWidth=D.receivedFrame.width):C&&(p.receiveResolutionHeight=C._videoHeight||0,p.receiveResolutionWidth=C._videoWidth||0),D.framesRateFirefox!==void 0&&(p.receiveFrameRate=Math.round(D.framesRateFirefox)),p.receivePackets=D.packets,p.receivePacketsLost=D.packetsLost,p.packetLossRate=p.receivePacketsLost/(p.receivePackets+p.receivePacketsLost),p.totalDuration=a?a.totalDuration+1:1,p.totalFreezeTime=a?a.totalFreezeTime:0,p.receiveDelay=D.jitterBufferMs||0;const G=!!y&&e.getRemoteVideoIsReady(y);C&&G&&lu.isRemoteVideoFreeze(C,D,l)&&(p.totalFreezeTime+=1),p.freezeRate=p.totalFreezeTime/p.totalDuration}L&&(A.end2EndDelay=L.B_ad,p.end2EndDelay=L.B_vd,A.transportDelay=L.B_ed,p.transportDelay=L.B_ed,A.currentPacketLossRate=L.B_ealr4/100,p.currentPacketLossRate=L.B_evlr4/100,f.uplinkNetworkQuality=L.B_punq?L.B_punq:0,f.downlinkNetworkQuality=L.B_pdnq?L.B_pdnq:0),this.remoteStats.set(r,{audioStats:A,videoStats:p,videoPcStats:D,networkStats:f}),E&&this.exceptionMonitor.setRemoteAudioStats(E,A),C&&this.exceptionMonitor.setRemoteVideoStats(C,p)})}}function Tk(t){return new TextEncoder().encode(t)}const MZ=async t=>function(e,n){let r="";return new Uint8Array(e).forEach(i=>{r+=i.toString(n).padStart(2,"0")}),r}(await crypto.subtle.digest("SHA-256",Tk(t)),16);function Rk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UZ(t){if(!t.address||!t.tcp)throw new B(P.UNEXPECTED_RESPONSE,"Invalid address format ".concat(t));return t.address.match(/^[\.\:\d]+$/)?"".concat(t.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(T.info("Cannot recognized as IP address ".concat(t.address,". Used As Host instead")),"".concat(t.address,":").concat(t.tcp))}function bC(t){return t.match(/^[\.\:\d]+$/)?"".concat(t.replace(/[^\d]/g,"-"),".").concat(st("TURN_DOMAIN")):(T.info("Cannot recognized as IP address ".concat(t,". Used As Host instead")),t)}function wk(t,e){const n=st("GATEWAY_DOMAINS");let r=n[1]&&e.indexOf(n[1])!==-1?1:0;return t.addresses=t.addresses||[],{gatewayAddrs:t.addresses.map(i=>i.domain_prefix?{address:"".concat(i.domain_prefix,".").concat(n[r++%n.length],":").concat(i.port)}:i.ip.match(/^[\.\:\d]+$/)?{ip:i.ip,port:i.port,address:"".concat(i.ip.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(i.port)}:(T.info("Cannot recognized as IP address ".concat(i.ip,". Used As Host instead")),{ip:i.ip,port:i.port,address:"".concat(i.ip,":").concat(i.port)})),uid:t.uid,cid:t.cid,vid:t.detail&&t.detail[8],uni_lbs_ip:t.detail&&t.detail[1],res:t,csIp:t.detail&&t.detail[502]}}function Ps(t){return typeof t=="number"?t:t.exact||t.ideal||t.max||t.min||0}function bk(t){const e=t._encoderConfig;if(!e)return{};const n={resolution:e.width&&e.height?"".concat(Ps(e.width),"x").concat(Ps(e.height)):void 0,maxVideoBW:e.bitrateMax,minVideoBW:e.bitrateMin};return typeof e.frameRate=="number"?(n.maxFrameRate=e.frameRate,n.minFrameRate=e.frameRate):e.frameRate&&(n.maxFrameRate=e.frameRate.max||e.frameRate.ideal||e.frameRate.exact||e.frameRate.min,n.minFrameRate=e.frameRate.min||e.frameRate.ideal||e.frameRate.exact||e.frameRate.max),n}function Nk(t,e,n){var r;const i=e.videoSend.find(d=>d.ssrc===t);if(!i)return null;const u=n==null||(r=n.videoSend.find(d=>d.ssrc===t))===null||r===void 0?void 0:r.inputFrame,s={id:Ye(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};return i.inputFrame&&(u&&i.inputFrame.height===u.height||(s.A_fhi=i.inputFrame.height?i.inputFrame.height.toString():"0"),u&&i.inputFrame.width===u.width||(s.A_fwi=i.inputFrame.width?i.inputFrame.width.toString():"0"),u&&i.inputFrame.frameRate===u.frameRate||(s.A_fri=i.inputFrame.frameRate?i.inputFrame.frameRate.toString():"0")),s}function Ok(t){return t>=0&&t<.17?1:t>=.17&&t<.36?2:t>=.36&&t<.59?3:t>=.59&&t<=1?4:t>1?5:0}function NC(t,e){let n,r,i;switch(e){case nn.CHOOSE_SERVER:n=4096,r="choose server";break;case nn.CLOUD_PROXY:n=1048576,r="proxy";break;case nn.CLOUD_PROXY_5:n=4194304,r="proxy5";break;case nn.CLOUD_PROXY_FALLBACK:n=4194310,r="proxy fallback";break;default:throw new B(P.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:t.detail&&t.detail[502],retry:!1})}if(t.response_body.forEach(u=>{u.buffer&&u.buffer.flag===n&&(i={code:u.buffer.code,addresses:(u.buffer.edges_services||[]).map(s=>Bp(Bp({},s),{},{ticket:u.buffer.cert})),server_ts:t.enter_ts,uid:u.buffer.uid,cid:u.buffer.cid,cname:u.buffer.cname,detail:Bp(Bp({},u.buffer.detail),t.detail),flag:u.buffer.flag,opid:t.opid})}),!i)throw new B(P.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(r," from multi unilbs response"),{csIp:t.detail&&t.detail[502]});return i}async function xZ(t,e){return await Nt.all(t.addresses.map(async n=>({address:bC(n.ip),tcpport:n.port,udpport:n.port,username:e&&st("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?e.toString():an.username,password:e&&st("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await MZ(e.toString()):an.password})))}function QZ(t,e){const n=e._videoHeight||e.getMediaStreamTrack(!0).getSettings().height;return n?n/Ps(t.height):4}function Ls(t){let{candidateType:e,relayProtocol:n,type:r,address:i,port:u,protocol:s}=t;return r==="local-candidate"?{candidateType:e,relayProtocol:n,protocol:s}:{candidateType:e,relayProtocol:n,address:i,port:u,protocol:s}}function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Au(t){return window.TextEncoder?new TextEncoder().encode(t).length:t.length}function Vn(t){return new Nt(e=>{window.setTimeout(e,t)})}function FZ(t){const e=new B(P.TIMEOUT,"timeout");return new Nt((n,r)=>{window.setTimeout(()=>r(e),t)})}function Ye(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,e=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,t).toLowerCase();return n.length===t?"".concat(e).concat(n):"".concat(e).concat(n)+Ye(t-n.length,"")}function kk(){return Ye(32,"").toUpperCase()}const Mp=()=>{};function Pk(t){return new Nt((e,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const u=_r()?"canplay":"playing";i.addEventListener(u,()=>{const s=i.videoWidth,d=i.videoHeight;!s&&Cr()||(r=!0,i.srcObject=null,i.remove(),e([s,d]))}),i.srcObject=new MediaStream([t]),i.play().catch(Mp),setTimeout(()=>{r||(i.srcObject=null,i.remove(),e([i.videoWidth,i.videoHeight]))},4e3)})}function Ka(t){return Nt.all(t.map(e=>e.then(n=>{throw n},n=>n))).then(e=>{throw e},e=>e)}function jr(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.getListeners(e).length===0?Nt.reject(new B(P.UNEXPECTED_ERROR,"can not emit promise")):new Nt((u,s)=>{t.emit(e,...r,u,s)})}function Be(t,e){if(t.getListeners(e).length===0)return Nt.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return jr(t,e,...r)}function Ha(t,e){if(t.getListeners(e).length===0)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Up(t,e,...r)}function Up(t,e){let n=null,r=null;for(var i=arguments.length,u=new Array(i>2?i-2:0),s=2;s<i;s++)u[s-2]=arguments[s];if(t.emit(e,...u,d=>{n=d},d=>{r=d}),r!==null)throw r;if(n===null)throw new B(P.UNEXPECTED_ERROR,"handler is not sync");return n}function OC(t,e){const n=t.indexOf(e);n!==-1&&t.splice(n,1)}function Lk(t){const e=[];return t.forEach(n=>{e.indexOf(n)===-1&&e.push(n)}),e}function pi(t){Nt.resolve().then(t)}function Pn(t){return JSON.parse(JSON.stringify(t))}const Bk={};function il(t,e){Bk[e]||(Bk[e]=!0,t())}function DC(t){const e=window.atob(t),n=new Uint8Array(new ArrayBuffer(e.length));for(let r=0;r<e.length;r+=1)n[r]=e.charCodeAt(r);return n}function xp(t){let e="";for(let n=0;n<t.length;n+=1)e+=String.fromCharCode(t[n]);return window.btoa(e)}const Mk=new class{constructor(){v(this,"fnMap",new Map)}throttleByKey(t,e,n,r){for(var i=arguments.length,u=new Array(i>4?i-4:0),s=4;s<i;s++)u[s-4]=arguments[s];if(this.fnMap.has(e)){const d=this.fnMap.get(e);if(d.threshold!==n){d.fn(...d.args),clearTimeout(d.timer);const a=window.setTimeout(()=>{const l=this.fnMap.get(e);l&&l.fn(...l.args),this.fnMap.delete(e)},n);this.fnMap.set(e,{fn:t,threshold:n,timer:a,args:u,skipFn:r})}else d.skipFn&&d.skipFn(...d.args),this.fnMap.set(e,Ga(Ga({},d),{},{fn:t,args:u,skipFn:r}))}else{const d=window.setTimeout(()=>{const a=this.fnMap.get(e);a&&a.fn(...a.args),this.fnMap.delete(e)},n);this.fnMap.set(e,{fn:t,threshold:n,timer:d,args:u,skipFn:r})}}},Uk=Mk.throttleByKey.bind(Mk),Ya=async t=>{let{fragementLength:e,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:u}=t,s=0;const d=e;let a,l=0;const A=async()=>{const p=(()=>{const f=s*d,E=f+d;return n.slice(f,E).map(r)})();u&&u.push(...p);try{a=await Ka(p)}catch(f){if(l+=d,s++,!(l>=n.length))return void await A();i(f)}p.forEach(f=>f.cancel())};return await A(),a};function xk(t){return typeof t=="object"&&t!==null&&!(t instanceof RegExp)}var jZ=gn,VZ=En("iterator"),Qk=!jZ(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach(function(r,i){e.delete("b"),n+=i+r}),!t.toJSON||!e.sort||t.href!=="http://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[VZ]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"}),Fk=yi,GZ=Ve,KZ=Pr,HZ=gn,kC=Ah,YZ=dh,WZ=FA,JZ=Ao,qZ=VA,hu=Object.assign,jk=Object.defineProperty,zZ=GZ([].concat),XZ=!hu||HZ(function(){if(Fk&&hu({b:1},hu(jk({},"a",{enumerable:!0,get:function(){jk(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(i){e[i]=i}),hu({},t)[n]!=7||kC(hu({},e)).join("")!=r})?function(t,e){for(var n=JZ(t),r=arguments.length,i=1,u=YZ.f,s=WZ.f;r>i;)for(var d,a=qZ(arguments[i++]),l=u?zZ(kC(a),u(a)):kC(a),A=l.length,p=0;A>p;)d=l[p++],Fk&&!KZ(s,a,d)||(n[d]=a[d]);return n}:hu,ZZ=oi,$Z=VR,t$=Is,e$=Pr,n$=Ao,r$=function(t,e,n,r){try{return r?e(ZZ(n)[0],n[1]):e(n)}catch(i){$Z(t,"throw",i)}},i$=xR,o$=Rh,s$=ko,Vk=fp,a$=Bm,c$=gh,Gk=se.Array,Wa=Ve,PC=2147483647,u$=/[^\0-\u007E]/,Kk=/[.\u3002\uFF0E\uFF61]/g,Hk="Overflow: input needs wider integers to process",Yk=se.RangeError,d$=Wa(Kk.exec),pu=Math.floor,LC=String.fromCharCode,Wk=Wa("".charCodeAt),Jk=Wa([].join),Bs=Wa([].push),l$=Wa("".replace),A$=Wa("".split),h$=Wa("".toLowerCase),qk=function(t){return t+22+75*(t<26)},p$=function(t,e,n){var r=0;for(t=n?pu(t/700):t>>1,t+=pu(t/e);t>455;)t=pu(t/35),r+=36;return pu(r+36*t/(t+38))},f$=function(t){var e,n,r=[],i=(t=function(R){for(var O=[],D=0,L=R.length;D<L;){var G=Wk(R,D++);if(G>=55296&&G<=56319&&D<L){var Z=Wk(R,D++);(64512&Z)==56320?Bs(O,((1023&G)<<10)+(1023&Z)+65536):(Bs(O,G),D--)}else Bs(O,G)}return O}(t)).length,u=128,s=0,d=72;for(e=0;e<t.length;e++)(n=t[e])<128&&Bs(r,LC(n));var a=r.length,l=a;for(a&&Bs(r,"-");l<i;){var A=PC;for(e=0;e<t.length;e++)(n=t[e])>=u&&n<A&&(A=n);var p=l+1;if(A-u>pu((PC-s)/p))throw Yk(Hk);for(s+=(A-u)*p,u=A,e=0;e<t.length;e++){if((n=t[e])<u&&++s>PC)throw Yk(Hk);if(n==u){for(var f=s,E=36;;){var C=E<=d?1:E>=d+26?26:E-d;if(f<C)break;var _=f-C,y=36-C;Bs(r,LC(qk(C+_%y))),f=pu(_/y),E+=36}Bs(r,LC(qk(f))),d=p$(s,p,l==a),s=0,l++}}s++,u++}return Jk(r,"")},g$=se.TypeError,BC=xn,Qp=se,MC=Ki,Fp=Pr,Io=Ve,zk=Qk,Xk=Pc,E$=f2,m$=Ra,I$=o2,UC=kc,Zk=Jm,xC=Un,C$=$n,_$=Is,v$=Po,S$=oi,$k=ii,fi=_s,y$=Dd,tP=Es,QC=Bm,T$=gh,fu=function(t,e){if(t<e)throw g$("Not enough arguments");return t},R$=LN,w$=En("iterator"),jp="URLSearchParams",eP="URLSearchParamsIterator",nP=UC.set,Xi=UC.getterFor(jp),b$=UC.getterFor(eP),rP=MC("fetch"),Vp=MC("Request"),ol=MC("Headers"),FC=Vp&&Vp.prototype,iP=ol&&ol.prototype,N$=Qp.RegExp,O$=Qp.TypeError,oP=Qp.decodeURIComponent,D$=Qp.encodeURIComponent,k$=Io("".charAt),sP=Io([].join),Ja=Io([].push),jC=Io("".replace),P$=Io([].shift),aP=Io([].splice),cP=Io("".split),L$=Io("".slice),B$=/\+/g,uP=Array(4),M$=function(t){return uP[t-1]||(uP[t-1]=N$("((?:%[\\da-f]{2}){"+t+"})","gi"))},U$=function(t){try{return oP(t)}catch{return t}},dP=function(t){var e=jC(t,B$," "),n=4;try{return oP(e)}catch{for(;n;)e=jC(e,M$(n--),U$);return e}},x$=/[!'()~]|%20/g,Q$={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F$=function(t){return Q$[t]},lP=function(t){return jC(D$(t),x$,F$)},VC=I$(function(t,e){nP(this,{type:eP,iterator:QC(Xi(t).entries),kind:e})},"Iterator",function(){var t=b$(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value=e==="keys"?r.key:e==="values"?r.value:[r.key,r.value]),n},!0),AP=function(t){this.entries=[],this.url=null,t!==void 0&&($k(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?k$(t,0)==="?"?L$(t,1):t:fi(t)))};AP.prototype={type:jp,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,i,u,s,d,a=T$(t);if(a)for(n=(e=QC(t,a)).next;!(r=Fp(n,e)).done;){if(u=(i=QC(S$(r.value))).next,(s=Fp(u,i)).done||(d=Fp(u,i)).done||!Fp(u,i).done)throw O$("Expected sequence with length 2");Ja(this.entries,{key:fi(s.value),value:fi(d.value)})}else for(var l in t)C$(t,l)&&Ja(this.entries,{key:l,value:fi(t[l])})},parseQuery:function(t){if(t)for(var e,n,r=cP(t,"&"),i=0;i<r.length;)(e=r[i++]).length&&(n=cP(e,"="),Ja(this.entries,{key:dP(P$(n)),value:dP(sP(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],Ja(n,lP(t.key)+"="+lP(t.value));return sP(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Gp=function(){Zk(this,sl);var t=arguments.length>0?arguments[0]:void 0;nP(this,new AP(t))},sl=Gp.prototype;if(E$(sl,{append:function(t,e){fu(arguments.length,2);var n=Xi(this);Ja(n.entries,{key:fi(t),value:fi(e)}),n.updateURL()},delete:function(t){fu(arguments.length,1);for(var e=Xi(this),n=e.entries,r=fi(t),i=0;i<n.length;)n[i].key===r?aP(n,i,1):i++;e.updateURL()},get:function(t){fu(arguments.length,1);for(var e=Xi(this).entries,n=fi(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){fu(arguments.length,1);for(var e=Xi(this).entries,n=fi(t),r=[],i=0;i<e.length;i++)e[i].key===n&&Ja(r,e[i].value);return r},has:function(t){fu(arguments.length,1);for(var e=Xi(this).entries,n=fi(t),r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){fu(arguments.length,1);for(var n,r=Xi(this),i=r.entries,u=!1,s=fi(t),d=fi(e),a=0;a<i.length;a++)(n=i[a]).key===s&&(u?aP(i,a--,1):(u=!0,n.value=d));u||Ja(i,{key:s,value:d}),r.updateURL()},sort:function(){var t=Xi(this);R$(t.entries,function(e,n){return e.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var e,n=Xi(this).entries,r=_$(t,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new VC(this,"keys")},values:function(){return new VC(this,"values")},entries:function(){return new VC(this,"entries")}},{enumerable:!0}),Xk(sl,w$,sl.entries,{name:"entries"}),Xk(sl,"toString",function(){return Xi(this).serialize()},{enumerable:!0}),m$(Gp,jp),BC({global:!0,forced:!zk},{URLSearchParams:Gp}),!zk&&xC(ol)){var j$=Io(iP.has),V$=Io(iP.set),hP=function(t){if($k(t)){var e,n=t.body;if(v$(n)===jp)return e=t.headers?new ol(t.headers):new ol,j$(e,"content-type")||V$(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),y$(t,{body:tP(0,fi(n)),headers:tP(0,e)})}return t};if(xC(rP)&&BC({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return rP(t,arguments.length>1?hP(arguments[1]):{})}}),xC(Vp)){var GC=function(t){return Zk(this,FC),new Vp(t,arguments.length>1?hP(arguments[1]):{})};FC.constructor=GC,GC.prototype=FC,BC({global:!0,forced:!0},{Request:GC})}}var Ni,G$={URLSearchParams:Gp,getState:Xi},K$=xn,KC=yi,H$=Qk,HC=se,pP=Is,Oi=Ve,Y$=lh.f,Kp=Pc,W$=Jm,YC=$n,WC=XZ,gu=function(t){var e=n$(t),n=o$(this),r=arguments.length,i=r>1?arguments[1]:void 0,u=i!==void 0;u&&(i=t$(i,r>2?arguments[2]:void 0));var s,d,a,l,A,p,f=c$(e),E=0;if(!f||this==Gk&&i$(f))for(s=s$(e),d=n?new this(s):Gk(s);s>E;E++)p=u?i(e[E],E):e[E],Vk(d,E,p);else for(A=(l=a$(e,f)).next,d=n?new this:[];!(a=e$(A,l)).done;E++)p=u?r$(l,i,[a.value,E],!0):a.value,Vk(d,E,p);return d.length=E,d},Zi=mI,J$=dw.codeAt,q$=function(t){var e,n,r=[],i=A$(l$(h$(t),Kk,"."),".");for(e=0;e<i.length;e++)n=i[e],Bs(r,d$(u$,n)?"xn--"+f$(n):n);return Jk(r,".")},Yo=_s,z$=Ra,fP=G$,gP=kc,X$=gP.set,Hp=gP.getterFor("URL"),Z$=fP.URLSearchParams,$$=fP.getState,al=HC.URL,JC=HC.TypeError,Yp=HC.parseInt,ttt=Math.floor,EP=Math.pow,Di=Oi("".charAt),$i=Oi(/./.exec),cl=Oi([].join),ett=Oi(1 .toString),ntt=Oi([].pop),Eu=Oi([].push),mP=Oi("".replace),rtt=Oi([].shift),itt=Oi("".split),ul=Oi("".slice),Wp=Oi("".toLowerCase),ott=Oi([].unshift),qC="Invalid scheme",qa="Invalid host",IP="Invalid port",CP=/[a-z]/i,stt=/[\d+-.a-z]/i,zC=/\d/,att=/^0x/i,ctt=/^[0-7]+$/,utt=/^\d+$/,_P=/^[\da-f]+$/i,dtt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ltt=/[\0\t\n\r #/:<>?@[\\\]^|]/,Att=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,htt=/[\t\n\r]/g,dl=function(t){var e,n,r,i;if(typeof t=="number"){for(e=[],n=0;n<4;n++)ott(e,t%256),t=ttt(t/256);return cl(e,".")}if(typeof t=="object"){for(e="",r=function(u){for(var s=null,d=1,a=null,l=0,A=0;A<8;A++)u[A]!==0?(l>d&&(s=a,d=l),a=null,l=0):(a===null&&(a=A),++l);return l>d&&(s=a,d=l),s}(t),n=0;n<8;n++)i&&t[n]===0||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=ett(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},Jp={},vP=WC({},Jp,{" ":1,'"':1,"<":1,">":1,"`":1}),SP=WC({},vP,{"#":1,"?":1,"{":1,"}":1}),XC=WC({},SP,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ms=function(t,e){var n=J$(t,0);return n>32&&n<127&&!YC(e,t)?t:encodeURIComponent(t)},qp={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ll=function(t,e){var n;return t.length==2&&$i(CP,Di(t,0))&&((n=Di(t,1))==":"||!e&&n=="|")},yP=function(t){var e;return t.length>1&&ll(ul(t,0,2))&&(t.length==2||(e=Di(t,2))==="/"||e==="\\"||e==="?"||e==="#")},ptt=function(t){return t==="."||Wp(t)==="%2e"},ZC={},TP={},$C={},RP={},wP={},t_={},bP={},NP={},zp={},Xp={},e_={},n_={},r_={},i_={},OP={},o_={},mu={},Co={},DP={},za={},Wo={},s_=function(t,e,n){var r,i,u,s=Yo(t);if(e){if(i=this.parse(s))throw JC(i);this.searchParams=null}else{if(n!==void 0&&(r=new s_(n,!0)),i=this.parse(s,null,r))throw JC(i);(u=$$(new Z$)).bindURL(this),this.searchParams=u}};s_.prototype={type:"URL",parse:function(t,e,n){var r,i,u,s,d,a=this,l=e||ZC,A=0,p="",f=!1,E=!1,C=!1;for(t=Yo(t),e||(a.scheme="",a.username="",a.password="",a.host=null,a.port=null,a.path=[],a.query=null,a.fragment=null,a.cannotBeABaseURL=!1,t=mP(t,Att,"")),t=mP(t,htt,""),r=gu(t);A<=r.length;){switch(i=r[A],l){case ZC:if(!i||!$i(CP,i)){if(e)return qC;l=$C;continue}p+=Wp(i),l=TP;break;case TP:if(i&&($i(stt,i)||i=="+"||i=="-"||i=="."))p+=Wp(i);else{if(i!=":"){if(e)return qC;p="",l=$C,A=0;continue}if(e&&(a.isSpecial()!=YC(qp,p)||p=="file"&&(a.includesCredentials()||a.port!==null)||a.scheme=="file"&&!a.host))return;if(a.scheme=p,e)return void(a.isSpecial()&&qp[a.scheme]==a.port&&(a.port=null));p="",a.scheme=="file"?l=i_:a.isSpecial()&&n&&n.scheme==a.scheme?l=RP:a.isSpecial()?l=NP:r[A+1]=="/"?(l=wP,A++):(a.cannotBeABaseURL=!0,Eu(a.path,""),l=DP)}break;case $C:if(!n||n.cannotBeABaseURL&&i!="#")return qC;if(n.cannotBeABaseURL&&i=="#"){a.scheme=n.scheme,a.path=Zi(n.path),a.query=n.query,a.fragment="",a.cannotBeABaseURL=!0,l=Wo;break}l=n.scheme=="file"?i_:t_;continue;case RP:if(i!="/"||r[A+1]!="/"){l=t_;continue}l=zp,A++;break;case wP:if(i=="/"){l=Xp;break}l=Co;continue;case t_:if(a.scheme=n.scheme,i==Ni)a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=Zi(n.path),a.query=n.query;else if(i=="/"||i=="\\"&&a.isSpecial())l=bP;else if(i=="?")a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=Zi(n.path),a.query="",l=za;else{if(i!="#"){a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=Zi(n.path),a.path.length--,l=Co;continue}a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=Zi(n.path),a.query=n.query,a.fragment="",l=Wo}break;case bP:if(!a.isSpecial()||i!="/"&&i!="\\"){if(i!="/"){a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,l=Co;continue}l=Xp}else l=zp;break;case NP:if(l=zp,i!="/"||Di(p,A+1)!="/")continue;A++;break;case zp:if(i!="/"&&i!="\\"){l=Xp;continue}break;case Xp:if(i=="@"){f&&(p="%40"+p),f=!0,u=gu(p);for(var _=0;_<u.length;_++){var y=u[_];if(y!=":"||C){var R=Ms(y,XC);C?a.password+=R:a.username+=R}else C=!0}p=""}else if(i==Ni||i=="/"||i=="?"||i=="#"||i=="\\"&&a.isSpecial()){if(f&&p=="")return"Invalid authority";A-=gu(p).length+1,p="",l=e_}else p+=i;break;case e_:case n_:if(e&&a.scheme=="file"){l=o_;continue}if(i!=":"||E){if(i==Ni||i=="/"||i=="?"||i=="#"||i=="\\"&&a.isSpecial()){if(a.isSpecial()&&p=="")return qa;if(e&&p==""&&(a.includesCredentials()||a.port!==null))return;if(s=a.parseHost(p))return s;if(p="",l=mu,e)return;continue}i=="["?E=!0:i=="]"&&(E=!1),p+=i}else{if(p=="")return qa;if(s=a.parseHost(p))return s;if(p="",l=r_,e==n_)return}break;case r_:if(!$i(zC,i)){if(i==Ni||i=="/"||i=="?"||i=="#"||i=="\\"&&a.isSpecial()||e){if(p!=""){var O=Yp(p,10);if(O>65535)return IP;a.port=a.isSpecial()&&O===qp[a.scheme]?null:O,p=""}if(e)return;l=mu;continue}return IP}p+=i;break;case i_:if(a.scheme="file",i=="/"||i=="\\")l=OP;else{if(!n||n.scheme!="file"){l=Co;continue}if(i==Ni)a.host=n.host,a.path=Zi(n.path),a.query=n.query;else if(i=="?")a.host=n.host,a.path=Zi(n.path),a.query="",l=za;else{if(i!="#"){yP(cl(Zi(r,A),""))||(a.host=n.host,a.path=Zi(n.path),a.shortenPath()),l=Co;continue}a.host=n.host,a.path=Zi(n.path),a.query=n.query,a.fragment="",l=Wo}}break;case OP:if(i=="/"||i=="\\"){l=o_;break}n&&n.scheme=="file"&&!yP(cl(Zi(r,A),""))&&(ll(n.path[0],!0)?Eu(a.path,n.path[0]):a.host=n.host),l=Co;continue;case o_:if(i==Ni||i=="/"||i=="\\"||i=="?"||i=="#"){if(!e&&ll(p))l=Co;else if(p==""){if(a.host="",e)return;l=mu}else{if(s=a.parseHost(p))return s;if(a.host=="localhost"&&(a.host=""),e)return;p="",l=mu}continue}p+=i;break;case mu:if(a.isSpecial()){if(l=Co,i!="/"&&i!="\\")continue}else if(e||i!="?")if(e||i!="#"){if(i!=Ni&&(l=Co,i!="/"))continue}else a.fragment="",l=Wo;else a.query="",l=za;break;case Co:if(i==Ni||i=="/"||i=="\\"&&a.isSpecial()||!e&&(i=="?"||i=="#")){if((d=Wp(d=p))===".."||d==="%2e."||d===".%2e"||d==="%2e%2e"?(a.shortenPath(),i=="/"||i=="\\"&&a.isSpecial()||Eu(a.path,"")):ptt(p)?i=="/"||i=="\\"&&a.isSpecial()||Eu(a.path,""):(a.scheme=="file"&&!a.path.length&&ll(p)&&(a.host&&(a.host=""),p=Di(p,0)+":"),Eu(a.path,p)),p="",a.scheme=="file"&&(i==Ni||i=="?"||i=="#"))for(;a.path.length>1&&a.path[0]==="";)rtt(a.path);i=="?"?(a.query="",l=za):i=="#"&&(a.fragment="",l=Wo)}else p+=Ms(i,SP);break;case DP:i=="?"?(a.query="",l=za):i=="#"?(a.fragment="",l=Wo):i!=Ni&&(a.path[0]+=Ms(i,Jp));break;case za:e||i!="#"?i!=Ni&&(i=="'"&&a.isSpecial()?a.query+="%27":a.query+=i=="#"?"%23":Ms(i,Jp)):(a.fragment="",l=Wo);break;case Wo:i!=Ni&&(a.fragment+=Ms(i,vP))}A++}},parseHost:function(t){var e,n,r;if(Di(t,0)=="["){if(Di(t,t.length-1)!="]"||!(e=function(i){var u,s,d,a,l,A,p,f=[0,0,0,0,0,0,0,0],E=0,C=null,_=0,y=function(){return Di(i,_)};if(y()==":"){if(Di(i,1)!=":")return;_+=2,C=++E}for(;y();){if(E==8)return;if(y()!=":"){for(u=s=0;s<4&&$i(_P,y());)u=16*u+Yp(y(),16),_++,s++;if(y()=="."){if(s==0||(_-=s,E>6))return;for(d=0;y();){if(a=null,d>0){if(!(y()=="."&&d<4))return;_++}if(!$i(zC,y()))return;for(;$i(zC,y());){if(l=Yp(y(),10),a===null)a=l;else{if(a==0)return;a=10*a+l}if(a>255)return;_++}f[E]=256*f[E]+a,++d!=2&&d!=4||E++}if(d!=4)return;break}if(y()==":"){if(_++,!y())return}else if(y())return;f[E++]=u}else{if(C!==null)return;_++,C=++E}}if(C!==null)for(A=E-C,E=7;E!=0&&A>0;)p=f[E],f[E--]=f[C+A-1],f[C+--A]=p;else if(E!=8)return;return f}(ul(t,1,-1))))return qa;this.host=e}else if(this.isSpecial()){if(t=q$(t),$i(dtt,t)||(e=function(i){var u,s,d,a,l,A,p,f=itt(i,".");if(f.length&&f[f.length-1]==""&&f.length--,(u=f.length)>4)return i;for(s=[],d=0;d<u;d++){if((a=f[d])=="")return i;if(l=10,a.length>1&&Di(a,0)=="0"&&(l=$i(att,a)?16:8,a=ul(a,l==8?1:2)),a==="")A=0;else{if(!$i(l==10?utt:l==8?ctt:_P,a))return i;A=Yp(a,l)}Eu(s,A)}for(d=0;d<u;d++)if(A=s[d],d==u-1){if(A>=EP(256,5-u))return null}else if(A>255)return null;for(p=ntt(s),d=0;d<s.length;d++)p+=s[d]*EP(256,3-d);return p}(t))===null)return qa;this.host=e}else{if($i(ltt,t))return qa;for(e="",n=gu(t),r=0;r<n.length;r++)e+=Ms(n[r],Jp);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return YC(qp,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||this.scheme=="file"&&e==1&&ll(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,i=t.host,u=t.port,s=t.path,d=t.query,a=t.fragment,l=e+":";return i!==null?(l+="//",t.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=dl(i),u!==null&&(l+=":"+u)):e=="file"&&(l+="//"),l+=t.cannotBeABaseURL?s[0]:s.length?"/"+cl(s,"/"):"",d!==null&&(l+="?"+d),a!==null&&(l+="#"+a),l},setHref:function(t){var e=this.parse(t);if(e)throw JC(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if(t=="blob")try{return new Iu(t.path[0]).origin}catch{return"null"}return t!="file"&&this.isSpecial()?t+"://"+dl(this.host)+(e!==null?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Yo(t)+":",ZC)},getUsername:function(){return this.username},setUsername:function(t){var e=gu(Yo(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=Ms(e[n],XC)}},getPassword:function(){return this.password},setPassword:function(t){var e=gu(Yo(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=Ms(e[n],XC)}},getHost:function(){var t=this.host,e=this.port;return t===null?"":e===null?dl(t):dl(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,e_)},getHostname:function(){var t=this.host;return t===null?"":dl(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,n_)},getPort:function(){var t=this.port;return t===null?"":Yo(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||((t=Yo(t))==""?this.port=null:this.parse(t,r_))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+cl(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,mu))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){(t=Yo(t))==""?this.query=null:(Di(t,0)=="?"&&(t=ul(t,1)),this.query="",this.parse(t,za)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){(t=Yo(t))!=""?(Di(t,0)=="#"&&(t=ul(t,1)),this.fragment="",this.parse(t,Wo)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Iu=function(t){var e=W$(this,Zp),n=arguments.length>1?arguments[1]:void 0,r=X$(e,new s_(t,!1,n));KC||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},Zp=Iu.prototype,ki=function(t,e){return{get:function(){return Hp(this)[t]()},set:e&&function(n){return Hp(this)[e](n)},configurable:!0,enumerable:!0}};if(KC&&Y$(Zp,{href:ki("serialize","setHref"),origin:ki("getOrigin"),protocol:ki("getProtocol","setProtocol"),username:ki("getUsername","setUsername"),password:ki("getPassword","setPassword"),host:ki("getHost","setHost"),hostname:ki("getHostname","setHostname"),port:ki("getPort","setPort"),pathname:ki("getPathname","setPathname"),search:ki("getSearch","setSearch"),searchParams:ki("getSearchParams"),hash:ki("getHash","setHash")}),Kp(Zp,"toJSON",function(){return Hp(this).serialize()},{enumerable:!0}),Kp(Zp,"toString",function(){return Hp(this).serialize()},{enumerable:!0}),al){var kP=al.createObjectURL,PP=al.revokeObjectURL;kP&&Kp(Iu,"createObjectURL",pP(kP,al)),PP&&Kp(Iu,"revokeObjectURL",pP(PP,al))}z$(Iu,"URL"),K$({global:!0,forced:!H$,sham:!KC},{URL:Iu});var LP=Oo.URL;const ftt={[$c.ACCESS_POINT]:{[Dn.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Dn.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Dn.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Dn.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Dn.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Dn.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Dn.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[$c.UNILBS]:{[Mr.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Mr.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Mr.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Mr.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Mr.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Mr.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Mr.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Mr.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Mr.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Mr.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Mr.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Mr.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[$c.STRING_UID_ALLOCATOR]:{[qd.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[qd.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[qd.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function Al(t){const e=ftt[Math.floor(t/1e4)];if(!e)return{desc:"unkonw error",retry:!1};const n=e[t%1e4];if(!n){if(Math.floor(t/1e4)===$c.ACCESS_POINT){const r=t%1e4;if(r.toString()[0]==="1")return{desc:t.toString(),retry:!1};if(r.toString()[0]==="2")return{desc:t.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}const gtt={[jt.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[jt.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[jt.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[jt.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[jt.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[jt.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[jt.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[jt.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[jt.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[jt.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[jt.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[jt.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[jt.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[jt.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[jt.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[jt.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[jt.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[jt.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[jt.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[jt.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[jt.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[jt.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[jt.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[jt.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[jt.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[jt.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[jt.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[jt.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[jt.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[jt.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[jt.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[jt.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[jt.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[jt.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[jt.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[jt.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[jt.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[jt.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[jt.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[jt.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[jt.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[jt.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[jt.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[jt.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[jt.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[jt.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[jt.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[jt.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[jt.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[jt.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[jt.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[jt.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[jt.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[jt.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[jt.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[jt.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[jt.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[jt.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function a_(t){return gtt[t]||{desc:"UNKNOW_ERROR_".concat(t),action:"failed"}}var BP={exports:{}};(function(t,e){t.exports=function(){var n={d:function(K,N){for(var Q in N)n.o(N,Q)&&!n.o(K,Q)&&Object.defineProperty(K,Q,{enumerable:!0,get:N[Q]})},o:function(K,N){return Object.prototype.hasOwnProperty.call(K,N)},r:function(K){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})}},r={};n.r(r),n.d(r,{DataViewIndexOutOfBoundsError:function(){return X},DecodeError:function(){return L},Decoder:function(){return Gt},EXT_TIMESTAMP:function(){return G},Encoder:function(){return Y},ExtData:function(){return O},ExtensionCodec:function(){return J},decode:function(){return Ie},decodeArrayStream:function(){return Je},decodeAsync:function(){return br},decodeMulti:function(){return Bn},decodeMultiStream:function(){return $o},decodeStream:function(){return K_},decodeTimestampExtension:function(){return ht},decodeTimestampToTimeSpec:function(){return St},encode:function(){return x},encodeDateToTimeSpec:function(){return nt},encodeTimeSpecToTimestamp:function(){return Z},encodeTimestampExtension:function(){return it}});var i=4294967295;function u(K,N,Q){var z=Math.floor(Q/4294967296),H=Q;K.setUint32(N,z),K.setUint32(N+4,H)}function s(K,N){return 4294967296*K.getInt32(N)+K.getUint32(N+4)}var d=function(K,N){var Q=typeof Symbol=="function"&&K[Symbol.iterator];if(!Q)return K;var z,H,lt=Q.call(K),ut=[];try{for(;(N===void 0||N-- >0)&&!(z=lt.next()).done;)ut.push(z.value)}catch(Tt){H={error:Tt}}finally{try{z&&!z.done&&(Q=lt.return)&&Q.call(lt)}finally{if(H)throw H.error}}return ut},a=function(K,N){for(var Q=0,z=N.length,H=K.length;Q<z;Q++,H++)K[H]=N[Q];return K},l=typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined";function A(K){for(var N=K.length,Q=0,z=0;z<N;){var H=K.charCodeAt(z++);if((4294967168&H)!=0)if((4294965248&H)==0)Q+=2;else{if(H>=55296&&H<=56319&&z<N){var lt=K.charCodeAt(z);(64512&lt)==56320&&(++z,H=((1023&H)<<10)+(1023&lt)+65536)}Q+=(4294901760&H)==0?3:4}else Q++}return Q}var p=l?new TextEncoder:void 0,f=l?typeof process!="undefined"?200:0:i,E=p!=null&&p.encodeInto?function(K,N,Q){p.encodeInto(K,N.subarray(Q))}:function(K,N,Q){N.set(p.encode(K),Q)};function C(K,N,Q){for(var z=N,H=z+Q,lt=[],ut="";z<H;){var Tt=K[z++];if((128&Tt)==0)lt.push(Tt);else if((224&Tt)==192){var Wt=63&K[z++];lt.push((31&Tt)<<6|Wt)}else if((240&Tt)==224){Wt=63&K[z++];var Xt=63&K[z++];lt.push((31&Tt)<<12|Wt<<6|Xt)}else if((248&Tt)==240){var Et=(7&Tt)<<18|(Wt=63&K[z++])<<12|(Xt=63&K[z++])<<6|63&K[z++];Et>65535&&(Et-=65536,lt.push(Et>>>10&1023|55296),Et=56320|1023&Et),lt.push(Et)}else lt.push(Tt);lt.length>=4096&&(ut+=String.fromCharCode.apply(String,a([],d(lt))),lt.length=0)}return lt.length>0&&(ut+=String.fromCharCode.apply(String,a([],d(lt)))),ut}var _,y=l?new TextDecoder:null,R=l?typeof process!="undefined"?200:0:i,O=function(K,N){this.type=K,this.data=N},D=(_=function(K,N){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,z){Q.__proto__=z}||function(Q,z){for(var H in z)Object.prototype.hasOwnProperty.call(z,H)&&(Q[H]=z[H])})(K,N)},function(K,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function Q(){this.constructor=K}_(K,N),K.prototype=N===null?Object.create(N):(Q.prototype=N.prototype,new Q)}),L=function(K){function N(Q){var z=K.call(this,Q)||this,H=Object.create(N.prototype);return Object.setPrototypeOf(z,H),Object.defineProperty(z,"name",{configurable:!0,enumerable:!1,value:N.name}),z}return D(N,K),N}(Error),G=-1;function Z(K){var N,Q=K.sec,z=K.nsec;if(Q>=0&&z>=0&&Q<=17179869183){if(z===0&&Q<=4294967295){var H=new Uint8Array(4);return(N=new DataView(H.buffer)).setUint32(0,Q),H}var lt=Q/4294967296,ut=4294967295&Q;return H=new Uint8Array(8),(N=new DataView(H.buffer)).setUint32(0,z<<2|3&lt),N.setUint32(4,ut),H}return H=new Uint8Array(12),(N=new DataView(H.buffer)).setUint32(0,z),u(N,4,Q),H}function nt(K){var N=K.getTime(),Q=Math.floor(N/1e3),z=1e6*(N-1e3*Q),H=Math.floor(z/1e9);return{sec:Q+H,nsec:z-1e9*H}}function it(K){return K instanceof Date?Z(nt(K)):null}function St(K){var N=new DataView(K.buffer,K.byteOffset,K.byteLength);switch(K.byteLength){case 4:return{sec:N.getUint32(0),nsec:0};case 8:var Q=N.getUint32(0);return{sec:4294967296*(3&Q)+N.getUint32(4),nsec:Q>>>2};case 12:return{sec:s(N,4),nsec:N.getUint32(0)};default:throw new L("Unrecognized data size for timestamp (expected 4, 8, or 12): "+K.length)}}function ht(K){var N=St(K);return new Date(1e3*N.sec+N.nsec/1e6)}var It={type:G,encode:it,decode:ht},J=function(){function K(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(It)}return K.prototype.register=function(N){var Q=N.type,z=N.encode,H=N.decode;if(Q>=0)this.encoders[Q]=z,this.decoders[Q]=H;else{var lt=1+Q;this.builtInEncoders[lt]=z,this.builtInDecoders[lt]=H}},K.prototype.tryToEncode=function(N,Q){for(var z=0;z<this.builtInEncoders.length;z++)if((H=this.builtInEncoders[z])!=null&&(lt=H(N,Q))!=null)return new O(-1-z,lt);for(z=0;z<this.encoders.length;z++){var H,lt;if((H=this.encoders[z])!=null&&(lt=H(N,Q))!=null)return new O(z,lt)}return N instanceof O?N:null},K.prototype.decode=function(N,Q,z){var H=Q<0?this.builtInDecoders[-1-Q]:this.decoders[Q];return H?H(N,Q,z):new O(Q,N)},K.defaultCodec=new K,K}();function U(K){return K instanceof Uint8Array?K:ArrayBuffer.isView(K)?new Uint8Array(K.buffer,K.byteOffset,K.byteLength):K instanceof ArrayBuffer?new Uint8Array(K):Uint8Array.from(K)}var j=function(K){var N=typeof Symbol=="function"&&Symbol.iterator,Q=N&&K[N],z=0;if(Q)return Q.call(K);if(K&&typeof K.length=="number")return{next:function(){return K&&z>=K.length&&(K=void 0),{value:K&&K[z++],done:!K}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(){function K(N,Q,z,H,lt,ut,Tt,Wt){N===void 0&&(N=J.defaultCodec),Q===void 0&&(Q=void 0),z===void 0&&(z=100),H===void 0&&(H=2048),lt===void 0&&(lt=!1),ut===void 0&&(ut=!1),Tt===void 0&&(Tt=!1),Wt===void 0&&(Wt=!1),this.extensionCodec=N,this.context=Q,this.maxDepth=z,this.initialBufferSize=H,this.sortKeys=lt,this.forceFloat32=ut,this.ignoreUndefined=Tt,this.forceIntegerToFloat=Wt,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return K.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},K.prototype.reinitializeState=function(){this.pos=0},K.prototype.encode=function(N){return this.reinitializeState(),this.doEncode(N,1),this.getUint8Array()},K.prototype.doEncode=function(N,Q){if(Q>this.maxDepth)throw new Error("Too deep objects in depth "+Q);N==null?this.encodeNil():typeof N=="boolean"?this.encodeBoolean(N):typeof N=="number"?this.encodeNumber(N):typeof N=="string"?this.encodeString(N):this.encodeObject(N,Q)},K.prototype.ensureBufferSizeToWrite=function(N){var Q=this.pos+N;this.view.byteLength<Q&&this.resizeBuffer(2*Q)},K.prototype.resizeBuffer=function(N){var Q=new ArrayBuffer(N),z=new Uint8Array(Q),H=new DataView(Q);z.set(this.bytes),this.view=H,this.bytes=z},K.prototype.encodeNil=function(){this.writeU8(192)},K.prototype.encodeBoolean=function(N){N===!1?this.writeU8(194):this.writeU8(195)},K.prototype.encodeNumber=function(N){Number.isSafeInteger(N)&&!this.forceIntegerToFloat?N>=0?N<128?this.writeU8(N):N<256?(this.writeU8(204),this.writeU8(N)):N<65536?(this.writeU8(205),this.writeU16(N)):N<4294967296?(this.writeU8(206),this.writeU32(N)):(this.writeU8(207),this.writeU64(N)):N>=-32?this.writeU8(224|N+32):N>=-128?(this.writeU8(208),this.writeI8(N)):N>=-32768?(this.writeU8(209),this.writeI16(N)):N>=-2147483648?(this.writeU8(210),this.writeI32(N)):(this.writeU8(211),this.writeI64(N)):this.forceFloat32?(this.writeU8(202),this.writeF32(N)):(this.writeU8(203),this.writeF64(N))},K.prototype.writeStringHeader=function(N){if(N<32)this.writeU8(160+N);else if(N<256)this.writeU8(217),this.writeU8(N);else if(N<65536)this.writeU8(218),this.writeU16(N);else{if(!(N<4294967296))throw new Error("Too long string: "+N+" bytes in UTF-8");this.writeU8(219),this.writeU32(N)}},K.prototype.encodeString=function(N){if(N.length>f){var Q=A(N);this.ensureBufferSizeToWrite(5+Q),this.writeStringHeader(Q),E(N,this.bytes,this.pos),this.pos+=Q}else Q=A(N),this.ensureBufferSizeToWrite(5+Q),this.writeStringHeader(Q),function(z,H,lt){for(var ut=z.length,Tt=lt,Wt=0;Wt<ut;){var Xt=z.charCodeAt(Wt++);if((4294967168&Xt)!=0){if((4294965248&Xt)==0)H[Tt++]=Xt>>6&31|192;else{if(Xt>=55296&&Xt<=56319&&Wt<ut){var Et=z.charCodeAt(Wt);(64512&Et)==56320&&(++Wt,Xt=((1023&Xt)<<10)+(1023&Et)+65536)}(4294901760&Xt)==0?(H[Tt++]=Xt>>12&15|224,H[Tt++]=Xt>>6&63|128):(H[Tt++]=Xt>>18&7|240,H[Tt++]=Xt>>12&63|128,H[Tt++]=Xt>>6&63|128)}H[Tt++]=63&Xt|128}else H[Tt++]=Xt}}(N,this.bytes,this.pos),this.pos+=Q},K.prototype.encodeObject=function(N,Q){var z=this.extensionCodec.tryToEncode(N,this.context);if(z!=null)this.encodeExtension(z);else if(Array.isArray(N))this.encodeArray(N,Q);else if(ArrayBuffer.isView(N))this.encodeBinary(N);else{if(typeof N!="object")throw new Error("Unrecognized object: "+Object.prototype.toString.apply(N));this.encodeMap(N,Q)}},K.prototype.encodeBinary=function(N){var Q=N.byteLength;if(Q<256)this.writeU8(196),this.writeU8(Q);else if(Q<65536)this.writeU8(197),this.writeU16(Q);else{if(!(Q<4294967296))throw new Error("Too large binary: "+Q);this.writeU8(198),this.writeU32(Q)}var z=U(N);this.writeU8a(z)},K.prototype.encodeArray=function(N,Q){var z,H,lt=N.length;if(lt<16)this.writeU8(144+lt);else if(lt<65536)this.writeU8(220),this.writeU16(lt);else{if(!(lt<4294967296))throw new Error("Too large array: "+lt);this.writeU8(221),this.writeU32(lt)}try{for(var ut=j(N),Tt=ut.next();!Tt.done;Tt=ut.next()){var Wt=Tt.value;this.doEncode(Wt,Q+1)}}catch(Xt){z={error:Xt}}finally{try{Tt&&!Tt.done&&(H=ut.return)&&H.call(ut)}finally{if(z)throw z.error}}},K.prototype.countWithoutUndefined=function(N,Q){var z,H,lt=0;try{for(var ut=j(Q),Tt=ut.next();!Tt.done;Tt=ut.next())N[Tt.value]!==void 0&&lt++}catch(Wt){z={error:Wt}}finally{try{Tt&&!Tt.done&&(H=ut.return)&&H.call(ut)}finally{if(z)throw z.error}}return lt},K.prototype.encodeMap=function(N,Q){var z,H,lt=Object.keys(N);this.sortKeys&&lt.sort();var ut=this.ignoreUndefined?this.countWithoutUndefined(N,lt):lt.length;if(ut<16)this.writeU8(128+ut);else if(ut<65536)this.writeU8(222),this.writeU16(ut);else{if(!(ut<4294967296))throw new Error("Too large map object: "+ut);this.writeU8(223),this.writeU32(ut)}try{for(var Tt=j(lt),Wt=Tt.next();!Wt.done;Wt=Tt.next()){var Xt=Wt.value,Et=N[Xt];this.ignoreUndefined&&Et===void 0||(this.encodeString(Xt),this.doEncode(Et,Q+1))}}catch(Ot){z={error:Ot}}finally{try{Wt&&!Wt.done&&(H=Tt.return)&&H.call(Tt)}finally{if(z)throw z.error}}},K.prototype.encodeExtension=function(N){var Q=N.data.length;if(Q===1)this.writeU8(212);else if(Q===2)this.writeU8(213);else if(Q===4)this.writeU8(214);else if(Q===8)this.writeU8(215);else if(Q===16)this.writeU8(216);else if(Q<256)this.writeU8(199),this.writeU8(Q);else if(Q<65536)this.writeU8(200),this.writeU16(Q);else{if(!(Q<4294967296))throw new Error("Too large extension object: "+Q);this.writeU8(201),this.writeU32(Q)}this.writeI8(N.type),this.writeU8a(N.data)},K.prototype.writeU8=function(N){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,N),this.pos++},K.prototype.writeU8a=function(N){var Q=N.length;this.ensureBufferSizeToWrite(Q),this.bytes.set(N,this.pos),this.pos+=Q},K.prototype.writeI8=function(N){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,N),this.pos++},K.prototype.writeU16=function(N){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,N),this.pos+=2},K.prototype.writeI16=function(N){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,N),this.pos+=2},K.prototype.writeU32=function(N){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,N),this.pos+=4},K.prototype.writeI32=function(N){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,N),this.pos+=4},K.prototype.writeF32=function(N){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,N),this.pos+=4},K.prototype.writeF64=function(N){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,N),this.pos+=8},K.prototype.writeU64=function(N){this.ensureBufferSizeToWrite(8),function(Q,z,H){var lt=H/4294967296,ut=H;Q.setUint32(z,lt),Q.setUint32(z+4,ut)}(this.view,this.pos,N),this.pos+=8},K.prototype.writeI64=function(N){this.ensureBufferSizeToWrite(8),u(this.view,this.pos,N),this.pos+=8},K}(),ft={};function x(K,N){return N===void 0&&(N=ft),new Y(N.extensionCodec,N.context,N.maxDepth,N.initialBufferSize,N.sortKeys,N.forceFloat32,N.ignoreUndefined,N.forceIntegerToFloat).encode(K)}function V(K){return(K<0?"-":"")+"0x"+Math.abs(K).toString(16).padStart(2,"0")}var q=function(){function K(N,Q){N===void 0&&(N=16),Q===void 0&&(Q=16),this.maxKeyLength=N,this.maxLengthPerKey=Q,this.hit=0,this.miss=0,this.caches=[];for(var z=0;z<this.maxKeyLength;z++)this.caches.push([])}return K.prototype.canBeCached=function(N){return N>0&&N<=this.maxKeyLength},K.prototype.find=function(N,Q,z){var H,lt,ut=this.caches[z-1];try{t:for(var Tt=function(Kt){var ce=typeof Symbol=="function"&&Symbol.iterator,xe=ce&&Kt[ce],Gn=0;if(xe)return xe.call(Kt);if(Kt&&typeof Kt.length=="number")return{next:function(){return Kt&&Gn>=Kt.length&&(Kt=void 0),{value:Kt&&Kt[Gn++],done:!Kt}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ut),Wt=Tt.next();!Wt.done;Wt=Tt.next()){for(var Xt=Wt.value,Et=Xt.bytes,Ot=0;Ot<z;Ot++)if(Et[Ot]!==N[Q+Ot])continue t;return Xt.str}}catch(Kt){H={error:Kt}}finally{try{Wt&&!Wt.done&&(lt=Tt.return)&&lt.call(Tt)}finally{if(H)throw H.error}}return null},K.prototype.store=function(N,Q){var z=this.caches[N.length-1],H={bytes:N,str:Q};z.length>=this.maxLengthPerKey?z[Math.random()*z.length|0]=H:z.push(H)},K.prototype.decode=function(N,Q,z){var H=this.find(N,Q,z);if(H!=null)return this.hit++,H;this.miss++;var lt=C(N,Q,z),ut=Uint8Array.prototype.slice.call(N,Q,Q+z);return this.store(ut,lt),lt},K}(),dt=function(K,N){var Q,z,H,lt,ut={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]};return lt={next:Tt(0),throw:Tt(1),return:Tt(2)},typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function Tt(Wt){return function(Xt){return function(Et){if(Q)throw new TypeError("Generator is already executing.");for(;ut;)try{if(Q=1,z&&(H=2&Et[0]?z.return:Et[0]?z.throw||((H=z.return)&&H.call(z),0):z.next)&&!(H=H.call(z,Et[1])).done)return H;switch(z=0,H&&(Et=[2&Et[0],H.value]),Et[0]){case 0:case 1:H=Et;break;case 4:return ut.label++,{value:Et[1],done:!1};case 5:ut.label++,z=Et[1],Et=[0];continue;case 7:Et=ut.ops.pop(),ut.trys.pop();continue;default:if(!((H=(H=ut.trys).length>0&&H[H.length-1])||Et[0]!==6&&Et[0]!==2)){ut=0;continue}if(Et[0]===3&&(!H||Et[1]>H[0]&&Et[1]<H[3])){ut.label=Et[1];break}if(Et[0]===6&&ut.label<H[1]){ut.label=H[1],H=Et;break}if(H&&ut.label<H[2]){ut.label=H[2],ut.ops.push(Et);break}H[2]&&ut.ops.pop(),ut.trys.pop();continue}Et=N.call(K,ut)}catch(Ot){Et=[6,Ot],z=0}finally{Q=H=0}if(5&Et[0])throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}([Wt,Xt])}}},mt=function(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,Q=K[Symbol.asyncIterator];return Q?Q.call(K):(K=typeof __values=="function"?__values(K):K[Symbol.iterator](),N={},z("next"),z("throw"),z("return"),N[Symbol.asyncIterator]=function(){return this},N);function z(H){N[H]=K[H]&&function(lt){return new Promise(function(ut,Tt){(function(Wt,Xt,Et,Ot){Promise.resolve(Ot).then(function(Kt){Wt({value:Kt,done:Et})},Xt)})(ut,Tt,(lt=K[H](lt)).done,lt.value)})}}},tt=function(K){return this instanceof tt?(this.v=K,this):new tt(K)},I=function(K,N,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z,H=Q.apply(K,N||[]),lt=[];return z={},ut("next"),ut("throw"),ut("return"),z[Symbol.asyncIterator]=function(){return this},z;function ut(Ot){H[Ot]&&(z[Ot]=function(Kt){return new Promise(function(ce,xe){lt.push([Ot,Kt,ce,xe])>1||Tt(Ot,Kt)})})}function Tt(Ot,Kt){try{(ce=H[Ot](Kt)).value instanceof tt?Promise.resolve(ce.value.v).then(Wt,Xt):Et(lt[0][2],ce)}catch(xe){Et(lt[0][3],xe)}var ce}function Wt(Ot){Tt("next",Ot)}function Xt(Ot){Tt("throw",Ot)}function Et(Ot,Kt){Ot(Kt),lt.shift(),lt.length&&Tt(lt[0][0],lt[0][1])}},w=new DataView(new ArrayBuffer(0)),k=new Uint8Array(w.buffer),X=function(){try{w.getInt8(0)}catch(K){return K.constructor}throw new Error("never reached")}(),pt=new X("Insufficient data"),Ht=new q,Gt=function(){function K(N,Q,z,H,lt,ut,Tt,Wt){N===void 0&&(N=J.defaultCodec),Q===void 0&&(Q=void 0),z===void 0&&(z=i),H===void 0&&(H=i),lt===void 0&&(lt=i),ut===void 0&&(ut=i),Tt===void 0&&(Tt=i),Wt===void 0&&(Wt=Ht),this.extensionCodec=N,this.context=Q,this.maxStrLength=z,this.maxBinLength=H,this.maxArrayLength=lt,this.maxMapLength=ut,this.maxExtLength=Tt,this.keyDecoder=Wt,this.totalPos=0,this.pos=0,this.view=w,this.bytes=k,this.headByte=-1,this.stack=[]}return K.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},K.prototype.setBuffer=function(N){this.bytes=U(N),this.view=function(Q){if(Q instanceof ArrayBuffer)return new DataView(Q);var z=U(Q);return new DataView(z.buffer,z.byteOffset,z.byteLength)}(this.bytes),this.pos=0},K.prototype.appendBuffer=function(N){if(this.headByte!==-1||this.hasRemaining(1)){var Q=this.bytes.subarray(this.pos),z=U(N),H=new Uint8Array(Q.length+z.length);H.set(Q),H.set(z,Q.length),this.setBuffer(H)}else this.setBuffer(N)},K.prototype.hasRemaining=function(N){return this.view.byteLength-this.pos>=N},K.prototype.createExtraByteError=function(N){var Q=this.view,z=this.pos;return new RangeError("Extra "+(Q.byteLength-z)+" of "+Q.byteLength+" byte(s) found at buffer["+N+"]")},K.prototype.decode=function(N){this.reinitializeState(),this.setBuffer(N);var Q=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return Q},K.prototype.decodeMulti=function(N){return dt(this,function(Q){switch(Q.label){case 0:this.reinitializeState(),this.setBuffer(N),Q.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return Q.sent(),[3,1];case 3:return[2]}})},K.prototype.decodeAsync=function(N){var Q,z,H,lt,ut,Tt,Wt,Xt;return ut=this,Tt=void 0,Xt=function(){var Et,Ot,Kt,ce,xe,Gn,Ct,bt;return dt(this,function(zt){switch(zt.label){case 0:Et=!1,zt.label=1;case 1:zt.trys.push([1,6,7,12]),Q=mt(N),zt.label=2;case 2:return[4,Q.next()];case 3:if((z=zt.sent()).done)return[3,5];if(Kt=z.value,Et)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Kt);try{Ot=this.doDecodeSync(),Et=!0}catch(Ce){if(!(Ce instanceof X))throw Ce}this.totalPos+=this.pos,zt.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return ce=zt.sent(),H={error:ce},[3,12];case 7:return zt.trys.push([7,,10,11]),z&&!z.done&&(lt=Q.return)?[4,lt.call(Q)]:[3,9];case 8:zt.sent(),zt.label=9;case 9:return[3,11];case 10:if(H)throw H.error;return[7];case 11:return[7];case 12:if(Et){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,Ot]}throw Gn=(xe=this).headByte,Ct=xe.pos,bt=xe.totalPos,new RangeError("Insufficient data in parsing "+V(Gn)+" at "+bt+" ("+Ct+" in the current buffer)")}})},new((Wt=void 0)||(Wt=Promise))(function(Et,Ot){function Kt(Gn){try{xe(Xt.next(Gn))}catch(Ct){Ot(Ct)}}function ce(Gn){try{xe(Xt.throw(Gn))}catch(Ct){Ot(Ct)}}function xe(Gn){var Ct;Gn.done?Et(Gn.value):(Ct=Gn.value,Ct instanceof Wt?Ct:new Wt(function(bt){bt(Ct)})).then(Kt,ce)}xe((Xt=Xt.apply(ut,Tt||[])).next())})},K.prototype.decodeArrayStream=function(N){return this.decodeMultiAsync(N,!0)},K.prototype.decodeStream=function(N){return this.decodeMultiAsync(N,!1)},K.prototype.decodeMultiAsync=function(N,Q){return I(this,arguments,function(){var z,H,lt,ut,Tt,Wt,Xt,Et,Ot;return dt(this,function(Kt){switch(Kt.label){case 0:z=Q,H=-1,Kt.label=1;case 1:Kt.trys.push([1,13,14,19]),lt=mt(N),Kt.label=2;case 2:return[4,tt(lt.next())];case 3:if((ut=Kt.sent()).done)return[3,12];if(Tt=ut.value,Q&&H===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Tt),z&&(H=this.readArraySize(),z=!1,this.complete()),Kt.label=4;case 4:Kt.trys.push([4,9,,10]),Kt.label=5;case 5:return[4,tt(this.doDecodeSync())];case 6:return[4,Kt.sent()];case 7:return Kt.sent(),--H==0?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((Wt=Kt.sent())instanceof X))throw Wt;return[3,10];case 10:this.totalPos+=this.pos,Kt.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return Xt=Kt.sent(),Et={error:Xt},[3,19];case 14:return Kt.trys.push([14,,17,18]),ut&&!ut.done&&(Ot=lt.return)?[4,tt(Ot.call(lt))]:[3,16];case 15:Kt.sent(),Kt.label=16;case 16:return[3,18];case 17:if(Et)throw Et.error;return[7];case 18:return[7];case 19:return[2]}})})},K.prototype.doDecodeSync=function(){t:for(;;){var N=this.readHeadByte(),Q=void 0;if(N>=224)Q=N-256;else if(N<192)if(N<128)Q=N;else if(N<144){if((H=N-128)!=0){this.pushMapState(H),this.complete();continue t}Q={}}else if(N<160){if((H=N-144)!=0){this.pushArrayState(H),this.complete();continue t}Q=[]}else{var z=N-160;Q=this.decodeUtf8String(z,0)}else if(N===192)Q=null;else if(N===194)Q=!1;else if(N===195)Q=!0;else if(N===202)Q=this.readF32();else if(N===203)Q=this.readF64();else if(N===204)Q=this.readU8();else if(N===205)Q=this.readU16();else if(N===206)Q=this.readU32();else if(N===207)Q=this.readU64();else if(N===208)Q=this.readI8();else if(N===209)Q=this.readI16();else if(N===210)Q=this.readI32();else if(N===211)Q=this.readI64();else if(N===217)z=this.lookU8(),Q=this.decodeUtf8String(z,1);else if(N===218)z=this.lookU16(),Q=this.decodeUtf8String(z,2);else if(N===219)z=this.lookU32(),Q=this.decodeUtf8String(z,4);else if(N===220){if((H=this.readU16())!==0){this.pushArrayState(H),this.complete();continue t}Q=[]}else if(N===221){if((H=this.readU32())!==0){this.pushArrayState(H),this.complete();continue t}Q=[]}else if(N===222){if((H=this.readU16())!==0){this.pushMapState(H),this.complete();continue t}Q={}}else if(N===223){if((H=this.readU32())!==0){this.pushMapState(H),this.complete();continue t}Q={}}else if(N===196){var H=this.lookU8();Q=this.decodeBinary(H,1)}else if(N===197)H=this.lookU16(),Q=this.decodeBinary(H,2);else if(N===198)H=this.lookU32(),Q=this.decodeBinary(H,4);else if(N===212)Q=this.decodeExtension(1,0);else if(N===213)Q=this.decodeExtension(2,0);else if(N===214)Q=this.decodeExtension(4,0);else if(N===215)Q=this.decodeExtension(8,0);else if(N===216)Q=this.decodeExtension(16,0);else if(N===199)H=this.lookU8(),Q=this.decodeExtension(H,1);else if(N===200)H=this.lookU16(),Q=this.decodeExtension(H,2);else{if(N!==201)throw new L("Unrecognized type byte: "+V(N));H=this.lookU32(),Q=this.decodeExtension(H,4)}this.complete();for(var lt=this.stack;lt.length>0;){var ut=lt[lt.length-1];if(ut.type===0){if(ut.array[ut.position]=Q,ut.position++,ut.position!==ut.size)continue t;lt.pop(),Q=ut.array}else{if(ut.type===1){if((Tt=typeof Q)!="string"&&Tt!=="number")throw new L("The type of key must be string or number but "+typeof Q);if(Q==="__proto__")throw new L("The key __proto__ is not allowed");ut.key=Q,ut.type=2;continue t}if(ut.map[ut.key]=Q,ut.readCount++,ut.readCount!==ut.size){ut.key=null,ut.type=1;continue t}lt.pop(),Q=ut.map}}return Q}var Tt},K.prototype.readHeadByte=function(){return this.headByte===-1&&(this.headByte=this.readU8()),this.headByte},K.prototype.complete=function(){this.headByte=-1},K.prototype.readArraySize=function(){var N=this.readHeadByte();switch(N){case 220:return this.readU16();case 221:return this.readU32();default:if(N<160)return N-144;throw new L("Unrecognized array type byte: "+V(N))}},K.prototype.pushMapState=function(N){if(N>this.maxMapLength)throw new L("Max length exceeded: map length ("+N+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:N,key:null,readCount:0,map:{}})},K.prototype.pushArrayState=function(N){if(N>this.maxArrayLength)throw new L("Max length exceeded: array length ("+N+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:N,array:new Array(N),position:0})},K.prototype.decodeUtf8String=function(N,Q){var z;if(N>this.maxStrLength)throw new L("Max length exceeded: UTF-8 byte length ("+N+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+Q+N)throw pt;var H,lt=this.pos+Q;return H=this.stateIsMapKey()&&((z=this.keyDecoder)===null||z===void 0?void 0:z.canBeCached(N))?this.keyDecoder.decode(this.bytes,lt,N):N>R?function(ut,Tt,Wt){var Xt=ut.subarray(Tt,Tt+Wt);return y.decode(Xt)}(this.bytes,lt,N):C(this.bytes,lt,N),this.pos+=Q+N,H},K.prototype.stateIsMapKey=function(){return this.stack.length>0&&this.stack[this.stack.length-1].type===1},K.prototype.decodeBinary=function(N,Q){if(N>this.maxBinLength)throw new L("Max length exceeded: bin length ("+N+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(N+Q))throw pt;var z=this.pos+Q,H=this.bytes.subarray(z,z+N);return this.pos+=Q+N,H},K.prototype.decodeExtension=function(N,Q){if(N>this.maxExtLength)throw new L("Max length exceeded: ext length ("+N+") > maxExtLength ("+this.maxExtLength+")");var z=this.view.getInt8(this.pos+Q),H=this.decodeBinary(N,Q+1);return this.extensionCodec.decode(H,z,this.context)},K.prototype.lookU8=function(){return this.view.getUint8(this.pos)},K.prototype.lookU16=function(){return this.view.getUint16(this.pos)},K.prototype.lookU32=function(){return this.view.getUint32(this.pos)},K.prototype.readU8=function(){var N=this.view.getUint8(this.pos);return this.pos++,N},K.prototype.readI8=function(){var N=this.view.getInt8(this.pos);return this.pos++,N},K.prototype.readU16=function(){var N=this.view.getUint16(this.pos);return this.pos+=2,N},K.prototype.readI16=function(){var N=this.view.getInt16(this.pos);return this.pos+=2,N},K.prototype.readU32=function(){var N=this.view.getUint32(this.pos);return this.pos+=4,N},K.prototype.readI32=function(){var N=this.view.getInt32(this.pos);return this.pos+=4,N},K.prototype.readU64=function(){var N,Q,z=(N=this.view,Q=this.pos,4294967296*N.getUint32(Q)+N.getUint32(Q+4));return this.pos+=8,z},K.prototype.readI64=function(){var N=s(this.view,this.pos);return this.pos+=8,N},K.prototype.readF32=function(){var N=this.view.getFloat32(this.pos);return this.pos+=4,N},K.prototype.readF64=function(){var N=this.view.getFloat64(this.pos);return this.pos+=8,N},K}(),Jt={};function Ie(K,N){return N===void 0&&(N=Jt),new Gt(N.extensionCodec,N.context,N.maxStrLength,N.maxBinLength,N.maxArrayLength,N.maxMapLength,N.maxExtLength).decode(K)}function Bn(K,N){return N===void 0&&(N=Jt),new Gt(N.extensionCodec,N.context,N.maxStrLength,N.maxBinLength,N.maxArrayLength,N.maxMapLength,N.maxExtLength).decodeMulti(K)}var dn=function(K,N){var Q,z,H,lt,ut={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]};return lt={next:Tt(0),throw:Tt(1),return:Tt(2)},typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function Tt(Wt){return function(Xt){return function(Et){if(Q)throw new TypeError("Generator is already executing.");for(;ut;)try{if(Q=1,z&&(H=2&Et[0]?z.return:Et[0]?z.throw||((H=z.return)&&H.call(z),0):z.next)&&!(H=H.call(z,Et[1])).done)return H;switch(z=0,H&&(Et=[2&Et[0],H.value]),Et[0]){case 0:case 1:H=Et;break;case 4:return ut.label++,{value:Et[1],done:!1};case 5:ut.label++,z=Et[1],Et=[0];continue;case 7:Et=ut.ops.pop(),ut.trys.pop();continue;default:if(!((H=(H=ut.trys).length>0&&H[H.length-1])||Et[0]!==6&&Et[0]!==2)){ut=0;continue}if(Et[0]===3&&(!H||Et[1]>H[0]&&Et[1]<H[3])){ut.label=Et[1];break}if(Et[0]===6&&ut.label<H[1]){ut.label=H[1],H=Et;break}if(H&&ut.label<H[2]){ut.label=H[2],ut.ops.push(Et);break}H[2]&&ut.ops.pop(),ut.trys.pop();continue}Et=N.call(K,ut)}catch(Ot){Et=[6,Ot],z=0}finally{Q=H=0}if(5&Et[0])throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}([Wt,Xt])}}},be=function(K){return this instanceof be?(this.v=K,this):new be(K)},ve=function(K,N,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z,H=Q.apply(K,N||[]),lt=[];return z={},ut("next"),ut("throw"),ut("return"),z[Symbol.asyncIterator]=function(){return this},z;function ut(Ot){H[Ot]&&(z[Ot]=function(Kt){return new Promise(function(ce,xe){lt.push([Ot,Kt,ce,xe])>1||Tt(Ot,Kt)})})}function Tt(Ot,Kt){try{(ce=H[Ot](Kt)).value instanceof be?Promise.resolve(ce.value.v).then(Wt,Xt):Et(lt[0][2],ce)}catch(xe){Et(lt[0][3],xe)}var ce}function Wt(Ot){Tt("next",Ot)}function Xt(Ot){Tt("throw",Ot)}function Et(Ot,Kt){Ot(Kt),lt.shift(),lt.length&&Tt(lt[0][0],lt[0][1])}};function Ze(K){if(K==null)throw new Error("Assertion Failure: value must not be null nor undefined")}function or(K){return K[Symbol.asyncIterator]!=null?K:function(N){return ve(this,arguments,function(){var Q,z,H,lt;return dn(this,function(ut){switch(ut.label){case 0:Q=N.getReader(),ut.label=1;case 1:ut.trys.push([1,,9,10]),ut.label=2;case 2:return[4,be(Q.read())];case 3:return z=ut.sent(),H=z.done,lt=z.value,H?[4,be(void 0)]:[3,5];case 4:return[2,ut.sent()];case 5:return Ze(lt),[4,be(lt)];case 6:return[4,ut.sent()];case 7:return ut.sent(),[3,2];case 8:return[3,10];case 9:return Q.releaseLock(),[7];case 10:return[2]}})})}(K)}function br(K,N){return N===void 0&&(N=Jt),Q=this,z=void 0,lt=function(){var ut;return function(Tt,Wt){var Xt,Et,Ot,Kt,ce={label:0,sent:function(){if(1&Ot[0])throw Ot[1];return Ot[1]},trys:[],ops:[]};return Kt={next:xe(0),throw:xe(1),return:xe(2)},typeof Symbol=="function"&&(Kt[Symbol.iterator]=function(){return this}),Kt;function xe(Gn){return function(Ct){return function(bt){if(Xt)throw new TypeError("Generator is already executing.");for(;ce;)try{if(Xt=1,Et&&(Ot=2&bt[0]?Et.return:bt[0]?Et.throw||((Ot=Et.return)&&Ot.call(Et),0):Et.next)&&!(Ot=Ot.call(Et,bt[1])).done)return Ot;switch(Et=0,Ot&&(bt=[2&bt[0],Ot.value]),bt[0]){case 0:case 1:Ot=bt;break;case 4:return ce.label++,{value:bt[1],done:!1};case 5:ce.label++,Et=bt[1],bt=[0];continue;case 7:bt=ce.ops.pop(),ce.trys.pop();continue;default:if(!((Ot=(Ot=ce.trys).length>0&&Ot[Ot.length-1])||bt[0]!==6&&bt[0]!==2)){ce=0;continue}if(bt[0]===3&&(!Ot||bt[1]>Ot[0]&&bt[1]<Ot[3])){ce.label=bt[1];break}if(bt[0]===6&&ce.label<Ot[1]){ce.label=Ot[1],Ot=bt;break}if(Ot&&ce.label<Ot[2]){ce.label=Ot[2],ce.ops.push(bt);break}Ot[2]&&ce.ops.pop(),ce.trys.pop();continue}bt=Wt.call(Tt,ce)}catch(zt){bt=[6,zt],Et=0}finally{Xt=Ot=0}if(5&bt[0])throw bt[1];return{value:bt[0]?bt[1]:void 0,done:!0}}([Gn,Ct])}}}(this,function(Tt){return ut=or(K),[2,new Gt(N.extensionCodec,N.context,N.maxStrLength,N.maxBinLength,N.maxArrayLength,N.maxMapLength,N.maxExtLength).decodeAsync(ut)]})},new((H=void 0)||(H=Promise))(function(ut,Tt){function Wt(Ot){try{Et(lt.next(Ot))}catch(Kt){Tt(Kt)}}function Xt(Ot){try{Et(lt.throw(Ot))}catch(Kt){Tt(Kt)}}function Et(Ot){var Kt;Ot.done?ut(Ot.value):(Kt=Ot.value,Kt instanceof H?Kt:new H(function(ce){ce(Kt)})).then(Wt,Xt)}Et((lt=lt.apply(Q,z||[])).next())});var Q,z,H,lt}function Je(K,N){N===void 0&&(N=Jt);var Q=or(K);return new Gt(N.extensionCodec,N.context,N.maxStrLength,N.maxBinLength,N.maxArrayLength,N.maxMapLength,N.maxExtLength).decodeArrayStream(Q)}function $o(K,N){N===void 0&&(N=Jt);var Q=or(K);return new Gt(N.extensionCodec,N.context,N.maxStrLength,N.maxBinLength,N.maxArrayLength,N.maxMapLength,N.maxExtLength).decodeStream(Q)}function K_(K,N){return N===void 0&&(N=Jt),$o(K,N)}return r}()})(BP),(0,Eo.exports)("Int8",function(t){return function(e,n,r){return t(this,e,n,r)}}),(0,Eo.exports)("Int16",function(t){return function(e,n,r){return t(this,e,n,r)}}),(0,Eo.exports)("Int32",function(t){return function(e,n,r){return t(this,e,n,r)}}),(0,Eo.exports)("Uint16",function(t){return function(e,n,r){return t(this,e,n,r)}}),(0,Eo.exports)("Uint32",function(t){return function(e,n,r){return t(this,e,n,r)}}),(0,Eo.exports)("Float32",function(t){return function(e,n,r){return t(this,e,n,r)}}),(0,Eo.exports)("Float64",function(t){return function(e,n,r){return t(this,e,n,r)}});const Ett=()=>function(t){const e=window.atob(t).split("").map(n=>n.charCodeAt(0));return new Uint8Array(e,0,e.length/Uint8Array.BYTES_PER_ELEMENT)}("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AAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2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KAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2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CAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==");let c_,Jo;async function mtt(){if(c_)return c_;const t={};let e,n={};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);let r=!1,i=!1;r=typeof window=="object",i=typeof importScripts=="function",typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;let u="";(r||i)&&(i?u=self.location.href:typeof document!="undefined"&&document.currentScript&&(u=document.currentScript.src),u=u.indexOf("blob:")!==0?u.substr(0,u.lastIndexOf("/")+1):""),t.print||console.log.bind(console);const s=t.printErr||console.warn.bind(console);for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);let d;n=null,t.arguments,t.thisProgram,t.quit,t.wasmBinary,t.noExitRuntime,typeof WebAssembly!="object"&&G("no native wasm support detected");let a=!1;function l(x){const V=t["_"+x];var q;return q="Cannot call unknown function "+x+", make sure it is exported",V||G("Assertion failed: "+q),V}function A(x,V,q,dt,mt){const tt={string:function(pt){let Ht=0;if(pt!=null&&pt!==0){const Gt=1+(pt.length<<2);Ht=Y(Gt),function(Jt,Ie,Bn){(function(dn,be,ve,Ze){if(!(Ze>0))return 0;const or=ve+Ze-1;for(let br=0;br<dn.length;++br){let Je=dn.charCodeAt(br);if(Je>=55296&&Je<=57343&&(Je=65536+((1023&Je)<<10)|1023&dn.charCodeAt(++br)),Je<=127){if(ve>=or)break;be[ve++]=Je}else if(Je<=2047){if(ve+1>=or)break;be[ve++]=192|Je>>6,be[ve++]=128|63&Je}else if(Je<=65535){if(ve+2>=or)break;be[ve++]=224|Je>>12,be[ve++]=128|Je>>6&63,be[ve++]=128|63&Je}else{if(ve+3>=or)break;be[ve++]=240|Je>>18,be[ve++]=128|Je>>12&63,be[ve++]=128|Je>>6&63,be[ve++]=128|63&Je}}be[ve]=0})(Jt,E,Ie,Bn)}(pt,Ht,Gt)}return Ht},array:function(pt){const Ht=Y(pt.length);var Gt,Jt;return Gt=pt,Jt=Ht,f.set(Gt,Jt),Ht}},I=l(x),w=[];let k=0;if(dt)for(let pt=0;pt<dt.length;pt++){const Ht=tt[q[pt]];Ht?(k===0&&(k=U()),w[pt]=Ht(dt[pt])):w[pt]=dt[pt]}let X=I.apply(null,w);return X=function(pt){return V==="string"?(Ht=pt)?function(Jt,Ie,Bn){const dn=Ie+Bn;let be=Ie,ve="";for(;Jt[be]&&!(be>=dn);)++be;if(be-Ie>16&&Jt.subarray&&p)return p.decode(Jt.subarray(Ie,be));for(;Ie<be;){let Ze=Jt[Ie++];if(!(128&Ze)){ve+=String.fromCharCode(Ze);continue}const or=63&Jt[Ie++];if((224&Ze)==192){ve+=String.fromCharCode((31&Ze)<<6|or);continue}const br=63&Jt[Ie++];if(Ze=(240&Ze)==224?(15&Ze)<<12|or<<6|br:(7&Ze)<<18|or<<12|br<<6|63&Jt[Ie++],Ze<65536)ve+=String.fromCharCode(Ze);else{const Je=Ze-65536;ve+=String.fromCharCode(55296|Je>>10,56320|1023&Je)}}return ve}(E,Ht,Gt):"":V==="boolean"?Boolean(pt):pt;var Ht,Gt}(X),k!==0&&j(k),X}const p=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;let f,E,C;typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le"),t.INITIAL_MEMORY;const _=[],y=[],R=[],O=[];y.push({func:function(){ht()}});let D=0,L=null;function G(x){throw t.onAbort&&t.onAbort(x),s(x+=""),a=!0,x="abort("+x+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(x)}t.preloadedImages={},t.preloadedAudios={};let Z="deflate.wasm";var nt;function it(x){for(;x.length>0;){const V=x.shift();if(typeof V=="function"){V(t);continue}const q=V.func;typeof q=="number"?V.arg===void 0?C.get(q)():C.get(q)(V.arg):q(V.arg===void 0?null:V.arg)}}nt="data:application/octet-stream;base64,",Z.startsWith(nt)||(Z=function(x){return t.locateFile?t.locateFile(x,u):u+x}(Z));const St={emscripten_memcpy_big:function(x,V,q){E.copyWithin(x,V,V+q)},emscripten_resize_heap:function(x){G("OOM")}};await async function(){const x={env:St,wasi_snapshot_preview1:St};function V(mt,tt){const I=mt.exports;var w;t.asm=I,d=t.asm.memory,w=d.buffer,t.HEAP8=f=new Int8Array(w),t.HEAP16=new Int16Array(w),t.HEAP32=new Int32Array(w),t.HEAPU8=E=new Uint8Array(w),t.HEAPU16=new Uint16Array(w),t.HEAPU32=new Uint32Array(w),t.HEAPF32=new Float32Array(w),t.HEAPF64=new Float64Array(w),C=t.asm.__indirect_function_table,function(k){if(D--,t.monitorRunDependencies&&t.monitorRunDependencies(D),D==0&&L){const X=L;L=null,X()}}()}function q(mt){V(mt.instance)}function dt(mt){return new Nt((tt,I)=>{tt(Ett().buffer)}).then(function(tt){return WebAssembly.instantiate(tt,x)}).then(mt,function(tt){s("failed to asynchronously prepare wasm: "+tt),G(tt)})}if(D++,t.monitorRunDependencies&&t.monitorRunDependencies(D),t.instantiateWasm)try{return t.instantiateWasm(x,V)}catch(mt){return s("Module.instantiateWasm callback failed with error: "+mt),!1}return await dt(q),{}}();let ht=t.___wasm_call_ctors=function(){return(ht=t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},It=t._malloc=function(){return(It=t._malloc=t.asm.malloc).apply(null,arguments)};t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t.___errno_location=function(){return(t.___errno_location=t.asm.__errno_location).apply(null,arguments)},t._zlibCompress=function(){return(t._zlibCompress=t.asm.zlibCompress).apply(null,arguments)};let J,U=t.stackSave=function(){return(U=t.stackSave=t.asm.stackSave).apply(null,arguments)},j=t.stackRestore=function(){return(j=t.stackRestore=t.asm.stackRestore).apply(null,arguments)},Y=t.stackAlloc=function(){return(Y=t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)};function ft(x){function V(){J||(J=!0,t.calledRun=!0,a||(it(y),it(R),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)q=t.postRun.shift(),O.unshift(q);var q;it(O)}()))}D>0||(function(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)q=t.preRun.shift(),_.unshift(q);var q;it(_)}(),D>0||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),V()},1)):V()))}if(t.ccall=A,t.cwrap=function(x,V,q,dt){const mt=(q=q||[]).every(function(tt){return tt==="number"});return V!=="string"&&mt&&!dt?l(x):function(){return A(x,V,q,arguments)}},t.allocate=function(x,V){let q;return q=V==1?Y(x.length):It(x.length),x.subarray||x.slice?E.set(x,q):E.set(new Uint8Array(x),q),q},L=function x(){J||ft(),J||(L=x)},t.run=ft,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return ft(),c_=t,t}const MP=Uint8Array.BYTES_PER_ELEMENT,Itt={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},Ctt={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},_tt={_message:"m",_type:"t",_id:"id"},vtt={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let u_;class Stt{constructor(){v(this,"zlibCompress",void 0)}async init(){u_||(u_=(await(async()=>(Jo||(Jo=await mtt()),{zlibCompress:n=>{const r=new Uint8Array(n),i=MP*r.byteLength,u=Jo._malloc(i),s=Jo._malloc(3*i);for(let l=0;l<i;l++)Jo.HEAP8[u/MP+l]=r[l];const d=Jo._zlibCompress(u,i,s),a=new Uint8Array(Jo.HEAP8.slice(s,s+d));return Jo._free(u),Jo._free(s),a}}))()).zlibCompress),this.zlibCompress=u_}msgPackCompress(e){return BP.exports.encode(e)}compress(e){const n=Date.now(),r=this.compressKeyAndValue(JSON.parse(JSON.stringify(e))),i=this.msgPackCompress(r),u=this.zlibCompress(i),s=new Uint8Array([49,49,49,50,...Array.from(u)]);return{origin:Object.assign({},e),originLength:JSON.stringify(e).length,shortKeyAndValue:r,msgpackSer:i,compressed:s,compressedLength:s.length,time:Date.now()-n}}compressKeyAndValue(e){return this._ObjectKeyCompress(this._typeCompress(e))}_typeCompress(e){const n=e._type;if(!n)return e;const r=vtt[n];return e._type=r||n,e}_ObjectKeyCompress(e){const n=e._message;if(n){const r=n.stats;r&&(n.stats=this._statsCompress(r)),e._message=this._messageCompress(n)}return this._reportCompress(e)}_statsCompress(e){return this._keyCompress(e,Itt)}_messageCompress(e){return this._keyCompress(e,Ctt)}_reportCompress(e){return this._keyCompress(e,_tt)}_keyCompress(e,n){const r={},i=Object.keys(e);return _a(i).call(i,(u,s)=>{const d=e[s];return n[s]?r[n[s]]=d:r[s]=d,r},r),r}}class ytt extends Ge{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(e){super(),v(this,"lowPriorityQueue",[]),v(this,"highPriorityQueue",[]),v(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=e}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(e){arguments.length>1&&arguments[1]!==void 0&&arguments[1]?this.highPriorityQueue.push(e):this.lowPriorityQueue.push(e),this.sendMessage()}sendMessage(){const e=this.queue.length;let n=0;n=e<5?15*e:60+3*(e-4),setTimeout(()=>{this._sendMessage()},n)}_sendMessage(){if(!this.queue.length)return;const e=this.AgoraWebSocketManager.getConnection();if(!e||e.readyState!==1)return;const n=this.queue.shift();return this.lowPriorityQueue.includes(n)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),e.send(n.compressed),n}}var UP;function xP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}let $p=Qn("AgoraWebSocketManager","connectionID")(UP=class extends Ge{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(t){["tryNext","recover"].includes(t)&&this.resetReconnectCount(t),this._reconnectMode=t}get state(){return this._state}set state(t){t!==this._state&&(this._state=t,this._state==="reconnecting"?this.emit(ue.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(ue.CONNECTED):this._state==="closed"?this.emit(ue.CLOSED):this._state==="failed"&&this.emit(ue.FAILED))}resetReconnectCount(t){T.debug("websocket reset reconnect count, reason: "+t),at("debug",this,"resetReconnectCount",t,"websocket reset reconnect count, reason: "+t),this.reconnectCount=0}constructor(t,e){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=arguments.length>3&&arguments[3]!==void 0&&arguments[3],i=arguments.length>4?arguments[4]:void 0;super(),v(this,"connectionID",0),v(this,"currentURLIndex",0),v(this,"urls",void 0),v(this,"_reconnectMode","tryNext"),v(this,"reconnectReason",void 0),v(this,"_initMutex",new Tr("websocket")),v(this,"name",void 0),v(this,"_state","closed"),v(this,"reconnectInterrupter",void 0),v(this,"websocket",void 0),v(this,"retryConfig",void 0),v(this,"reconnectCount",0),v(this,"onlineReconnectListener",void 0),v(this,"compressor",new Stt),v(this,"compressorInitStatus","initializing"),v(this,"compress",void 0),v(this,"messageSender",void 0),v(this,"useCompress",void 0),v(this,"tryDoubleDomain",!1),v(this,"wsInflateLength",0),v(this,"wsDeflateLength",0),v(this,"closeEstablishingWs",()=>{}),v(this,"store",void 0),v(this,"joinChannelServiceRecordIndex",void 0),this.store=i,this.name=t,this.retryConfig=function(A){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?xP(Object(f),!0).forEach(function(E){v(A,E,f[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(f)):xP(Object(f)).forEach(function(E){Object.defineProperty(A,E,Object.getOwnPropertyDescriptor(f,E))})}return A}({},e),this.useCompress=n,this.tryDoubleDomain=r;const{timeout:u,timeoutFactor:s}=e,d=Math.max(300,Math.floor(3*u/5)),a=Math.max(1.2,Math.floor(8*s)/10);Sr.ONLINE&&(this.retryConfig.timeout=d,this.retryConfig.timeoutFactor=a),yn.on(La.NETWORK_STATE_CHANGE,(A,p)=>{A!==p&&(this.resetReconnectCount("network state change: ".concat(p," -> ").concat(A)),A===Sr.ONLINE?(this.retryConfig.timeout=d,this.retryConfig.timeoutFactor=a):(this.retryConfig.timeout=u,this.retryConfig.timeoutFactor=s))});const l=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const A=Date.now()-l;T.debug("websocket compressor initialized successfully in ".concat(A,"ms")),at("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(A,"ms")),ot.wsCompressorInit({status:!0,ec:null,eventElapse:A}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(A=>{this.compressorInitStatus="failed";const p=A?A.message||A.toString():"Empty Error";T.debug("websocket compressor failed to initialize because of ".concat(p)),at("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(p)),ot.wsCompressorInit({status:!1,ec:p,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(t){const e=(n,r)=>{this.urls=t;const i=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new ytt(this),this.createWebSocketConnection(i).then(n).catch(r),this.once(ue.CLOSED,()=>r(new B(P.WS_DISCONNECT))),this.once(ue.CONNECTED,()=>n())};return this._initMutex.lock().then(n=>new Nt((r,i)=>{e(r,i)}).then(()=>{n()}).catch(()=>{n()}))}close(t,e){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const n=this.websocket;e?setTimeout(()=>n.close(),500):n.close(),this.websocket=void 0}this.state=t?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(t,e){if(!this.websocket)return T.warning("[".concat(this.name,"] can not reconnect, no websocket")),void at("warning",this,"reconnect","can not reconnect, no websocket");var n;t!==void 0&&(this.reconnectMode=t),T.debug("[".concat(this.name,"] reconnect is triggered initiative")),at("debug",this,"reconnect"),typeof this.joinChannelServiceRecordIndex=="number"&&((n=this.store)===null||n===void 0||n.recordJoinChannelService({status:"error",errors:[new Error(e)]},this.joinChannelServiceRecordIndex));const r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:e})}sendMessageWithJSON(t){const e=JSON.stringify(t);return{compressed:e,compressedLength:e.length,origin:t}}sendMessage(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new B(P.WS_ABORT,"websocket is not ready");try{let n=null;if(this.compressorInitStatus==="initialized"&&this.useCompress&&st("WEBSOCKET_COMPRESS"))try{n=this.compress(t),this.setWsInflateData(n)}catch{n=this.sendMessageWithJSON(t)}else n=this.sendMessageWithJSON(t);e?this.websocket.send(n.compressed):this.messageSender.pushMessage(n)}catch(n){throw new B(P.WS_ERR,"send websocket message error"+n.toString())}}setWsInflateData(t){this.wsDeflateLength=this.wsDeflateLength+t.originLength,this.wsInflateLength=this.wsInflateLength+t.compressedLength}getWsInflateData(){const t=this.wsInflateLength,e=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:t,wsDeflateLength:e}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(t,e){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Nt((n,r)=>{var i;const u=()=>{T.debug("[".concat(this.name,"] websocket opened:"),t),Qo("debug",["WebSocket",this.connectionID],"open",t),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n()},s=async l=>{if(T.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(l.code,", reason: ").concat(l.reason,", current mode: ").concat(this.reconnectMode)),Qo("debug",["WebSocket",this.connectionID],"close",{code:l.code,reason:l.reason,url:this.websocket&&this.websocket.url,reconnectMode:this.reconnectMode}),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=l.reason,this.state="reconnecting");const A=Ha(this,ue.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,p=await this.reconnectWithAction(A);if(this.state==="closed")return T.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect")),void wt("debug",this,"ws is closed, no need to reconnect");if(!p)return r(new B(P.WS_DISCONNECT,"websocket reconnect failed: ".concat(l.code))),void this.close(!0);n()}else r(new B(P.WS_DISCONNECT,"websocket close: ".concat(l.code))),this.close()},d=l=>{this.emit(ue.ON_MESSAGE,l)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),st("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(t=st("GATEWAY_WSS_ADDRESS")),T.debug("[".concat(this.name,"] start connect, url: ").concat(t)),wt("debug",this,"start connect, url: ".concat(t));const a=(i=this.store)===null||i===void 0?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(t,!!e,a).then(l=>{var A;this.websocket=l,u&&u(),l.onclose=s,l.onmessage=d,(A=this.store)===null||A===void 0||A.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this.joinChannelServiceRecordIndex=a}).catch(l=>{var A;if((A=this.store)===null||A===void 0||A.recordJoinChannelService({endTs:Date.now(),status:l instanceof B&&l.code===P.WS_ABORT?"aborted":"error",errors:[l]},a),this.state!=="closed"){if(l instanceof B&&l.code===P.WS_ERR){const p=new B(P.WS_ERR,"init websocket failed! Error: ".concat(l.toString()));return T.error("[".concat(this.name,"]").concat(p)),at("error",this,"chooseBestWebsocketConnection",void 0,l.toString()),void r(p)}s&&s(l)}else r(new B(P.WS_DISCONNECT,"websocket is closed: ".concat(l.toString())))})})}async reconnectWithAction(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||yn.networkState!==Sr.OFFLINE||(this.onlineReconnectListener=yn.onlineWaiter&&yn.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let n=!0;if(this.reconnectInterrupter=()=>{n=!1},e){const i=aI(this.reconnectCount,this.retryConfig);T.debug("[".concat(this.name,"] wait ").concat(i,"ms to reconnect websocket, mode: ").concat(t)),at("debug",this,"reconnectWithAction",{timeout:i,action:t}),await Nt.race([Vn(i),this.onlineReconnectListener||new Nt(()=>{})])}if(this.state==="closed"||!n)return!1;this.reconnectCount+=1;const r=async(i,u)=>{this.emit(ue.RECONNECT_CREATE_CONNECTION,u),await this.createWebSocketConnection(i)};try{if(t==="retry"){const i=this.urls[this.currentURLIndex];this.emit(ue.RECONNECT_WAITTING_FINISH,t),await r(i,t)}else if(t==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);T.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),wt("debug",this,"websocket url length: ".concat(this.urls.length," current index: ").concat(this.currentURLIndex));const i=this.urls[this.currentURLIndex];this.emit(ue.RECONNECT_WAITTING_FINISH,t),await r(i,t)}else if(t==="recover"){T.debug("[".concat(this.name,"] request new urls")),wt("debug",this,"request new urls"),this.resetReconnectCount("recover mode"),this.emit(ue.RECONNECT_WAITTING_FINISH,t),this.urls=await jr(this,ue.REQUEST_NEW_URLS),this.currentURLIndex=0;const i=this.urls[this.currentURLIndex];await r(i,t)}return!0}catch(i){return T.error("[".concat(this.name,"] reconnect failed"),i.toString()),at("error",this,"reconnectWithAction",void 0,i.toString()),await this.reconnectWithAction(t,e)}}async chooseBestWebsocketConnection(t,e,n){return new Nt((r,i)=>{let u=!1;const s=[];this.closeEstablishingWs=()=>{T.debug("[choose-best-ws] close establishing websockets"),s.forEach(C=>{C.onclose=null,C.onopen=null,C.onmessage=null,C.close()}),i(new B(P.WS_ABORT,"choose best websocket aborted"))};const d=st("GATEWAY_DOMAINS");let a;const l=t.indexOf("?h="),A=d.find(C=>l!==-1?t.includes(C,l):t.includes(C));T.debug("[choose-best-ws] currentDomain: ",A,", domains: ",d),at("debug",this,"chooseBestWebsocketConnection",{currentDomain:A,domains:d});let p=!this.tryDoubleDomain||e||!A;if(!p&&A){var f;const C=Date.now();try{d.forEach(_=>{const y=l===-1?t.replace(A,_):t.substr(0,l)+t.substr(l).replace(A,_),R=new WebSocket(y);R.binaryType="arraybuffer",s.push(R),T.debug("[choose-best-ws] ws is connecting:",R.url),wt("debug",this,"ws is connecting: ".concat(R.url))})}catch{for(T.debug("[choose-best-ws] ws create failed, fallback to single url"),wt("debug",this,"ws create failed, fallback to single url"),s.forEach(y=>y.close());s.length;)s.pop();p=!0}(f=this.store)===null||f===void 0||f.recordJoinChannelService({urls:s.map(_=>_.url),service:"gateway"},n),s.forEach(_=>{_.onopen=()=>{if(u)return;const y=Date.now()-C;T.debug("[choose-best-ws] ws open cost ".concat(y,"ms")),s.filter(R=>R!==_).forEach(R=>{T.debug("[choose-best-ws]close backup websocket: ".concat(R.url)),wt("debug",this,"close backup websocket: ".concat(R.url)),R.close()}),u=!0,r(_)},_.onclose=y=>{a=y,!u&&(s.find(R=>!(R.readyState===WebSocket.CLOSED||R.readyState===WebSocket.CLOSING))||(T.debug("[choose-best-ws] all websocket is closed"),wt("debug",this,"all websocket is closed"),u=!0,i(a)))},_.onmessage=y=>{T.debug("[choose-best-ws]".concat(_.url," onmessage: ").concat(y.data)),wt("debug",this,"".concat(_.url," onmessage: ").concat(y.data))}}),Vn(5e3).then(()=>{s.forEach(_=>{_.readyState!==WebSocket.OPEN&&_.close()})})}if(p){var E;let C;T.debug("[choose-best-ws] use single url: ",t),wt("debug",this,"use single url: ".concat(t)),(E=this.store)===null||E===void 0||E.recordJoinChannelService({urls:[t],service:"gateway"},n);try{C=new WebSocket(t),s.push(C),C.binaryType="arraybuffer"}catch(_){const y=new B(P.WS_ERR,"init websocket failed! Error: ".concat(_.toString()));return T.error("[".concat(this.name,"]").concat(y)),at("error",this,"chooseBestWebsocketConnection",void 0,_.toString()),void i(y)}C.onopen=()=>{r(C)},C.onclose=_=>{i(_)},C.onmessage=_=>{T.debug("[choose-best-ws]".concat(C.url," onmessage: ").concat(_.data)),wt("debug",this,"".concat(C.url," onmessage: ").concat(_.data))},Vn(5e3).then(()=>{C&&C.readyState!==WebSocket.OPEN&&C.close()})}}).then(r=>(this.closeEstablishingWs=void 0,r)).catch(r=>{throw this.closeEstablishingWs=void 0,r})}})||UP;class Ttt{constructor(e){v(this,"input",[]),v(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return this.input.length===0?0:_a(e=this.input).call(e,(n,r)=>n+r)/this.input.length}}var QP;let Rtt=Qn("AgoraRTCSignal","websocket.connectionID")(QP=class extends Ge{get connectionState(){return this._connectionState}set connectionState(t){t!==this._connectionState&&(this._connectionState=t,t===In.CONNECTED?this.emit(te.WS_CONNECTED):t===In.RECONNECTING?this.emit(te.WS_RECONNECTING,this._websocketReconnectReason):t===In.CLOSED&&this.emit(te.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(t,e){super(),v(this,"_disconnectedReason",void 0),v(this,"_websocketReconnectReason",void 0),v(this,"_connectionState",In.CLOSED),v(this,"reconnectToken",void 0),v(this,"websocket",void 0),v(this,"openConnectionTime",void 0),v(this,"clientId",void 0),v(this,"lastMsgTime",Date.now()),v(this,"uploadCache",[]),v(this,"uploadCacheInterval",void 0),v(this,"rttRolling",new Ttt(5)),v(this,"pingpongTimer",void 0),v(this,"wsInflateDataTimer",void 0),v(this,"pingpongTimeoutCount",0),v(this,"joinResponse",void 0),v(this,"multiIpOption",void 0),v(this,"initError",void 0),v(this,"spec",void 0),v(this,"store",void 0),v(this,"onWebsocketMessage",n=>{if(n.data instanceof ArrayBuffer)return void this.emit(te.ON_BINARY_DATA,n.data);const r=JSON.parse(n.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(r,"_id")){const i="res-@".concat(r._id);this.emit(i,r._result,r._message)}else if(Object.prototype.hasOwnProperty.call(r,"_type")&&(this.emit(r._type,r._message),r._type===_e.ON_NOTIFICATION&&this.handleNotification(r._message),r._type===_e.ON_USER_BANNED))switch(r._message.error_code){case 14:this.close(mn.UID_BANNED);break;case 15:this.close(mn.IP_BANNED);break;case 16:this.close(mn.CHANNEL_BANNED)}}),this.clientId=t.clientId,this.spec=t,this.store=e,this.websocket=new $p("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,e),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===In.CONNECTED&&this.reconnect("retry",tr.OFFLINE)})}async request(t,e,n,r){const i=Ye(6,""),u={_id:i,_type:t,_message:e},s=this.websocket.connectionID,d=()=>new Nt((E,C)=>{if(this.connectionState===In.CONNECTED)return E();const _=()=>{this.off(te.WS_CLOSED,y),E()},y=()=>{this.off(te.WS_CONNECTED,_),C(new B(P.WS_ABORT))};this.once(te.WS_CONNECTED,_),this.once(te.WS_CLOSED,y),t!==oe.PUBLISH&&t!==oe.SUBSCRIBE&&t!==oe.UNSUBSCRIBE&&t!==oe.UNPUBLISH&&t!==oe.CONTROL||this.once(te.DISCONNECT_P2P,()=>{C(new B(P.DISCONNECT_P2P))}),t===oe.PUBLISH&&this.once(te.ABORT_P2P_EXECUTION,()=>{C(new B(P.DISCONNECT_P2P))})});if(this.connectionState!==In.CONNECTING&&this.connectionState!==In.RECONNECTING||t===oe.JOIN||t===oe.REJOIN||await d(),this.websocket.sendMessage(u,!0),r)return;const a=new Nt((E,C)=>{let _=!1;const y=(O,D)=>{_=!0,E({isSuccess:O==="success",message:D||{}}),this.off(te.WS_CLOSED,R),this.off(te.WS_RECONNECTING,R),this.emit(te.REQUEST_SUCCESS,t,e)};this.once("res-@".concat(i),y);const R=()=>{C(new B(P.WS_ABORT,"type: ".concat(t))),this.off(te.WS_CLOSED,R),this.off(te.WS_RECONNECTING,R),this.off("res-@".concat(i),y)};this.once(te.WS_CLOSED,R),this.once(te.WS_RECONNECTING,R),Vn(st("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==s||_||(T.warning("ws request timeout, type: ".concat(t)),wt("warning",this,"ws request timeout, type: ".concat(t)),this.emit(te.REQUEST_TIMEOUT,t,e))})});let l=null;try{l=await a}catch(E){if(this.connectionState===In.CLOSED||t===oe.LEAVE)throw new B(P.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?E.throw():t===oe.JOIN||t===oe.REJOIN?null:(await d(),await this.request(t,e))}if(l.isSuccess)return l.message;const A=Number(l.message.error_code||l.message.code),p=a_(A),f=new B(P.UNEXPECTED_RESPONSE,"".concat(p.desc,": ").concat(l.message.error_str),{code:A,data:l.message});return p.action==="success"?l.message:(T.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(A,", message: ").concat(p.desc,", action: ").concat(p.action)),wt("warning",this,"unexpected response from type ".concat(t,", error_code: ").concat(A,", message: ").concat(p.desc,", action: ").concat(p.action)),A===jt.ERR_TOO_MANY_BROADCASTERS?((t===oe.JOIN||t===oe.REJOIN)&&(this.initError=f,this.close()),f.throw()):p.action==="failed"?f.throw():p.action==="quit"?(this.initError=f,this.close(),f.throw()):(A===jt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,T.warning("[".concat(this.clientId,"] detect multi ip, recover")),wt("warning",this,"detect multi ip, recover"),this.reconnect("recover",tr.MULTI_IP)):this.reconnect(p.action,tr.SERVER_ERROR),t===oe.JOIN||t===oe.REJOIN?null:await this.request(t,e)))}waitMessage(t,e){return new Nt(n=>{const r=i=>{(!e||e(i))&&(this.off(t,r),n(i))};this.on(t,r)})}upload(t,e){const n={_type:t,_message:e};try{this.websocket.sendMessage(n)}catch{const i=st("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==In.CONNECTED)return;const u=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(u._type,u._message)},st("UPLOAD_CACHE_INTERVAL")||2e3))}}send(t,e){const n={_type:t,_message:e};this.websocket.sendMessage(n)}init(t,e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Nt((n,r)=>{this.once(te.WS_CONNECTED,()=>n(this.joinResponse)),this.once(te.WS_CLOSED,()=>r(this.initError||new B(P.WS_ABORT))),this.connectionState=In.CONNECTING,this.websocket.init(t).catch(r),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{e&&this.openConnectionTime===void 0&&(T.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),r(new B(P.INIT_WEBSOCKET_TIMEOUT)))},st("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=t||mn.LEAVE,this.connectionState=In.CLOSED,T.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),t===mn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new $p("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(te.ABORT_P2P_EXECUTION);const t=await jr(this,te.REQUEST_JOIN_INFO),e=await this.request(oe.JOIN,t);if(!e)return this.emit(te.REPORT_JOIN_GATEWAY,P.TIMEOUT,this.url||""),!1;this.joinResponse=e,this.emit(te.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=In.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new B(P.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const t=Up(this,te.REQUEST_REJOIN_INFO);t.token=this.reconnectToken;const e=await this.request(oe.REJOIN,t);return!!e&&(this.connectionState=In.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),e.peers&&e.peers.forEach(n=>{this.emit(_e.ON_USER_ONLINE,{uid:n.uid}),n.audio_mute?this.emit(_e.MUTE_AUDIO,{uid:n.uid}):this.emit(_e.UNMUTE_AUDIO,{uid:n.uid}),n.video_mute?this.emit(_e.MUTE_VIDEO,{uid:n.uid}):this.emit(_e.UNMUTE_VIDEO,{uid:n.uid}),n.audio_enable_local?this.emit(_e.ENABLE_LOCAL_AUDIO,{uid:n.uid}):this.emit(_e.DISABLE_LOCAL_AUDIO,{uid:n.uid}),n.video_enable_local?this.emit(_e.ENABLE_LOCAL_VIDEO,{uid:n.uid}):this.emit(_e.DISABLE_LOCAL_VIDEO,{uid:n.uid}),n.audio||n.video||this.emit(_e.ON_REMOVE_STREAM,{uid:n.uid,uint_id:n.uint_id}),n.audio&&this.emit(_e.ON_ADD_AUDIO_STREAM,{uid:n.uid,uint_id:n.uint_id,audio:!0,ssrcId:n.audio_ssrc}),n.video&&this.emit(_e.ON_ADD_VIDEO_STREAM,{uid:n.uid,uint_id:n.uint_id,video:!0,ssrcId:n.video_ssrc})}),!0)}reconnect(t,e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(t,e)}handleNotification(t){T.debug("[".concat(this.clientId,"] receive notification: "),t),at("debug",this,"handleNotification",t);const e=a_(t.code);if(e.action!=="success")return e.action==="failed"?(T.error("[".concat(this.clientId,"] ignore error: "),e.desc),void wt("error",this,"ignore error: ".concat(e.desc))):e.action==="quit"?(e.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(mn.UID_BANNED),void this.close()):void this.reconnect(e.action,tr.SERVER_ERROR)}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const t=st("PING_PONG_TIME_OUT"),e=Date.now();this.pingpongTimeoutCount>=t&&(T.warning("PINGPONG Timeout. Last Socket Message: ".concat(e-this.lastMsgTime,"ms")),wt("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(e-this.lastMsgTime,"ms")),e-this.lastMsgTime>st("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",tr.TIMEOUT):this.request(oe.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const n=Date.now()-e;this.rttRolling.add(n),st("REPORT_STATS")&&this.send(oe.PING_BACK,{pingpongElapse:n})}).catch(n=>{})}handleWsInflateData(){const{wsInflateLength:t,wsDeflateLength:e}=this.websocket.getWsInflateData();t!==0&&e!==0&&this.upload(hr.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:e,ws_inflate_length:t})}handleWebsocketEvents(){this.websocket.on(ue.RECONNECT_WAITTING_FINISH,t=>{this.emit(te.WS_RECONNECT_WAITTING_FINISH,t)}),this.websocket.on(ue.RECONNECT_CREATE_CONNECTION,t=>{this.emit(te.WS_RECONNECT_CREATE_CONNECTION,t)}),this.websocket.on(ue.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ue.CLOSED,()=>{this.connectionState=In.CLOSED}),this.websocket.on(ue.FAILED,()=>{this._disconnectedReason=mn.NETWORK_ERROR,this.connectionState=In.CLOSED}),this.websocket.on(ue.RECONNECTING,t=>{this._websocketReconnectReason=t,this.joinResponse=void 0,this.connectionState===In.CONNECTED?this.connectionState=In.RECONNECTING:this.connectionState=In.CONNECTING}),this.websocket.on(ue.WILL_RECONNECT,(t,e)=>{if(Up(this,te.IS_P2P_DISCONNECTED)&&t==="retry")return T.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),wt("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(te.NEED_RENEW_SESSION),this.emit(te.DISCONNECT_P2P),e("tryNext");t!=="retry"&&(T.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(t)),wt("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(t)),this.reconnectToken=void 0,this.emit(te.NEED_RENEW_SESSION),this.emit(te.DISCONNECT_P2P)),e(t)}),this.websocket.on(ue.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(t=>{T.warning("[".concat(this.clientId,"] rejoin failed ").concat(t)),at("warning",this,"rejoin",void 0,t.toString()),this.reconnect("tryNext",tr.SERVER_ERROR)}):this.join().catch(t=>{if(this.emit(te.REPORT_JOIN_GATEWAY,t.message||t.code,this.url||""),t instanceof B&&t.code===P.UNEXPECTED_RESPONSE&&t.data.code===jt.ERR_NO_AUTHORIZED)return T.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),wt("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",tr.SERVER_ERROR);T.error("[".concat(this.clientId,"] join gateway request failed"),t.toString()),at("error",this,"join",void 0,t.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",tr.SERVER_ERROR):(this.initError=t,this.close())})}),this.websocket.on(ue.REQUEST_NEW_URLS,(t,e)=>{jr(this,te.REQUEST_RECOVER,this.multiIpOption).then(t).catch(e)})}})||QP;var FP;function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const d_=new Map;let wtt=Qn("AgoraRTCGateway","store.clientId")(FP=class extends Ge{get state(){return this._state}set state(t){if(t===this._state)return;const e=this._state;this._state=t,t==="DISCONNECTED"&&this._disconnectedReason?this.emit(Xe.CONNECTION_STATE_CHANGE,t,e,this._disconnectedReason):this.emit(Xe.CONNECTION_STATE_CHANGE,t,e)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(t){T.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(t)),at("debug",this,"joinGatewayStartTime",t,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(t)),this._joinGatewayStartTime=t}constructor(t,e){super(),v(this,"store",void 0),v(this,"joinInfo",void 0),v(this,"key",void 0),v(this,"signal",void 0),v(this,"role",void 0),v(this,"inChannelInfo",{joinAt:null,duration:0}),v(this,"spec",void 0),v(this,"_state","DISCONNECTED"),v(this,"_statsCollector",void 0),v(this,"_disconnectedReason",void 0),v(this,"isSignalRecover",!1),v(this,"hasChangeBGPAddress",!1),v(this,"trafficStatsInterval",void 0),v(this,"networkQualityInterval",void 0),v(this,"_joinGatewayStartTime",0),v(this,"_signalTimeout",!1),v(this,"_clientRoleOptions",void 0),v(this,"_isProactiveJoin",!1),this.store=t,this.spec=e,this.signal=new Rtt(Cu(Cu({},e),{},{retryConfig:e.websocketRetryConfig}),t),this._statsCollector=e.statsCollector,this.role=e.role||"audience",this._clientRoleOptions=e.clientRoleOptions,this.handleSignalEvents()}async join(t,e,n){this.store.joinGatewayStart(),t.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const r=Date.now();let i=d_.get(t.cname);if(i||(i=new Map,d_.set(t.cname,i)),this._isProactiveJoin=!0,i.has(t.uid)){const a=new B(P.UID_CONFLICT);throw ot.joinGateway(t.sid,{lts:r,succ:!1,ec:a.message,addr:null,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!t.proxyServer}),this._isProactiveJoin=!1,a}i.set(t.uid,!0),this.joinInfo=t,this.key=e;const u=t.proxyServer,s=u?t.gatewayAddrs.map(a=>{const l=a.address.split(":");return"wss://".concat(u,"/ws/?h=").concat(l[0],"&p=").concat(l[1])}):t.gatewayAddrs.map(a=>"wss://".concat(a.address));let d=0;this.joinGatewayStartTime=r;try{d=(await this.signal.init(s,n)).uid}catch(a){throw a&&a.code===P.INIT_WEBSOCKET_TIMEOUT?(T.warning("[".concat(this.store.clientId,"] User join failed"),a.toString()),a):(T.error("[".concat(this.store.clientId,"] User join failed"),a.toString()),at("error",this,"join",void 0,a.toString()),ot.joinGateway(t.sid,{lts:r,succ:!1,ec:a.message,addr:this.signal.url,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!u}),this._isProactiveJoin=!1,i.delete(t.uid),this.signal.close(),a)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),T.debug("[".concat(this.store.clientId,"] Connected to gateway server")),at("debug",this,"join",void 0,"success"),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(a=>{T.warning("[".concat(this.store.clientId,"] get traffic stats error"),a.toString()),at("warning",this,"trafficStatsInterval",void 0,a.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Xe.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Xe.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Xe.NETWORK_QUALITY,{uplinkNetworkQuality:Ok(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:Ok(this._statsCollector.trafficStats.B_dnq)}):this.emit(Xe.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),d}async leave(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){e!==mn.FALLBACK&&(this.state="DISCONNECTING");try{t||this.signal.connectionState!==In.CONNECTED||await function(n,r){return r===1/0?n:Nt.race([n,FZ(r)])}(this.signal.request(oe.LEAVE,void 0,!0),3e3)}catch(n){T.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),n),wt("warning",this,"leave request failed, ignore, ".concat(n.toString()))}this.signal.close(e),e!==mn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(t,e,n){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new B(P.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:e,mode:this.spec.mode,extend:st("PUB_EXTEND")};try{return(await this.signal.request(oe.PUBLISH,r,!0))._message}catch(i){if(n&&i.data&&i.data.code===jt.ERR_PUBLISH_REQUEST_INVALID)return T.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),i.toString()),wt("warning",this,"receive publish error code, retry, ".concat(i.toString())),await this.tryUnpubBeforeRepub(t,e),this.publish(t,e,!1);throw i}}async unpublish(t,e){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new B(P.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(oe.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(n){T.warning("unpublish warning: ",n),at("warning",this,"unpublish",void 0,n.toString())}}async subscribe(t,e,n){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new B(P.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:t,stream_type:e.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,tcc:!!st("SUBSCRIBE_TCC"),extend:st("SUB_EXTEND"),ssrcId:e.ssrcId};try{return(await this.signal.request(oe.SUBSCRIBE,r,!0))._message}catch(i){if(n&&i.data&&i.data.code===jt.ERR_SUBSCRIBE_REQUEST_INVALID)return T.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),i.toString()),wt("warning",this,"receiver subscribe error code, retry"),await this.tryUnsubBeforeResub(t,e),await this.subscribe(t,e,!1);throw i}}async subscribeAll(t,e){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new B(P.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:t,dtx:!1};try{return await this.signal.request(oe.SUBSCRIBE_STREAMS,n,!0)}catch(r){if(e&&r.data&&r.data.code===jt.ERR_SUBSCRIBE_REQUEST_INVALID)return T.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),r.toString()),wt("warning",this,"receiver massSubscribe error code, retry"),await this.tryMassUnsubBeforeResub(t),await this.subscribeAll(t,!1);throw r}}async setVideoProfile(t){const e=function(n){if(!(n.bitrateMax&&n.bitrateMin&&n.frameRate&&n.height&&n.width))return;let r=n.frameRate,i=n.width,u=n.height,s=!0;return typeof r!="number"&&(r=r.exact||r.ideal||r.max||r.min||0,r||(s=!1)),typeof i!="number"&&(i=i.exact||i.ideal||i.max||i.min||0,i||(s=!1)),typeof u!="number"&&(u=u.exact||u.ideal||u.max||u.min||0,r||(s=!1)),s?{stream_type:0,width:i,height:u,fps:r,start_bps:1e3*n.bitrateMax,min_bps:1e3*n.bitrateMin,target_bps:1e3*n.bitrateMax}:void 0}(t);return e?this.signal.request(oe.SET_VIDEO_PROFILE,e):(T.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway")),void wt("debug",this,"encoder config is not complete, do not report to gateway"))}async unsubscribe(t,e){try{await this.signal.request(oe.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:t,stream_id:e},!0)}catch(n){T.warning("unsubscribe warning: ",n),at("warning",this,"unsubscribe",void 0,n.toString())}}async massUnsubscribe(t){try{await this.signal.request(oe.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){T.warning("unsubscribeAll warning: ",e),at("warning",this,"unsubscribeAll",void 0,e.toString())}}async reconnectPC(t){const{iceParameters:e,dtlsParameters:n,rtpCapabilities:r}=t,i=await this.signal.request(oe.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:e,dtlsParameters:n,rtpCapabilities:r}},!0),u=this.getGatewayIpPort();return{gatewayEstablishParams:i,gatewayIP:u==null?void 0:u.ip,gatewayPort:u==null?void 0:u.port}}getGatewayInfo(){return this.signal.request(oe.GATEWAY_INFO)}renewToken(t){return this.signal.request(oe.RENEW_TOKEN,t)}async setClientRole(t,e){if(e&&(this._clientRoleOptions=Object.assign({},e)),this.state!=="CONNECTED")return void(this.role=t);let n;n=t==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(oe.SET_CLIENT_ROLE,{role:t,level:n}),this.role=t}async setRemoteVideoStreamType(t,e){await this.signal.request(oe.SWITCH_VIDEO_STREAM,{stream_id:t,stream_type:e})}async setDefaultRemoteVideoStreamType(t){await this.signal.request(oe.DEFAULT_VIDEO_STREAM,{stream_type:t})}async setStreamFallbackOption(t,e){await this.signal.request(oe.SET_FALLBACK_OPTION,{stream_id:t,fallback_type:e})}async pickSVCLayer(t,e){await this.signal.request(oe.PICK_SVC_LAYER,{stream_id:t,spatial_layer:e.spatialLayer,temporal_layer:e.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Cu({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(oe.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const t=d_.get(this.joinInfo.cname);t&&t.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const t=function(e){const n=e.match(/(wss\:\/\/)?([^:]+):(\d+)/);return n?{username:an.username,password:an.password,turnServerURL:n[2],tcpport:parseInt(n[3])+30,udpport:parseInt(n[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],t&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Cu(Cu({},an),{},{turnServerURL:t.turnServerURL,tcpport:t.tcpport,udpport:t.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const t=await this.signal.request(oe.TRAFFIC_STATS,void 0,!0);t.timestamp=Date.now(),t.peer_delay.forEach(e=>{const n=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(r=>r.peer_uid===e.peer_uid);n&&n.B_st!==e.B_st&&pi(()=>{this.emit(Xe.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)})}),this._statsCollector.updateTrafficStats(t)}getJoinMessage(t){if(!this.joinInfo||!this.key)throw new B(P.UNEXPECTED_ERROR,"can not generate join message, no join info");const e=Object.assign({},this.joinInfo.apResponse);let n=st("REPORT_APP_SCENARIO");if(typeof n!="string")try{n=JSON.stringify(n)}catch{n=void 0}n&&n.length>128&&(n=void 0);const r=Cu({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:lr,browser:navigator.userAgent,process_id:st("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:e,extend:st("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:st("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:st("MAX_SUBSCRIPTION")}}},t);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,st("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),e.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=e.addresses[this.signal.websocket.currentURLIndex].ticket,delete e.addresses),this.joinInfo.defaultVideoStream!==void 0&&(r.default_video_stream=this.joinInfo.defaultVideoStream),r}getRejoinMessage(){if(!this.joinInfo)throw new B(P.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(te.WS_RECONNECT_WAITTING_FINISH,t=>{["tryNext","recover"].includes(t)&&this.joinInfo&&ot.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(te.WS_RECONNECT_CREATE_CONNECTION,t=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(te.WS_RECONNECTING,t=>{this.joinInfo&&ot.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t||tr.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",ot.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(te.WS_CLOSED,t=>{let e;switch(t){case mn.LEAVE:e=tr.LEAVE;break;case mn.UID_BANNED:case mn.IP_BANNED:case mn.CHANNEL_BANNED:case mn.SERVER_ERROR:e=tr.SERVER_ERROR;break;case mn.FALLBACK:e=tr.FALLBACK;break;default:e=tr.NETWORK_ERROR}T.debug("[signal] websocket closed, reason: ".concat(e||"undefined -> "+tr.NETWORK_ERROR)),ke("debug",this,"ws_closed","reason: ".concat(t)),this.joinInfo&&ot.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:t===mn.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e}),this._disconnectedReason=t,t!==mn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(te.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(T.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),wt("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),ot.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const t=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!t)return T.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(t)),void wt("error",this,"set local access point after joined failed: ".concat(t));Wn("EVENT_REPORT_DOMAIN",t[1]),Wn("EVENT_REPORT_BACKUP_DOMAIN",t[1]),Wn("LOG_UPLOAD_SERVER","".concat(t[1],":6444"))}}),this.signal.on(_e.ON_UPLINK_STATS,t=>{this._statsCollector.updateUplinkStats(t)}),this.signal.on(te.REQUEST_RECOVER,(t,e,n)=>{if(!this.joinInfo)return n(new B(P.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));t&&(this.joinInfo.multiIP=t,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,jr(this,Xe.REQUEST_NEW_GATEWAY_LIST).then(e).catch(n)}),this.signal.on(te.REQUEST_JOIN_INFO,async t=>{var e;this.updateTurnConfigFromSignal();const{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}=await jr(this,Xe.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(e=this.joinInfo)===null||e===void 0?void 0:e.turnServer});t(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i,version:"2"}}))}),this.signal.on(te.REQUEST_REJOIN_INFO,t=>{t(this.getRejoinMessage())}),this.signal.on(te.REPORT_JOIN_GATEWAY,(t,e)=>{this.joinInfo&&(ot.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:t,addr:e,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on(te.IS_P2P_DISCONNECTED,t=>{t(Up(this,Xe.IS_P2P_DISCONNECTED))}),this.signal.on(te.DISCONNECT_P2P,()=>{this.emit(Xe.DISCONNECT_P2P)}),this.signal.on(te.NEED_RENEW_SESSION,()=>{this.emit(Xe.NEED_RENEW_SESSION)}),this.signal.on(te.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(te.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(te.JOIN_RESPONSE,t=>{const e=this.getGatewayIpPort();e?this.emit(Xe.JOIN_RESPONSE,t,e.ip,e.port):this.emit(Xe.JOIN_RESPONSE,t)})}async tryUnsubBeforeResub(t,e){try{await this.signal.request(oe.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:t,ortc:[e]},!0)}catch(n){throw T.warning("unsubscribe warning",n),at("warning",this,"tryUnsubBeforeResub",t,n.toString()),n}}async tryUnpubBeforeRepub(t,e){try{await this.signal.request(oe.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(n){throw T.warning("unpublish warning: ",n),at("warning",this,"tryUnpubBeforeRepub",t,n.toString()),n}}async tryMassUnsubBeforeResub(t){const e={users:t.map(n=>({stream_id:n.stream_id,stream_type:n.stream_type}))};try{await this.signal.request(oe.UNSUBSCRIBE_STREAMS,e,!0)}catch(n){throw T.warning("massUnsubscribe warning",n),at("warning",this,"tryUnsubAllBeforeResub",t.map(r=>r.stream_id),n.toString()),n}}async muteLocal(t,e){const n={action:t.find(r=>r.stream_type===He.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:e};try{await this.signal.request(oe.CONTROL,n,!0,!0)}catch(r){throw T.warning("gateway unmuteLocal warning: ",r),at("warning",this,"muteLocal",e,r.toString()),r}}async unmuteLocal(t,e){const n={action:t.find(r=>r.stream_type===He.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:e};try{await this.signal.request(oe.CONTROL,n,!0,!0)}catch(r){throw T.warning("gateway muteLocal warning: ",r),at("warning",this,"unmuteLocal",e,r.toString()),r}}uploadStats(t,e){this.signal.upload(t,e)}getSignalRTT(){return this.signal.rtt}async restartICE(t){const e={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:t};try{const n=await this.signal.request(oe.RESTART_ICE,e,!0),r=this.getGatewayIpPort();return{restartICEResponse:n,gatewayIP:r==null?void 0:r.ip,gatewayPort:r==null?void 0:r.port}}catch(n){throw T.warning("P2PChannel.restartICE warning: ",n),at("warning",this,"restartICE",void 0,n.toString()),n}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,tr.P2P_FAILED)}getGatewayIpPort(){var t;if(!st("GATEWAY_WSS_ADDRESS")&&(t=this.joinInfo)!==null&&t!==void 0&&t.gatewayAddrs){const e=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(e.ip||e.ip6)&&e.port?e.ip6?{ip:e.ip6,port:e.port}:{ip:e.ip,port:e.port}:void 0}}})||FP;/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */function VP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}(function(){var t;function e(x){var V=0;return function(){return V<x.length?{done:!1,value:x[V++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,V,q){return x==Array.prototype||x==Object.prototype||(x[V]=q.value),x},r,i=function(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof h=="object"&&h];for(var V=0;V<x.length;++V){var q=x[V];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}(this);function u(x,V){if(V)t:{var q=i;x=x.split(".");for(var dt=0;dt<x.length-1;dt++){var mt=x[dt];if(!(mt in q))break t;q=q[mt]}(V=V(dt=q[x=x[x.length-1]]))!=dt&&V!=null&&n(q,x,{configurable:!0,writable:!0,value:V})}}function s(x){return(x={next:x})[Symbol.iterator]=function(){return this},x}function d(x){var V=typeof Symbol!="undefined"&&Symbol.iterator&&x[Symbol.iterator];return V?V.call(x):{next:e(x)}}if(u("Symbol",function(x){function V(mt,tt){this.A=mt,n(this,"description",{configurable:!0,writable:!0,value:tt})}if(x)return x;V.prototype.toString=function(){return this.A};var q="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",dt=0;return function mt(tt){if(this instanceof mt)throw new TypeError("Symbol is not a constructor");return new V(q+(tt||"")+"_"+dt++,tt)}}),u("Symbol.iterator",function(x){if(x)return x;x=Symbol("Symbol.iterator");for(var V="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),q=0;q<V.length;q++){var dt=i[V[q]];typeof dt=="function"&&typeof dt.prototype[x]!="function"&&n(dt.prototype,x,{configurable:!0,writable:!0,value:function(){return s(e(this))}})}return x}),typeof Object.setPrototypeOf=="function")r=Object.setPrototypeOf;else{var a;t:{var l={};try{l.__proto__={a:!0},a=l.a;break t}catch{}a=!1}r=a?function(x,V){if(x.__proto__=V,x.__proto__!==V)throw new TypeError(x+" is not extensible");return x}:null}var A=r;function p(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function f(x){if(x.m)throw new TypeError("Generator is already running");x.m=!0}function E(x,V){return x.h=3,{value:V}}function C(x){this.g=new p,this.G=x}function _(x,V,q,dt){try{var mt=V.call(x.g.j,q);if(!(mt instanceof Object))throw new TypeError("Iterator result "+mt+" is not an object");if(!mt.done)return x.g.m=!1,mt;var tt=mt.value}catch(I){return x.g.j=null,x.g.s(I),y(x)}return x.g.j=null,dt.call(x.g,tt),y(x)}function y(x){for(;x.g.h;)try{var V=x.G(x.g);if(V)return x.g.m=!1,{value:V.value,done:!1}}catch(q){x.g.v=void 0,x.g.s(q)}if(x.g.m=!1,x.g.l){if(V=x.g.l,x.g.l=null,V.F)throw V.D;return{value:V.return,done:!0}}return{value:void 0,done:!0}}function R(x){this.next=function(V){return x.o(V)},this.throw=function(V){return x.s(V)},this.return=function(V){return function(q,dt){f(q.g);var mt=q.g.j;return mt?_(q,"return"in mt?mt.return:function(tt){return{value:tt,done:!0}},dt,q.g.return):(q.g.return(dt),y(q))}(x,V)},this[Symbol.iterator]=function(){return this}}function O(x,V){return V=new R(new C(V)),A&&x.prototype&&A(V,x.prototype),V}if(p.prototype.o=function(x){this.v=x},p.prototype.s=function(x){this.l={D:x,F:!0},this.h=this.C||this.u},p.prototype.return=function(x){this.l={return:x},this.h=this.u},C.prototype.o=function(x){return f(this.g),this.g.j?_(this,this.g.j.next,x,this.g.o):(this.g.o(x),y(this))},C.prototype.s=function(x){return f(this.g),this.g.j?_(this,this.g.j.throw,x,this.g.o):(this.g.s(x),y(this))},u("Array.prototype.entries",function(x){return x||function(){return function(V,q){V instanceof String&&(V+="");var dt=0,mt=!1,tt={next:function(){if(!mt&&dt<V.length){var I=dt++;return{value:q(I,V[I]),done:!1}}return mt=!0,{done:!0,value:void 0}}};return tt[Symbol.iterator]=function(){return tt},tt}(this,function(V,q){return[V,q]})}}),typeof Blob!="undefined"&&(typeof FormData=="undefined"||!FormData.prototype.keys)){var D=function(x,V){for(var q=0;q<x.length;q++)V(x[q])},L=function(x){return x.replace(/\r?\n|\r/g,`\r
`)},G=function(x,V,q){return V instanceof Blob?(q=q!==void 0?String(q+""):typeof V.name=="string"?V.name:"blob",V.name===q&&Object.prototype.toString.call(V)!=="[object Blob]"||(V=new File([V],q)),[String(x),V]):[String(x),String(V)]},Z=function(x,V){if(x.length<V)throw new TypeError(V+" argument required, but only "+x.length+" present.")},nt=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,it=nt.FormData,St=nt.XMLHttpRequest&&nt.XMLHttpRequest.prototype.send,ht=nt.Request&&nt.fetch,It=nt.navigator&&nt.navigator.sendBeacon,J=nt.Element&&nt.Element.prototype,U=nt.Symbol&&Symbol.toStringTag;U&&(Blob.prototype[U]||(Blob.prototype[U]="Blob"),"File"in nt&&!File.prototype[U]&&(File.prototype[U]="File"));try{new File([],"")}catch{nt.File=function(V,q,dt){return V=new Blob(V,dt||{}),Object.defineProperties(V,{name:{value:q},lastModified:{value:+(dt&&dt.lastModified!==void 0?new Date(dt.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),U&&Object.defineProperty(V,U,{value:"File"}),V}}var j=function(x){return x.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Y=function(x){this.i=[];var V=this;x&&D(x.elements,function(q){if(q.name&&!q.disabled&&q.type!=="submit"&&q.type!=="button"&&!q.matches("form fieldset[disabled] *"))if(q.type==="file"){var dt=q.files&&q.files.length?q.files:[new File([],"",{type:"application/octet-stream"})];D(dt,function(mt){V.append(q.name,mt)})}else q.type==="select-multiple"||q.type==="select-one"?D(q.options,function(mt){!mt.disabled&&mt.selected&&V.append(q.name,mt.value)}):q.type==="checkbox"||q.type==="radio"?q.checked&&V.append(q.name,q.value):(dt=q.type==="textarea"?L(q.value):q.value,V.append(q.name,dt))})};if((t=Y.prototype).append=function(x,V,q){Z(arguments,2),this.i.push(G(x,V,q))},t.delete=function(x){Z(arguments,1);var V=[];x=String(x),D(this.i,function(q){q[0]!==x&&V.push(q)}),this.i=V},t.entries=function x(){var V,q=this;return O(x,function(dt){if(dt.h==1&&(V=0),dt.h!=3)return V<q.i.length?dt=E(dt,q.i[V]):(dt.h=0,dt=void 0),dt;V++,dt.h=2})},t.forEach=function(x,V){Z(arguments,1);for(var q=d(this),dt=q.next();!dt.done;dt=q.next()){var mt=d(dt.value);dt=mt.next().value,mt=mt.next().value,x.call(V,mt,dt,this)}},t.get=function(x){Z(arguments,1);var V=this.i;x=String(x);for(var q=0;q<V.length;q++)if(V[q][0]===x)return V[q][1];return null},t.getAll=function(x){Z(arguments,1);var V=[];return x=String(x),D(this.i,function(q){q[0]===x&&V.push(q[1])}),V},t.has=function(x){Z(arguments,1),x=String(x);for(var V=0;V<this.i.length;V++)if(this.i[V][0]===x)return!0;return!1},t.keys=function x(){var V,q,dt,mt,tt=this;return O(x,function(I){if(I.h==1&&(V=d(tt),q=V.next()),I.h!=3)return q.done?void(I.h=0):(dt=q.value,mt=d(dt),E(I,mt.next().value));q=V.next(),I.h=2})},t.set=function(x,V,q){Z(arguments,2),x=String(x);var dt=[],mt=G(x,V,q),tt=!0;D(this.i,function(I){I[0]===x?tt&&(tt=!dt.push(mt)):dt.push(I)}),tt&&dt.push(mt),this.i=dt},t.values=function x(){var V,q,dt,mt,tt=this;return O(x,function(I){if(I.h==1&&(V=d(tt),q=V.next()),I.h!=3)return q.done?void(I.h=0):(dt=q.value,(mt=d(dt)).next(),E(I,mt.next().value));q=V.next(),I.h=2})},Y.prototype._asNative=function(){for(var x=new it,V=d(this),q=V.next();!q.done;q=V.next()){var dt=d(q.value);q=dt.next().value,dt=dt.next().value,x.append(q,dt)}return x},Y.prototype._blob=function(){var x="----formdata-polyfill-"+Math.random(),V=[],q="--"+x+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(dt,mt){return typeof dt=="string"?V.push(q+j(L(mt))+`"\r
\r
`+L(dt)+`\r
`):V.push(q+j(L(mt))+'"; filename="'+j(dt.name)+`"\r
Content-Type: `+(dt.type||"application/octet-stream")+`\r
\r
`,dt,`\r
`)}),V.push("--"+x+"--"),new Blob(V,{type:"multipart/form-data; boundary="+x})},Y.prototype[Symbol.iterator]=function(){return this.entries()},Y.prototype.toString=function(){return"[object FormData]"},J&&!J.matches&&(J.matches=J.matchesSelector||J.mozMatchesSelector||J.msMatchesSelector||J.oMatchesSelector||J.webkitMatchesSelector||function(x){for(var V=(x=(this.document||this.ownerDocument).querySelectorAll(x)).length;0<=--V&&x.item(V)!==this;);return-1<V}),U&&(Y.prototype[U]="FormData"),St){var ft=nt.XMLHttpRequest.prototype.setRequestHeader;nt.XMLHttpRequest.prototype.setRequestHeader=function(x,V){ft.call(this,x,V),x.toLowerCase()==="content-type"&&(this.B=!0)},nt.XMLHttpRequest.prototype.send=function(x){x instanceof Y?(x=x._blob(),this.B||this.setRequestHeader("Content-Type",x.type),St.call(this,x)):St.call(this,x)}}ht&&(nt.fetch=function(x,V){return V&&V.body&&V.body instanceof Y&&(V.body=V.body._blob()),ht.call(this,x,V)}),It&&(nt.navigator.sendBeacon=function(x,V){return V instanceof Y&&(V=V._asNative()),It.call(this,x,V)}),nt.FormData=Y}})();let l_=1;function btt(t,e,n,r,i){l_+=1;const u={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:l_,requestId:l_,version:lr,cname:n.cname},s={service_name:e,json_body:JSON.stringify(u)};let d,a,l=t[0];return ci(async()=>{d=Date.now();const A=await wi(l,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(a=Date.now()-d,A.code!==0){const E=new B(P.UNEXPECTED_RESPONSE,"live streaming ap error, code"+A.code,{retry:!0,responseTime:a});throw T.error(E.toString()),at("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,E.toString()),E}const p=JSON.parse(A.json_body);if(p.code!==200){const E=new B(P.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(p.code,", reason: ").concat(p.reason),{code:p.code,responseTime:a});throw T.error(E.toString()),at("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,E.toString()),E}if(!p.servers||p.servers.length===0){const E=new B(P.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:p.code,responseTime:a});throw T.error(E.toString()),at("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,E.toString()),E}const f=function(E,C){return{addressList:E.servers.map(_=>"wss://".concat(_.address.replace(/\./g,"-"),".").concat(st("WORKER_DOMAIN"),":").concat(_.wss,"?serviceName=").concat(encodeURIComponent(C))),workerToken:E.workerToken,vid:E.vid}}(p,e);return st("LIVE_STREAMING_ADDRESS")&&(f.addressList=st("LIVE_STREAMING_ADDRESS")instanceof Array?st("LIVE_STREAMING_ADDRESS"):[st("LIVE_STREAMING_ADDRESS")]),GP(GP({},f),{},{responseTime:a})},(A,p)=>(ot.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:e,responseDetail:JSON.stringify(A.addressList),firstSuccess:p===0,responseTime:a,serverIp:t[p%t.length]}),!1),(A,p)=>(ot.apworkerEvent(n.sid,{success:!1,sc:A.data&&A.data.code||200,serviceName:e,responseTime:a,serverIp:t[p%t.length]}),!!(A.code!==P.OPERATION_ABORTED&&A.code!==P.UNEXPECTED_RESPONSE||A.data&&A.data.retry)&&(l=t[(p+1)%t.length],!0)),i)}let A_=1;function KP(t,e,n,r){let{url:i,areaCode:u}=t;at("debug",["AjaxAPI",e.clientId],"requestChooseServer",{url:i,areaCode:u});const s=Date.now(),[d,a]=JP(e,u,[nn.CHOOSE_SERVER]);let l=yn.networkState;return ci(async()=>{l&&yn.networkState===Sr.OFFLINE&&yn.onlineWaiter&&await Nt.race([yn.onlineWaiter,Vn(r&&r.maxRetryTimeout||ze.maxRetryTimeout)]),l=yn.networkState;const A=await wi(i,{data:d,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);ot.reportResourceTiming(i,e.sid),YP(A,i,e,s,[nn.CHOOSE_SERVER]);const p=NC(A,nn.CHOOSE_SERVER);return WP(p),wk(p,i)},A=>(A&&ot.joinChooseServer(e.sid,{lts:s,succ:!0,csAddr:i,opid:a,serverList:A.gatewayAddrs.map(p=>p.address),ec:null,cid:A.cid.toString(),uid:A.uid.toString(),csIp:A.csIp,unilbsServerIds:[nn.CHOOSE_SERVER].toString()}),!1),A=>A.code!==P.OPERATION_ABORTED&&(A.code===P.CAN_NOT_GET_GATEWAY_SERVER?A.data.retry:(ot.joinChooseServer(e.sid,{lts:s,succ:!1,csAddr:i,serverList:null,opid:a,ec:A.code,csIp:A.data&&A.data.csIp,unilbsServerIds:[nn.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:l})}),T.warning("[".concat(e.clientId,"] Choose server network error, retry"),A),wt("warning",["AjaxAPI",e.clientId],"Choose server network error, retry, ".concat(A)),!0)),r)}function HP(t,e,n,r){let{url:i,areaCode:u,serviceIds:s}=t;at("debug",["AjaxAPI",e.clientId],"requestMultiUnilbs",{url:i,areaCode:u,serviceIds:s});const d=Date.now(),[a,l]=JP(e,u,s);let A;return ci(async()=>{A&&yn.networkState===Sr.OFFLINE&&yn.onlineWaiter&&await Nt.race([yn.onlineWaiter,Vn(r&&r.maxRetryTimeout||ze.maxRetryTimeout)]),A=yn.networkState;const p=await wi(i,{data:a,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);ot.reportResourceTiming(i,e.sid),YP(p,i,e,d,s);const f=NC(p,nn.CHOOSE_SERVER),E=NC(p,e.cloudProxyServer==="proxy5"?nn.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?nn.CLOUD_PROXY:nn.CLOUD_PROXY_FALLBACK);return WP(f),{gatewayInfo:wk(f,i),proxyInfo:E,url:i}},p=>(p.gatewayInfo&&ot.joinChooseServer(e.sid,{lts:d,succ:!0,csAddr:i,serverList:p.gatewayInfo.gatewayAddrs.map(f=>f.address),ec:null,opid:l,cid:p.gatewayInfo.cid.toString(),uid:p.gatewayInfo.uid.toString(),csIp:p.gatewayInfo.csIp,unilbsServerIds:s.toString()}),p.proxyInfo&&ot.joinWebProxyAP(e.sid,{lts:d,sucess:1,apServerAddr:i,turnServerAddrList:p.proxyInfo.addresses.map(f=>f.ip).join(","),errorCode:null,eventType:e.cloudProxyServer,unilbsServerIds:s.toString()}),!1),p=>p.code!==P.OPERATION_ABORTED&&(p.code===P.CAN_NOT_GET_GATEWAY_SERVER?p.data.retry:(ot.joinWebProxyAP(e.sid,{lts:d,sucess:0,apServerAddr:i,turnServerAddrList:null,errorCode:p.code,eventType:e.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:A})}),T.warning("[".concat(e.clientId,"] multi unilbs network error, retry"),p),wt("warning",["AjaxAPI",e.clientId],"multi unilbs network error, retry, ".concat(p)),!0)),r)}const YP=(t,e,n,r,i)=>{const u=[],s=d=>{d.flag===4096?ot.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:e,opid:t.opid,serverList:null,ec:d.error.message,csIp:d.error.data&&d.error.data.csIp,unilbsServerIds:i.toString()}):d.flag!==1048576&&d.flag!==4194304&&d.flag!==4194310||ot.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:d.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})};if(t.response_body.forEach(d=>{const a=d.buffer.code;if(d.uri===23&&a===0&&!d.buffer.edges_services)if(d.buffer.flag===4194310)T.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),d.buffer.edges_services=[];else{const l={error:new B(P.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:t.detail[502]}),flag:d.buffer.flag};u.push(l),s(l)}if(a!==0){const l=Al(a),A={error:new B(P.CAN_NOT_GET_GATEWAY_SERVER,l.desc,{retry:l.retry,csIp:t.detail[502]}),flag:d.buffer.flag};d.buffer.flag===4194310?T.warning(A.error.toString()):u.push(A),s(A)}}),u.length)throw T.warning("[".concat(n.clientId,"] multi unilbs ").concat(e," failed, ").concat(u.map(d=>"flag: ".concat(d.flag,", message: ").concat(d.error.message,", retry: ").concat(d.error.data.retry)).join(" | "))),at("warning",["AjaxAPI",n.clientId],"checkMultiUnilbsResponseValid",{url:e},u.map(d=>({flag:d.flag,message:d.error.message,retry:d.error.data.retry}))),new B(P.CAN_NOT_GET_GATEWAY_SERVER,u.map(d=>"flag: ".concat(d.flag,", message: ").concat(d.error.message)).join(" | "),{retry:!!u.find(d=>d.error.data.retry),csIp:t.detail[502]})},WP=t=>{if(t.addresses&&t.addresses.length===0&&t.code===0)throw new B(P.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:t.detail&&t.detail[502]});if(st("GATEWAY_ADDRESS")&&st("GATEWAY_ADDRESS").length>0){T.debug("assign gateway address to",st("GATEWAY_ADDRESS")),wt("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(st("GATEWAY_ADDRESS"))));const e=st("GATEWAY_ADDRESS").map(n=>({ip:n.ip,port:n.port,ticket:t.addresses[0]&&t.addresses[0].ticket}));t.addresses=e}},Ntt=(t,e)=>{if(t.response_body&&t.response_body.length){const n=t.response_body[0];if(n.buffer.code!==0){const r=Al(n.buffer.code);throw new B(P.UPDATE_TICKET_FAILED,"[".concat(n.buffer.code,"]: ").concat(r.desc),{retry:r.retry})}return n.buffer.ticket}throw T.debug("update ticket request received ap response without response body:",e),wt("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(e)),new B(P.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},JP=(t,e,n)=>{const r=Math.floor(Math.random()*1e12),i={appid:t.appId,client_ts:Date.now(),opid:r,sid:t.sid,request_bodies:[{uri:22,buffer:{cname:t.cname,detail:{6:t.stringUid,11:e,12:st("USE_NEW_TOKEN")?"1":void 0},key:t.token,service_ids:n,uid:t.uid||0}}]};i.request_bodies.forEach(s=>{t.multiIP&&t.multiIP.gateway_ip&&(s.buffer.detail[5]=JSON.stringify({vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]}))});const u=new FormData;return u.append("request",JSON.stringify(i)),[u,r]},Ott=(t,e)=>{const n=Math.floor(Math.random()*1e12),r={appid:t.appId,client_ts:Date.now(),opid:n,sid:t.sid,request_bodies:[{uri:28,buffer:{cname:t.cname,detail:{1:"",6:t.stringUid,12:"1"},token:t.token,service_ids:e,uid:t.uid||0,edges_services:t.apResponse.addresses.map(u=>({ip:u.ip,port:u.port}))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]},hl=()=>{const t=st("AREAS");return t.length===0&&t.push(de.GLOBAL),_a(t).call(t,(e,n,r)=>{const i=Dtt(n);return i?r===0?i:"".concat(e,",").concat(i):e},"")},Dtt=t=>t===de.OVERSEA?"".concat(cn.ASIA,",").concat(cn.EUROPE,",").concat(cn.AFRICA,",").concat(cn.NORTH_AMERICA,",").concat(cn.SOUTH_AMERICA,",").concat(cn.OCEANIA):cn[t],tf={GLOBAL:{ASIA:[de.CHINA,de.JAPAN,de.INDIA,de.KOREA,de.HKMC],EUROPE:[],NORTH_AMERICA:[de.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},h_=Object.keys(tf[de.GLOBAL]),qP=[de.CHINA,de.NORTH_AMERICA,de.EUROPE,de.ASIA,de.JAPAN,de.INDIA,de.OCEANIA,de.SOUTH_AMERICA,de.AFRICA,de.KOREA,de.HKMC,de.US],ktt=function(t,e){let n=[];if(t.includes(de.GLOBAL)){const u=[de.GLOBAL,de.OVERSEA],s=Object.keys(LI);if(e===de.GLOBAL)throw new B(P.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(e===de.CHINA)n=[de.OVERSEA];else if(i=e,h_.includes(i)){const d=(r=e,tf[de.GLOBAL][r]||[]),a=[...u,e,...d];n=s.filter(l=>!a.includes(l))}else if(function(d){let a=!1;return h_.forEach(l=>{tf[de.GLOBAL][l].includes(d)&&(a=!0)}),a}(e)){const d=function(l){let A;return h_.forEach(p=>{tf[de.GLOBAL][p].includes(l)&&(A=p)}),A}(e),a=[...u,d,e];n=s.filter(l=>!a.includes(l))}else n=t;n=function(d){const a=[];return qP.forEach(l=>{d.includes(l)&&a.push(l)}),a.concat(d.filter(l=>!qP.includes(l)))}(n)}else n=t;var r,i;return n};async function _u(t,e,n,r){return{gatewayInfo:await async function(u,s,d,a){let l=null;const A=[],p=async()=>{const E=st("WEBCS_DOMAIN").slice(0,st("AJAX_REQUEST_CONCURRENT")).map(y=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat(y+"/api/v2/transpond/webrtc?v=2"):"https://".concat(y,"/api/v2/transpond/webrtc?v=2"),areaCode:hl()})),C=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:E.map(y=>y.url)}),_=await Ya({fragementLength:st("FRAGEMENT_LENGTH"),referenceList:E,asyncMapHandler:y=>(T.debug("[".concat(u.clientId,"] Connect to choose_server:"),y.url),KP(y,u,s,d)),allFailedhandler:y=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},C),y[0]},promisesCollector:A});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},C),_},f=async()=>{if(await Vn(1e3),l!==null)return l;const E=st("WEBCS_DOMAIN_BACKUP_LIST").map(y=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat(y+"/api/v2/transpond/webrtc?v=2"):"https://".concat(y,"/api/v2/transpond/webrtc?v=2"),areaCode:hl()})),C=a.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:E.map(y=>y.url)}),_=await Ya({fragementLength:st("FRAGEMENT_LENGTH"),referenceList:E,asyncMapHandler:y=>(T.debug("[".concat(u.clientId,"] Connect to backup choose_server:"),y.url),KP(y,u,s,d)),allFailedhandler:y=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},C),y[0]},promisesCollector:A});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},C),_};try{return l=await Ka([p(),f()]),A.length&&A.forEach(E=>E.cancel&&typeof E.cancel=="function"&&E.cancel()),l}catch(E){throw E[0]}}(t,e,n,r)}}async function p_(t,e,n,r,i){const u=t.cloudProxyServer;if(u==="disabled"){if(!r)return;if(t.useLocalAccessPoint)return await _u(t,e,n,i);if(st("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:d,proxyInfo:a}=await zP(t,e,n,i);return t.turnServer&&t.turnServer.mode!=="auto"?(wt("debug",["Server",t.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:d}):(t.turnServer={mode:"manual",servers:a.map(l=>({turnServerURL:l.address,tcpport:l.tcpport||an.tcpport,udpport:l.udpport||an.udpport,username:l.username||an.username,password:l.password||an.password,forceturn:st("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:d})}return await _u(t,e,n,i)}let s;if(["443only","normal"].includes(u)){let d;r?u!=="normal"?[d,s]=await Nt.all([ef(t,e,n),_u(t,e,n,i)]):(d=await ef(t,e,n),t.proxyServer=d.addresses[0],ot.setProxyServer(t.proxyServer),T.setProxyServer(t.proxyServer),ka(t.proxyServer),s=await _u(t,e,n,i)):(s=void 0,u!=="normal"?d=await ef(t,e,n):(d=await ef(t,e,n),t.proxyServer=d.addresses[0],ot.setProxyServer(t.proxyServer),T.setProxyServer(t.proxyServer),ka(t.proxyServer))),t.turnServer={mode:"manual",servers:d.addresses.map(a=>({turnServerURL:a,tcpport:d.serverResponse.tcpport?d.serverResponse.tcpport:an.tcpport,udpport:d.serverResponse.udpport?d.serverResponse.udpport:an.udpport,username:d.serverResponse.username||an.username,password:d.serverResponse.password||an.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:d,gatewayInfo:a}=await zP(t,e,n,i);s={gatewayInfo:a},t.turnServer={mode:"manual",servers:d.map(l=>({turnServerURL:l.address,tcpport:u==="proxy3"?void 0:l.tcpport?l.tcpport:an.tcpport,udpport:u==="proxy4"?void 0:l.udpport?l.udpport:an.udpport,username:l.username||an.username,password:l.password||an.password,forceturn:u!=="proxy4",security:u==="proxy5"}))}}return T.debug("[".concat(t.clientId,"] set proxy server: ").concat(t.proxyServer,", mode: ").concat(u)),at("debug",["Server",t.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:t.proxyServer,mode:t.cloudProxyServer}),s}async function f_(t,e,n,r,i){const u=st("ACCOUNT_REGISTER").slice(0,st("AJAX_REQUEST_CONCURRENT"));let s=[];s=e.proxyServer?u.map(a=>"https://".concat(e.proxyServer,"/ap/?url=").concat(a+"/api/v1")):u.map(a=>"https://".concat(a,"/api/v1"));const d=i==null?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s});try{const a=await async function(l,A,p,f,E){const C=Date.now(),_={sid:p.sid,opid:10,appid:p.appId,string_uid:A};let y=l[0];const R=await ci(()=>wi(y+"".concat(y.indexOf("?")===-1?"?":"&","action=stringuid"),{data:_,cancelToken:f,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(O,D)=>{if(O.code===0){if(O.uid<=0||O.uid>=Math.pow(2,32))throw T.error("Invalid Uint Uid ".concat(A," => ").concat(O.uid),O),at("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(A," => ").concat(O.uid,", ").concat(O)),ot.reqUserAccount(_.sid,{lts:C,success:!1,serverAddr:y,stringUid:_.string_uid,uid:O.uid,errorCode:P.INVALID_UINT_UID_FROM_STRING_UID,extend:_}),new B(P.INVALID_UINT_UID_FROM_STRING_UID);return ot.reqUserAccount(_.sid,{lts:C,success:!0,serverAddr:y,stringUid:_.string_uid,uid:O.uid,errorCode:null,extend:_}),!1}const L=Al(O.code);return L.retry&&(y=l[(D+1)%l.length]),ot.reqUserAccount(_.sid,{lts:C,success:!1,serverAddr:y,stringUid:_.string_uid,uid:O.uid,errorCode:L.desc,extend:_}),L.retry},(O,D)=>O.code!==P.OPERATION_ABORTED&&(ot.reqUserAccount(_.sid,{lts:C,success:!1,serverAddr:y,stringUid:_.string_uid,uid:null,errorCode:O.code,extend:_}),y=l[(D+1)%l.length],!0),E);if(R.code!==0){const O=Al(R.code);throw new B(P.UNEXPECTED_RESPONSE,O.desc)}return R}(s,t,e,n,r);return i==null||i.recordJoinChannelService({status:"success",endTs:Date.now()},d),a.uid}catch(a){throw i==null||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[a]},d),a}}async function ef(t,e,n){let r=Date.now();const i=t.cloudProxyServer,u=st(i==="normal"?"PROXY_CS":"WEBCS_DOMAIN").map(A=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(A+"/api/v1"):"https://".concat(A,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(i)){const A=u.map(E=>({url:E,areaCode:hl()}));let p=null;p=await Ya({fragementLength:st("FRAGEMENT_LENGTH"),referenceList:A,asyncMapHandler:E=>function(C,_,y,R){let{url:O,areaCode:D}=C;const L=Date.now(),G={opid:133,flag:_.cloudProxyServer==="proxy5"?4194304:1048576,ts:+new Date,key:_.token,cname:_.cname,sid:_.sid,detail:{6:_.stringUid,11:D},uid:_.uid||0};return ci(async()=>await wi(O,{data:G,cancelToken:y,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}}),Z=>{if(Z.code===0)return ot.joinWebProxyAP(_.sid,{lts:L,sucess:1,apServerAddr:O,turnServerAddrList:Z.addresses.map(it=>it.ip).join(","),errorCode:null,eventType:_.cloudProxyServer}),!1;const nt=Al(Z.code);throw new B(P.CAN_NOT_GET_GATEWAY_SERVER,nt.desc,{retry:nt.retry})},Z=>Z.code!==P.OPERATION_ABORTED&&(Z.code===P.CAN_NOT_GET_GATEWAY_SERVER?(ot.joinWebProxyAP(G.sid,{lts:L,sucess:0,apServerAddr:O,turnServerAddrList:null,errorCode:Z.code,eventType:_.cloudProxyServer}),T.warning("[".concat(_.clientId,"] proxy ap server ").concat(O," failed, message: ").concat(Z.message,", retry: ").concat(Z.data.retry)),wt("warning",["AjaxAPI",_.clientId],"proxy ap server ".concat(O," failed, message: ").concat(Z.message,", retry: ").concat(Z.data.retry)),Z.data.retry):(ot.joinWebProxyAP(G.sid,{lts:L,sucess:0,apServerAddr:O,turnServerAddrList:null,errorCode:Z.code,eventType:_.cloudProxyServer}),!0)),R)}(E,t,e,n),allFailedhandler:()=>{throw T.error("[".concat(t.clientId,"] can not get proxy server after trying several times")),new B(P.CAN_NOT_GET_PROXY_SERVER)}});const f=p.addresses;if(!f||f.length===0)throw T.error("[".concat(t.clientId,"] can not get proxy server, empty proxy server list")),new B(P.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:f.map(E=>E.ip).map(bC),serverResponse:{tcpport:f[0].port||443,udpport:f[0].port||an.udpport,username:an.username,password:an.password}}}let s=null;s=await Ya({fragementLength:st("FRAGEMENT_LENGTH"),referenceList:u,asyncMapHandler:A=>function(p,f,E,C){const _=Date.now(),y={command:"convergeAllocateEdge",sid:f.sid,appId:f.appId,token:f.token,uid:f.uid,cname:f.cname,ts:Math.floor(Date.now()/1e3),version:lr,seq:0,requestId:1};return ci(async()=>({res:await wi(p,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify(y)},cancelToken:E,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:p}),R=>{if(!R.res.json_body)throw T.debug("[".concat(f.clientId,"] Get proxy server failed: no json_body")),at("error",["AjaxAPI",f.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new B(P.UNEXPECTED_RESPONSE,JSON.stringify(R.res));const O=JSON.parse(R.res.json_body);if(O.code!==200)throw T.debug("[".concat(f.clientId,"] Get proxy server failed: response code [").concat(O.code,"], reason [").concat(O.reason,"]")),at("error",["AjaxAPI",f.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(O.code,"], reason [").concat(O.reason,"]")),new B(P.UNEXPECTED_RESPONSE,JSON.stringify(R.res));return T.debug("[".concat(f.clientId,"] App return server length"),O.servers.length),at("debug",["AjaxAPI",f.clientId],"requestProxyServerList","",{length:O.servers.length}),!1},R=>R.code!==P.OPERATION_ABORTED&&(ot.requestProxyAppCenter(y.sid,{lts:_,succ:!1,APAddr:p,workerManagerList:null,ec:R.code,response:R.message}),!0),C)}(A,t,e,n),allFailedhandler:()=>{throw T.error("[".concat(t.clientId,"] can not get proxy server after trying several times")),new B(P.CAN_NOT_GET_PROXY_SERVER)}});const d=JSON.parse(s.res.json_body).servers.map(UZ);if(t.cloudProxyServer==="443only")return{addresses:d,serverResponse:{tcpport:443,udpport:an.udpport,username:an.username,password:an.password}};ot.requestProxyAppCenter(t.sid,{lts:r,succ:!0,APAddr:s.url,workerManagerList:JSON.stringify(d),ec:null,response:JSON.stringify(s.res)}),r=Date.now();const a=d.map(A=>function(p,f,E,C){const _=Date.now();let y=p;p.startsWith("http")||(y="https://".concat(p,":4000/v2/machine"));const R={command:"request",gatewayType:"http",appId:f.appId,cname:f.cname,uid:(f.uid||"").toString(),sdkVersion:"2.3.1",sid:f.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:f.appId,cname:f.cname,uid:(f.uid||"").toString(),sid:f.sid}};return ci(async()=>({res:await wi(y,{data:R,cancelToken:E}),url:p}),O=>{if(!O.res.serverResponse)throw new B(P.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},O=>O.code!==P.OPERATION_ABORTED&&(ot.requestProxyWorkerManager(R.sid,{lts:_,succ:!1,workerManagerAddr:p,ec:O.code,response:O.message}),!0),C)}(A,t,e,n));let l=null;try{l=await Ka(a)}catch{throw T.error("[".concat(t.clientId,"] can not get worker manager after trying several times")),new B(P.CAN_NOT_GET_PROXY_SERVER)}return a.forEach(A=>A.cancel()),ot.requestProxyWorkerManager(t.sid,{lts:r,succ:!0,workerManagerAddr:l.url,ec:null,response:JSON.stringify(l.res)}),{addresses:[l.url],serverResponse:l.res.serverResponse}}async function Ptt(t,e,n){const r=st("CDS_AP").slice(0,st("AJAX_REQUEST_CONCURRENT")).map(d=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(d+"/api/v1"):"https://".concat(d,"/api/v1?action=config")).map(d=>function(a,l,A,p){const f=ye(),E={flag:64,cipher_method:0,features:{device:f.name,system:f.os,system_general:navigator.userAgent,vendor:l.appId,version:lr,cname:l.cname,sid:l.sid,session_id:l.sid,detail:"",proxyServer:l.proxyServer}};return ci(()=>wi(a,{data:E,timeout:1e3,cancelToken:A,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,C=>C.code!==P.OPERATION_ABORTED,p)}(d,t,e,n));let i=null,u=null,s={};try{i=await Ka(r)}catch(d){if(d.code===P.OPERATION_ABORTED)throw d;u=d}if(r.forEach(d=>d.cancel()),ot.reportApiInvoke(t.sid,{name:Ut.REQUEST_CONFIG_DISTRIBUTE,options:{error:u,res:i}}).onSuccess(),i&&i.test_tags)try{s=function(d){if(!d.test_tags)return{};const a=d.test_tags,l=Object.keys(a),A={};return l.forEach(p=>{var f;const E=Oa(f=p.slice(4)).call(f),C=JSON.parse(a[p])[1];A[E]=C}),A}(i)}catch{}return s}async function zP(t,e,n,r){const i=st("PROXY_SERVER_TYPE3"),u=(E,C)=>{let _=i;return Array.isArray(_)&&(_=C%2==0?i[1]:i[0]),"https://".concat(_,"/ap/?url=").concat(E)};let s=null;const d=[],a=async()=>{const E=st("WEBCS_DOMAIN").slice(0,st("AJAX_REQUEST_CONCURRENT")).map((y,R)=>({url:t.cloudProxyServer==="disabled"||t.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):u("".concat(y,"/api/v2/transpond/webrtc?v=2"),R),areaCode:hl(),serviceIds:[nn.CHOOSE_SERVER,t.cloudProxyServer==="proxy5"?nn.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?nn.CLOUD_PROXY:nn.CLOUD_PROXY_FALLBACK]})),C=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:E.map(y=>y.url)}),_=await Ya({fragementLength:st("FRAGEMENT_LENGTH"),referenceList:E,asyncMapHandler:y=>(T.debug("[".concat(t.clientId,"] Connect to choose_server:"),y.url),HP(y,t,e,n)),allFailedhandler:y=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},C),y[0]},promisesCollector:d});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},C),_},l=async()=>{if(await Vn(1e3),s!==null)return s;const E=st("WEBCS_DOMAIN_BACKUP_LIST").map((y,R)=>({url:t.cloudProxyServer==="disabled"||t.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):u("".concat(y,"/api/v2/transpond/webrtc?v=2"),R),areaCode:hl(),serviceIds:[nn.CHOOSE_SERVER,t.cloudProxyServer==="proxy5"?nn.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?nn.CLOUD_PROXY:nn.CLOUD_PROXY_FALLBACK]})),C=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:E.map(y=>y.url)}),_=await Ya({fragementLength:st("FRAGEMENT_LENGTH"),referenceList:E,asyncMapHandler:y=>(T.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),y.url),HP(y,t,e,n)),allFailedhandler:y=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},C),y[0]},promisesCollector:d});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},C),_};let A,p,f;try{({gatewayInfo:A,proxyInfo:p,url:f}=await Ka([a(),l()]))}catch(E){throw E[0]}if(d.length&&d.forEach(E=>E.cancel&&typeof E.cancel=="function"&&E.cancel()),!A||!p)throw new B(P.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(t.apUrl=f,t.cloudProxyServer!=="disabled"&&Array.isArray(i)&&f){const E=new LP(f).host;i.includes(E)&&(t.proxyServer=E,T.setProxyServer(E),ot.setProxyServer(E),ka(E))}return s={gatewayInfo:A,proxyInfo:await xZ(p,A.uid)},s}async function XP(t,e,n,r){const i=st("UAP_AP").slice(0,st("AJAX_REQUEST_CONCURRENT")).map(u=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(u+"/api/v1?action=uap"):"https://".concat(u,"/api/v1?action=uap"));return await btt(i,t,e,n,r)}async function Ltt(t,e,n){const r=st("UAP_AP").slice(0,st("AJAX_REQUEST_CONCURRENT")).map(i=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(i+"/api/v1?action=uap"):"https://".concat(i,"/api/v1?action=uap")).map(i=>function(u,s,d,a){const l={command:"convergeAllocateEdge",sid:s.sid,appId:s.appId,token:s.token,ts:Date.now(),version:lr,cname:s.cname,uid:s.uid.toString(),requestId:A_,seq:A_};A_+=1;const A={service_name:"tele_channel",json_body:JSON.stringify(l)};return ci(async()=>{const p=await wi(u,{data:A,cancelToken:d,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(p.code!==0){const E=new B(P.UNEXPECTED_RESPONSE,"cross channel ap error, code"+p.code,{retry:!0});throw T.error(E.toString()),at("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,E.toString()),E}const f=JSON.parse(p.json_body);if(f.code!==200){const E=new B(P.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(f.code,", reason: ").concat(f.reason));throw T.error(E.toString()),at("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,E.toString()),E}if(!f.servers||f.servers.length===0){const E=new B(P.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw T.error(E.toString()),at("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,E.toString()),E}return{vid:f.vid,workerToken:f.workerToken,addressList:f.servers.map(E=>"wss://".concat(E.address.replace(/\./g,"-"),".").concat(st("WORKER_DOMAIN"),":").concat(E.wss))}},void 0,p=>!!(p.code!==P.OPERATION_ABORTED&&p.code!==P.UNEXPECTED_RESPONSE||p.data&&p.data.retry),a)}(i,t,e,n));try{const i=await Ka(r);return r.forEach(u=>u.cancel()),i}catch(i){throw i[0]}}async function Btt(t,e,n){let r=null;const i=[],u=async s=>{const d=st(s?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(a=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(a+"/api/v2/transpond/webrtc?v=2"):"https://".concat(a,"/api/v2/transpond/webrtc?v=2"));return s&&(await Vn(1e3),r!==null)?r:await Ya({fragementLength:st("FRAGEMENT_LENGTH"),referenceList:d,asyncMapHandler:a=>(T.debug("[".concat(t.clientId,"] update ticket, Connect to ").concat(s?"backup":""," choose_server:"),a),function(l,A,p,f){const[E]=Ott(A,[nn.CHOOSE_SERVER]);let C=yn.networkState;return ci(async()=>{C&&yn.networkState===Sr.OFFLINE&&yn.onlineWaiter&&await Nt.race([yn.onlineWaiter,Vn(f&&f.maxRetryTimeout||ze.maxRetryTimeout)]),C=yn.networkState;const _=await wi(l,{data:E,cancelToken:p,headers:{"Content-Type":"multipart/form-data;"}},!0);return Ntt(_,l)},()=>!1,_=>_.code!==P.OPERATION_ABORTED&&(_.code===P.UPDATE_TICKET_FAILED?_.data.retry:(T.warning("[".concat(A.clientId,"] update ticket network error, retry"),_),wt("warning",["AjaxAPI",A.clientId],"update ticket network error, retry, ".concat(_)),!0)),f)}(a,t,e,n)),allFailedhandler:a=>{throw a[0]},promisesCollector:i})};try{return r=await Ka([u(!1),u(!0)]),i.length&&i.forEach(s=>s.cancel&&typeof s.cancel=="function"&&s.cancel()),r}catch(s){throw s[0]}}var ZP;function $P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}let Mtt=Qn("ConfigDistributeManager")(ZP=class extends Ge{constructor(){super(),v(this,"configs",void 0),v(this,"joinInfo",void 0),v(this,"cancelToken",void 0),v(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),v(this,"interval",void 0),v(this,"mutex",new Tr("config-distribute")),v(this,"mutableParamsRead",!1)}startGetConfigDistribute(t,e){this.joinInfo=t,this.cancelToken=e,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},st("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){!this.mutex.isLocked||(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,ot.reportApiInvoke(null,{options:void 0,name:Ut.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Pt.TRACER}).onSuccess(JSON.stringify(gI))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return T.debug("[config-distribute] get config distribute interrupted have no joininfo"),void at("debug",this,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let t;const e=await this.mutex.lock();try{t=await Ptt(this.joinInfo,this.cancelToken,this.retryConfig),T.debug("[config-distribute] get config distribute",JSON.stringify(t)),at("debug",this,"updateConfigDistribute",t),t.limit_bitrate&&this.handleBitrateLimit(t.limit_bitrate),this.cacheGlobalParameterConfig(t),this.configs=t}catch(n){const r=new B(P.NETWORK_RESPONSE_ERROR,n);T.warning("[config-distribute] ".concat(r.toString())),at("warning",this,"updateConfigDistribute",void 0,n.toString())}finally{e()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(t){var e;(e=t)&&e.uplink&&e.id&&e.uplink.max_bitrate!==void 0&&e.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==t.id&&this.emit(zd.UPDATE_BITRATE_LIMIT,t):this.emit(zd.UPDATE_BITRATE_LIMIT,t))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&tL({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(t){var e;const n=vI(e=Object.keys(t).filter(i=>/^webrtc_ng_global_parameter/.test(i))).call(e);for(let i=0;i<n.length;i++)for(let u=n.length-1;u>i;u--){const s=n[u];if(typeof t[s].__priority=="number"){const d=t[s].__priority,a=n[u-1];if(typeof t[a].__priority=="number"){if(!(d>t[a].__priority))continue;{const l=s;n[u]=n[u-1],n[u-1]=l}}else{const l=s;n[u]=n[u-1],n[u-1]=l}}}const r={};n.forEach(i=>{const u=t[i],s=u.__expires;Object.keys(u).forEach(d=>{d==="__priority"||d==="__expires"||Object.prototype.hasOwnProperty.call(r,d)||(r[d]=tL({value:u[d]},s&&{expires:s}))})});try{const i=JSON.stringify(r),u=window.btoa(i);window.localStorage.setItem("websdk_ng_global_parameter",u),T.debug("Caching global parameters ".concat(i)),at("debug",this,"cacheGlobalParameterConfig",i)}catch(i){T.error("Error caching global parameters:",i.message),at("error",this,"cacheGlobalParameterConfig",void 0,i.message)}}})||ZP;function eL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eL(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class Utt extends Ge{constructor(e,n,r,i){super(),v(this,"spec",void 0),v(this,"token",void 0),v(this,"websocket",void 0),v(this,"pingpongTimer",void 0),v(this,"reconnectMode","retry"),v(this,"serviceMode",void 0),v(this,"reqId",0),v(this,"commandReqId",0),v(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),v(this,"handleWebSocketMessage",u=>{if(!u.data)return;const s=JSON.parse(u.data);s.requestId?this.emit("@".concat(s.requestId,"-").concat(s.sid),s):this.serviceMode===Ke.INJECT?this.emit(Ri.INJECT_STREAM_STATUS,s):(ot.workerEvent(this.spec.sid,{actionType:"status",serverCode:s.code,workerType:this.serviceMode===Ke.TRANSCODE?1:2}),this.emit(Ri.PUBLISH_STREAM_STATUS,s))}),this.spec=n,this.token=e,this.serviceMode=i,this.websocket=new $p("live-streaming",r),this.websocket.on(ue.CONNECTED,this.handleWebSocketOpen),this.websocket.on(ue.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(ue.REQUEST_NEW_URLS,(u,s)=>{jr(this,Ri.REQUEST_NEW_ADDRESS).then(u).catch(s)}),this.websocket.on(ue.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,n,r,i){this.reqId+=1,e==="request"&&(this.commandReqId+=1);const u=this.commandReqId,s=this.reqId;if(!s||!this.websocket)throw new B(P.UNEXPECTED_ERROR);const d=pl({command:e,sdkVersion:lr==="4.11.1"?"0.0.1":lr,seq:s,requestId:s,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},n);if(this.websocket.state==="closed")throw new B(P.WS_DISCONNECT);const a=()=>new Nt((f,E)=>{this.websocket.once(ue.CLOSED,()=>E(new B(P.WS_ABORT))),this.websocket.once(ue.CONNECTED,f)});this.websocket.state!=="connected"&&await a(),d.clientRequest&&(d.clientRequest.workerToken=this.token);const l=new Nt((f,E)=>{const C=()=>{E(new B(P.WS_ABORT))};this.websocket.once(ue.RECONNECTING,C),this.websocket.once(ue.CLOSED,C),this.once("@".concat(s,"-").concat(this.spec.sid),_=>{f(_)})});i&&ot.workerEvent(this.spec.sid,pl(pl({},i),{},{requestId:u,actionType:"request",payload:JSON.stringify(n.clientRequest),serverCode:0,code:0}));const A=Date.now();this.websocket.sendMessage(d);let p=null;try{p=await l}catch(f){if(this.websocket.state==="closed")throw f;return await a(),await this.request(e,n,r)}return i&&ot.workerEvent(this.spec.sid,pl(pl({},i),{},{requestId:u,actionType:"response",payload:JSON.stringify(p.serverResponse),serverCode:p.code,success:p.code===200,responseTime:Date.now()-A})),p.code!==200&&this.handleResponseError(p),p}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e=lr==="4.11.1"?"0.0.1":lr;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case Ue.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void T.warning("live stream response already exists stream");case Ue.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Ue.LIVE_STREAM_RESPONSE_BAD_STREAM:case Ue.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new B(P.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case Ue.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(e.serverResponse.command==="UnpublishStream"||e.serverResponse.command==="UninjectStream")return;throw new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Ue.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new B(P.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case Ue.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const n=new B(P.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Ri.WARNING,n,e.serverResponse.url)}case Ue.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const n=new B(P.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Ri.WARNING,n,e.serverResponse.url)}case Ue.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Ue.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new B(P.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case Ue.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const n=new B(P.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Ri.WARNING,n,e.serverResponse.url)}case Ue.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case Ue.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Ue.LIVE_STREAM_RESPONSE_WORKER_LOST:case Ue.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(e.serverResponse.command==="UnpublishStream"||e.serverResponse.command==="UninjectStream")return;throw new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Ue.ERROR_FAIL_SEND_MESSAGE:if(e.serverResponse.command==="UnpublishStream"||e.serverResponse.command==="UninjectStream")return;if(e.serverResponse.command==="UpdateTranscoding"||e.serverResponse.command==="ControlStream")return new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Ue.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Ue.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Ue.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Ue.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new B(P.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(Mp)},6e3)}}function nL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nL(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class xtt extends Ge{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze;super(),v(this,"onLiveStreamWarning",void 0),v(this,"onLiveStreamError",void 0),v(this,"onInjectStatusChange",void 0),v(this,"spec",void 0),v(this,"retryTimeout",1e4),v(this,"connection",void 0),v(this,"httpRetryConfig",void 0),v(this,"wsRetryConfig",void 0),v(this,"streamingTasks",new Map),v(this,"isStartingStreamingTask",!1),v(this,"taskMutex",new Tr("live-streaming")),v(this,"cancelToken",Yi.CancelToken.source()),v(this,"transcodingConfig",void 0),v(this,"injectConfig",ir({},$J)),v(this,"injectLoopTimes",0),v(this,"uapResponse",void 0),v(this,"lastTaskId",1),v(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=r,this.wsRetryConfig=n}async setTranscodingConfig(e){const n=ir(ir({},ZJ),e);n.videoCodecProfile!==66&&n.videoCodecProfile!==77&&n.videoCodecProfile!==100&&(T.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=n.transcodingUsers.map(s=>ir(ir(ir({},XJ),s),{},{zOrder:s.zOrder?s.zOrder+1:1}))),function(s){Oe(s.width)||we(s.width,"config.width",0,1e4),Oe(s.height)||we(s.height,"config.height",0,1e4),Oe(s.videoBitrate)||we(s.videoBitrate,"config.videoBitrate",1,1e6),Oe(s.videoFrameRate)||we(s.videoFrameRate,"config.videoFrameRate"),Oe(s.lowLatency)||gp(s.lowLatency,"config.lowLatency"),Oe(s.audioSampleRate)||Nn(s.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Oe(s.audioBitrate)||we(s.audioBitrate,"config.audioBitrate",1,128),Oe(s.audioChannels)||Nn(s.audioChannels,"config.audioChannels",[1,2,3,4,5]),Oe(s.videoGop)||we(s.videoGop,"config.videoGop"),Oe(s.videoCodecProfile)||Nn(s.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Oe(s.userCount)||we(s.userCount,"config.userCount",0,17),Oe(s.backgroundColor)||we(s.backgroundColor,"config.backgroundColor",0,16777215),Oe(s.userConfigExtraInfo)||Jn(s.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),s.transcodingUsers&&!Oe(s.transcodingUsers)&&(Jd(s.transcodingUsers,"config.transcodingUsers"),s.transcodingUsers.forEach((d,a)=>{yI(d.uid),Oe(d.x)||we(d.x,"transcodingUser[".concat(a,"].x"),0,1e4),Oe(d.y)||we(d.y,"transcodingUser[".concat(a,"].y"),0,1e4),Oe(d.width)||we(d.width,"transcodingUser[".concat(a,"].width"),0,1e4),Oe(d.height)||we(d.height,"transcodingUser[".concat(a,"].height"),0,1e4),Oe(d.zOrder)||we(d.zOrder-1,"transcodingUser[".concat(a,"].zOrder"),0,100),Oe(d.alpha)||we(d.alpha,"transcodingUser[".concat(a,"].alpha"),0,1,!1)})),Oe(s.watermark)||DI(s.watermark,"watermark"),Oe(s.backgroundImage)||DI(s.backgroundImage,"backgroundImage"),s.images&&!Oe(s.images)&&(Jd(s.images,"config.images"),s.images.forEach((d,a)=>{DI(d,"images[".concat(a,"]"))}))}(n);const r=[];n.images&&r.push(...n.images.map(s=>ir(ir(ir({},OI),s),{},{zOrder:255}))),n.backgroundImage&&(r.push(ir(ir(ir({},OI),n.backgroundImage),{},{zOrder:0})),delete n.backgroundImage),n.watermark&&(r.push(ir(ir(ir({},OI),n.watermark),{},{zOrder:255})),delete n.watermark),n.images=r,n.transcodingUsers&&(n.userConfigs=n.transcodingUsers.map(s=>ir({},s)),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers);const i=(n.userConfigs||[]).map(s=>typeof s.uid=="number"?Nt.resolve(s.uid):f_(s.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Nt.all(i)).forEach((s,d)=>{n.userConfigs&&n.userConfigs[d]&&(n.userConfigs[d].uid=s)}),this.transcodingConfig=n,this.connection)try{var u;const s=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Ho(u=this.streamingTasks).call(u)).map(d=>d.taskId).join("#")});T.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(s.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(s){if(!s.data||!s.data.retry)throw s;s.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(d=>{T.warning("[".concat(this.spec.clientId,"] live streaming receive error"),s.toString(),"try to republish",d.url),this.startLiveStreamingTask(d.url,d.mode,s).then(()=>{T.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(d.url," success"))}).catch(a=>{T.error("[".concat(this.spec.clientId,"] live streaming republish failed"),d.url,a.toString()),this.onLiveStreamError&&this.onLiveStreamError(d.url,a)})})}}setInjectStreamConfig(e,n){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=n}async startLiveStreamingTask(e,n,r){var i;if(Array.from(Ho(i=this.streamingTasks).call(i)).find(a=>a.mode===Ke.INJECT)&&n===Ke.INJECT)return new B(P.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&n===Ke.TRANSCODE)throw new B(P.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let u={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};T.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(n));const s=await this.taskMutex.lock();if(!this.connection&&r)return void s();if(this.streamingTasks.get(e)&&!r)return s(),new B(P.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(n))}catch(a){throw s(),a}switch(n){case Ke.TRANSCODE:u.transcodingConfig=ir({},this.transcodingConfig);break;case Ke.RAW:break;case Ke.INJECT:u={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(u.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const d=this.lastTaskId++;try{const a=new Nt((A,p)=>{Vn(this.retryTimeout).then(()=>{if(r)return p(r);const f=this.statusError.get(e);return f?(this.statusError.delete(e),p(f)):void 0})}),l=await Nt.race([this.connection.request("request",{clientRequest:u},!0,{url:e,command:"PublishStream",workerType:n===Ke.TRANSCODE?1:2,requestByUser:!r,tid:d.toString()}),a]);this.isStartingStreamingTask=!1,T.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(l.code)),this.streamingTasks.set(e,{clientRequest:u,mode:n,url:e,taskId:d}),s()}catch(a){if(s(),this.isStartingStreamingTask=!1,!a.data||!a.data.retry||r)throw a;return a.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,n,a)):await this.startLiveStreamingTask(e,n,a)}}stopLiveStreamingTask(e){return new Nt((n,r)=>{const i=this.streamingTasks.get(e);if(!i||!this.connection)return new B(P.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const u=i.mode;i.abortTask=()=>{T.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),n()},this.connection.request("request",{clientRequest:{command:u===Ke.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:u===Ke.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(s=>{T.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(s.code)),this.streamingTasks.delete(e),this.streamingTasks.size===0&&u!==Ke.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),n(),u===Ke.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Ts.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,e)}).catch(r)})}async controlInjectStream(e,n,r,i){const u=this.streamingTasks.get(e);if(!u||!this.connection||u.mode!==Ke.INJECT)throw new B(P.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:n,audioVolume:r,position:i}})).serverResponse}resetAllTask(){var e;const n=Array.from(Ho(e=this.streamingTasks).call(e));this.terminate();for(const r of n)this.startLiveStreamingTask(r.url,r.mode).catch(i=>{this.onLiveStreamError&&this.onLiveStreamError(r.url,i)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Yi.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new B(P.UNEXPECTED_ERROR,"live streaming connection has already connected");const n=await jr(this,tu.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=n,this.connection=new Utt(n.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(Ri.WARNING,(r,i)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(i,r)),this.connection.on(Ri.PUBLISH_STREAM_STATUS,r=>this.handlePublishStreamServer(r)),this.connection.on(Ri.INJECT_STREAM_STATUS,r=>this.handleInjectStreamServerStatus(r)),this.connection.on(Ri.REQUEST_NEW_ADDRESS,(r,i)=>{if(!this.connection)return i(new B(P.UNEXPECTED_ERROR,"can not get new live streaming address list"));jr(this,tu.REQUEST_WORKER_MANAGER_LIST,e).then(u=>{this.uapResponse=u,r(u.addressList)}).catch(i)}),await this.connection.init(n.addressList),this.connection}handlePublishStreamServer(e){const n=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(n),i=e.reason;switch(e.code){case Ue.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Ue.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Ue.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Ue.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const s=new B(P.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return T.error(s.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,s);if(!this.isStartingStreamingTask)return;this.statusError.set(n,s)}case Ue.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const s=new B(P.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,i);return this.onLiveStreamWarning&&this.onLiveStreamWarning(n,s)}case Ue.LIVE_STREAM_RESPONSE_WORKER_LOST:case Ue.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var u;if(!this.connection)return;this.connection.tryNextAddress();const s=Array.from(Ho(u=this.streamingTasks).call(u));for(const d of s)d.abortTask?d.abortTask():(T.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",d.url),this.startLiveStreamingTask(d.url,d.mode,new B(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{T.debug("[".concat(this.spec.clientId,"] republish live stream success"),d.url)}).catch(a=>{T.error(a.toString()),this.onLiveStreamError&&this.onLiveStreamError(d.url,a)}));return}}}handleInjectStreamServerStatus(e){const n=Number(e.uid),r=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Ts.INJECT_STREAM_STATUS_START_SUCCESS,n,r));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Ts.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,n,r),void this.streamingTasks.delete(r);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Ts.INJECT_STREAM_STATUS_START_UNAUTHORIZED,n,r),void this.streamingTasks.delete(r);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Ts.INJECT_STREAM_STATUS_BROKEN,n,r),void this.streamingTasks.delete(r);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Ts.INJECT_STREAM_STATUS_START_TIMEOUT,n,r),void this.streamingTasks.delete(r);default:return void T.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class rL{constructor(){v(this,"destChannelMediaInfos",new Map),v(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){tO(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){tO(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){SI(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function iL(t){if(!(t instanceof rL))return new B(P.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const e=t.getSrcChannelMediaInfo(),n=t.getDestChannelMediaInfo();if(!e)return new B(P.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(n.size===0)return new B(P.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class Qtt extends Ge{constructor(e,n,r){super(),v(this,"ws",void 0),v(this,"requestId",1),v(this,"heartBeatTimer",void 0),v(this,"joinInfo",void 0),v(this,"clientId",void 0),v(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),v(this,"onClose",i=>{this.emit("close"),this.dispose()}),v(this,"onMessage",i=>{const u=JSON.parse(i.data);if(!u||u.command!=="serverResponse"||!u.requestId)return u&&u.command==="serverStatus"&&u.serverStatus&&u.serverStatus.command?(this.emit("status",u.serverStatus),void this.emit(u.serverStatus.command,u.serverStatus)):void 0;this.emit("req_".concat(u.requestId),u)}),this.joinInfo=e,this.clientId=n,this.ws=new $p("cross-channel-".concat(this.clientId),r),this.ws.on(ue.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(ue.CONNECTED,this.onOpen),this.ws.on(ue.ON_MESSAGE,this.onMessage),this.ws.on(ue.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(e){const n=this.requestId++;return e.requestId=n,e.seq=n,this.ws.sendMessage(e),n}waitStatus(e){return new Nt((n,r)=>{const i=window.setTimeout(()=>{r(new B(P.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,u=>{window.clearTimeout(i),u.state&&u.state!==0?r(new B(P.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):n(void 0)}),this.once("dispose",()=>{window.clearTimeout(i),r(new B(P.WS_ABORT))})})}async request(e){if(this.ws.state==="closed")throw new B(P.WS_DISCONNECT);const n=()=>new Nt((s,d)=>{this.ws.once(ue.CLOSED,()=>d(new B(P.WS_ABORT))),this.ws.once(ue.CONNECTED,s)});this.ws.state!=="connected"&&await n();const r=this.sendMessage(e),i=new Nt((s,d)=>{const a=()=>{d(new B(P.WS_ABORT))};this.ws.once(ue.RECONNECTING,a),this.ws.once(ue.CLOSED,a),this.once("req_".concat(r),s),Vn(3e3).then(()=>{this.removeAllListeners("req_".concat(r)),this.ws.off(ue.RECONNECTING,a),this.ws.off(ue.CLOSED,a),d(new B(P.TIMEOUT,"cross channel ws request timeout"))})}),u=await i;if(!u||u.code!==200)throw new B(P.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(u)));return u}async connect(e){this.ws.removeAllListeners(ue.REQUEST_NEW_URLS),this.ws.on(ue.REQUEST_NEW_URLS,n=>{n(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const n=this.requestId++;return e.requestId=n,this.ws.sendMessage(e),n}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class Ftt extends Ge{set state(e){e!==this._state&&(e!==er.RELAY_STATE_FAILURE&&(this.errorCode=Rs.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,n,r,i){super(),v(this,"joinInfo",void 0),v(this,"clientId",void 0),v(this,"cancelToken",Yi.CancelToken.source()),v(this,"workerToken",void 0),v(this,"requestId",0),v(this,"signal",void 0),v(this,"prevChannelMediaConfig",void 0),v(this,"httpRetryConfig",void 0),v(this,"_state",er.RELAY_STATE_IDLE),v(this,"errorCode",Rs.RELAY_OK),v(this,"onStatus",u=>{T.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(u))),u&&u.command&&(u.command==="onAudioPacketReceived"&&this.emit("event",Wi.PACKET_RECEIVED_AUDIO_FROM_SRC),u.command==="onVideoPacketReceived"&&this.emit("event",Wi.PACKET_RECEIVED_VIDEO_FROM_SRC),u.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Rs.SRC_TOKEN_EXPIRED,this.state=er.RELAY_STATE_FAILURE),u.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Rs.DEST_TOKEN_EXPIRED,this.state=er.RELAY_STATE_FAILURE))}),v(this,"onReconnect",async()=>{T.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Wi.NETWORK_DISCONNECTED),this.state=er.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(u=>{this.state!==er.RELAY_STATE_IDLE&&(T.error("auto restart channel media relay failed",u.toString()),this.errorCode=Rs.SERVER_CONNECTION_LOST,this.state=er.RELAY_STATE_FAILURE)})}),this.joinInfo=e,this.clientId=n,this.signal=new Qtt(this.joinInfo,this.clientId,r),this.httpRetryConfig=i}async startChannelMediaRelay(e){if(this.state!==er.RELAY_STATE_IDLE)throw new B(P.INVALID_OPERATION);this.state=er.RELAY_STATE_CONNECTING,await this.connect(),T.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(n){throw n.data&&n.data.serverResponse&&n.data.serverResponse.command==="SetSourceChannel"?new B(P.CROSS_CHANNEL_FAILED_JOIN_SRC):n.data&&n.data.serverResponse&&n.serverResponse.command==="SetDestChannelStatus"?new B(P.CROSS_CHANNEL_FAILED_JOIN_DEST):n.data&&n.data.serverResponse&&n.serverResponse.command==="StartPacketTransfer"?new B(P.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):n}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==er.RELAY_STATE_RUNNING)throw new B(P.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),T.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=er.RELAY_STATE_IDLE,this.dispose()}dispose(){T.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Yi.CancelToken.source(),this.state=er.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await Ltt(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",Wi.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const n=this.genMessage(qn.StopPacketTransfer);await this.signal.request(n),await this.signal.waitStatus("Normal Quit"),T.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const r=this.genMessage(qn.SetSdkProfile,e);await this.signal.request(r),T.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const i=this.genMessage(qn.SetSourceChannel,e);await this.signal.request(i),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Wi.PACKET_JOINED_SRC_CHANNEL),T.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const u=this.genMessage(qn.SetSourceUserId,e);await this.signal.request(u),T.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const s=this.genMessage(qn.SetDestChannel,e);await this.signal.request(s),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Wi.PACKET_JOINED_DEST_CHANNEL),T.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const d=this.genMessage(qn.StartPacketTransfer,e);await this.signal.request(d),this.emit("event",Wi.PACKET_SENT_TO_DEST_CHANNEL),this.state=er.RELAY_STATE_RUNNING,T.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))}async sendUpdateMessage(e){const n=this.genMessage(qn.UpdateDestChannel,e);await this.signal.request(n),this.emit("event",Wi.PACKET_UPDATE_DEST_CHANNEL),T.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(qn.StopPacketTransfer);await this.signal.request(e),T.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,n){const r=[],i=[],u=[];this.requestId+=1;const s={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:lr,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};s.sdkVersion==="4.11.1"&&(s.sdkVersion="0.0.1");let d=null,a=null;switch(e){case qn.SetSdkProfile:return s.clientRequest={command:"SetSdkProfile",type:"multi_channel"},s;case qn.SetSourceChannel:if(a=n&&n.getSrcChannelMediaInfo(),!a)throw new B(P.UNEXPECTED_ERROR,"can not find source config");return s.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},s;case qn.SetSourceUserId:if(a=n&&n.getSrcChannelMediaInfo(),!a)throw new B(P.UNEXPECTED_ERROR,"can not find source config");return s.clientRequest={command:"SetSourceUserId",uid:a.uid+""},s;case qn.SetDestChannel:if(d=n&&n.getDestChannelMediaInfo(),!d)throw new B(P.UNEXPECTED_ERROR,"can not find dest config");return d.forEach(l=>{r.push(l.channelName),i.push(l.uid+""),u.push(l.token||this.joinInfo.appId)}),s.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:u},s;case qn.StartPacketTransfer:return s.clientRequest={command:"StartPacketTransfer"},s;case qn.Reconnect:return s.clientRequest={command:"Reconnect"},s;case qn.StopPacketTransfer:return s.clientRequest={command:"StopPacketTransfer"},s;case qn.UpdateDestChannel:if(d=n&&n.getDestChannelMediaInfo(),!d)throw new B(P.UNEXPECTED_ERROR,"can not find dest config");return d.forEach(l=>{r.push(l.channelName),i.push(l.uid+""),u.push(l.token||this.joinInfo.appId)}),s.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:u},s}return s}}var oL;let sL=Qn("AgoraRTCPlayer","trackId")(oL=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(t){t!==this._videoElementStatus&&(T.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(t)),Qo("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(t)),this._videoElementStatus=t)}constructor(t){v(this,"trackId",void 0),v(this,"config",void 0),v(this,"onFirstVideoFrameDecoded",void 0),v(this,"freezeTimeCounterList",[]),v(this,"timeUpdatedCount",0),v(this,"freezeTime",0),v(this,"playbackTime",0),v(this,"lastTimeUpdatedTime",0),v(this,"videoTrack",void 0),v(this,"container",void 0),v(this,"videoElement",void 0),v(this,"videoElementCheckInterval",void 0),v(this,"_videoElementStatus",Fn.NONE),v(this,"slot",void 0),v(this,"isGettingVideoDimensions",!1),v(this,"handleVideoEvents",e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Fn.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Fn.CANPLAY;break;case"stalled":this.videoElementStatus=Fn.STALLED;break;case"suspend":this.videoElementStatus=Fn.SUSPEND;break;case"pause":this.videoElementStatus=Fn.PAUSED,!_r()&&!xo()&&this.videoElement&&this.videoTrack&&this.videoTrack.readyState==="live"&&(T.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),wt("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=Fn.WAITING;break;case"abort":this.videoElementStatus=Fn.ABORT;break;case"ended":this.videoElementStatus=Fn.ENDED;break;case"emptied":this.videoElementStatus=Fn.EMPTIED;break;case"timeupdate":{const n=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=n);const r=n-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=n,r>500&&(this.freezeTime+=r),this.playbackTime+=r;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),v(this,"startGetVideoDimensions",()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return T.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),at("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()}),v(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&this.videoTrack.readyState==="live"&&ae.curState==="running"&&($1()?(T.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):tN()?(T.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):$b()&&(T.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),v(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&this.videoTrack.readyState==="live"&&($1()?(T.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):tN()?(T.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):$b()&&(T.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=t.element,this.trackId=t.trackId,this.updateConfig(t),ae.on(rn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ae.on(rn.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(t){this.config=t,this.trackId=t.trackId;const e=t.element;e!==this.slot&&(this.destroy(),this.slot=e),this.createElements()}updateVideoTrack(t){this.videoTrack!==t&&(this.videoTrack=t,this.createElements())}play(t){if(this.videoElement){const e=this.videoElement.play();e&&e.catch&&e.catch(r=>{t&&ot.autoplayFailed(t,"video",r.message,this.trackId),at("warning",this,"play",r.toString(),"error"),r.name==="NotAllowedError"?(T.warning("detected video element autoplay failed",r),this.handleAutoPlayFailed()):T.warning("[".concat(this.trackId,"] play warning: "),r)});const n=ye();if((n.name==="Safari"&&Number(n.version)===15||Hc())&&e&&e.then&&e.catch){const r=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};e.then(r).catch(r)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const t=document.createElement("canvas");t.width=this.videoElement.videoWidth,t.height=this.videoElement.videoHeight;const e=t.getContext("2d");if(!e)return T.error("create canvas context failed!"),at("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);e.drawImage(this.videoElement,0,0,t.width,t.height);const n=e.getImageData(0,0,t.width,t.height);return t.remove(),n}destroy(){if(ae.off(rn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ae.off(rn.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Fn.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Fn.ERROR,this.container&&this.container.appendChild(this.videoElement),aL.forEach(n=>{this.videoElement&&this.videoElement.addEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Fn.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const t=ye();t.name==="Safari"&&Number(t.version)===15||Hc()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Cr()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Cr()&&this.videoElement.load());const e=this.videoElement.play();e!==void 0&&e.catch(n=>{T.debug("[".concat(this.trackId,"] playback interrupted"),n.toString()),wt("debug",this,"play back interrupted: ".concat(n.toString()))})}removeVideoElement(){if(this.videoElement){aL.forEach(t=>{this.videoElement&&this.videoElement.removeEventListener(t,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=void 0,this.videoElementStatus=Fn.NONE}}handleAutoPlayFailed(){const t=ye();if(this.videoElement){const e=n=>{n.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{T.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),wt("debug",this,"video element autoplay resumed")}).catch(r=>{T.error(r)}),t.os!=="Android"||t.name!=="Chrome"&&t.name!==me.WECHAT?(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0)):document.body.removeEventListener("click",e,!0))};t.os!=="Android"||t.name!=="Chrome"&&t.name!==me.WECHAT?(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)):document.body.addEventListener("click",e,!0),UD()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||oL;const aL=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var cL={exports:{}};function jtt(t,e,n){const r=t.createShader(n);if(!r)return new B(P.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(r);return t.deleteShader(r),new B(P.WEBGL_INTERNAL_ERROR,"error compiling shader:"+i).throw()}return r}function Vtt(t,e,n,r){const i=[];for(let u=0;u<e.length;++u){const s=u===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER;i.push(jtt(t,e[u],s))}return function(u,s,d,a){const l=u.createProgram();if(!l)throw new B(P.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(s.forEach(A=>{u.attachShader(l,A)}),d&&d.forEach((A,p)=>{u.bindAttribLocation(l,a?a[p]:p,A)}),u.linkProgram(l),!u.getProgramParameter(l,u.LINK_STATUS)){const A=u.getProgramInfoLog(l);throw u.deleteProgram(l),new B(P.WEBGL_INTERNAL_ERROR,"error in program linking:"+A)}return l}(t,i,n,r)}(function(t,e){t.exports=(()=>{var n={3476:(s,d,a)=>{s.exports=a(7460)},4341:(s,d,a)=>{s.exports=a(3685)},3536:(s,d,a)=>{var l=a(1910);s.exports=l},8171:(s,d,a)=>{a(6450);var l=a(4058).Object,A=s.exports=function(p,f,E){return l.defineProperty(p,f,E)};l.defineProperty.sham&&(A.sham=!0)},2956:(s,d,a)=>{a(7627),a(6274),a(5967),a(8881),a(4560),a(7206),a(4349),a(7971);var l=a(4058);s.exports=l.Promise},3685:(s,d,a)=>{var l=a(3536);s.exports=l},4883:(s,d,a)=>{var l=a(1899),A=a(7475),p=a(9826),f=l.TypeError;s.exports=function(E){if(A(E))return E;throw f(p(E)+" is not a function")}},174:(s,d,a)=>{var l=a(1899),A=a(4284),p=a(9826),f=l.TypeError;s.exports=function(E){if(A(E))return E;throw f(p(E)+" is not a constructor")}},1851:(s,d,a)=>{var l=a(1899),A=a(7475),p=l.String,f=l.TypeError;s.exports=function(E){if(typeof E=="object"||A(E))return E;throw f("Can't set "+p(E)+" as a prototype")}},8479:s=>{s.exports=function(){}},5743:(s,d,a)=>{var l=a(1899),A=a(7046),p=l.TypeError;s.exports=function(f,E){if(A(E,f))return f;throw p("Incorrect invocation")}},6059:(s,d,a)=>{var l=a(1899),A=a(941),p=l.String,f=l.TypeError;s.exports=function(E){if(A(E))return E;throw f(p(E)+" is not an object")}},1692:(s,d,a)=>{var l=a(4529),A=a(9413),p=a(623),f=function(E){return function(C,_,y){var R,O=l(C),D=p(O),L=A(y,D);if(E&&_!=_){for(;D>L;)if((R=O[L++])!=R)return!0}else for(;D>L;L++)if((E||L in O)&&O[L]===_)return E||L||0;return!E&&-1}};s.exports={includes:f(!0),indexOf:f(!1)}},3765:(s,d,a)=>{var l=a(5329);s.exports=l([].slice)},1385:(s,d,a)=>{var l=a(9813)("iterator"),A=!1;try{var p=0,f={next:function(){return{done:!!p++}},return:function(){A=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}s.exports=function(E,C){if(!C&&!A)return!1;var _=!1;try{var y={};y[l]=function(){return{next:function(){return{done:_=!0}}}},E(y)}catch{}return _}},2532:(s,d,a)=>{var l=a(5329),A=l({}.toString),p=l("".slice);s.exports=function(f){return p(A(f),8,-1)}},9697:(s,d,a)=>{var l=a(1899),A=a(2885),p=a(7475),f=a(2532),E=a(9813)("toStringTag"),C=l.Object,_=f(function(){return arguments}())=="Arguments";s.exports=A?f:function(y){var R,O,D;return y===void 0?"Undefined":y===null?"Null":typeof(O=function(L,G){try{return L[G]}catch{}}(R=C(y),E))=="string"?O:_?f(R):(D=f(R))=="Object"&&p(R.callee)?"Arguments":D}},8694:(s,d,a)=>{var l=a(5329)("".replace),A=String(Error("zxcasd").stack),p=/\n\s*at [^:]*:[^\n]*/,f=p.test(A);s.exports=function(E,C){if(f&&typeof E=="string")for(;C--;)E=l(E,p,"");return E}},3489:(s,d,a)=>{var l=a(953),A=a(1136),p=a(9677),f=a(5988);s.exports=function(E,C,_){for(var y=A(C),R=f.f,O=p.f,D=0;D<y.length;D++){var L=y[D];l(E,L)||_&&l(_,L)||R(E,L,O(C,L))}}},4160:(s,d,a)=>{var l=a(5981);s.exports=!l(function(){function A(){}return A.prototype.constructor=null,Object.getPrototypeOf(new A)!==A.prototype})},1046:(s,d,a)=>{var l=a(5143).IteratorPrototype,A=a(9290),p=a(1887),f=a(904),E=a(2077),C=function(){return this};s.exports=function(_,y,R,O){var D=y+" Iterator";return _.prototype=A(l,{next:p(+!O,R)}),f(_,D,!1,!0),E[D]=C,_}},2029:(s,d,a)=>{var l=a(5746),A=a(5988),p=a(1887);s.exports=l?function(f,E,C){return A.f(f,E,p(1,C))}:function(f,E,C){return f[E]=C,f}},1887:s=>{s.exports=function(d,a){return{enumerable:!(1&d),configurable:!(2&d),writable:!(4&d),value:a}}},7771:(s,d,a)=>{var l=a(6887),A=a(8834),p=a(2529),f=a(9417),E=a(7475),C=a(1046),_=a(249),y=a(8929),R=a(904),O=a(2029),D=a(9754),L=a(9813),G=a(2077),Z=a(5143),nt=f.PROPER,it=f.CONFIGURABLE,St=Z.IteratorPrototype,ht=Z.BUGGY_SAFARI_ITERATORS,It=L("iterator"),J="keys",U="values",j="entries",Y=function(){return this};s.exports=function(ft,x,V,q,dt,mt,tt){C(V,x,q);var I,w,k,X=function(dn){if(dn===dt&&Ie)return Ie;if(!ht&&dn in Gt)return Gt[dn];switch(dn){case J:case U:case j:return function(){return new V(this,dn)}}return function(){return new V(this)}},pt=x+" Iterator",Ht=!1,Gt=ft.prototype,Jt=Gt[It]||Gt["@@iterator"]||dt&&Gt[dt],Ie=!ht&&Jt||X(dt),Bn=x=="Array"&&Gt.entries||Jt;if(Bn&&(I=_(Bn.call(new ft)))!==Object.prototype&&I.next&&(p||_(I)===St||(y?y(I,St):E(I[It])||D(I,It,Y)),R(I,pt,!0,!0),p&&(G[pt]=Y)),nt&&dt==U&&Jt&&Jt.name!==U&&(!p&&it?O(Gt,"name",U):(Ht=!0,Ie=function(){return A(Jt,this)})),dt)if(w={values:X(U),keys:mt?Ie:X(J),entries:X(j)},tt)for(k in w)(ht||Ht||!(k in Gt))&&D(Gt,k,w[k]);else l({target:x,proto:!0,forced:ht||Ht},w);return p&&!tt||Gt[It]===Ie||D(Gt,It,Ie,{name:dt}),G[x]=Ie,w}},5746:(s,d,a)=>{var l=a(5981);s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},1333:(s,d,a)=>{var l=a(1899),A=a(941),p=l.document,f=A(p)&&A(p.createElement);s.exports=function(E){return f?p.createElement(E):{}}},3281:s=>{s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:s=>{s.exports=typeof window=="object"},4470:(s,d,a)=>{var l=a(2861),A=a(1899);s.exports=/ipad|iphone|ipod/i.test(l)&&A.Pebble!==void 0},2749:(s,d,a)=>{var l=a(2861);s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},6049:(s,d,a)=>{var l=a(2532),A=a(1899);s.exports=l(A.process)=="process"},8045:(s,d,a)=>{var l=a(2861);s.exports=/web0s(?!.*chrome)/i.test(l)},2861:(s,d,a)=>{var l=a(626);s.exports=l("navigator","userAgent")||""},3385:(s,d,a)=>{var l,A,p=a(1899),f=a(2861),E=p.process,C=p.Deno,_=E&&E.versions||C&&C.version,y=_&&_.v8;y&&(A=(l=y.split("."))[0]>0&&l[0]<4?1:+(l[0]+l[1])),!A&&f&&(!(l=f.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=f.match(/Chrome\/(\d+)/))&&(A=+l[1]),s.exports=A},6759:s=>{s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(s,d,a)=>{var l=a(5981),A=a(1887);s.exports=!l(function(){var p=Error("a");return!("stack"in p)||(Object.defineProperty(p,"stack",A(1,7)),p.stack!==7)})},6887:(s,d,a)=>{var l=a(1899),A=a(9730),p=a(5329),f=a(7475),E=a(9677).f,C=a(7252),_=a(4058),y=a(6843),R=a(2029),O=a(953),D=function(L){var G=function(Z,nt,it){if(this instanceof G){switch(arguments.length){case 0:return new L;case 1:return new L(Z);case 2:return new L(Z,nt)}return new L(Z,nt,it)}return A(L,this,arguments)};return G.prototype=L.prototype,G};s.exports=function(L,G){var Z,nt,it,St,ht,It,J,U,j=L.target,Y=L.global,ft=L.stat,x=L.proto,V=Y?l:ft?l[j]:(l[j]||{}).prototype,q=Y?_:_[j]||R(_,j,{})[j],dt=q.prototype;for(it in G)Z=!C(Y?it:j+(ft?".":"#")+it,L.forced)&&V&&O(V,it),ht=q[it],Z&&(It=L.noTargetGet?(U=E(V,it))&&U.value:V[it]),St=Z&&It?It:G[it],Z&&typeof ht==typeof St||(J=L.bind&&Z?y(St,l):L.wrap&&Z?D(St):x&&f(St)?p(St):St,(L.sham||St&&St.sham||ht&&ht.sham)&&R(J,"sham",!0),R(q,it,J),x&&(O(_,nt=j+"Prototype")||R(_,nt,{}),R(_[nt],it,St),L.real&&dt&&!dt[it]&&R(dt,it,St)))}},5981:s=>{s.exports=function(d){try{return!!d()}catch{return!0}}},9730:(s,d,a)=>{var l=a(8285),A=Function.prototype,p=A.apply,f=A.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(l?f.bind(p):function(){return f.apply(p,arguments)})},6843:(s,d,a)=>{var l=a(5329),A=a(4883),p=a(8285),f=l(l.bind);s.exports=function(E,C){return A(E),C===void 0?E:p?f(E,C):function(){return E.apply(C,arguments)}}},8285:(s,d,a)=>{var l=a(5981);s.exports=!l(function(){var A=function(){}.bind();return typeof A!="function"||A.hasOwnProperty("prototype")})},8834:(s,d,a)=>{var l=a(8285),A=Function.prototype.call;s.exports=l?A.bind(A):function(){return A.apply(A,arguments)}},9417:(s,d,a)=>{var l=a(5746),A=a(953),p=Function.prototype,f=l&&Object.getOwnPropertyDescriptor,E=A(p,"name"),C=E&&function(){}.name==="something",_=E&&(!l||l&&f(p,"name").configurable);s.exports={EXISTS:E,PROPER:C,CONFIGURABLE:_}},5329:(s,d,a)=>{var l=a(8285),A=Function.prototype,p=A.bind,f=A.call,E=l&&p.bind(f,f);s.exports=l?function(C){return C&&E(C)}:function(C){return C&&function(){return f.apply(C,arguments)}}},626:(s,d,a)=>{var l=a(4058),A=a(1899),p=a(7475),f=function(E){return p(E)?E:void 0};s.exports=function(E,C){return arguments.length<2?f(l[E])||f(A[E]):l[E]&&l[E][C]||A[E]&&A[E][C]}},2902:(s,d,a)=>{var l=a(9697),A=a(4229),p=a(2077),f=a(9813)("iterator");s.exports=function(E){if(E!=null)return A(E,f)||A(E,"@@iterator")||p[l(E)]}},429:(s,d,a)=>{var l=a(1899),A=a(8834),p=a(4883),f=a(6059),E=a(9826),C=a(2902),_=l.TypeError;s.exports=function(y,R){var O=arguments.length<2?C(y):R;if(p(O))return f(A(O,y));throw _(E(y)+" is not iterable")}},4229:(s,d,a)=>{var l=a(4883);s.exports=function(A,p){var f=A[p];return f==null?void 0:l(f)}},1899:(s,d,a)=>{var l=function(A){return A&&A.Math==Math&&A};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a.g=="object"&&a.g)||function(){return this}()||Function("return this")()},953:(s,d,a)=>{var l=a(5329),A=a(9678),p=l({}.hasOwnProperty);s.exports=Object.hasOwn||function(f,E){return p(A(f),E)}},7748:s=>{s.exports={}},4845:(s,d,a)=>{var l=a(1899);s.exports=function(A,p){var f=l.console;f&&f.error&&(arguments.length==1?f.error(A):f.error(A,p))}},5463:(s,d,a)=>{var l=a(626);s.exports=l("document","documentElement")},2840:(s,d,a)=>{var l=a(5746),A=a(5981),p=a(1333);s.exports=!l&&!A(function(){return Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a!=7})},7026:(s,d,a)=>{var l=a(1899),A=a(5329),p=a(5981),f=a(2532),E=l.Object,C=A("".split);s.exports=p(function(){return!E("z").propertyIsEnumerable(0)})?function(_){return f(_)=="String"?C(_,""):E(_)}:E},1302:(s,d,a)=>{var l=a(5329),A=a(7475),p=a(3030),f=l(Function.toString);A(p.inspectSource)||(p.inspectSource=function(E){return f(E)}),s.exports=p.inspectSource},3794:(s,d,a)=>{var l=a(941),A=a(2029);s.exports=function(p,f){l(f)&&"cause"in f&&A(p,"cause",f.cause)}},5402:(s,d,a)=>{var l,A,p,f=a(8019),E=a(1899),C=a(5329),_=a(941),y=a(2029),R=a(953),O=a(3030),D=a(4262),L=a(7748),G="Object already initialized",Z=E.TypeError,nt=E.WeakMap;if(f||O.state){var it=O.state||(O.state=new nt),St=C(it.get),ht=C(it.has),It=C(it.set);l=function(U,j){if(ht(it,U))throw new Z(G);return j.facade=U,It(it,U,j),j},A=function(U){return St(it,U)||{}},p=function(U){return ht(it,U)}}else{var J=D("state");L[J]=!0,l=function(U,j){if(R(U,J))throw new Z(G);return j.facade=U,y(U,J,j),j},A=function(U){return R(U,J)?U[J]:{}},p=function(U){return R(U,J)}}s.exports={set:l,get:A,has:p,enforce:function(U){return p(U)?A(U):l(U,{})},getterFor:function(U){return function(j){var Y;if(!_(j)||(Y=A(j)).type!==U)throw Z("Incompatible receiver, "+U+" required");return Y}}}},6782:(s,d,a)=>{var l=a(9813),A=a(2077),p=l("iterator"),f=Array.prototype;s.exports=function(E){return E!==void 0&&(A.Array===E||f[p]===E)}},7475:s=>{s.exports=function(d){return typeof d=="function"}},4284:(s,d,a)=>{var l=a(5329),A=a(5981),p=a(7475),f=a(9697),E=a(626),C=a(1302),_=function(){},y=[],R=E("Reflect","construct"),O=/^\s*(?:class|function)\b/,D=l(O.exec),L=!O.exec(_),G=function(nt){if(!p(nt))return!1;try{return R(_,y,nt),!0}catch{return!1}},Z=function(nt){if(!p(nt))return!1;switch(f(nt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return L||!!D(O,C(nt))}catch{return!0}};Z.sham=!0,s.exports=!R||A(function(){var nt;return G(G.call)||!G(Object)||!G(function(){nt=!0})||nt})?Z:G},7252:(s,d,a)=>{var l=a(5981),A=a(7475),p=/#|\.prototype\./,f=function(R,O){var D=C[E(R)];return D==y||D!=_&&(A(O)?l(O):!!O)},E=f.normalize=function(R){return String(R).replace(p,".").toLowerCase()},C=f.data={},_=f.NATIVE="N",y=f.POLYFILL="P";s.exports=f},941:(s,d,a)=>{var l=a(7475);s.exports=function(A){return typeof A=="object"?A!==null:l(A)}},2529:s=>{s.exports=!0},6664:(s,d,a)=>{var l=a(1899),A=a(626),p=a(7475),f=a(7046),E=a(2302),C=l.Object;s.exports=E?function(_){return typeof _=="symbol"}:function(_){var y=A("Symbol");return p(y)&&f(y.prototype,C(_))}},3091:(s,d,a)=>{var l=a(1899),A=a(6843),p=a(8834),f=a(6059),E=a(9826),C=a(6782),_=a(623),y=a(7046),R=a(429),O=a(2902),D=a(7609),L=l.TypeError,G=function(nt,it){this.stopped=nt,this.result=it},Z=G.prototype;s.exports=function(nt,it,St){var ht,It,J,U,j,Y,ft,x=St&&St.that,V=!(!St||!St.AS_ENTRIES),q=!(!St||!St.IS_ITERATOR),dt=!(!St||!St.INTERRUPTED),mt=A(it,x),tt=function(w){return ht&&D(ht,"normal",w),new G(!0,w)},I=function(w){return V?(f(w),dt?mt(w[0],w[1],tt):mt(w[0],w[1])):dt?mt(w,tt):mt(w)};if(q)ht=nt;else{if(!(It=O(nt)))throw L(E(nt)+" is not iterable");if(C(It)){for(J=0,U=_(nt);U>J;J++)if((j=I(nt[J]))&&y(Z,j))return j;return new G(!1)}ht=R(nt,It)}for(Y=ht.next;!(ft=p(Y,ht)).done;){try{j=I(ft.value)}catch(w){D(ht,"throw",w)}if(typeof j=="object"&&j&&y(Z,j))return j}return new G(!1)}},7609:(s,d,a)=>{var l=a(8834),A=a(6059),p=a(4229);s.exports=function(f,E,C){var _,y;A(f);try{if(!(_=p(f,"return"))){if(E==="throw")throw C;return C}_=l(_,f)}catch(R){y=!0,_=R}if(E==="throw")throw C;if(y)throw _;return A(_),C}},5143:(s,d,a)=>{var l,A,p,f=a(5981),E=a(7475),C=a(9290),_=a(249),y=a(9754),R=a(9813),O=a(2529),D=R("iterator"),L=!1;[].keys&&("next"in(p=[].keys())?(A=_(_(p)))!==Object.prototype&&(l=A):L=!0),l==null||f(function(){var G={};return l[D].call(G)!==G})?l={}:O&&(l=C(l)),E(l[D])||y(l,D,function(){return this}),s.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:L}},2077:s=>{s.exports={}},623:(s,d,a)=>{var l=a(3057);s.exports=function(A){return l(A.length)}},6132:(s,d,a)=>{var l,A,p,f,E,C,_,y,R=a(1899),O=a(6843),D=a(9677).f,L=a(2941).set,G=a(2749),Z=a(4470),nt=a(8045),it=a(6049),St=R.MutationObserver||R.WebKitMutationObserver,ht=R.document,It=R.process,J=R.Promise,U=D(R,"queueMicrotask"),j=U&&U.value;j||(l=function(){var Y,ft;for(it&&(Y=It.domain)&&Y.exit();A;){ft=A.fn,A=A.next;try{ft()}catch(x){throw A?f():p=void 0,x}}p=void 0,Y&&Y.enter()},G||it||nt||!St||!ht?!Z&&J&&J.resolve?((_=J.resolve(void 0)).constructor=J,y=O(_.then,_),f=function(){y(l)}):it?f=function(){It.nextTick(l)}:(L=O(L,R),f=function(){L(l)}):(E=!0,C=ht.createTextNode(""),new St(l).observe(C,{characterData:!0}),f=function(){C.data=E=!E})),s.exports=j||function(Y){var ft={fn:Y,next:void 0};p&&(p.next=ft),A||(A=ft,f()),p=ft}},9297:(s,d,a)=>{var l=a(1899);s.exports=l.Promise},2497:(s,d,a)=>{var l=a(3385),A=a(5981);s.exports=!!Object.getOwnPropertySymbols&&!A(function(){var p=Symbol();return!String(p)||!(Object(p)instanceof Symbol)||!Symbol.sham&&l&&l<41})},8019:(s,d,a)=>{var l=a(1899),A=a(7475),p=a(1302),f=l.WeakMap;s.exports=A(f)&&/native code/.test(p(f))},9520:(s,d,a)=>{var l=a(4883),A=function(p){var f,E;this.promise=new p(function(C,_){if(f!==void 0||E!==void 0)throw TypeError("Bad Promise constructor");f=C,E=_}),this.resolve=l(f),this.reject=l(E)};s.exports.f=function(p){return new A(p)}},4649:(s,d,a)=>{var l=a(5803);s.exports=function(A,p){return A===void 0?arguments.length<2?"":p:l(A)}},9290:(s,d,a)=>{var l,A=a(6059),p=a(9938),f=a(6759),E=a(7748),C=a(5463),_=a(1333),y=a(4262)("IE_PROTO"),R=function(){},O=function(G){return"<script>"+G+"<\/script>"},D=function(G){G.write(O("")),G.close();var Z=G.parentWindow.Object;return G=null,Z},L=function(){try{l=new ActiveXObject("htmlfile")}catch{}var G,Z;L=typeof document!="undefined"?document.domain&&l?D(l):((Z=_("iframe")).style.display="none",C.appendChild(Z),Z.src=String("javascript:"),(G=Z.contentWindow.document).open(),G.write(O("document.F=Object")),G.close(),G.F):D(l);for(var nt=f.length;nt--;)delete L.prototype[f[nt]];return L()};E[y]=!0,s.exports=Object.create||function(G,Z){var nt;return G!==null?(R.prototype=A(G),nt=new R,R.prototype=null,nt[y]=G):nt=L(),Z===void 0?nt:p.f(nt,Z)}},9938:(s,d,a)=>{var l=a(5746),A=a(3937),p=a(5988),f=a(6059),E=a(4529),C=a(4771);d.f=l&&!A?Object.defineProperties:function(_,y){f(_);for(var R,O=E(y),D=C(y),L=D.length,G=0;L>G;)p.f(_,R=D[G++],O[R]);return _}},5988:(s,d,a)=>{var l=a(1899),A=a(5746),p=a(2840),f=a(3937),E=a(6059),C=a(3894),_=l.TypeError,y=Object.defineProperty,R=Object.getOwnPropertyDescriptor;d.f=A?f?function(O,D,L){if(E(O),D=C(D),E(L),typeof O=="function"&&D==="prototype"&&"value"in L&&"writable"in L&&!L.writable){var G=R(O,D);G&&G.writable&&(O[D]=L.value,L={configurable:"configurable"in L?L.configurable:G.configurable,enumerable:"enumerable"in L?L.enumerable:G.enumerable,writable:!1})}return y(O,D,L)}:y:function(O,D,L){if(E(O),D=C(D),E(L),p)try{return y(O,D,L)}catch{}if("get"in L||"set"in L)throw _("Accessors not supported");return"value"in L&&(O[D]=L.value),O}},9677:(s,d,a)=>{var l=a(5746),A=a(8834),p=a(6760),f=a(1887),E=a(4529),C=a(3894),_=a(953),y=a(2840),R=Object.getOwnPropertyDescriptor;d.f=l?R:function(O,D){if(O=E(O),D=C(D),y)try{return R(O,D)}catch{}if(_(O,D))return f(!A(p.f,O,D),O[D])}},946:(s,d,a)=>{var l=a(5629),A=a(6759).concat("length","prototype");d.f=Object.getOwnPropertyNames||function(p){return l(p,A)}},7857:(s,d)=>{d.f=Object.getOwnPropertySymbols},249:(s,d,a)=>{var l=a(1899),A=a(953),p=a(7475),f=a(9678),E=a(4262),C=a(4160),_=E("IE_PROTO"),y=l.Object,R=y.prototype;s.exports=C?y.getPrototypeOf:function(O){var D=f(O);if(A(D,_))return D[_];var L=D.constructor;return p(L)&&D instanceof L?L.prototype:D instanceof y?R:null}},7046:(s,d,a)=>{var l=a(5329);s.exports=l({}.isPrototypeOf)},5629:(s,d,a)=>{var l=a(5329),A=a(953),p=a(4529),f=a(1692).indexOf,E=a(7748),C=l([].push);s.exports=function(_,y){var R,O=p(_),D=0,L=[];for(R in O)!A(E,R)&&A(O,R)&&C(L,R);for(;y.length>D;)A(O,R=y[D++])&&(~f(L,R)||C(L,R));return L}},4771:(s,d,a)=>{var l=a(5629),A=a(6759);s.exports=Object.keys||function(p){return l(p,A)}},6760:(s,d)=>{var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,A=l&&!a.call({1:2},1);d.f=A?function(p){var f=l(this,p);return!!f&&f.enumerable}:a},8929:(s,d,a)=>{var l=a(5329),A=a(6059),p=a(1851);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var f,E=!1,C={};try{(f=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(C,[]),E=C instanceof Array}catch{}return function(_,y){return A(_),p(y),E?f(_,y):_.__proto__=y,_}}():void 0)},5623:(s,d,a)=>{var l=a(2885),A=a(9697);s.exports=l?{}.toString:function(){return"[object "+A(this)+"]"}},9811:(s,d,a)=>{var l=a(1899),A=a(8834),p=a(7475),f=a(941),E=l.TypeError;s.exports=function(C,_){var y,R;if(_==="string"&&p(y=C.toString)&&!f(R=A(y,C))||p(y=C.valueOf)&&!f(R=A(y,C))||_!=="string"&&p(y=C.toString)&&!f(R=A(y,C)))return R;throw E("Can't convert object to primitive value")}},1136:(s,d,a)=>{var l=a(626),A=a(5329),p=a(946),f=a(7857),E=a(6059),C=A([].concat);s.exports=l("Reflect","ownKeys")||function(_){var y=p.f(E(_)),R=f.f;return R?C(y,R(_)):y}},4058:s=>{s.exports={}},2:s=>{s.exports=function(d){try{return{error:!1,value:d()}}catch(a){return{error:!0,value:a}}}},6584:(s,d,a)=>{var l=a(6059),A=a(941),p=a(9520);s.exports=function(f,E){if(l(f),A(E)&&E.constructor===f)return E;var C=p.f(f);return(0,C.resolve)(E),C.promise}},8397:s=>{var d=function(){this.head=null,this.tail=null};d.prototype={add:function(a){var l={item:a,next:null};this.head?this.tail.next=l:this.head=l,this.tail=l},get:function(){var a=this.head;if(a)return this.head=a.next,this.tail===a&&(this.tail=null),a.item}},s.exports=d},7524:(s,d,a)=>{var l=a(9754);s.exports=function(A,p,f){for(var E in p)f&&f.unsafe&&A[E]?A[E]=p[E]:l(A,E,p[E],f);return A}},9754:(s,d,a)=>{var l=a(2029);s.exports=function(A,p,f,E){E&&E.enumerable?A[p]=f:l(A,p,f)}},8219:(s,d,a)=>{var l=a(1899).TypeError;s.exports=function(A){if(A==null)throw l("Can't call method on "+A);return A}},4911:(s,d,a)=>{var l=a(1899),A=Object.defineProperty;s.exports=function(p,f){try{A(l,p,{value:f,configurable:!0,writable:!0})}catch{l[p]=f}return f}},4431:(s,d,a)=>{var l=a(626),A=a(5988),p=a(9813),f=a(5746),E=p("species");s.exports=function(C){var _=l(C),y=A.f;f&&_&&!_[E]&&y(_,E,{configurable:!0,get:function(){return this}})}},904:(s,d,a)=>{var l=a(2885),A=a(5988).f,p=a(2029),f=a(953),E=a(5623),C=a(9813)("toStringTag");s.exports=function(_,y,R,O){if(_){var D=R?_:_.prototype;f(D,C)||A(D,C,{configurable:!0,value:y}),O&&!l&&p(D,"toString",E)}}},4262:(s,d,a)=>{var l=a(8726),A=a(9418),p=l("keys");s.exports=function(f){return p[f]||(p[f]=A(f))}},3030:(s,d,a)=>{var l=a(1899),A=a(4911),p="__core-js_shared__",f=l[p]||A(p,{});s.exports=f},8726:(s,d,a)=>{var l=a(2529),A=a(3030);(s.exports=function(p,f){return A[p]||(A[p]=f!==void 0?f:{})})("versions",[]).push({version:"3.20.3",mode:l?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(s,d,a)=>{var l=a(6059),A=a(174),p=a(9813)("species");s.exports=function(f,E){var C,_=l(f).constructor;return _===void 0||(C=l(_)[p])==null?E:A(C)}},4620:(s,d,a)=>{var l=a(5329),A=a(2435),p=a(5803),f=a(8219),E=l("".charAt),C=l("".charCodeAt),_=l("".slice),y=function(R){return function(O,D){var L,G,Z=p(f(O)),nt=A(D),it=Z.length;return nt<0||nt>=it?R?"":void 0:(L=C(Z,nt))<55296||L>56319||nt+1===it||(G=C(Z,nt+1))<56320||G>57343?R?E(Z,nt):L:R?_(Z,nt,nt+2):G-56320+(L-55296<<10)+65536}};s.exports={codeAt:y(!1),charAt:y(!0)}},2941:(s,d,a)=>{var l,A,p,f,E=a(1899),C=a(9730),_=a(6843),y=a(7475),R=a(953),O=a(5981),D=a(5463),L=a(3765),G=a(1333),Z=a(2749),nt=a(6049),it=E.setImmediate,St=E.clearImmediate,ht=E.process,It=E.Dispatch,J=E.Function,U=E.MessageChannel,j=E.String,Y=0,ft={};try{l=E.location}catch{}var x=function(mt){if(R(ft,mt)){var tt=ft[mt];delete ft[mt],tt()}},V=function(mt){return function(){x(mt)}},q=function(mt){x(mt.data)},dt=function(mt){E.postMessage(j(mt),l.protocol+"//"+l.host)};it&&St||(it=function(mt){var tt=L(arguments,1);return ft[++Y]=function(){C(y(mt)?mt:J(mt),void 0,tt)},A(Y),Y},St=function(mt){delete ft[mt]},nt?A=function(mt){ht.nextTick(V(mt))}:It&&It.now?A=function(mt){It.now(V(mt))}:U&&!Z?(f=(p=new U).port2,p.port1.onmessage=q,A=_(f.postMessage,f)):E.addEventListener&&y(E.postMessage)&&!E.importScripts&&l&&l.protocol!=="file:"&&!O(dt)?(A=dt,E.addEventListener("message",q,!1)):A="onreadystatechange"in G("script")?function(mt){D.appendChild(G("script")).onreadystatechange=function(){D.removeChild(this),x(mt)}}:function(mt){setTimeout(V(mt),0)}),s.exports={set:it,clear:St}},9413:(s,d,a)=>{var l=a(2435),A=Math.max,p=Math.min;s.exports=function(f,E){var C=l(f);return C<0?A(C+E,0):p(C,E)}},4529:(s,d,a)=>{var l=a(7026),A=a(8219);s.exports=function(p){return l(A(p))}},2435:s=>{var d=Math.ceil,a=Math.floor;s.exports=function(l){var A=+l;return A!=A||A===0?0:(A>0?a:d)(A)}},3057:(s,d,a)=>{var l=a(2435),A=Math.min;s.exports=function(p){return p>0?A(l(p),9007199254740991):0}},9678:(s,d,a)=>{var l=a(1899),A=a(8219),p=l.Object;s.exports=function(f){return p(A(f))}},6935:(s,d,a)=>{var l=a(1899),A=a(8834),p=a(941),f=a(6664),E=a(4229),C=a(9811),_=a(9813),y=l.TypeError,R=_("toPrimitive");s.exports=function(O,D){if(!p(O)||f(O))return O;var L,G=E(O,R);if(G){if(D===void 0&&(D="default"),L=A(G,O,D),!p(L)||f(L))return L;throw y("Can't convert object to primitive value")}return D===void 0&&(D="number"),C(O,D)}},3894:(s,d,a)=>{var l=a(6935),A=a(6664);s.exports=function(p){var f=l(p,"string");return A(f)?f:f+""}},2885:(s,d,a)=>{var l={};l[a(9813)("toStringTag")]="z",s.exports=String(l)==="[object z]"},5803:(s,d,a)=>{var l=a(1899),A=a(9697),p=l.String;s.exports=function(f){if(A(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return p(f)}},9826:(s,d,a)=>{var l=a(1899).String;s.exports=function(A){try{return l(A)}catch{return"Object"}}},9418:(s,d,a)=>{var l=a(5329),A=0,p=Math.random(),f=l(1 .toString);s.exports=function(E){return"Symbol("+(E===void 0?"":E)+")_"+f(++A+p,36)}},2302:(s,d,a)=>{var l=a(2497);s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3937:(s,d,a)=>{var l=a(5746),A=a(5981);s.exports=l&&A(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},9813:(s,d,a)=>{var l=a(1899),A=a(8726),p=a(953),f=a(9418),E=a(2497),C=a(2302),_=A("wks"),y=l.Symbol,R=y&&y.for,O=C?y:y&&y.withoutSetter||f;s.exports=function(D){if(!p(_,D)||!E&&typeof _[D]!="string"){var L="Symbol."+D;E&&p(y,D)?_[D]=y[D]:_[D]=C&&R?R(L):O(L)}return _[D]}},7627:(s,d,a)=>{var l=a(6887),A=a(1899),p=a(7046),f=a(249),E=a(8929),C=a(3489),_=a(9290),y=a(2029),R=a(1887),O=a(8694),D=a(3794),L=a(3091),G=a(4649),Z=a(9813),nt=a(8780),it=Z("toStringTag"),St=A.Error,ht=[].push,It=function(U,j){var Y,ft=arguments.length>2?arguments[2]:void 0,x=p(J,this);E?Y=E(new St,x?f(this):J):(Y=x?this:_(J),y(Y,it,"Error")),j!==void 0&&y(Y,"message",G(j)),nt&&y(Y,"stack",O(Y.stack,1)),D(Y,ft);var V=[];return L(U,ht,{that:V}),y(Y,"errors",V),Y};E?E(It,St):C(It,St,{name:!0});var J=It.prototype=_(St.prototype,{constructor:R(1,It),message:R(1,""),name:R(1,"AggregateError")});l({global:!0},{AggregateError:It})},6274:(s,d,a)=>{var l=a(4529),A=a(8479),p=a(2077),f=a(5402),E=a(5988).f,C=a(7771),_=a(2529),y=a(5746),R="Array Iterator",O=f.set,D=f.getterFor(R);s.exports=C(Array,"Array",function(G,Z){O(this,{type:R,target:l(G),index:0,kind:Z})},function(){var G=D(this),Z=G.target,nt=G.kind,it=G.index++;return!Z||it>=Z.length?(G.target=void 0,{value:void 0,done:!0}):nt=="keys"?{value:it,done:!1}:nt=="values"?{value:Z[it],done:!1}:{value:[it,Z[it]],done:!1}},"values");var L=p.Arguments=p.Array;if(A("keys"),A("values"),A("entries"),!_&&y&&L.name!=="values")try{E(L,"name",{value:"values"})}catch{}},6450:(s,d,a)=>{var l=a(6887),A=a(5746),p=a(5988).f;l({target:"Object",stat:!0,forced:Object.defineProperty!==p,sham:!A},{defineProperty:p})},5967:()=>{},4560:(s,d,a)=>{var l=a(6887),A=a(8834),p=a(4883),f=a(9520),E=a(2),C=a(3091);l({target:"Promise",stat:!0},{allSettled:function(_){var y=this,R=f.f(y),O=R.resolve,D=R.reject,L=E(function(){var G=p(y.resolve),Z=[],nt=0,it=1;C(_,function(St){var ht=nt++,It=!1;it++,A(G,y,St).then(function(J){It||(It=!0,Z[ht]={status:"fulfilled",value:J},--it||O(Z))},function(J){It||(It=!0,Z[ht]={status:"rejected",reason:J},--it||O(Z))})}),--it||O(Z)});return L.error&&D(L.value),R.promise}})},7206:(s,d,a)=>{var l=a(6887),A=a(4883),p=a(626),f=a(8834),E=a(9520),C=a(2),_=a(3091),y="No one promise resolved";l({target:"Promise",stat:!0},{any:function(R){var O=this,D=p("AggregateError"),L=E.f(O),G=L.resolve,Z=L.reject,nt=C(function(){var it=A(O.resolve),St=[],ht=0,It=1,J=!1;_(R,function(U){var j=ht++,Y=!1;It++,f(it,O,U).then(function(ft){Y||J||(J=!0,G(ft))},function(ft){Y||J||(Y=!0,St[j]=ft,--It||Z(new D(St,y)))})}),--It||Z(new D(St,y))});return nt.error&&Z(nt.value),L.promise}})},4349:(s,d,a)=>{var l=a(6887),A=a(2529),p=a(9297),f=a(5981),E=a(626),C=a(7475),_=a(487),y=a(6584),R=a(9754);if(l({target:"Promise",proto:!0,real:!0,forced:!!p&&f(function(){p.prototype.finally.call({then:function(){}},function(){})})},{finally:function(D){var L=_(this,E("Promise")),G=C(D);return this.then(G?function(Z){return y(L,D()).then(function(){return Z})}:D,G?function(Z){return y(L,D()).then(function(){throw Z})}:D)}}),!A&&C(p)){var O=E("Promise").prototype.finally;p.prototype.finally!==O&&R(p.prototype,"finally",O,{unsafe:!0})}},8881:(s,d,a)=>{var l,A,p,f,E=a(6887),C=a(2529),_=a(1899),y=a(626),R=a(8834),O=a(9297),D=a(9754),L=a(7524),G=a(8929),Z=a(904),nt=a(4431),it=a(4883),St=a(7475),ht=a(941),It=a(5743),J=a(1302),U=a(3091),j=a(1385),Y=a(487),ft=a(2941).set,x=a(6132),V=a(6584),q=a(4845),dt=a(9520),mt=a(2),tt=a(8397),I=a(5402),w=a(7252),k=a(9813),X=a(3321),pt=a(6049),Ht=a(3385),Gt=k("species"),Jt="Promise",Ie=I.getterFor(Jt),Bn=I.set,dn=I.getterFor(Jt),be=O&&O.prototype,ve=O,Ze=be,or=_.TypeError,br=_.document,Je=_.process,$o=dt.f,K_=$o,K=!!(br&&br.createEvent&&_.dispatchEvent),N=St(_.PromiseRejectionEvent),Q="unhandledrejection",z=!1,H=w(Jt,function(){var Ct=J(ve),bt=Ct!==String(ve);if(!bt&&Ht===66||C&&!Ze.finally)return!0;if(Ht>=51&&/native code/.test(Ct))return!1;var zt=new ve(function(ln){ln(1)}),Ce=function(ln){ln(function(){},function(){})};return(zt.constructor={})[Gt]=Ce,!(z=zt.then(function(){})instanceof Ce)||!bt&&X&&!N}),lt=H||!j(function(Ct){ve.all(Ct).catch(function(){})}),ut=function(Ct){var bt;return!(!ht(Ct)||!St(bt=Ct.then))&&bt},Tt=function(Ct,bt){var zt,Ce,ln,vo=bt.value,wu=bt.state==1,ec=wu?Ct.ok:Ct.fail,Cf=Ct.resolve,Fs=Ct.reject,js=Ct.domain;try{ec?(wu||(bt.rejection===2&&Kt(bt),bt.rejection=1),ec===!0?zt=vo:(js&&js.enter(),zt=ec(vo),js&&(js.exit(),ln=!0)),zt===Ct.promise?Fs(or("Promise-chain cycle")):(Ce=ut(zt))?R(Ce,zt,Cf,Fs):Cf(zt)):Fs(vo)}catch(H_){js&&!ln&&js.exit(),Fs(H_)}},Wt=function(Ct,bt){Ct.notified||(Ct.notified=!0,x(function(){for(var zt,Ce=Ct.reactions;zt=Ce.get();)Tt(zt,Ct);Ct.notified=!1,bt&&!Ct.rejection&&Et(Ct)}))},Xt=function(Ct,bt,zt){var Ce,ln;K?((Ce=br.createEvent("Event")).promise=bt,Ce.reason=zt,Ce.initEvent(Ct,!1,!0),_.dispatchEvent(Ce)):Ce={promise:bt,reason:zt},!N&&(ln=_["on"+Ct])?ln(Ce):Ct===Q&&q("Unhandled promise rejection",zt)},Et=function(Ct){R(ft,_,function(){var bt,zt=Ct.facade,Ce=Ct.value;if(Ot(Ct)&&(bt=mt(function(){pt?Je.emit("unhandledRejection",Ce,zt):Xt(Q,zt,Ce)}),Ct.rejection=pt||Ot(Ct)?2:1,bt.error))throw bt.value})},Ot=function(Ct){return Ct.rejection!==1&&!Ct.parent},Kt=function(Ct){R(ft,_,function(){var bt=Ct.facade;pt?Je.emit("rejectionHandled",bt):Xt("rejectionhandled",bt,Ct.value)})},ce=function(Ct,bt,zt){return function(Ce){Ct(bt,Ce,zt)}},xe=function(Ct,bt,zt){Ct.done||(Ct.done=!0,zt&&(Ct=zt),Ct.value=bt,Ct.state=2,Wt(Ct,!0))},Gn=function(Ct,bt,zt){if(!Ct.done){Ct.done=!0,zt&&(Ct=zt);try{if(Ct.facade===bt)throw or("Promise can't be resolved itself");var Ce=ut(bt);Ce?x(function(){var ln={done:!1};try{R(Ce,bt,ce(Gn,ln,Ct),ce(xe,ln,Ct))}catch(vo){xe(ln,vo,Ct)}}):(Ct.value=bt,Ct.state=1,Wt(Ct,!1))}catch(ln){xe({done:!1},ln,Ct)}}};if(H&&(Ze=(ve=function(Ct){It(this,Ze),it(Ct),R(l,this);var bt=Ie(this);try{Ct(ce(Gn,bt),ce(xe,bt))}catch(zt){xe(bt,zt)}}).prototype,(l=function(Ct){Bn(this,{type:Jt,done:!1,notified:!1,parent:!1,reactions:new tt,rejection:!1,state:0,value:void 0})}).prototype=L(Ze,{then:function(Ct,bt){var zt=dn(this),Ce=$o(Y(this,ve));return zt.parent=!0,Ce.ok=!St(Ct)||Ct,Ce.fail=St(bt)&&bt,Ce.domain=pt?Je.domain:void 0,zt.state==0?zt.reactions.add(Ce):x(function(){Tt(Ce,zt)}),Ce.promise},catch:function(Ct){return this.then(void 0,Ct)}}),A=function(){var Ct=new l,bt=Ie(Ct);this.promise=Ct,this.resolve=ce(Gn,bt),this.reject=ce(xe,bt)},dt.f=$o=function(Ct){return Ct===ve||Ct===p?new A(Ct):K_(Ct)},!C&&St(O)&&be!==Object.prototype)){f=be.then,z||(D(be,"then",function(Ct,bt){var zt=this;return new ve(function(Ce,ln){R(f,zt,Ce,ln)}).then(Ct,bt)},{unsafe:!0}),D(be,"catch",Ze.catch,{unsafe:!0}));try{delete be.constructor}catch{}G&&G(be,Ze)}E({global:!0,wrap:!0,forced:H},{Promise:ve}),Z(ve,Jt,!1,!0),nt(Jt),p=y(Jt),E({target:Jt,stat:!0,forced:H},{reject:function(Ct){var bt=$o(this);return R(bt.reject,void 0,Ct),bt.promise}}),E({target:Jt,stat:!0,forced:C||H},{resolve:function(Ct){return V(C&&this===p?ve:this,Ct)}}),E({target:Jt,stat:!0,forced:lt},{all:function(Ct){var bt=this,zt=$o(bt),Ce=zt.resolve,ln=zt.reject,vo=mt(function(){var wu=it(bt.resolve),ec=[],Cf=0,Fs=1;U(Ct,function(js){var H_=Cf++,h3=!1;Fs++,R(wu,bt,js).then(function(Unt){h3||(h3=!0,ec[H_]=Unt,--Fs||Ce(ec))},ln)}),--Fs||Ce(ec)});return vo.error&&ln(vo.value),zt.promise},race:function(Ct){var bt=this,zt=$o(bt),Ce=zt.reject,ln=mt(function(){var vo=it(bt.resolve);U(Ct,function(wu){R(vo,bt,wu).then(zt.resolve,Ce)})});return ln.error&&Ce(ln.value),zt.promise}})},7971:(s,d,a)=>{var l=a(4620).charAt,A=a(5803),p=a(5402),f=a(7771),E="String Iterator",C=p.set,_=p.getterFor(E);f(String,"String",function(y){C(this,{type:E,string:A(y),index:0})},function(){var y,R=_(this),O=R.string,D=R.index;return D>=O.length?{value:void 0,done:!0}:(y=l(O,D),R.index+=y.length,{value:y,done:!1})})},7634:(s,d,a)=>{a(6274);var l=a(3281),A=a(1899),p=a(9697),f=a(2029),E=a(2077),C=a(9813)("toStringTag");for(var _ in l){var y=A[_],R=y&&y.prototype;R&&p(R)!==C&&f(R,C,_),E[_]=E.Array}},1910:(s,d,a)=>{var l=a(8171);s.exports=l},7460:(s,d,a)=>{var l=a(2956);a(7634),s.exports=l},9662:(s,d,a)=>{var l=a(7854),A=a(614),p=a(6330),f=l.TypeError;s.exports=function(E){if(A(E))return E;throw f(p(E)+" is not a function")}},6077:(s,d,a)=>{var l=a(7854),A=a(614),p=l.String,f=l.TypeError;s.exports=function(E){if(typeof E=="object"||A(E))return E;throw f("Can't set "+p(E)+" as a prototype")}},1223:(s,d,a)=>{var l=a(5112),A=a(30),p=a(3070),f=l("unscopables"),E=Array.prototype;E[f]==null&&p.f(E,f,{configurable:!0,value:A(null)}),s.exports=function(C){E[f][C]=!0}},9670:(s,d,a)=>{var l=a(7854),A=a(111),p=l.String,f=l.TypeError;s.exports=function(E){if(A(E))return E;throw f(p(E)+" is not an object")}},1318:(s,d,a)=>{var l=a(5656),A=a(1400),p=a(6244),f=function(E){return function(C,_,y){var R,O=l(C),D=p(O),L=A(y,D);if(E&&_!=_){for(;D>L;)if((R=O[L++])!=R)return!0}else for(;D>L;L++)if((E||L in O)&&O[L]===_)return E||L||0;return!E&&-1}};s.exports={includes:f(!0),indexOf:f(!1)}},4326:(s,d,a)=>{var l=a(1702),A=l({}.toString),p=l("".slice);s.exports=function(f){return p(A(f),8,-1)}},648:(s,d,a)=>{var l=a(7854),A=a(1694),p=a(614),f=a(4326),E=a(5112)("toStringTag"),C=l.Object,_=f(function(){return arguments}())=="Arguments";s.exports=A?f:function(y){var R,O,D;return y===void 0?"Undefined":y===null?"Null":typeof(O=function(L,G){try{return L[G]}catch{}}(R=C(y),E))=="string"?O:_?f(R):(D=f(R))=="Object"&&p(R.callee)?"Arguments":D}},7741:(s,d,a)=>{var l=a(1702)("".replace),A=String(Error("zxcasd").stack),p=/\n\s*at [^:]*:[^\n]*/,f=p.test(A);s.exports=function(E,C){if(f&&typeof E=="string")for(;C--;)E=l(E,p,"");return E}},9920:(s,d,a)=>{var l=a(2597),A=a(3887),p=a(1236),f=a(3070);s.exports=function(E,C,_){for(var y=A(C),R=f.f,O=p.f,D=0;D<y.length;D++){var L=y[D];l(E,L)||_&&l(_,L)||R(E,L,O(C,L))}}},8544:(s,d,a)=>{var l=a(7293);s.exports=!l(function(){function A(){}return A.prototype.constructor=null,Object.getPrototypeOf(new A)!==A.prototype})},4994:(s,d,a)=>{var l=a(3383).IteratorPrototype,A=a(30),p=a(9114),f=a(8003),E=a(7497),C=function(){return this};s.exports=function(_,y,R,O){var D=y+" Iterator";return _.prototype=A(l,{next:p(+!O,R)}),f(_,D,!1,!0),E[D]=C,_}},8880:(s,d,a)=>{var l=a(9781),A=a(3070),p=a(9114);s.exports=l?function(f,E,C){return A.f(f,E,p(1,C))}:function(f,E,C){return f[E]=C,f}},9114:s=>{s.exports=function(d,a){return{enumerable:!(1&d),configurable:!(2&d),writable:!(4&d),value:a}}},654:(s,d,a)=>{var l=a(2109),A=a(6916),p=a(1913),f=a(6530),E=a(614),C=a(4994),_=a(9518),y=a(7674),R=a(8003),O=a(8880),D=a(1320),L=a(5112),G=a(7497),Z=a(3383),nt=f.PROPER,it=f.CONFIGURABLE,St=Z.IteratorPrototype,ht=Z.BUGGY_SAFARI_ITERATORS,It=L("iterator"),J="keys",U="values",j="entries",Y=function(){return this};s.exports=function(ft,x,V,q,dt,mt,tt){C(V,x,q);var I,w,k,X=function(dn){if(dn===dt&&Ie)return Ie;if(!ht&&dn in Gt)return Gt[dn];switch(dn){case J:case U:case j:return function(){return new V(this,dn)}}return function(){return new V(this)}},pt=x+" Iterator",Ht=!1,Gt=ft.prototype,Jt=Gt[It]||Gt["@@iterator"]||dt&&Gt[dt],Ie=!ht&&Jt||X(dt),Bn=x=="Array"&&Gt.entries||Jt;if(Bn&&(I=_(Bn.call(new ft)))!==Object.prototype&&I.next&&(p||_(I)===St||(y?y(I,St):E(I[It])||D(I,It,Y)),R(I,pt,!0,!0),p&&(G[pt]=Y)),nt&&dt==U&&Jt&&Jt.name!==U&&(!p&&it?O(Gt,"name",U):(Ht=!0,Ie=function(){return A(Jt,this)})),dt)if(w={values:X(U),keys:mt?Ie:X(J),entries:X(j)},tt)for(k in w)(ht||Ht||!(k in Gt))&&D(Gt,k,w[k]);else l({target:x,proto:!0,forced:ht||Ht},w);return p&&!tt||Gt[It]===Ie||D(Gt,It,Ie,{name:dt}),G[x]=Ie,w}},9781:(s,d,a)=>{var l=a(7293);s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(s,d,a)=>{var l=a(7854),A=a(111),p=l.document,f=A(p)&&A(p.createElement);s.exports=function(E){return f?p.createElement(E):{}}},8324:s=>{s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(s,d,a)=>{var l=a(317)("span").classList,A=l&&l.constructor&&l.constructor.prototype;s.exports=A===Object.prototype?void 0:A},8113:(s,d,a)=>{var l=a(5005);s.exports=l("navigator","userAgent")||""},7392:(s,d,a)=>{var l,A,p=a(7854),f=a(8113),E=p.process,C=p.Deno,_=E&&E.versions||C&&C.version,y=_&&_.v8;y&&(A=(l=y.split("."))[0]>0&&l[0]<4?1:+(l[0]+l[1])),!A&&f&&(!(l=f.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=f.match(/Chrome\/(\d+)/))&&(A=+l[1]),s.exports=A},748:s=>{s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(s,d,a)=>{var l=a(7293),A=a(9114);s.exports=!l(function(){var p=Error("a");return!("stack"in p)||(Object.defineProperty(p,"stack",A(1,7)),p.stack!==7)})},2109:(s,d,a)=>{var l=a(7854),A=a(1236).f,p=a(8880),f=a(1320),E=a(3505),C=a(9920),_=a(4705);s.exports=function(y,R){var O,D,L,G,Z,nt=y.target,it=y.global,St=y.stat;if(O=it?l:St?l[nt]||E(nt,{}):(l[nt]||{}).prototype)for(D in R){if(G=R[D],L=y.noTargetGet?(Z=A(O,D))&&Z.value:O[D],!_(it?D:nt+(St?".":"#")+D,y.forced)&&L!==void 0){if(typeof G==typeof L)continue;C(G,L)}(y.sham||L&&L.sham)&&p(G,"sham",!0),f(O,D,G,y)}}},7293:s=>{s.exports=function(d){try{return!!d()}catch{return!0}}},2104:(s,d,a)=>{var l=a(4374),A=Function.prototype,p=A.apply,f=A.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(l?f.bind(p):function(){return f.apply(p,arguments)})},4374:(s,d,a)=>{var l=a(7293);s.exports=!l(function(){var A=function(){}.bind();return typeof A!="function"||A.hasOwnProperty("prototype")})},6916:(s,d,a)=>{var l=a(4374),A=Function.prototype.call;s.exports=l?A.bind(A):function(){return A.apply(A,arguments)}},6530:(s,d,a)=>{var l=a(9781),A=a(2597),p=Function.prototype,f=l&&Object.getOwnPropertyDescriptor,E=A(p,"name"),C=E&&function(){}.name==="something",_=E&&(!l||l&&f(p,"name").configurable);s.exports={EXISTS:E,PROPER:C,CONFIGURABLE:_}},1702:(s,d,a)=>{var l=a(4374),A=Function.prototype,p=A.bind,f=A.call,E=l&&p.bind(f,f);s.exports=l?function(C){return C&&E(C)}:function(C){return C&&function(){return f.apply(C,arguments)}}},5005:(s,d,a)=>{var l=a(7854),A=a(614),p=function(f){return A(f)?f:void 0};s.exports=function(f,E){return arguments.length<2?p(l[f]):l[f]&&l[f][E]}},8173:(s,d,a)=>{var l=a(9662);s.exports=function(A,p){var f=A[p];return f==null?void 0:l(f)}},7854:(s,d,a)=>{var l=function(A){return A&&A.Math==Math&&A};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a.g=="object"&&a.g)||function(){return this}()||Function("return this")()},2597:(s,d,a)=>{var l=a(1702),A=a(7908),p=l({}.hasOwnProperty);s.exports=Object.hasOwn||function(f,E){return p(A(f),E)}},3501:s=>{s.exports={}},490:(s,d,a)=>{var l=a(5005);s.exports=l("document","documentElement")},4664:(s,d,a)=>{var l=a(9781),A=a(7293),p=a(317);s.exports=!l&&!A(function(){return Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a!=7})},8361:(s,d,a)=>{var l=a(7854),A=a(1702),p=a(7293),f=a(4326),E=l.Object,C=A("".split);s.exports=p(function(){return!E("z").propertyIsEnumerable(0)})?function(_){return f(_)=="String"?C(_,""):E(_)}:E},9587:(s,d,a)=>{var l=a(614),A=a(111),p=a(7674);s.exports=function(f,E,C){var _,y;return p&&l(_=E.constructor)&&_!==C&&A(y=_.prototype)&&y!==C.prototype&&p(f,y),f}},2788:(s,d,a)=>{var l=a(1702),A=a(614),p=a(5465),f=l(Function.toString);A(p.inspectSource)||(p.inspectSource=function(E){return f(E)}),s.exports=p.inspectSource},8340:(s,d,a)=>{var l=a(111),A=a(8880);s.exports=function(p,f){l(f)&&"cause"in f&&A(p,"cause",f.cause)}},9909:(s,d,a)=>{var l,A,p,f=a(8536),E=a(7854),C=a(1702),_=a(111),y=a(8880),R=a(2597),O=a(5465),D=a(6200),L=a(3501),G="Object already initialized",Z=E.TypeError,nt=E.WeakMap;if(f||O.state){var it=O.state||(O.state=new nt),St=C(it.get),ht=C(it.has),It=C(it.set);l=function(U,j){if(ht(it,U))throw new Z(G);return j.facade=U,It(it,U,j),j},A=function(U){return St(it,U)||{}},p=function(U){return ht(it,U)}}else{var J=D("state");L[J]=!0,l=function(U,j){if(R(U,J))throw new Z(G);return j.facade=U,y(U,J,j),j},A=function(U){return R(U,J)?U[J]:{}},p=function(U){return R(U,J)}}s.exports={set:l,get:A,has:p,enforce:function(U){return p(U)?A(U):l(U,{})},getterFor:function(U){return function(j){var Y;if(!_(j)||(Y=A(j)).type!==U)throw Z("Incompatible receiver, "+U+" required");return Y}}}},614:s=>{s.exports=function(d){return typeof d=="function"}},4705:(s,d,a)=>{var l=a(7293),A=a(614),p=/#|\.prototype\./,f=function(R,O){var D=C[E(R)];return D==y||D!=_&&(A(O)?l(O):!!O)},E=f.normalize=function(R){return String(R).replace(p,".").toLowerCase()},C=f.data={},_=f.NATIVE="N",y=f.POLYFILL="P";s.exports=f},111:(s,d,a)=>{var l=a(614);s.exports=function(A){return typeof A=="object"?A!==null:l(A)}},1913:s=>{s.exports=!1},2190:(s,d,a)=>{var l=a(7854),A=a(5005),p=a(614),f=a(7976),E=a(3307),C=l.Object;s.exports=E?function(_){return typeof _=="symbol"}:function(_){var y=A("Symbol");return p(y)&&f(y.prototype,C(_))}},3383:(s,d,a)=>{var l,A,p,f=a(7293),E=a(614),C=a(30),_=a(9518),y=a(1320),R=a(5112),O=a(1913),D=R("iterator"),L=!1;[].keys&&("next"in(p=[].keys())?(A=_(_(p)))!==Object.prototype&&(l=A):L=!0),l==null||f(function(){var G={};return l[D].call(G)!==G})?l={}:O&&(l=C(l)),E(l[D])||y(l,D,function(){return this}),s.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:L}},7497:s=>{s.exports={}},6244:(s,d,a)=>{var l=a(7466);s.exports=function(A){return l(A.length)}},133:(s,d,a)=>{var l=a(7392),A=a(7293);s.exports=!!Object.getOwnPropertySymbols&&!A(function(){var p=Symbol();return!String(p)||!(Object(p)instanceof Symbol)||!Symbol.sham&&l&&l<41})},8536:(s,d,a)=>{var l=a(7854),A=a(614),p=a(2788),f=l.WeakMap;s.exports=A(f)&&/native code/.test(p(f))},6277:(s,d,a)=>{var l=a(1340);s.exports=function(A,p){return A===void 0?arguments.length<2?"":p:l(A)}},30:(s,d,a)=>{var l,A=a(9670),p=a(6048),f=a(748),E=a(3501),C=a(490),_=a(317),y=a(6200)("IE_PROTO"),R=function(){},O=function(G){return"<script>"+G+"<\/script>"},D=function(G){G.write(O("")),G.close();var Z=G.parentWindow.Object;return G=null,Z},L=function(){try{l=new ActiveXObject("htmlfile")}catch{}var G,Z;L=typeof document!="undefined"?document.domain&&l?D(l):((Z=_("iframe")).style.display="none",C.appendChild(Z),Z.src=String("javascript:"),(G=Z.contentWindow.document).open(),G.write(O("document.F=Object")),G.close(),G.F):D(l);for(var nt=f.length;nt--;)delete L.prototype[f[nt]];return L()};E[y]=!0,s.exports=Object.create||function(G,Z){var nt;return G!==null?(R.prototype=A(G),nt=new R,R.prototype=null,nt[y]=G):nt=L(),Z===void 0?nt:p.f(nt,Z)}},6048:(s,d,a)=>{var l=a(9781),A=a(3353),p=a(3070),f=a(9670),E=a(5656),C=a(1956);d.f=l&&!A?Object.defineProperties:function(_,y){f(_);for(var R,O=E(y),D=C(y),L=D.length,G=0;L>G;)p.f(_,R=D[G++],O[R]);return _}},3070:(s,d,a)=>{var l=a(7854),A=a(9781),p=a(4664),f=a(3353),E=a(9670),C=a(4948),_=l.TypeError,y=Object.defineProperty,R=Object.getOwnPropertyDescriptor;d.f=A?f?function(O,D,L){if(E(O),D=C(D),E(L),typeof O=="function"&&D==="prototype"&&"value"in L&&"writable"in L&&!L.writable){var G=R(O,D);G&&G.writable&&(O[D]=L.value,L={configurable:"configurable"in L?L.configurable:G.configurable,enumerable:"enumerable"in L?L.enumerable:G.enumerable,writable:!1})}return y(O,D,L)}:y:function(O,D,L){if(E(O),D=C(D),E(L),p)try{return y(O,D,L)}catch{}if("get"in L||"set"in L)throw _("Accessors not supported");return"value"in L&&(O[D]=L.value),O}},1236:(s,d,a)=>{var l=a(9781),A=a(6916),p=a(5296),f=a(9114),E=a(5656),C=a(4948),_=a(2597),y=a(4664),R=Object.getOwnPropertyDescriptor;d.f=l?R:function(O,D){if(O=E(O),D=C(D),y)try{return R(O,D)}catch{}if(_(O,D))return f(!A(p.f,O,D),O[D])}},8006:(s,d,a)=>{var l=a(6324),A=a(748).concat("length","prototype");d.f=Object.getOwnPropertyNames||function(p){return l(p,A)}},5181:(s,d)=>{d.f=Object.getOwnPropertySymbols},9518:(s,d,a)=>{var l=a(7854),A=a(2597),p=a(614),f=a(7908),E=a(6200),C=a(8544),_=E("IE_PROTO"),y=l.Object,R=y.prototype;s.exports=C?y.getPrototypeOf:function(O){var D=f(O);if(A(D,_))return D[_];var L=D.constructor;return p(L)&&D instanceof L?L.prototype:D instanceof y?R:null}},7976:(s,d,a)=>{var l=a(1702);s.exports=l({}.isPrototypeOf)},6324:(s,d,a)=>{var l=a(1702),A=a(2597),p=a(5656),f=a(1318).indexOf,E=a(3501),C=l([].push);s.exports=function(_,y){var R,O=p(_),D=0,L=[];for(R in O)!A(E,R)&&A(O,R)&&C(L,R);for(;y.length>D;)A(O,R=y[D++])&&(~f(L,R)||C(L,R));return L}},1956:(s,d,a)=>{var l=a(6324),A=a(748);s.exports=Object.keys||function(p){return l(p,A)}},5296:(s,d)=>{var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,A=l&&!a.call({1:2},1);d.f=A?function(p){var f=l(this,p);return!!f&&f.enumerable}:a},7674:(s,d,a)=>{var l=a(1702),A=a(9670),p=a(6077);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var f,E=!1,C={};try{(f=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(C,[]),E=C instanceof Array}catch{}return function(_,y){return A(_),p(y),E?f(_,y):_.__proto__=y,_}}():void 0)},2140:(s,d,a)=>{var l=a(7854),A=a(6916),p=a(614),f=a(111),E=l.TypeError;s.exports=function(C,_){var y,R;if(_==="string"&&p(y=C.toString)&&!f(R=A(y,C))||p(y=C.valueOf)&&!f(R=A(y,C))||_!=="string"&&p(y=C.toString)&&!f(R=A(y,C)))return R;throw E("Can't convert object to primitive value")}},3887:(s,d,a)=>{var l=a(5005),A=a(1702),p=a(8006),f=a(5181),E=a(9670),C=A([].concat);s.exports=l("Reflect","ownKeys")||function(_){var y=p.f(E(_)),R=f.f;return R?C(y,R(_)):y}},1320:(s,d,a)=>{var l=a(7854),A=a(614),p=a(2597),f=a(8880),E=a(3505),C=a(2788),_=a(9909),y=a(6530).CONFIGURABLE,R=_.get,O=_.enforce,D=String(String).split("String");(s.exports=function(L,G,Z,nt){var it,St=!!nt&&!!nt.unsafe,ht=!!nt&&!!nt.enumerable,It=!!nt&&!!nt.noTargetGet,J=nt&&nt.name!==void 0?nt.name:G;A(Z)&&(String(J).slice(0,7)==="Symbol("&&(J="["+String(J).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!p(Z,"name")||y&&Z.name!==J)&&f(Z,"name",J),(it=O(Z)).source||(it.source=D.join(typeof J=="string"?J:""))),L!==l?(St?!It&&L[G]&&(ht=!0):delete L[G],ht?L[G]=Z:f(L,G,Z)):ht?L[G]=Z:E(G,Z)})(Function.prototype,"toString",function(){return A(this)&&R(this).source||C(this)})},2261:(s,d,a)=>{var l,A,p=a(6916),f=a(1702),E=a(1340),C=a(7066),_=a(2999),y=a(2309),R=a(30),O=a(9909).get,D=a(9441),L=a(7168),G=y("native-string-replace",String.prototype.replace),Z=RegExp.prototype.exec,nt=Z,it=f("".charAt),St=f("".indexOf),ht=f("".replace),It=f("".slice),J=(A=/b*/g,p(Z,l=/a/,"a"),p(Z,A,"a"),l.lastIndex!==0||A.lastIndex!==0),U=_.BROKEN_CARET,j=/()??/.exec("")[1]!==void 0;(J||j||U||D||L)&&(nt=function(Y){var ft,x,V,q,dt,mt,tt,I=this,w=O(I),k=E(Y),X=w.raw;if(X)return X.lastIndex=I.lastIndex,ft=p(nt,X,k),I.lastIndex=X.lastIndex,ft;var pt=w.groups,Ht=U&&I.sticky,Gt=p(C,I),Jt=I.source,Ie=0,Bn=k;if(Ht&&(Gt=ht(Gt,"y",""),St(Gt,"g")===-1&&(Gt+="g"),Bn=It(k,I.lastIndex),I.lastIndex>0&&(!I.multiline||I.multiline&&it(k,I.lastIndex-1)!==`
`)&&(Jt="(?: "+Jt+")",Bn=" "+Bn,Ie++),x=new RegExp("^(?:"+Jt+")",Gt)),j&&(x=new RegExp("^"+Jt+"$(?!\\s)",Gt)),J&&(V=I.lastIndex),q=p(Z,Ht?x:I,Bn),Ht?q?(q.input=It(q.input,Ie),q[0]=It(q[0],Ie),q.index=I.lastIndex,I.lastIndex+=q[0].length):I.lastIndex=0:J&&q&&(I.lastIndex=I.global?q.index+q[0].length:V),j&&q&&q.length>1&&p(G,q[0],x,function(){for(dt=1;dt<arguments.length-2;dt++)arguments[dt]===void 0&&(q[dt]=void 0)}),q&&pt)for(q.groups=mt=R(null),dt=0;dt<pt.length;dt++)mt[(tt=pt[dt])[0]]=q[tt[1]];return q}),s.exports=nt},7066:(s,d,a)=>{var l=a(9670);s.exports=function(){var A=l(this),p="";return A.global&&(p+="g"),A.ignoreCase&&(p+="i"),A.multiline&&(p+="m"),A.dotAll&&(p+="s"),A.unicode&&(p+="u"),A.sticky&&(p+="y"),p}},2999:(s,d,a)=>{var l=a(7293),A=a(7854).RegExp,p=l(function(){var C=A("a","y");return C.lastIndex=2,C.exec("abcd")!=null}),f=p||l(function(){return!A("a","y").sticky}),E=p||l(function(){var C=A("^r","gy");return C.lastIndex=2,C.exec("str")!=null});s.exports={BROKEN_CARET:E,MISSED_STICKY:f,UNSUPPORTED_Y:p}},9441:(s,d,a)=>{var l=a(7293),A=a(7854).RegExp;s.exports=l(function(){var p=A(".","s");return!(p.dotAll&&p.exec(`
`)&&p.flags==="s")})},7168:(s,d,a)=>{var l=a(7293),A=a(7854).RegExp;s.exports=l(function(){var p=A("(?<a>b)","g");return p.exec("b").groups.a!=="b"||"b".replace(p,"$<a>c")!=="bc"})},4488:(s,d,a)=>{var l=a(7854).TypeError;s.exports=function(A){if(A==null)throw l("Can't call method on "+A);return A}},3505:(s,d,a)=>{var l=a(7854),A=Object.defineProperty;s.exports=function(p,f){try{A(l,p,{value:f,configurable:!0,writable:!0})}catch{l[p]=f}return f}},8003:(s,d,a)=>{var l=a(3070).f,A=a(2597),p=a(5112)("toStringTag");s.exports=function(f,E,C){f&&!C&&(f=f.prototype),f&&!A(f,p)&&l(f,p,{configurable:!0,value:E})}},6200:(s,d,a)=>{var l=a(2309),A=a(9711),p=l("keys");s.exports=function(f){return p[f]||(p[f]=A(f))}},5465:(s,d,a)=>{var l=a(7854),A=a(3505),p="__core-js_shared__",f=l[p]||A(p,{});s.exports=f},2309:(s,d,a)=>{var l=a(1913),A=a(5465);(s.exports=function(p,f){return A[p]||(A[p]=f!==void 0?f:{})})("versions",[]).push({version:"3.20.3",mode:l?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(s,d,a)=>{var l=a(9303),A=Math.max,p=Math.min;s.exports=function(f,E){var C=l(f);return C<0?A(C+E,0):p(C,E)}},5656:(s,d,a)=>{var l=a(8361),A=a(4488);s.exports=function(p){return l(A(p))}},9303:s=>{var d=Math.ceil,a=Math.floor;s.exports=function(l){var A=+l;return A!=A||A===0?0:(A>0?a:d)(A)}},7466:(s,d,a)=>{var l=a(9303),A=Math.min;s.exports=function(p){return p>0?A(l(p),9007199254740991):0}},7908:(s,d,a)=>{var l=a(7854),A=a(4488),p=l.Object;s.exports=function(f){return p(A(f))}},7593:(s,d,a)=>{var l=a(7854),A=a(6916),p=a(111),f=a(2190),E=a(8173),C=a(2140),_=a(5112),y=l.TypeError,R=_("toPrimitive");s.exports=function(O,D){if(!p(O)||f(O))return O;var L,G=E(O,R);if(G){if(D===void 0&&(D="default"),L=A(G,O,D),!p(L)||f(L))return L;throw y("Can't convert object to primitive value")}return D===void 0&&(D="number"),C(O,D)}},4948:(s,d,a)=>{var l=a(7593),A=a(2190);s.exports=function(p){var f=l(p,"string");return A(f)?f:f+""}},1694:(s,d,a)=>{var l={};l[a(5112)("toStringTag")]="z",s.exports=String(l)==="[object z]"},1340:(s,d,a)=>{var l=a(7854),A=a(648),p=l.String;s.exports=function(f){if(A(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return p(f)}},6330:(s,d,a)=>{var l=a(7854).String;s.exports=function(A){try{return l(A)}catch{return"Object"}}},9711:(s,d,a)=>{var l=a(1702),A=0,p=Math.random(),f=l(1 .toString);s.exports=function(E){return"Symbol("+(E===void 0?"":E)+")_"+f(++A+p,36)}},3307:(s,d,a)=>{var l=a(133);s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(s,d,a)=>{var l=a(9781),A=a(7293);s.exports=l&&A(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},5112:(s,d,a)=>{var l=a(7854),A=a(2309),p=a(2597),f=a(9711),E=a(133),C=a(3307),_=A("wks"),y=l.Symbol,R=y&&y.for,O=C?y:y&&y.withoutSetter||f;s.exports=function(D){if(!p(_,D)||!E&&typeof _[D]!="string"){var L="Symbol."+D;E&&p(y,D)?_[D]=y[D]:_[D]=C&&R?R(L):O(L)}return _[D]}},9191:(s,d,a)=>{var l=a(5005),A=a(2597),p=a(8880),f=a(7976),E=a(7674),C=a(9920),_=a(9587),y=a(6277),R=a(8340),O=a(7741),D=a(2914),L=a(1913);s.exports=function(G,Z,nt,it){var St=it?2:1,ht=G.split("."),It=ht[ht.length-1],J=l.apply(null,ht);if(J){var U=J.prototype;if(!L&&A(U,"cause")&&delete U.cause,!nt)return J;var j=l("Error"),Y=Z(function(ft,x){var V=y(it?x:ft,void 0),q=it?new J(ft):new J;return V!==void 0&&p(q,"message",V),D&&p(q,"stack",O(q.stack,2)),this&&f(U,this)&&_(q,this,Y),arguments.length>St&&R(q,arguments[St]),q});if(Y.prototype=U,It!=="Error"&&(E?E(Y,j):C(Y,j,{name:!0})),C(Y,J),!L)try{U.name!==It&&p(U,"name",It),U.constructor=Y}catch{}return Y}}},6992:(s,d,a)=>{var l=a(5656),A=a(1223),p=a(7497),f=a(9909),E=a(3070).f,C=a(654),_=a(1913),y=a(9781),R="Array Iterator",O=f.set,D=f.getterFor(R);s.exports=C(Array,"Array",function(G,Z){O(this,{type:R,target:l(G),index:0,kind:Z})},function(){var G=D(this),Z=G.target,nt=G.kind,it=G.index++;return!Z||it>=Z.length?(G.target=void 0,{value:void 0,done:!0}):nt=="keys"?{value:it,done:!1}:nt=="values"?{value:Z[it],done:!1}:{value:[it,Z[it]],done:!1}},"values");var L=p.Arguments=p.Array;if(A("keys"),A("values"),A("entries"),!_&&y&&L.name!=="values")try{E(L,"name",{value:"values"})}catch{}},1703:(s,d,a)=>{var l=a(2109),A=a(7854),p=a(2104),f=a(9191),E=A.WebAssembly,C=Error("e",{cause:7}).cause!==7,_=function(R,O){var D={};D[R]=f(R,O,C),l({global:!0,forced:C},D)},y=function(R,O){if(E&&E[R]){var D={};D[R]=f("WebAssembly."+R,O,C),l({target:"WebAssembly",stat:!0,forced:C},D)}};_("Error",function(R){return function(O){return p(R,this,arguments)}}),_("EvalError",function(R){return function(O){return p(R,this,arguments)}}),_("RangeError",function(R){return function(O){return p(R,this,arguments)}}),_("ReferenceError",function(R){return function(O){return p(R,this,arguments)}}),_("SyntaxError",function(R){return function(O){return p(R,this,arguments)}}),_("TypeError",function(R){return function(O){return p(R,this,arguments)}}),_("URIError",function(R){return function(O){return p(R,this,arguments)}}),y("CompileError",function(R){return function(O){return p(R,this,arguments)}}),y("LinkError",function(R){return function(O){return p(R,this,arguments)}}),y("RuntimeError",function(R){return function(O){return p(R,this,arguments)}})},4916:(s,d,a)=>{var l=a(2109),A=a(2261);l({target:"RegExp",proto:!0,forced:/./.exec!==A},{exec:A})},3948:(s,d,a)=>{var l=a(7854),A=a(8324),p=a(8509),f=a(6992),E=a(8880),C=a(5112),_=C("iterator"),y=C("toStringTag"),R=f.values,O=function(L,G){if(L){if(L[_]!==R)try{E(L,_,R)}catch{L[_]=R}if(L[y]||E(L,y,G),A[G]){for(var Z in f)if(L[Z]!==f[Z])try{E(L,Z,f[Z])}catch{L[Z]=f[Z]}}}};for(var D in A)O(l[D]&&l[D].prototype,D);O(p,"DOMTokenList")}},r={};function i(s){var d=r[s];if(d!==void 0)return d.exports;var a=r[s]={exports:{}};return n[s](a,a.exports,i),a.exports}i.n=s=>{var d=s&&s.__esModule?()=>s.default:()=>s;return i.d(d,{a:d}),d},i.d=(s,d)=>{for(var a in d)i.o(d,a)&&!i.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:d[a]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(s,d)=>Object.prototype.hasOwnProperty.call(s,d),i.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var u={};return(()=>{i.r(u),i.d(u,{AudioExtension:()=>St,AudioProcessor:()=>nt,Extension:()=>it,Ticker:()=>It,VideoProcessor:()=>Z,logger:()=>_,reporter:()=>O});var s=i(4341);function d(J,U,j){return U in J?s(J,U,{value:j,enumerable:!0,configurable:!0,writable:!0}):J[U]=j,J}i(1703),i(6992),i(3948);var a=i(3476),l=i.n(a);function A(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,U=arguments.length>1?arguments[1]:void 0;const j=Math.random().toString(16).substr(2,J).toLowerCase();return j.length===J?"".concat(U).concat(j):"".concat(U).concat(j)+A(J-j.length,"")}i(4916);const p=Date.now(),f={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function E(){const J=new Date;return J.toTimeString().split(" ")[0]+":"+J.getMilliseconds()}const C=J=>{for(const U in f)if(Object.prototype.hasOwnProperty.call(f,U)&&f[U]===J)return U;return"DEFAULT"},_=new class{constructor(){d(this,"logLevel",f.DEBUG),d(this,"hookLog",void 0)}debug(){for(var J=arguments.length,U=new Array(J),j=0;j<J;j++)U[j]=arguments[j];const Y=[f.DEBUG].concat(U);this.log.apply(this,Y)}info(){for(var J=arguments.length,U=new Array(J),j=0;j<J;j++)U[j]=arguments[j];const Y=[f.INFO].concat(U);this.log.apply(this,Y)}warning(){for(var J=arguments.length,U=new Array(J),j=0;j<J;j++)U[j]=arguments[j];const Y=[f.WARNING].concat(U);this.log.apply(this,Y)}error(){for(var J=arguments.length,U=new Array(J),j=0;j<J;j++)U[j]=arguments[j];const Y=[f.ERROR].concat(U);this.log.apply(this,Y)}log(){for(var J,U=arguments.length,j=new Array(U),Y=0;Y<U;Y++)j[Y]=arguments[Y];if(Date.now()-p<100)return void setTimeout(()=>{this.log(...j)},Date.now()-p);const ft=Math.max(0,Math.min(4,j[0]));if(j[0]=E()+" Agora-Extension [".concat(C(ft),"]:"),ft<this.logLevel)return;const x=E()+" %cAgora-Extension [".concat(C(ft),"]:");let V=[];switch(ft){case f.DEBUG:V=[x,"color: #64B5F6;"].concat(j.slice(1)),console.log.apply(console,V);break;case f.INFO:V=[x,"color: #1E88E5; font-weight: bold;"].concat(j.slice(1)),console.log.apply(console,V);break;case f.WARNING:V=[x,"color: #FB8C00; font-weight: bold;"].concat(j.slice(1)),console.warn.apply(console,V);break;case f.ERROR:V=[x,"color: #B00020; font-weight: bold;"].concat(j.slice(1)),console.error.apply(console,V)}(J=this.hookLog)===null||J===void 0||J.call(this,ft,V)}};function y(J,U){var j=Object.keys(J);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(J);U&&(Y=Y.filter(function(ft){return Object.getOwnPropertyDescriptor(J,ft).enumerable})),j.push.apply(j,Y)}return j}function R(J){for(var U=1;U<arguments.length;U++){var j=arguments[U]!=null?arguments[U]:{};U%2?y(Object(j),!0).forEach(function(Y){d(J,Y,j[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(j)):y(Object(j)).forEach(function(Y){Object.defineProperty(J,Y,Object.getOwnPropertyDescriptor(j,Y))})}return J}const O=new class{constructor(){d(this,"apiInvokeMsgQueue",[]),d(this,"hookApiInvoke",void 0)}reportApiInvoke(J){J.timeout=J.timeout||6e4,J.reportResult=J.reportResult===void 0||J.reportResult;const U=Date.now(),j=()=>({name:J.name,apiInvokeTime:U,options:J.options});let Y=!1;var ft;(ft=J.timeout,new(l())(V=>{window.setTimeout(V,ft)})).then(()=>{Y||(this.sendApiInvoke(R(R({},j()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),_.debug("".concat(J.name," timeout")))});const x=new Error("".concat(J.name,": this api invoke is end"));return{onSuccess:V=>{if(Y)throw x;Y=!0,this.sendApiInvoke(R(R({},j()),{},{success:!0},J.reportResult&&{result:V}))},onError:V=>{if(Y)throw V;Y=!0,this.sendApiInvoke(R(R({},j()),{},{success:!1,error:V.toString()}))}}}sendApiInvoke(J){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,J]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(J)}};function D(J,U){var j=Object.keys(J);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(J);U&&(Y=Y.filter(function(ft){return Object.getOwnPropertyDescriptor(J,ft).enumerable})),j.push.apply(j,Y)}return j}function L(J){for(var U=1;U<arguments.length;U++){var j=arguments[U]!=null?arguments[U]:{};U%2?D(Object(j),!0).forEach(function(Y){d(J,Y,j[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(j)):D(Object(j)).forEach(function(Y){Object.defineProperty(J,Y,Object.getOwnPropertyDescriptor(j,Y))})}return J}class G extends class{constructor(){d(this,"_events",{}),d(this,"addListener",this.on)}getListeners(U){return this._events[U]?this._events[U].map(j=>j.listener):[]}on(U,j){this._events[U]||(this._events[U]=[]);const Y=this._events[U];this._indexOfListener(Y,j)===-1&&Y.push({listener:j,once:!1})}once(U,j){this._events[U]||(this._events[U]=[]);const Y=this._events[U];this._indexOfListener(Y,j)===-1&&Y.push({listener:j,once:!0})}off(U,j){if(!this._events[U])return;const Y=this._events[U],ft=this._indexOfListener(Y,j);ft!==-1&&Y.splice(ft,1),this._events[U].length===0&&delete this._events[U]}removeAllListeners(U){U?delete this._events[U]:this._events={}}emit(U){this._events[U]||(this._events[U]=[]);const j=this._events[U].map(V=>V);for(var Y=arguments.length,ft=new Array(Y>1?Y-1:0),x=1;x<Y;x++)ft[x-1]=arguments[x];for(let V=0;V<j.length;V+=1){const q=j[V];q.once&&this.off(U,q.listener),q.listener.apply(this,ft||[])}}_indexOfListener(U,j){let Y=U.length;for(;Y--;)if(U[Y].listener===j)return Y;return-1}emitAsPromise(U){for(var j=arguments.length,Y=new Array(j>1?j-1:0),ft=1;ft<j;ft++)Y[ft-1]=arguments[ft];return this.getListeners(U).length===0?l().reject(new Error("No promise event handler.")):new(l())((x,V)=>{this.emit(U,...Y,x,V)})}emitAsPromiseNoResponse(U){for(var j=arguments.length,Y=new Array(j>1?j-1:0),ft=1;ft<j;ft++)Y[ft-1]=arguments[ft];return this.getListeners(U).length===0?l().resolve():new(l())((x,V)=>{this.emit(U,...Y,x,V)})}}{get enabled(){return this._enabled}output(U,j){if(this.outputTrack===U)return;const Y=O.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:U==null?void 0:U.toString()}});this.outputTrack=U,this.destination&&this.destination.updateInput({track:U,context:j}),Y.onSuccess()}constructor(){super(),d(this,"inputTrack",void 0),d(this,"outputTrack",void 0),d(this,"_enabled",!0),d(this,"_source",void 0),d(this,"ID",A(6,"")),d(this,"destination",void 0),d(this,"context",void 0),d(this,"name",void 0)}enable(){if(this._enabled)return;const U=O.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});_.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var j;const Y=(j=this.onEnableChange)===null||j===void 0?void 0:j.call(this,this._enabled);if(Y instanceof l())return Y.then(()=>{U.onSuccess()}).catch(ft=>{throw U.onError(ft),ft});U.onSuccess()}catch(Y){throw U.onError(Y),Y}}disable(){if(!this._enabled)return;const U=O.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});_.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var j;const Y=(j=this.onEnableChange)===null||j===void 0?void 0:j.call(this,this._enabled);if(Y instanceof l())return Y.then(()=>{U.onSuccess()}).catch(ft=>{throw U.onError(ft),ft});U.onSuccess()}catch(Y){throw U.onError(Y),Y}}}class Z extends G{get kind(){return"video"}pipe(U){const j=O.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:U.name}});if(this.destination===U)return j.onSuccess(),U;if(U._source){const Y=new Error("Processor ".concat(U.name," already piped, please call unpipe beforehand."));throw j.onError(Y),Y}return this.destination&&this.unpipe(),this.destination=U,U._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),j.onSuccess(),U}unpipe(){if(!this.destination)return;const U=O.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});_.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const j=this.destination;this.destination._source=void 0,this.destination=void 0,j.reset()}finally{U.onSuccess()}}updateInput(U){var j,Y;U.context!==this.context&&(this.context=U.context,(j=this.onPiped)===null||j===void 0||j.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:U.context})),U.track&&this.inputTrack!==U.track&&(this.inputTrack=U.track,(Y=this.onTrack)===null||Y===void 0||Y.call(this,U.track,this.context))}reset(){var U;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,(U=this.onUnpiped)===null||U===void 0||U.call(this),this.destination&&this.destination.reset()}}class nt extends G{constructor(){super(...arguments),d(this,"inputNode",void 0),d(this,"outputNode",void 0),d(this,"destination",void 0),d(this,"context",void 0)}get kind(){return"audio"}pipe(U){const j=O.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:U.name}});if(this.destination===U)return j.onSuccess(),U;if(U._source){const Y=new Error("Processor ".concat(U.name," already piped, please call unpipe beforehand."));throw j.onError(Y),Y}return this.destination&&this.unpipe(),this.destination=U,U._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),j.onSuccess(),U}unpipe(){if(!this.destination)return;_.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const U=O.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var j;let Y=this.destination;(j=this.outputNode)===null||j===void 0||j.disconnect(),this.destination._source=void 0,this.destination=void 0,Y.reset()}finally{U.onSuccess()}}output(U,j){if(U instanceof MediaStreamTrack)super.output(U,j);else if(U instanceof AudioNode){if(this.outputNode===U)return;const Y=O.reportApiInvoke({name:"".concat(this.name,".output"),options:L(L({},U instanceof MediaStreamTrack&&{track:U.toString()}),U instanceof AudioNode&&{audioNode:U.toString()})});this.outputNode=U,this.destination&&this.destination.updateInput({node:U,context:j}),Y.onSuccess()}}updateInput(U){var j,Y,ft;U.context!==this.context&&(this.context=U.context,(j=this.onPiped)===null||j===void 0||j.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:U.context})),U.track&&this.inputTrack!==U.track&&(this.inputTrack=U.track,(Y=this.onTrack)===null||Y===void 0||Y.call(this,U.track,this.context)),U.node&&this.inputNode!==U.node&&(this.inputNode=U.node,(ft=this.onNode)===null||ft===void 0||ft.call(this,U.node,this.context))}reset(){var U;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,(U=this.onUnpiped)===null||U===void 0||U.call(this),this.destination&&this.destination.reset()}}class it{constructor(){d(this,"__registered__",!1),d(this,"logger",_),d(this,"reporter",O),d(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class St extends it{}let ht;class It{get running(){return this._running}constructor(U,j){if(d(this,"type",void 0),d(this,"interval",void 0),d(this,"fn",void 0),d(this,"_running",!1),d(this,"_osc",void 0),!U)throw new Error;if(j<=0)throw new Error;this.type=U,this.interval=j}add(U){this.fn=U}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const U=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&U()},this.interval)};U();break}case"RAF":{const U=j=>{requestAnimationFrame(Y=>{Y-j<this.interval?this._running&&U(j):(this.fn&&this.fn(),this._running&&U(Y))})};U(performance.now());break}case"Oscillator":{ht||(ht=new AudioContext);const U=ht.createGain();let j;U.gain.value=0,U.connect(ht.destination);const Y=()=>{this.fn&&this.fn(),j&&j.disconnect(),j=ht.createOscillator(),this._osc=j,j.connect(U),this._running&&(j.onended=Y,j.start(0),j.stop(ht.currentTime+this.interval/1e3))};Y();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),u})()})(cL);var uL;!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(uL=HTMLCanvasElement.prototype.getContext,function(){let t=arguments;return t[0]==="webgl"&&(t=[].slice.call(arguments),t[0]="experimental-webgl"),uL.apply(null,t)}));const Gtt=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function dL(t){const e=new Uint8Array([99,114,121,112,116,105,105]),n=e.length,r=t,i=r.length,u=new Uint8Array(i),s=new Uint8Array(256);for(let p=0;p<256;p++)s[p]=p;let d=0;for(let p=0;p<256;p++)d=(d+s[p]+e[p%n])%256,[s[p],s[d]]=[s[d],s[p]];let a,l=0;d=0;for(let p=0;p<0+i;p++)l=(l+1)%256,d=(d+s[l])%256,[s[l],s[d]]=[s[d],s[l]],a=s[(s[l]+s[d])%256],p>=0&&(u[p-0]=r[p-0]^a);const A=String.fromCharCode.apply(null,Array.from(u));return Function("var winSize = 5; return `"+A+"`")()}const Ktt=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class lL{constructor(e,n){v(this,"program",void 0),v(this,"gl",void 0),v(this,"kernel",void 0),this.gl=e,this.kernel=n||Ktt,this.program=function(r,i){const u=dL(i),s=Vtt(r,[dL(Gtt),u]);{const d=r.getAttribLocation(s,"a_position"),a=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(d);const l=2,A=r.FLOAT,p=!1,f=0,E=0;r.vertexAttribPointer(d,l,A,p,f,E)}{const d=r.getAttribLocation(s,"a_texCoord"),a=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(d);const l=2,A=r.FLOAT,p=!1,f=0,E=0;r.vertexAttribPointer(d,l,A,p,f,E)}return s}(this.gl,this.kernel)}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(e,1)}}class qo extends lL{constructor(e,n,r,i){super(e,n),v(this,"xOffset",void 0),v(this,"yOffset",void 0),v(this,"denoiseLevel",5),this.xOffset=1/r,this.yOffset=1/i}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY"),n=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),r=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(n,this.xOffset,this.yOffset),this.gl.uniform1f(r,this.denoiseLevel),this.gl.uniform1f(e,1)}setParameters(e){e.denoiseLevel!==void 0&&(this.denoiseLevel=e.denoiseLevel)}setSize(e,n){this.xOffset=1/e,this.yOffset=1/n}}const Htt=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class Ytt extends qo{constructor(e,n,r){super(e,Htt,n,r)}}const Wtt=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class Jtt extends qo{constructor(e,n,r){super(e,Wtt,n,r)}}const qtt=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class ztt extends qo{constructor(e,n,r){super(e,qtt,n,r)}}const Xtt=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],Ztt=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],AL=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],$tt=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class tet extends qo{constructor(e,n,r,i){super(e,Xtt,r,i),v(this,"inputTexture",void 0),v(this,"lightLevel",.1),v(this,"rednessLevel",.5),v(this,"mskin_he_max",175/180*3.141593),v(this,"mskin_he_min",115/180*3.141593),v(this,"mskin_hc_max",173/180*3.141593),v(this,"mskin_hc_min",116/180*3.141593),v(this,"mskin_hc_axis",2.04203545),v(this,"mfacts_rotate_c",0),v(this,"mfacts_rotate_le",0),v(this,"mfacts_rotate_ge",0),v(this,"tab_addr",null),v(this,"lutTextures",[]),this.inputTexture=n,this.init()}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY"),n=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(n,this.denoiseLevel),this.gl.uniform1f(e,1);const r=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(r,this.lightLevel);const i=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(i,this.rednessLevel);const u=this.gl.getUniformLocation(this.program,"skin_he_max"),s=this.gl.getUniformLocation(this.program,"skin_he_min"),d=this.gl.getUniformLocation(this.program,"skin_hc_max"),a=this.gl.getUniformLocation(this.program,"skin_hc_min"),l=this.gl.getUniformLocation(this.program,"skin_hc_axis"),A=this.gl.getUniformLocation(this.program,"facts_rotate_c"),p=this.gl.getUniformLocation(this.program,"facts_rotate_le"),f=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(u,this.mskin_he_max),this.gl.uniform1f(s,this.mskin_he_min),this.gl.uniform1f(d,this.mskin_hc_max),this.gl.uniform1f(a,this.mskin_hc_min),this.gl.uniform1f(l,this.mskin_hc_axis),this.gl.uniform1f(A,this.mfacts_rotate_c),this.gl.uniform1f(p,this.mfacts_rotate_le),this.gl.uniform1f(f,this.mfacts_rotate_ge);const E=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(E,2);const C=["lighten_lut"],_=[this.gl.TEXTURE3];for(let y=0;y<C.length;y++){const R=this.gl.getUniformLocation(this.program,C[y]);this.gl.activeTexture(_[y]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[y]),this.gl.uniform1i(R,y+3)}}setParameters(e){e.denoiseLevel!==void 0&&(this.denoiseLevel=e.denoiseLevel),e.lightLevel!==void 0&&(this.lightLevel=e.lightLevel),e.rednessLevel!==void 0&&(this.rednessLevel=e.rednessLevel,this.updateRedness(this.rednessLevel)),e.lighteningContrastLevel&&this.updateLut(e.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(AL);const e=[this.tab_addr],n=[256],r=[1];for(let i=0;i<e.length;i++){const u=this.gl.createTexture();if(!u)throw new B(P.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,u),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,n[i],r[i],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e[i]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(u)}}updateRedness(e){let r,i,u=e,s=u;u>1&&(u=1),u<0&&(u=0),s>1&&(s=1),s<0&&(s=0),this.mfacts_rotate_c=.8*u,s<.8&&(s=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*s)/180*3.141593,this.mskin_hc_min=(116-4*s)/180*3.141593,this.mskin_hc_axis=(117-4*s)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<3.141593/2&&(this.mskin_hc_min=3.141593/2),this.mskin_hc_axis<3.141593/2&&(this.mskin_hc_axis=3.141593/2),this.mskin_he_min<3.141593/2&&(this.mskin_he_min=3.141593/2),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),r=this.mskin_he_max-this.mskin_hc_max,i=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=r>.01?this.mfacts_rotate_c*i/r:this.mfacts_rotate_c,r=this.mskin_hc_min-this.mskin_he_min,i=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=r>.01?this.mfacts_rotate_c*i/r:this.mfacts_rotate_c}updateLut(e){let n=null;if(e===0&&(n=AL),e===1&&(n=$tt),e===2&&(n=Ztt),!n)throw new B(P.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+e);this.tab_addr=new Uint8Array(n);const r=[this.tab_addr],i=[256],u=[1];for(let s=0;s<r.length;s++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[s]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,i[s],u[s],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,r[s])}}class eet{constructor(){v(this,"gl",null),v(this,"canvas",null),v(this,"programs",[]),v(this,"commonProgram",null),v(this,"inputTexture",null),v(this,"outputTextures",[]),v(this,"fbos",[]),v(this,"originalFrameWidth",0),v(this,"originalFrameHeight",0),v(this,"enableBeauty",!1),v(this,"denoiseLevel",5),v(this,"lightLevel",.35),v(this,"rednessLevel",.5),v(this,"lighteningContrastLevel",1)}setEnableBeauty(e){this.enableBeauty=!!e}init(e,n,r){if(!rr().supportWebGL)throw new B(P.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=r.getContext("webgl"),!this.gl)throw new B(P.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(e,n),!this.inputTexture)throw new B(P.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=r,this.programs.push(new lL(this.gl)),this.programs.push(new Ytt(this.gl,e,n)),this.programs.push(new Jtt(this.gl,e,n)),this.programs.push(new ztt(this.gl,e,n)),this.programs.push(new tet(this.gl,this.inputTexture,e,n)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(e){if(!this.gl||!this.commonProgram||!this.canvas)return void T.warning("video effect manager is not init!");let n=0;if(this.originalFrameHeight===e.videoWidth&&this.originalFrameWidth===e.videoHeight)n=2;else if(this.originalFrameHeight!==e.videoHeight||this.originalFrameWidth!==e.videoWidth){if(T.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(e.videoWidth,"x").concat(e.videoHeight)),e.videoHeight===0||e.videoWidth===0)return void T.debug("beauty effect: skip 0 resolution frame");this.canvas.width=e.videoWidth,this.canvas.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),this.release(),this.init(e.videoWidth,e.videoHeight,this.canvas)}this.gl.viewport(0,0,e.videoWidth,e.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e);const r=this.enableBeauty?this.programs.length-1:0;for(let u=0;u<=r;u++){const s=this.programs[u].program;this.gl.useProgram(s);const d=this.gl.getUniformLocation(s,"u_image");this.programs[u].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[n+u%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[n+u%2]),this.gl.uniform1i(d,0)}this.gl.useProgram(this.commonProgram);const i=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(i,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(e){this.programs.forEach(n=>{n instanceof qo&&n.setParameters({denoiseLevel:e})}),this.denoiseLevel=e}setLightLevel(e){this.programs.forEach(n=>{n instanceof qo&&n.setParameters({lightLevel:e})}),this.lightLevel=e}setRednessLevel(e){this.programs.forEach(n=>{n instanceof qo&&n.setParameters({rednessLevel:e})}),this.rednessLevel=e}setContrastLevel(e){this.programs.forEach(n=>{n instanceof qo&&n.setParameters({lighteningContrastLevel:e})}),this.lighteningContrastLevel=e}setSize(e,n){this.programs.forEach(r=>{r instanceof qo&&r.setSize(e,n)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(e,n){if(!this.gl)throw new B(P.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let r=0;r<4;r++){const i=this.gl.createTexture();if(!i)throw new B(P.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),r<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,n,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,n,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const u=this.gl.createFramebuffer();if(!u)throw new B(P.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,u),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,i,0),this.outputTextures.push(i),this.fbos.push(u)}this.gl.viewport(0,0,e,n),this.originalFrameWidth=e,this.originalFrameHeight=n}}class net{constructor(){v(this,"targetFrameRate",0),v(this,"recordedFrameCount",0),v(this,"recordingTime",2),v(this,"recordID",void 0)}async startRecordBeautyEffectOutput(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;if(this.recordID)throw new B(P.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const r=Ye(6,"");return this.recordID=r,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingTime=n,await Vn(1e3*this.recordingTime),this.recordID!==r?(this.recordID=void 0,!0):(this.recordID=void 0,this.recordedFrameCount<this.targetFrameRate*this.recordingTime/2?(T.warning("detect beauty effect overload, current framerate",this.recordedFrameCount/2),!1):(T.debug("beauty effect current framerate",this.recordedFrameCount/2),!0))}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class ret extends cL.exports.VideoProcessor{constructor(){super(),v(this,"name","BeautyProcessor"),v(this,"fps",15),v(this,"canvas",void 0),v(this,"video",void 0),v(this,"manager",void 0),v(this,"overloadDetector",new net),v(this,"stopChromeBackgroundLoop",null),v(this,"onOverload",void 0),v(this,"stopLoop",void 0),v(this,"lastRenderTime",0),this.fps=30,this.manager=new eet,this._enabled=!1}async onEnableChange(e){this.manager.setEnableBeauty(e),this.context&&this.inputTrack&&(e?await this.startEffect(this.inputTrack,this.context):await this.stopEffect(this.inputTrack,this.context))}async setBeautyEffectOptions(e){if(function(n){n.smoothnessLevel!==void 0&&we(n.smoothnessLevel,"options.smoothnessLevel",0,1,!1),n.lighteningLevel!==void 0&&we(n.lighteningLevel,"options.lighteningLevel",0,1,!1),n.rednessLevel!==void 0&&we(n.rednessLevel,"options.rednessLevel",0,1,!1),n.lighteningContrastLevel!==void 0&&Nn(n.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2])}(e),e.smoothnessLevel!==void 0){const n=Math.max(.1,10*e.smoothnessLevel);this.manager.setDenoiseLevel(n)}if(e.lighteningLevel!==void 0){const n=Math.max(.1,e.lighteningLevel/2);this.manager.setLightLevel(n)}if(e.rednessLevel!==void 0){const n=Math.max(.01,e.rednessLevel);this.manager.setRednessLevel(n)}if(e.lighteningContrastLevel!==void 0){const n=e.lighteningContrastLevel;this.manager.setContrastLevel(n)}}async onTrack(e,n){var r;this.video&&this.enabled&&((r=this.stopLoop)===null||r===void 0||r.call(this),await this.stopEffect(e,n)),await this.startEffect(e,n)}async startEffect(e,n){if(!this.enabled)return;const r=ye(),i=await this.renderWithWebGL(e);this.output(i,n),T.info("start video effect, output:",this.outputTrack),this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then(d=>{d||this.onOverload&&this.onOverload()});let u=!1;this.stopLoop=()=>{u=!0};const s=()=>{this.enabled&&!u&&requestAnimationFrame(s);const d=Date.now(),a=1e3/this.fps,l=this.lastRenderTime?d-this.lastRenderTime:a;l<a||(this.lastRenderTime=d-(l-a),this.video&&this.video.paused&&this.video.play(),this.enabled&&this.video&&(this.manager.render(this.video),this.outputTrack&&this.outputTrack.requestFrame&&this.outputTrack.requestFrame(),this.overloadDetector.addFrame()))};requestAnimationFrame(s),r.name===me.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?this.stopChromeBackgroundLoop=TC(()=>{this.enabled&&this.video&&this.manager.render(this.video),this.outputTrack&&this.outputTrack.requestFrame&&this.outputTrack.requestFrame(),this.overloadDetector.addFrame()},this.fps):this.stopChromeBackgroundLoop&&(this.stopChromeBackgroundLoop(),this.stopChromeBackgroundLoop=null)},!1)}async renderWithWebGL(e){this.canvas&&(this.canvas.remove(),this.canvas=void 0),this.video&&(this.video.remove(),this.video=void 0),this.canvas=document.createElement("canvas"),this.video=document.createElement("video"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),this.video.muted=!0,this.video.setAttribute("playsinline",""),this.video.setAttribute("style","display:none"),this.video.srcObject=new MediaStream([e]);const n=new Nt(d=>{const a=()=>{this.video&&this.video.removeEventListener("playing",a),d(void 0)};this.video&&this.video.addEventListener("playing",a)});this.video.play(),await n;const r=e.getSettings(),i=r.width||this.video.videoWidth,u=r.height||this.video.videoHeight;if(r.frameRate&&this.fps!==r.frameRate&&(this.fps=r.frameRate,T.debug("beauty video processor: set fps to",this.fps)),T.debug("beauty video processor: width ".concat(i," height ").concat(u)),!i||!u)throw new B(P.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");this.canvas.width=i,this.canvas.height=u,this.video.setAttribute("width",i.toString()),this.video.setAttribute("height",u.toString()),this.manager.init(i,u,this.canvas);const s=rr();return this.canvas.captureStream(s.supportRequestFrame?0:this.fps).getVideoTracks()[0]}async stopEffect(e,n){T.info("stop video effect"),this.overloadDetector.stopRecordBeautyEffectOutput(),this.manager.release(),this.canvas&&this.canvas.remove(),this.video&&this.video.remove(),this.canvas=void 0,this.video=void 0,this.output(e,n)}}function g_(t){const e={};if(t.facingMode&&(e.facingMode=t.facingMode),t.cameraId&&(e.deviceId={exact:t.cameraId}),!t.encoderConfig)return e;const n=zc(t.encoderConfig);return e.width=n.width,e.height=n.height,!nN()&&n.frameRate&&(e.frameRate=n.frameRate),ye().name===me.EDGE&&typeof e.frameRate=="object"&&(e.frameRate.max=60),Cr()&&(e.frameRate={ideal:30,max:30}),e}function iet(t){const e={};t.screenSourceType&&(e.mediaSource=t.screenSourceType),t.extensionId&&Z1()&&(e.extensionId=t.extensionId),t.electronScreenSourceId&&(e.sourceId=t.electronScreenSourceId);const n=t.encoderConfig?fI(t.encoderConfig):null;return e.mandatory={chromeMediaSource:"desktop",maxWidth:n?n.width:void 0,maxHeight:n?n.height:void 0},n&&n.frameRate&&(typeof n.frameRate=="number"?(e.mandatory.maxFrameRate=n.frameRate,e.mandatory.minFrameRate=n.frameRate):(e.mandatory.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||void 0,e.mandatory.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||void 0),e.frameRate=n.frameRate),n&&n.width&&(e.width=n.width),n&&n.height&&(e.height=n.height),e}function hL(t){const e={};if(nN()||(t.AGC!==void 0&&(e.autoGainControl=t.AGC),t.AEC!==void 0&&(e.echoCancellation=t.AEC),t.ANS!==void 0&&(e.noiseSuppression=t.ANS,Z1()&&t.ANS&&(e.googHighpassFilter=t.ANS))),t.encoderConfig){const n=pp(t.encoderConfig);e.channelCount=n.stereo?2:1,e.sampleRate=n.sampleRate,e.sampleSize=n.sampleSize}return t.microphoneId&&(e.deviceId={exact:t.microphoneId}),rN()&&(e.sampleRate=void 0),e}var vu,nf;(function(t){t.COVERED="COVERED",t.POSITION="POSITION",t.SIZE="SIZE",t.STYLE="STYLE"})(vu||(vu={})),function(t){t.UNMOUNTED="UNMOUNTED",t.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(nf||(nf={}));var pL,fL,gL,EL,mL,IL,CL,_L,vL,SL,yL,TL,RL,wL,bL,Le,NL,OL,DL,kL,PL,LL,_o,BL=new class{constructor(){v(this,"_clientSize",null),v(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),v(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),v(this,"getStyle",t=>window.getComputedStyle(t,null)),v(this,"checkCssVisibleProperty",t=>{let e=!0;const n=this.getStyle(t),{display:r,visibility:i,opacity:u,filter:s}=n;return(r==="none"||["hidden","collapse"].includes(i)||Number(u)<.1)&&(e=!1),e?(s&&s.split(" ").filter(d=>{const a=d.split("(")[0];return["brightness","blur","opacity"].includes(a)}).map(d=>{const[a,l]=d.split(/\(|\)/);return[a,Number(l.match(/^[0-9\.]+/))]}).forEach(d=>{const[a,l]=d;switch(a){case"brightness":(l<.1||l>3)&&(e=!1);break;case"blur":l>3&&(e=!1);break;case"opacity":l<.1&&(e=!1)}}),e):!1}),v(this,"checkPropertyUpToAllParentNodes",(t,e)=>{let n=!0,r=!0;const i=s=>e(s);let u=t;for(;u&&r;)i(u)||(n=!1,r=!1),u=u.parentElement,u||(r=!1);return n}),v(this,"checkActualCssVisibleIncludeInherit",t=>this.checkPropertyUpToAllParentNodes(t,this.checkCssVisibleProperty)),v(this,"getSizeAboutClient",t=>{const{width:e,height:n,left:r,right:i,top:u,bottom:s}=t.getBoundingClientRect(),d=this.getClientWidth(),a=this.getClientHeight();return{width:e,height:n,left:r,right:i,top:u,bottom:s,clientWidth:d,clientHeight:a,clientMin:Math.min(d,a)}}),v(this,"checkActualSize",()=>{const{width:t,height:e,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(t,e,n)}),v(this,"elementFromPoint",(t,e)=>document.elementFromPoint?document.elementFromPoint(t,e):null),v(this,"checkCoverForAPoint",(t,e,n)=>{const r=this.elementFromPoint(t,e);return r!==null&&r!==n}),v(this,"getPointPositionList",()=>{const{width:t,height:e,left:n,top:r}=this._clientSize,i=t/6,u=e/6,s=[],d=10**6;for(let a=0;a<5;a++)for(let l=0;l<5;l++){const A=(n*d+(a===0?.1:a===4?(i*a*d-1e5)/d:i*a)*d)/d,p=(r*d+(l===0?.1:l===4?(u*l*d-1e5)/d:u*l)*d)/d;s.push({x:A,y:p})}return[...s]}),v(this,"checkElementCover",t=>this.getPointPositionList().map(e=>this.checkCoverForAPoint(e.x,e.y,t)).filter(e=>!!e).length>6),v(this,"checkSizeIsVisible",(t,e,n)=>(t>50||n/t<=10)&&(e>50||n/e<=10)),v(this,"checkSizeOfPartInClient",()=>{const{left:t,right:e,top:n,bottom:r,clientHeight:i,clientWidth:u,clientMin:s}=this._clientSize;let d,a,l,A;if(t<0)d=0;else{if(!(t<u))return!1;d=t}if(e<0)return!1;if(a=e<u?e:u,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;A=r<i?r:i;const p=a-d,f=A-l;return this.checkSizeIsVisible(p,f,s)}),v(this,"returnHiddenResult",t=>(this._clientSize=null,{visible:!1,reason:t})),v(this,"checkOneElementVisible",t=>{if(t instanceof HTMLElement){if(this.checkElementIsMountedOnDom(t)){if(this.checkActualCssVisibleIncludeInherit(t)){if(this._clientSize=this.getSizeAboutClient(t),this.checkElementCover(t))return this.returnHiddenResult(vu.COVERED);{const e=this.checkActualSize(),n=this.checkSizeOfPartInClient();return e&&!n?this.returnHiddenResult(vu.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(vu.SIZE)}}return this.returnHiddenResult(vu.STYLE)}return this.returnHiddenResult(nf.UNMOUNTED)}return this.returnHiddenResult(nf.INVALID_HTML_ELEMENT)}),v(this,"checkElementIsMountedOnDom",t=>this.checkPropertyUpToAllParentNodes(t,e=>e.nodeName.toUpperCase()!=="HTML"?e.parentElement!==null:!!document.documentElement))}};function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Su(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}let un=(pL=Qn("LocalVideoTrack","getTrackId"),fL=je(),gL=uu("LocalVideoTrack","_enabledMutex"),EL=je(),mL=uu("LocalVideoTrack","_enabledMutex"),IL=je(),CL=Dp({report:ot}),_L=je(),vL=je(),SL=je(),yL=je(),TL=je(),RL=je(),wL=je(),pL((Lt((Le=class MU extends vC{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Fn.PLAYING)}constructor(e,n,r,i,u,s){super(e,u),v(this,"trackMediaType","video"),v(this,"_player",void 0),v(this,"_videoBeautyProcessor",void 0),v(this,"_videoVisibleTimer",null),v(this,"_previousVideoVisibleStatus",void 0),v(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),v(this,"_encoderConfig",void 0),v(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),v(this,"_optimizationMode",void 0),v(this,"_videoHeight",void 0),v(this,"_videoWidth",void 0),v(this,"_forceBitrateLimit",void 0),v(this,"_enabled",!0),v(this,"processorDestination",void 0),v(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=n,this._scalabiltyMode=r,this._optimizationMode=i,this._hints=s||[],this._hints.indexOf(jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),this.processorContext=new set(this.getTrackId()),this.processorDestination=new oet(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),typeof e=="string"?e:"HTMLElement",n]});if(typeof e=="string"){const u=document.getElementById(e);u?e=u:(T.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),wt("warning",this,'can not find "#'.concat(e,'" element, use document.body')),e=document.body)}T.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(n)),at("debug",this,"play",n);const i=Su(Su(Su({},this._getDefaultPlayerConfig()),n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new sL(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const u=this.getVideoElementVisibleStatus();this.emit(ws.VIDEO_ELEMENT_VISIBLE_STATUS,u)}catch{}},st("CHECK_VIDEO_VISIBLE_INTERVAL")),r.onSuccess()}stop(){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,T.debug("[".concat(this.getTrackId(),"] stop video playback")),at("debug",this,"stop"),e.onSuccess()}async setEnabled(e,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(T.info("[".concat(this.getTrackId(),"] start setEnabled"),e),at("info",this,"setEnabled",e),!e){this._originMediaStreamTrack.enabled=!1;try{await Be(this,xt.NEED_DISABLE_TRACK,this)}catch(r){throw T.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),at("error",this,"setEnabled",e,r.toString()),r}return n||(this._enabled=!1),T.info("[".concat(this.getTrackId(),"] setEnabled to false success")),void at("info",this,"setEnabled",e,"success")}this._originMediaStreamTrack.enabled=!0;try{await Be(this,xt.NEED_ENABLE_TRACK,this)}catch(r){throw T.error("[".concat(this.getTrackId(),"] setEnabled to true error"),r.toString()),at("error",this,"setEnabled",e,r.toString()),r}T.info("[".concat(this.getTrackId(),"] setEnabled to true success")),at("info",this,"setEnabled",e,"success"),n||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._mediaStreamTrack.enabled=!e,T.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),at("debug",this,"setMuted",e),e?await Be(this,xt.NEED_MUTE_TRACK,this):await Be(this,xt.NEED_UNMUTE_TRACK,this))}getStats(){return il(()=>{T.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),wt("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ha(this,xt.GET_STATS)||Su({},NI)}async setBeautyEffect(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.LOCAL_VIDEO_TRACK_BEAUTY,options:[this.getTrackId(),e,n]});if(e||this._videoBeautyProcessor){if(Xb()===Sn.IOS||Xb()===Sn.ANDROID){const i=new B(P.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw r.onError(i),i}if(!this._enabled&&e){const i=new B(P.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw r.onError(i),i}if(T.info("[".concat(this.getTrackId(),"] start setBeautyEffect"),e,JSON.stringify(n)),at("info",this,"setBeautyEffect",[e,n]),this._videoBeautyProcessor||e){try{if(!this._videoBeautyProcessor)if(this._videoBeautyProcessor=new ret,this.processor){const i=this.processor;this.pipe(this._videoBeautyProcessor).pipe(i)}else this.pipe(this._videoBeautyProcessor).pipe(this.processorDestination);await this._videoBeautyProcessor.setBeautyEffectOptions(n),e?await this._videoBeautyProcessor.enable():await this._videoBeautyProcessor.disable()}catch(i){throw T.error("[".concat(this.getTrackId(),"] setBeautyEffect error"),i.toString()),at("info",this,"setBeautyEffect",[e,n]),r.onError(i),i}T.info("[".concat(this.getTrackId(),"] setBeautyEffect success")),at("info",this,"setBeautyEffect",[e,n],"success"),r.onSuccess()}else r.onSuccess()}}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(e,n,r,i){const u=this._mediaStreamTrack.clone();return new MU(u,e,n,r,i)}async setBitrateLimit(e){if(T.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),at("debug",this,"setBitrateLimit",e),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Be(this,xt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw()}}}async setOptimizationMode(e){if(e!=="motion"&&e!=="detail"&&e!=="balanced")return T.error(P.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void at("error",this,"setOptimizationMode",e,P.INVALID_PARAMS);const n=this._optimizationMode;try{this._optimizationMode=e,await Be(this,xt.SET_OPTIMIZATION_MODE,this)}catch(r){throw this._optimizationMode=n,T.error("[".concat(this.getTrackId(),"] set optimization mode failed"),r.toString()),at("error",this,"setOptimizationMode",e,r.toString()),r}T.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")")),at("info",this,"setOptimizationMode",e,"success")}setScalabiltyMode(e){if(e.numSpatialLayers===1&&e.numTemporalLayers!==1)return T.error(P.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),at("error",this,"setScalabiltyMode",e,P.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,T.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")")),at("info",this,"setScalabiltyMode",e,"success")}updateMediaStreamTrackResolution(){Pk(this._originMediaStreamTrack).then(e=>{let[n,r]=e;this._videoHeight=r,this._videoWidth=n}).catch(Mp)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:n,frameRate:r}=this.getMediaStreamTrackSettings();if(!e||!n||!r)return;const[i,u]=function(s,d,a){const l=st("BITRATE_ADAPTER_TYPE");let A;const p=200*Math.pow(a/15,.6)*Math.pow(s*d/640/360,.75),f=p;if(l==="STANDARD_BITRATE")A=4*p;else{if(l!=="COMPATIABLE_BITRATE")return;A=2*p}return[Math.floor(A),Math.floor(f)]}(e,n,r)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=u,this._encoderConfig.bitrateMax=i,T.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(n,", fps: ").concat(r,"] => [brMax: ").concat(i,", brMin: ").concat(u,"]")),at("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(e,", h: ").concat(n,", fps: ").concat(r,"] => [brMax: ").concat(i,", brMin: ").concat(u,"]")))}getVideoElementVisibleStatus(){try{var e,n;const r=this==null||(e=this._player)===null||e===void 0?void 0:e.getContainerElement(),i={track:this,element:this==null||(n=this._player)===null||n===void 0?void 0:n.getVideoElement(),slot:r==null?void 0:r.parentElement},{element:u,slot:s}=i;if(this.isPlaying&&u instanceof HTMLVideoElement&&s instanceof HTMLElement){const d=BL.checkOneElementVisible(u),a=Object.assign({},d);if(a.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=a.visible;const l=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});a.visible?l.onSuccess("Video is visible"):l.onSuccess("Invisible because of ".concat(a.reason))}return a}return}catch(r){throw new B(P.GET_VIDEO_ELEMENT_VISIBLE_ERROR,r.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this._videoBeautyProcessor&&e!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(e);if(this.processor===e)return e;if(e._source)throw new B(P.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){this.processorDestination.on(xr.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await Be(this,xt.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Be(this,xt.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(xr.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(pr.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(pr.REQUEST_CONSTRAINTS)}}).prototype,"play",[fL],Object.getOwnPropertyDescriptor(Le.prototype,"play"),Le.prototype),Lt(Le.prototype,"setEnabled",[gL,EL],Object.getOwnPropertyDescriptor(Le.prototype,"setEnabled"),Le.prototype),Lt(Le.prototype,"setMuted",[mL,IL,CL],Object.getOwnPropertyDescriptor(Le.prototype,"setMuted"),Le.prototype),Lt(Le.prototype,"getStats",[_L],Object.getOwnPropertyDescriptor(Le.prototype,"getStats"),Le.prototype),Lt(Le.prototype,"setBeautyEffect",[vL],Object.getOwnPropertyDescriptor(Le.prototype,"setBeautyEffect"),Le.prototype),Lt(Le.prototype,"getCurrentFrameData",[SL],Object.getOwnPropertyDescriptor(Le.prototype,"getCurrentFrameData"),Le.prototype),Lt(Le.prototype,"setBitrateLimit",[yL],Object.getOwnPropertyDescriptor(Le.prototype,"setBitrateLimit"),Le.prototype),Lt(Le.prototype,"setOptimizationMode",[TL],Object.getOwnPropertyDescriptor(Le.prototype,"setOptimizationMode"),Le.prototype),Lt(Le.prototype,"setScalabiltyMode",[RL],Object.getOwnPropertyDescriptor(Le.prototype,"setScalabiltyMode"),Le.prototype),Lt(Le.prototype,"updateMediaStreamTrackResolution",[wL],Object.getOwnPropertyDescriptor(Le.prototype,"updateMediaStreamTrackResolution"),Le.prototype),bL=Le))||bL),UL=(NL=Qn("CameraVideoTrack","getTrackId"),OL=je(),DL=uu("CameraVideoTrack","_enabledMutex"),kL=je(),PL=je(),NL((Lt((_o=class extends un{constructor(t,e,n,r,i,u){super(t,e.encoderConfig?zc(e.encoderConfig):{},r,i,u),v(this,"_config",void 0),v(this,"_originalConstraints",void 0),v(this,"_constraints",void 0),v(this,"_enabled",!0),v(this,"_deviceName","default"),v(this,"tryResumeVideoForIOS15WeChat",async()=>{Hc()&&!$1()&&eN()&&this._enabled&&!this._isClosed&&(T.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),Mt("info",this,"constructor",{trackId:u,deviceId:t.label,constraints:n,config:e}),this._config=e,this._originalConstraints=n,this._constraints=n,this._deviceName=t.label,this._config.encoderConfig&&(this._encoderConfig=zc(this._config.encoderConfig)),ae.on(rn.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),ae.on(rn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}async setDevice(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CAM_VIDEO_TRACK_SET_DEVICE,options:[this.getTrackId(),t]});if(T.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),at("info",this,"setDevice",t),this._enabled)try{const n=await Rr.getDeviceById(t),r={};r.video=Su({},this._constraints),r.video.deviceId={exact:t},r.video.facingMode=void 0,this._originMediaStreamTrack.stop();let i=null;try{i=await bi(r,this.getTrackId())}catch(u){throw T.error("[".concat(this.getTrackId(),"] setDevice failed"),u.toString()),at("error",this,"setDevice",t,u.toString()),i=await bi({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),u}await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(n){throw e.onError(n),T.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),at("error",this,"setDevice",t,n.toString()),n}else try{const n=await Rr.getDeviceById(t);this._deviceName=n.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(n){throw e.onError(n),T.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),at("error",this,"setDevice",t,n.toString()),n}T.info("[".concat(this.getTrackId(),"] setDevice success")),at("info",this,"setDevice",t,"success"),e.onSuccess()}async setEnabled(t,e){if(!e){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(T.info("[".concat(this.getTrackId(),"] start setEnabled"),t),at("info",this,"setEnabled",t),!t){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),e||(this._enabled=!1);try{await Be(this,xt.NEED_DISABLE_TRACK,this)}catch(i){throw T.error("[".concat(this.getTrackId(),"] setEnabled to false error"),i.toString()),at("error",this,"setEnabled",t,i.toString()),i}return T.info("[".concat(this.getTrackId(),"] setEnabled to false success")),void at("info",this,"setEnabled",t,"success")}const n=Su({},this._constraints),r=Rr.searchDeviceIdByName(this._deviceName);r&&!n.deviceId&&(n.deviceId={exact:r});try{const i=await bi({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),await Be(this,xt.NEED_ENABLE_TRACK,this)}catch(i){throw T.error("[".concat(this.getTrackId(),"] setEnabled true error"),i.toString()),at("error",this,"setEnabled",t,i.toString()),i}this.updateMediaStreamTrackResolution(),T.info("[".concat(this.getTrackId(),"] setEnabled to true success")),at("info",this,"setEnabled",t,"success"),e||(this._enabled=!0)}async setEncoderConfiguration(t,e){const n=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[this.getTrackId(),t]});if(!this._enabled){const u=new B(P.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw n.onError(u),u}t=zc(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin);const r=Pn(this._config);r.encoderConfig=t;const i=g_(r);(Lr()||_r()||xo())&&(i.deviceId=void 0),T.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i)),at("debug",this,"setEncoderConfiguration",t);try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(u){const s=new B(P.UNEXPECTED_ERROR,u.toString());throw T.error("[".concat(this.getTrackId(),"] applyConstraints error"),s.toString()),at("error",this,"setEncoderConfiguration",u.toString()),n.onError(s),s}this._config=r,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,this._hints.indexOf(jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Be(this,xt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(u){return n.onError(u),u.throw()}n.onSuccess()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((_r()||xo())&&this._enabled&&!this._isClosed&&ae.duringInterruption){const t=async()=>{ae.off(rn.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(T.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),wt("debug",this,"try capture camera media device for interrupted iOS device."),await this.setEnabled(!1),await this.setEnabled(!0))};ae.on(rn.IOS_INTERRUPTION_END,t)}else T.debug("[".concat(this.getTrackId(),"] track ended")),Qo("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(ws.TRACK_ENDED)}async renewMediaStreamTrack(t){const e=t||this._constraints,n=Rr.searchDeviceIdByName(this._deviceName);n&&!e.deviceId&&(e.deviceId={exact:n});const r=await bi({video:e},this.getTrackId());this._constraints=e,await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}close(){super.close(),ae.off(rn.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),ae.off(rn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){this.processorContext.on(pr.REQUEST_UPDATE_CONSTRAINTS,async(t,e,n)=>{try{const r=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(r),e()}catch(r){n(r)}}),this.processorContext.on(pr.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[OL],Object.getOwnPropertyDescriptor(_o.prototype,"setDevice"),_o.prototype),Lt(_o.prototype,"setEnabled",[DL,kL],Object.getOwnPropertyDescriptor(_o.prototype,"setEnabled"),_o.prototype),Lt(_o.prototype,"setEncoderConfiguration",[PL],Object.getOwnPropertyDescriptor(_o.prototype,"setEncoderConfiguration"),_o.prototype),LL=_o))||LL);class oet extends Ge{constructor(e){super(),v(this,"name","VideoProcessorDestination"),v(this,"ID","0"),v(this,"_source",void 0),v(this,"videoContext",void 0),v(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new B(P.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new B(P.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);e.track&&e.track!==this.inputTrack&&(this.inputTrack=e.track,this.emit(xr.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.emit(xr.ON_TRACK,void 0)}}class set extends Ge{constructor(e){super(),v(this,"constraintsMap",new Map),v(this,"statsRegistry",[]),v(this,"trackId",void 0),this.trackId=e}async getConstraints(){return await jr(this,pr.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,n){var r;return T.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(n,e),Be(this,pr.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ho(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var n;if(this.constraintsMap.has(e))return T.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Be(this,pr.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ho(n=this.constraintsMap).call(n)))}registerStats(e,n,r){this.statsRegistry.find(i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===n)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:n,cb:r})}unregisterStats(e,n){}gatherStats(){return this.statsRegistry.map(e=>{let{processorID:n,processorName:r,type:i,cb:u}=e;return{processorID:n,processorName:r,type:i,stats:u()}})}}class E_{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(e,n){v(this,"uid",void 0),v(this,"_uintid",void 0),v(this,"_trust_in_room_",!0),v(this,"_trust_audio_enabled_state_",!0),v(this,"_trust_video_enabled_state_",!0),v(this,"_trust_audio_mute_state_",!0),v(this,"_trust_video_mute_state_",!0),v(this,"_trust_stream_added_state_",!0),v(this,"_audio_muted_",!1),v(this,"_video_muted_",!1),v(this,"_audio_enabled_",!0),v(this,"_video_enabled_",!0),v(this,"_audio_added_",!1),v(this,"_video_added_",!1),v(this,"_audioTrack",void 0),v(this,"_videoTrack",void 0),v(this,"_audioSSRC",void 0),v(this,"_videoSSRC",void 0),v(this,"_audioOrtc",void 0),v(this,"_videoOrtc",void 0),v(this,"_cname",void 0),v(this,"_rtxSsrcId",void 0),this.uid=e,this._uintid=n}}var aet=gw,cet=Mc,uet=bh;xn({target:"Promise",stat:!0},{try:function(t){var e=cet.f(this),n=uet(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var m_=aet,det=xn,Aet=se,het=gn,pet=tl,fet=ii,get=Ao,Eet=ko,xL=fp,met=RD,Iet=kD,Cet=Sc,QL=En("isConcatSpreadable"),FL=9007199254740991,jL="Maximum allowed index exceeded",VL=Aet.TypeError,_et=Cet>=51||!het(function(){var t=[];return t[QL]=!1,t.concat()[0]!==t}),vet=Iet("concat"),yet=function(t){if(!fet(t))return!1;var e=t[QL];return e!==void 0?!!e:pet(t)};det({target:"Array",proto:!0,forced:!_et||!vet},{concat:function(t){var e,n,r,i,u,s=get(this),d=met(s,0),a=0;for(e=-1,r=arguments.length;e<r;e++)if(yet(u=e===-1?s:arguments[e])){if(a+(i=Eet(u))>FL)throw VL(jL);for(n=0;n<i;n++,a++)n in u&&xL(d,a,u[n])}else{if(a>=FL)throw VL(jL);xL(d,a++,u)}return d.length=a,d}});var GL={},Tet=yd,Ret=ms,KL=ch.f,wet=mI,HL=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];GL.f=function(t){return HL&&Tet(t)=="Window"?function(e){try{return KL(e)}catch{return wet(HL)}}(t):KL(Ret(t))};var fl={},bet=En;fl.f=bet;var YL=Oo,Net=$n,Oet=fl,Det=Hi.f,Tn=function(t){var e=YL.Symbol||(YL.Symbol={});Net(e,t)||Det(e,t,{value:Oet.f(t)})},yu=xn,I_=se,ket=Ki,Pet=UE,gl=Pr,Let=Ve,Tu=yi,Xa=VE,C_=gn,Ln=$n,Bet=tl,Met=Un,Uet=ii,xet=ri,__=GE,v_=oi,Qet=Ao,rf=ms,S_=YA,WL=_s,y_=Es,El=Dd,JL=Ah,Fet=ch,qL=GL,T_=dh,zL=Sd,XL=Hi,jet=lh,ZL=FA,Vet=Xm,R_=Pc,ml=HA.exports,$L=uh,tB=qE,eB=En,Get=fl,Ket=Tn,Het=Ra,nB=kc,of=bD.forEach,Vr=ah("hidden"),sf="Symbol",rB=eB("toPrimitive"),Yet=nB.set,iB=nB.getterFor(sf),to=Object.prototype,Us=I_.Symbol,Za=Us&&Us.prototype,oB=I_.TypeError,w_=I_.QObject,Il=ket("JSON","stringify"),sB=zL.f,xs=XL.f,aB=qL.f,Wet=ZL.f,cB=Let([].push),zo=ml("symbols"),Cl=ml("op-symbols"),b_=ml("string-to-symbol-registry"),N_=ml("symbol-to-string-registry"),Jet=ml("wks"),O_=!w_||!w_.prototype||!w_.prototype.findChild,D_=Tu&&C_(function(){return El(xs({},"a",{get:function(){return xs(this,"a",{value:7}).a}})).a!=7})?function(t,e,n){var r=sB(to,e);r&&delete to[e],xs(t,e,n),r&&t!==to&&xs(to,e,r)}:xs,k_=function(t,e){var n=zo[t]=El(Za);return Yet(n,{type:sf,tag:t,description:e}),Tu||(n.description=e),n},af=function(t,e,n){t===to&&af(Cl,e,n),v_(t);var r=S_(e);return v_(n),Ln(zo,r)?(n.enumerable?(Ln(t,Vr)&&t[Vr][r]&&(t[Vr][r]=!1),n=El(n,{enumerable:y_(0,!1)})):(Ln(t,Vr)||xs(t,Vr,y_(1,{})),t[Vr][r]=!0),D_(t,r,n)):xs(t,r,n)},P_=function(t,e){v_(t);var n=rf(e),r=JL(n).concat(L_(n));return of(r,function(i){Tu&&!gl(uB,n,i)||af(t,i,n[i])}),t},uB=function(t){var e=S_(t),n=gl(Wet,this,e);return!(this===to&&Ln(zo,e)&&!Ln(Cl,e))&&(!(n||!Ln(this,e)||!Ln(zo,e)||Ln(this,Vr)&&this[Vr][e])||n)},dB=function(t,e){var n=rf(t),r=S_(e);if(n!==to||!Ln(zo,r)||Ln(Cl,r)){var i=sB(n,r);return!i||!Ln(zo,r)||Ln(n,Vr)&&n[Vr][r]||(i.enumerable=!0),i}},lB=function(t){var e=aB(rf(t)),n=[];return of(e,function(r){Ln(zo,r)||Ln($L,r)||cB(n,r)}),n},L_=function(t){var e=t===to,n=aB(e?Cl:rf(t)),r=[];return of(n,function(i){!Ln(zo,i)||e&&!Ln(to,i)||cB(r,zo[i])}),r};if(Xa||(R_(Za=(Us=function(){if(xet(Za,this))throw oB("Symbol is not a constructor");var t=arguments.length&&arguments[0]!==void 0?WL(arguments[0]):void 0,e=tB(t),n=function(r){this===to&&gl(n,Cl,r),Ln(this,Vr)&&Ln(this[Vr],e)&&(this[Vr][e]=!1),D_(this,e,y_(1,r))};return Tu&&O_&&D_(to,e,{configurable:!0,set:n}),k_(e,t)}).prototype,"toString",function(){return iB(this).tag}),R_(Us,"withoutSetter",function(t){return k_(tB(t),t)}),ZL.f=uB,XL.f=af,jet.f=P_,zL.f=dB,Fet.f=qL.f=lB,T_.f=L_,Get.f=function(t){return k_(eB(t),t)},Tu&&xs(Za,"description",{configurable:!0,get:function(){return iB(this).description}})),yu({global:!0,wrap:!0,forced:!Xa,sham:!Xa},{Symbol:Us}),of(JL(Jet),function(t){Ket(t)}),yu({target:sf,stat:!0,forced:!Xa},{for:function(t){var e=WL(t);if(Ln(b_,e))return b_[e];var n=Us(e);return b_[e]=n,N_[n]=e,n},keyFor:function(t){if(!__(t))throw oB(t+" is not a symbol");if(Ln(N_,t))return N_[t]},useSetter:function(){O_=!0},useSimple:function(){O_=!1}}),yu({target:"Object",stat:!0,forced:!Xa,sham:!Tu},{create:function(t,e){return e===void 0?El(t):P_(El(t),e)},defineProperty:af,defineProperties:P_,getOwnPropertyDescriptor:dB}),yu({target:"Object",stat:!0,forced:!Xa},{getOwnPropertyNames:lB,getOwnPropertySymbols:L_}),yu({target:"Object",stat:!0,forced:C_(function(){T_.f(1)})},{getOwnPropertySymbols:function(t){return T_.f(Qet(t))}}),Il&&yu({target:"JSON",stat:!0,forced:!Xa||C_(function(){var t=Us();return Il([t])!="[null]"||Il({a:t})!="{}"||Il(Object(t))!="{}"})},{stringify:function(t,e,n){var r=Vet(arguments),i=e;if((Uet(e)||t!==void 0)&&!__(t))return Bet(e)||(e=function(u,s){if(Met(i)&&(s=gl(i,this,u,s)),!__(s))return s}),r[1]=e,Pet(Il,null,r)}}),!Za[rB]){var qet=Za.valueOf;R_(Za,rB,function(t){return gl(qet,this)})}Het(Us,sf),$L[Vr]=!0,Tn("asyncIterator"),Tn("hasInstance"),Tn("isConcatSpreadable"),Tn("iterator"),Tn("match"),Tn("matchAll"),Tn("replace"),Tn("search"),Tn("species"),Tn("split"),Tn("toPrimitive"),Tn("toStringTag"),Tn("unscopables"),Ra(se.JSON,"JSON",!0);var zet=Oo.Symbol;Tn("asyncDispose"),Tn("dispose"),Tn("matcher"),Tn("metadata"),Tn("observable"),Tn("patternMatch"),Tn("replaceAll");var AB=zet,hB=fl.f("asyncIterator"),Xet=hB;function pB(t){this.wrapped=t}function _l(t){var e,n;function r(u,s){try{var d=t[u](s),a=d.value,l=a instanceof pB;m_.resolve(l?a.wrapped:a).then(function(A){l?r(u==="return"?"return":"next",A):i(d.done?"return":"normal",A)},function(A){r("throw",A)})}catch(A){i("throw",A)}}function i(u,s){switch(u){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(u,s){return new m_(function(d,a){var l={key:u,arg:s,resolve:d,reject:a,next:null};n?n=n.next=l:(e=n=l,r(u,s))})},typeof t.return!="function"&&(this.return=void 0)}function vl(t){return function(){return new _l(t.apply(this,arguments))}}function We(t){return new pB(t)}_l.prototype[typeof AB=="function"&&Xet||"@@asyncIterator"]=function(){return this},_l.prototype.next=function(t){return this._invoke("next",t)},_l.prototype.throw=function(t){return this._invoke("throw",t)},_l.prototype.return=function(t){return this._invoke("return",t)};var Zet=fl.f("iterator");function fB(t,e){var n={},r=!1;function i(u,s){return r=!0,s=new m_(function(d){d(t[u](s))}),{done:!1,value:e(s)}}return n[AB!==void 0&&Zet||"@@iterator"]=function(){return this},n.next=function(u){return r?(r=!1,u):i("next",u)},typeof t.throw=="function"&&(n.throw=function(u){if(r)throw r=!1,u;return i("throw",u)}),typeof t.return=="function"&&(n.return=function(u){return r?(r=!1,u):i("return",u)}),n}var $et=hB,tnt=ei,ent=M,nnt=m,cf=Dt,rnt=Xn,int=Pe,ont=hs,snt=Rc,ant=Zn.f,cnt=uE,Xo=nnt.Symbol,$a=Xo&&Xo.prototype;if(ent&&int(Xo)&&(!("description"in $a)||Xo().description!==void 0)){var gB={},uf=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:snt(arguments[0]),e=ont($a,this)?new Xo(t):t===void 0?Xo():Xo(t);return t===""&&(gB[e]=!0),e};cnt(uf,Xo),uf.prototype=$a,$a.constructor=uf;var unt=String(Xo("test"))=="Symbol(test)",dnt=cf($a.toString),lnt=cf($a.valueOf),Ant=/^Symbol\((.*)\)[^)]+$/,hnt=cf("".replace),pnt=cf("".slice);ant($a,"description",{configurable:!0,get:function(){var t=lnt(this),e=dnt(t);if(rnt(gB,t))return"";var n=unt?pnt(e,7,-1):hnt(e,Ant,"$1");return n===""?void 0:n}}),tnt({global:!0,forced:!0},{Symbol:uf})}var gi={exports:{}};function EB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EB(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B_(t,e,n,r,i,u){let s=[],d=[],a=[],l=[],A=!1,p=!1;if(gi.exports.parse(t).mediaDescriptions.forEach(f=>{u&&u!==f.attributes.direction||(f.media.mediaType!=="video"||A||(d=f.attributes.payloads,l=f.attributes.extmaps,A=!0),f.media.mediaType!=="audio"||p||(s=f.attributes.payloads,a=f.attributes.extmaps,p=!0))}),!l||d.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!a||s.length===0)throw new Error("Cannot get audio capabilities from SDP.");return d.forEach(f=>{var E;(E=f.rtpMap)!==null&&E!==void 0&&E.clockRate&&(f.rtpMap.clockRate=parseInt(f.rtpMap.clockRate))}),s.forEach(f=>{var E;(E=f.rtpMap)!==null&&E!==void 0&&E.clockRate&&(f.rtpMap.clockRate=parseInt(f.rtpMap.clockRate))}),e&&(s=s.filter(f=>{var E;return((E=f.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"}),d=d.filter(f=>{var E;return((E=f.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"})),n&&(d=d.filter(f=>{var E;return!/(red)|(ulpfec)|(flexfec)/i.test(((E=f.rtpMap)===null||E===void 0?void 0:E.encodingName)||"")})),r&&(r==null?void 0:r.length)>0&&(s=s.filter(f=>{var E;return r.includes(((E=f.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())||"")})),i&&(i==null?void 0:i.length)>0&&(d=d.filter(f=>{var E;return i.includes(((E=f.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())||"")})),{audioCodecs:s,videoCodecs:d,audioExtensions:a,videoExtensions:l}}function df(t){const e=gi.exports.parse(t);let n,r;for(const i of e.mediaDescriptions){if(!n){const u=i.attributes.iceUfrag,s=i.attributes.icePwd;if(!u||!s)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:u,icePwd:s}}if(!r){const u=i.attributes.fingerprints;u.length>0&&(r={fingerprints:u})}}if(!r&&e.attributes.fingerprints.length>0&&(r={fingerprints:e.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function IB(t,e,n){const{cname:r}=t;let i;e!==void 0&&n!==void 0?(i=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e,port:n.toString(),type:"host",extension:{}}],T.debug("Using remote candidate from AP ".concat(e,":").concat(n)),wt("debug",[],"Using remote candidate from AP ".concat(e,":").concat(n))):i=t.iceParameters.candidates.map(a=>({foundation:a.foundation,componentId:"1",transport:a.protocol,priority:a.priority.toString(),connectionAddress:a.ip,port:a.port.toString(),type:a.type,extension:{}}));const u={fingerprints:t.dtlsParameters.fingerprints.map(a=>({hashFunction:a.algorithm,fingerprint:a.fingerprint}))},s={iceUfrag:t.iceParameters.iceUfrag,icePwd:t.iceParameters.icePwd};let d;switch(t.dtlsParameters.role){case"server":d="passive";break;case"client":d="active";break;case"auto":d="actpass"}return{dtlsParameters:u,iceParameters:s,candidates:i,rtpCapabilities:SB(t.rtpCapabilities),setup:d,cname:r}}function Ru(t,e,n){const r=[],i=[];return t.forEach(u=>{let{ssrcId:s,rtx:d}=u;const a=Ye(8,"track-"),l={ssrcId:s,attributes:mB({label:a,mslabel:n=n||Ye(10,""),msid:"".concat(n," ").concat(a)},e&&{cname:e})};if(r.push(l),d!==void 0){const A={ssrcId:d,attributes:mB({label:a,mslabel:n,msid:"".concat(n," ").concat(a)},e&&{cname:e})};r.push(A),i.push({semantic:"FID",ssrcIds:[s,d]})}}),t.length>1&&i.push({semantic:"SIM",ssrcIds:t.map(u=>{let{ssrcId:s}=u;return s})}),{ssrcs:r,ssrcGroups:i}}function lf(t,e){e instanceof kn&&t.attributes.payloads.forEach(n=>{var r;const i=(r=n.rtpMap)===null||r===void 0?void 0:r.encodingName.toLowerCase();if(!i||["opus","pcmu","pcma","g722"].indexOf(i)===-1)return;n.fmtp||(n.fmtp={parameters:{}}),n.fmtp.parameters.minptime="10",n.fmtp.parameters.useinbandfec="1";const u=e._encoderConfig;u&&(i!=="pcmu"&&i!=="pcma"&&i!=="g722"&&(u.bitrate&&!Cr()&&(n.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*u.bitrate))),u.sampleRate&&(n.fmtp.parameters.maxplaybackrate="".concat(u.sampleRate),n.fmtp.parameters["sprop-maxcapturerate"]="".concat(u.sampleRate))),u.stereo&&(n.fmtp.parameters.stereo="1",n.fmtp.parameters["sprop-stereo"]="1"))})}function CB(t){const e=t.attributes.unrecognized.findIndex(n=>n.attField==="x-google-flag"&&n.attValue==="conference");e!==-1&&t.attributes.unrecognized.splice(e,1)}function _B(t,e){if(!(e instanceof un&&e._encoderConfig&&e._hints.indexOf(jn.SCREEN_TRACK)===-1))return;const n=e._encoderConfig;rr().supportMinBitrate&&n.bitrateMin&&t.attributes.payloads.forEach(r=>{var i;["h264","vp8","vp9","av1"].includes(((i=r.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())||"")&&(r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters["x-google-min-bitrate"]="".concat(n.bitrateMin))}),rr().supportMinBitrate&&!e._hints.includes(jn.LOW_STREAM)&&n.bitrateMax&&t.attributes.payloads.forEach(r=>{var i;["h264","vp8","vp9","av1"].includes(((i=r.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())||"")&&(r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters["x-google-start-bitrate"]="".concat(Math.floor(n.bitrateMax)))})}function vB(t,e,n){if(!e)return;let r,i;if(t.media.mediaType==="video"?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),e.tcc===!0){const u=r.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");u&&(t.attributes.extmaps.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||t.attributes.extmaps.push({entry:u.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(s,d){return d.filter(a=>!!s.find(l=>l.payloadType===a.payloadType&&!!l.rtcpFeedbacks.find(A=>A.type==="transport-cc")))}(i,t.attributes.payloads).forEach(s=>{s.rtcpFeedbacks.find(d=>d.type==="transport-cc")||s.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(e.tcc===!1){const u=t.attributes.extmaps.findIndex(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");u!==-1&&t.attributes.extmaps.splice(u,1),t.attributes.payloads.forEach(s=>{const d=s.rtcpFeedbacks.findIndex(a=>a.type==="transport-cc");d!==-1&&s.rtcpFeedbacks.splice(d,1)})}if(e.remb===!0){const u=r.find(s=>s.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");u&&(t.attributes.extmaps.find(s=>s.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||t.attributes.extmaps.push({entry:u.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(s,d){return d.filter(a=>!!s.find(l=>l.payloadType===a.payloadType&&!!l.rtcpFeedbacks.find(A=>A.type==="goog-remb")))}(i,t.attributes.payloads).forEach(s=>{s.rtcpFeedbacks.find(d=>d.type==="goog-remb")||s.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(e.remb===!1){const u=t.attributes.extmaps.findIndex(s=>s.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");u!==-1&&t.attributes.extmaps.splice(u,1),t.attributes.payloads.forEach(s=>{const d=s.rtcpFeedbacks.findIndex(a=>a.type==="goog-remb");d!==-1&&s.rtcpFeedbacks.splice(d,1)})}}function Af(t,e,n,r,i,u){if(n==="videoExtensions"||n==="audioExtensions"){const s=[];return t[n].forEach(d=>{e[n].some((a,l)=>{if(d.entry===a.entry&&d.extensionName===a.extensionName)return s.push(l),!0})?u[n].push(d):r[n].push(d)}),void e[n].forEach((d,a)=>{s.indexOf(a)===-1&&i[n].push(d)})}if(n==="videoCodecs"||n==="audioCodecs"){const s=[];return t[n].forEach(d=>{e[n].some((a,l)=>{if(d.payloadType===a.payloadType&&JSON.stringify(d)===JSON.stringify(a))return s.push(l),!0})?u[n].push(d):r[n].push(d)}),void e[n].forEach((d,a)=>{s.indexOf(a)===-1&&i[n].push(d)})}}function SB(t){const{send:e,recv:n,sendrecv:r}=t;if(!r){if(!e||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:e,recv:n}}let i,u;return e?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...e.audioCodecs,...r.audioCodecs],i.videoCodecs=[...e.videoCodecs,...r.videoCodecs],i.audioExtensions=[...e.audioExtensions,...r.audioExtensions],i.videoExtensions=[...e.videoExtensions,...r.videoExtensions]):i=r,n?(u={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},u.audioCodecs=[...n.audioCodecs,...r.audioCodecs],u.videoCodecs=[...n.videoCodecs,...r.videoCodecs],u.audioExtensions=[...n.audioExtensions,...r.audioExtensions],u.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):u=r,{send:i,recv:u}}(function(t,e){t.exports=(()=>{var n={8:(u,s,d)=>{d.r(s),d.d(s,{Parser:()=>It,Printer:()=>ft,parse:()=>dt,print:()=>mt});const a=`
`,l="".concat("\r").concat(a),A=" ";let p;function f(tt){return tt>="0"&&tt<="9"}function E(tt){return tt>="!"&&tt<="~"}function C(tt){return E(tt)||tt>="\x80"&&tt<="\xFF"}function _(tt){return tt==="!"||tt>="#"&&tt<="'"||tt>="*"&&tt<="+"||tt>="-"&&tt<="."||tt>="0"&&tt<="9"||tt>="A"&&tt<="Z"||tt>="^"&&tt<="~"}function y(tt){return tt>="1"&&tt<="9"}function R(tt){return tt>="A"&&tt<="Z"||tt>="a"&&tt<="z"}function O(tt){return tt==="d"||tt==="h"||tt==="m"||tt==="s"}function D(tt){return tt>""&&tt<"	"||tt>"\v"&&tt<"\f"||tt>""&&tt<"\xFF"}function L(tt){return R(tt)||f(tt)||tt==="+"||tt==="/"}function G(tt){return f(tt)||R(tt)||tt==="+"||tt==="/"||tt==="-"||tt==="_"}function Z(tt){return R(tt)||f(tt)||tt==="+"||tt==="/"}function nt(tt,I){var w=Object.keys(tt);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(tt);I&&(k=k.filter(function(X){return Object.getOwnPropertyDescriptor(tt,X).enumerable})),w.push.apply(w,k)}return w}function it(tt){for(var I=1;I<arguments.length;I++){var w=arguments[I]!=null?arguments[I]:{};I%2?nt(Object(w),!0).forEach(function(k){St(tt,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(w)):nt(Object(w)).forEach(function(k){Object.defineProperty(tt,k,Object.getOwnPropertyDescriptor(w,k))})}return tt}function St(tt,I,w){return I in tt?Object.defineProperty(tt,I,{value:w,enumerable:!0,configurable:!0,writable:!0}):tt[I]=w,tt}(function(tt){tt.VERSION="v",tt.ORIGIN="o",tt.SESSION_NAME="s",tt.INFORMATION="i",tt.URI="u",tt.EMAIL="e",tt.PHONE="p",tt.CONNECTION="c",tt.BANDWIDTH="b",tt.TIME="t",tt.REPEAT="r",tt.ZONE_ADJUSTMENTS="z",tt.KEY="k",tt.ATTRIBUTE="a",tt.MEDIA="m"})(p||(p={}));class ht{consumeText(I,w){let k=w;for(;k<I.length;){const X=I[k];if(X==="\0"||X==="\r"||X===a)break;k+=1}if(k-w==0)throw new Error("Invalid text, at ".concat(I));return k}consumeUnicastAddress(I,w,k){return this.consumeTill(I,w,A)}consumeOneOrMore(I,w,k){let X=w;for(;k(I[X]);)X++;if(X-w==0)throw new Error("Invalid rule at ".concat(w,"."));return X}consumeSpace(I,w){if(I[w]===A)return w+1;throw new Error("Invalid space at ".concat(w,"."))}consumeIP4Address(I,w){let k=w;for(let X=0;X<4;X++)if(k=this.consumeDecimalUChar(I,k),X!==3){if(I[k]!==".")throw new Error("Invalid IP4 address.");k++}return k}consumeDecimalUChar(I,w){let k=w;for(let pt=0;pt<3&&f(I[k]);pt++,k++);if(k-w==0)throw new Error("Invalid decimal uchar.");const X=parseInt(I.slice(w,k));if(X>=0&&X<=255)return k;throw new Error("Invalid decimal uchar")}consumeIP6Address(I,w){let k=this.consumeHexpart(I,w);return I[k]===":"&&(k+=1,k=this.consumeIP4Address(I,k)),k}consumeHexpart(I,w){let k=w;if(I[k]===":"&&I[k+1]===":"){k+=2;try{k=this.consumeHexseq(I,k)}catch{}return k}if(k=this.consumeHexseq(I,k),I[k]===":"&&I[k+1]===":"){k+=2;try{k=this.consumeHexseq(I,k)}catch{}return k}return k}consumeHexseq(I,w){let k=w;for(;k=this.consumeHex4(I,k),I[k]===":"&&I[k+1]!==":";)k+=1;return k}consumeHex4(I,w){let k=0;for(;k<4;k++)if(!((X=I[w+k])>="0"&&X<="9"||X>="a"&&X<="f"||X>="A"&&X<="F")){if(k===0)throw new Error("Invalid hex 4");break}var X;return w+k}consumeFQDN(I,w){let k=w;for(;f(I[k])||R(I[k])||I[k]==="-"||I[k]===".";)k+=1;if(k-w<4)throw new Error("Invalid FQDN");return k}consumeExtnAddr(I,w){return this.consumeOneOrMore(I,w,C)}consumeMulticastAddress(I,w,k){switch(k){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(I,w);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(I,w);default:try{return this.consumeFQDN(I,w)}catch{return this.consumeExtnAddr(I,w)}}}consumeIP6MulticastAddress(I,w){const k=this.consumeHexpart(I,w);return I[k]==="/"?this.consumeInteger(I,k+1):k}consumeIP4MulticastAddress(I,w){let k=w+3;const X=I.slice(w,k),pt=parseInt(X);if(pt<224||pt>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Ht=0;Ht<3;Ht++){if(I[k]!==".")throw new Error("Invalid IP4 multicast address.");k+=1,k=this.consumeDecimalUChar(I,k)}return I[k]==="/"&&(k+=1),k=this.consumeTTL(I,k),I[k]==="/"&&(k=this.consumeInteger(I,k)),k}consumeInteger(I,w){if(!y(I[w]))throw new Error("Invalid integer.");for(w+=1;f(I[w]);)w+=1;return w}consumeTTL(I,w){if(I[w]==="0")return w+1;if(!y(I[w]))throw new Error("Invalid TTL.");w+=1;for(let k=0;k<2&&f(I[w]);k++)w+=1;return w}consumeToken(I,w){return this.consumeOneOrMore(I,w,_)}consumeTime(I,w){let k=w;if(I[k]==="0")return k+1;for(y(I[k])&&(k+=1);f(I[k]);)k++;if(k-w<10)throw new Error("Invalid time");return k}consumeAddress(I,w){return this.consumeTill(I,w,A)}consumeTypedTime(I,w){let k=w;return k=this.consumeOneOrMore(I,k,f),O(I[k])?k+1:k}consumeRepeatInterval(I,w){if(!y(I[w]))throw new Error("Invalid repeat interval");for(w+=1;f(I[w]);)w+=1;return O(I[w])&&(w+=1),w}consumePort(I,w){return this.consumeOneOrMore(I,w,f)}consume(I,w,k){for(let X=0;X<k.length;X++){if(w+X>=I.length)throw new Error("consume exceeding value length");if(I[w+X]!==k[X])throw new Error("consume ".concat(k," failed at ").concat(X))}return w+k.length}consumeTill(I,w,k){let X=w;for(;X<I.length&&(typeof k!="string"||I[X]!==k)&&(typeof k!="function"||!k(I[X]));)X++;return X}}class It extends ht{constructor(){super(),St(this,"records",[]),St(this,"currentLine",0)}parse(I){const w=this.probeEOL(I);this.records=I.split(w).filter(br=>!!br.trim()).map(this.parseLine),this.currentLine=0;const k=this.parseVersion(),X=this.parseOrigin(),pt=this.parseSessionName(),Ht=this.parseInformation(),Gt=this.parseUri(),Jt=this.parseEmail(),Ie=this.parsePhone(),Bn=this.parseConnection(),dn=this.parseBandWidth(),be=this.parseTimeFields(),ve=this.parseKey(),Ze=this.parseSessionAttribute(),or=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:k,origin:X,sessionName:pt,information:Ht,uri:Gt,emails:Jt,phones:Ie,connection:Bn,bandwidths:dn,timeFields:be,key:ve,attributes:Ze,mediaDescriptions:or}}getCurrentRecord(){const I=this.records[this.currentLine];if(!I)throw new Error("Record doesn't exit.");return I}probeEOL(I){for(let w=0;w<I.length;w++)if(I[w]===a)return I[w-1]==="\r"?l:a;throw new Error("Invalid newline character.")}parseLine(I,w){if(I.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const k=I[0];if(I[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:k,value:I.slice(2),line:w,cur:0}}parseSessionAttribute(){const I=new U;for(;this.currentLine<this.records.length;){const w=this.getCurrentRecord();if(w.type!==p.ATTRIBUTE)break;const k={attField:this.extractOneOrMore(w,X=>_(X)&&X!==":"),_cur:0};w.value[w.cur]===":"&&(w.cur+=1,k.attValue=this.extractOneOrMore(w,D)),I.parse(k),this.currentLine++}return I.digest()}parseMediaAttributes(I){const w=new j(I);for(;this.currentLine<this.records.length;){const k=this.getCurrentRecord();if(k.type!==p.ATTRIBUTE)break;const X={attField:this.extractOneOrMore(k,pt=>_(pt)&&pt!==":"),_cur:0};k.value[k.cur]===":"&&(k.cur+=1,X.attValue=this.extractOneOrMore(k,D)),w.parse(X),this.currentLine++}return w.digest()}parseKey(){const I=this.getCurrentRecord();if(I.type===p.KEY){if(I.value==="prompt"||I.value==="clear:"||I.value==="base64:"||I.value==="uri:")return I.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const I=this.getCurrentRecord();if(I.type===p.ZONE_ADJUSTMENTS){const w=[];for(;;)try{const k=this.extract(I,this.consumeTime);this.consumeSpaceForRecord(I);let X=!1;I.value[I.cur]==="-"&&(X=!0,I.cur+=1);const pt=this.extract(I,this.consumeTypedTime);w.push({time:k,typedTime:pt,back:X})}catch{break}if(w.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,w}return[]}parseRepeat(){const I=[];for(;;){const w=this.getCurrentRecord();if(w.type!==p.REPEAT)break;{const k=this.extract(w,this.consumeRepeatInterval),X=this.parseTypedTime(w);I.push({repeatInterval:k,typedTimes:X}),this.currentLine++}}return I}parseTypedTime(I){const w=[];for(;;)try{this.consumeSpaceForRecord(I),w.push(this.extract(I,this.consumeTypedTime))}catch{break}if(w.length===0)throw new Error("Invalid typed time.");return w}parseTime(){const I=this.getCurrentRecord(),w=this.extract(I,this.consumeTime);this.consumeSpaceForRecord(I);const k=this.extract(I,this.consumeTime);return this.currentLine++,{startTime:w,stopTime:k}}parseBandWidth(){const I=[];for(;this.currentLine<this.records.length;){const w=this.getCurrentRecord();if(w.type!==p.BANDWIDTH)break;{const k=this.extractOneOrMore(w,_);if(w.value[w.cur]!==":")throw new Error("Invalid bandwidth field.");w.cur++;const X=this.extractOneOrMore(w,f);I.push({bwtype:k,bandwidth:X}),this.currentLine++}}return I}parseVersion(){const I=this.getCurrentRecord();if(I.type!==p.VERSION)throw new Error("first sdp record must be version");const w=I.value.slice(0,this.consumeOneOrMore(I.value,0,f));if(w.length!==I.value.length)throw new Error('invalid proto version, "v='.concat(I.value,'"'));return this.currentLine++,w}parseOrigin(){const I=this.getCurrentRecord();if(I.type!==p.ORIGIN)throw new Error("second line of sdp must be origin");const w=this.extractOneOrMore(I,C);this.consumeSpaceForRecord(I);const k=this.extractOneOrMore(I,f);this.consumeSpaceForRecord(I);const X=this.extractOneOrMore(I,f);this.consumeSpaceForRecord(I);const pt=this.extractOneOrMore(I,_);this.consumeSpaceForRecord(I);const Ht=this.extractOneOrMore(I,_);this.consumeSpaceForRecord(I);const Gt=this.extract(I,this.consumeUnicastAddress);return this.currentLine++,{username:w,sessId:k,sessVersion:X,nettype:pt,addrtype:Ht,unicastAddress:Gt}}parseSessionName(){const I=this.getCurrentRecord();if(I.type===p.SESSION_NAME){const w=this.extract(I,this.consumeText);return this.currentLine++,w}}parseInformation(){const I=this.getCurrentRecord();if(I.type!==p.INFORMATION)return;const w=this.extract(I,this.consumeText);return this.currentLine++,w}parseUri(){const I=this.getCurrentRecord();if(I.type===p.URI)return this.currentLine++,I.value}parseEmail(){const I=[];for(;;){const w=this.getCurrentRecord();if(w.type!==p.EMAIL)break;I.push(w.value),this.currentLine++}return I}parsePhone(){const I=[];for(;;){const w=this.getCurrentRecord();if(w.type!==p.PHONE)break;I.push(w.value),this.currentLine++}return I}parseConnection(){const I=this.getCurrentRecord();if(I.type===p.CONNECTION){const w=this.extractOneOrMore(I,_);this.consumeSpaceForRecord(I);const k=this.extractOneOrMore(I,_);this.consumeSpaceForRecord(I);const X=this.extract(I,this.consumeAddress);return this.currentLine++,{nettype:w,addrtype:k,address:X}}}parseMedia(){const I=this.getCurrentRecord(),w=this.extract(I,this.consumeToken);this.consumeSpaceForRecord(I);let k=this.extract(I,this.consumePort);I.value[I.cur]==="/"&&(I.cur+=1,k+=this.extract(I,this.consumeInteger)),this.consumeSpaceForRecord(I);const X=[];for(X.push(this.extract(I,this.consumeToken));I.value[I.cur]==="/";)I.cur+=1,X.push(this.extract(I,this.consumeToken));if(X.length===0)throw new Error("Invalid proto");const pt=this.parseFmt(I);return this.currentLine++,{mediaType:w,port:k,protos:X,fmts:pt}}parseTimeFields(){const I=[];for(;this.getCurrentRecord().type===p.TIME;){const w=this.parseTime(),k=this.parseRepeat(),X=this.parseZone();I.push({time:w,repeats:k,zones:X})}return I}parseMediaDescription(){const I=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===p.MEDIA;){const w=this.parseMedia(),k=this.parseInformation(),X=this.parseConnections(),pt=this.parseBandWidth(),Ht=this.parseKey(),Gt=this.parseMediaAttributes(w);I.push({media:w,information:k,connections:X,bandwidths:pt,key:Ht,attributes:Gt})}return I}parseConnections(){const I=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===p.CONNECTION;)I.push(this.parseConnection());return I}parseFmt(I){const w=[];for(;;)try{this.consumeSpaceForRecord(I),w.push(this.extract(I,this.consumeToken))}catch{break}if(w.length===0)throw new Error("Invalid fmts");return w}extract(I,w,...k){const X=w.call(this,I.value,I.cur,...k),pt=I.value.slice(I.cur,X);return I.cur=X,pt}extractOneOrMore(I,w){const k=this.consumeOneOrMore(I.value,I.cur,w),X=I.value.slice(I.cur,k);return I.cur=k,X}consumeSpaceForRecord(I){if(I.value[I.cur]!==A)throw new Error("Invalid space at ".concat(I.cur,"."));I.cur+=1}}class J extends ht{constructor(...I){super(...I),St(this,"attributes",void 0),St(this,"digested",!1)}extractOneOrMore(I,w,k){const X=this.consumeOneOrMore(I.attValue,I._cur,w),pt=I.attValue.slice(I._cur,X),[Ht,Gt]=k||[];if(typeof Ht=="number"&&pt.length<Ht)throw new Error("error in length, should be more or equal than ".concat(Ht," characters."));if(typeof Gt=="number"&&pt.length>Gt)throw new Error("error in length, should be less or equal than ".concat(Gt," characters."));return I._cur=X,pt}consumeAttributeSpace(I){if(I.attValue[I._cur]!==A)throw new Error("Invalid space at ".concat(I._cur,"."));I._cur+=1}extract(I,w,...k){if(!I.attValue)throw new Error("Nothing to extract from attValue.");const X=w.call(this,I.attValue,I._cur,...k),pt=I.attValue.slice(I._cur,X);return I._cur=X,pt}atEnd(I){if(!I.attValue)throw new Error;return I._cur>=I.attValue.length}peekChar(I){if(!I.attValue)throw new Error;return I.attValue[I._cur]}peek(I,w){if(!I.attValue)throw new Error;for(let k=0;k<w.length;k++)if(w[k]!==I.attValue[I._cur+k])return!1;return!0}parseIceUfrag(I){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(I,L,[4,256])}parseIcePwd(I){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(I,L,[22,256])}parseIceOptions(I){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const w=[];for(;!this.atEnd(I);){w.push(this.extractOneOrMore(I,L));try{this.consumeAttributeSpace(I)}catch(k){if(this.atEnd(I))break;throw k}}this.attributes.iceOptions=w}parseFingerprint(I){const w=this.extract(I,this.consumeToken);this.consumeAttributeSpace(I);const k=this.extract(I,this.consumeTill);this.attributes.fingerprints.push({hashFunction:w,fingerprint:k})}parseExtmap(I){const w=this.extractOneOrMore(I,f);let k;this.peekChar(I)==="/"&&(this.extract(I,this.consume,"/"),k=this.extract(I,this.consumeToken)),this.consumeAttributeSpace(I);const X=this.extract(I,this.consumeTill,A),pt=it(it({entry:parseInt(w,10)},k&&{direction:k}),{},{extensionName:X});this.peekChar(I)===A&&(this.consumeAttributeSpace(I),pt.extensionAttributes=this.extract(I,this.consumeTill)),this.attributes.extmaps.push(pt)}parseSetup(I){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const w=this.extract(I,this.consumeTill);if(w!=="active"&&w!=="passive"&&w!=="actpass"&&w!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=w}}class U extends J{constructor(...I){super(...I),St(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(I){if(this.digested)throw new Error("already digested");try{switch(I.attField){case"group":this.parseGroup(I);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(I);break;case"ice-pwd":this.parseIcePwd(I);break;case"ice-options":this.parseIceOptions(I);break;case"fingerprint":this.parseFingerprint(I);break;case"setup":this.parseSetup(I);break;case"tls-id":this.parseTlsId(I);break;case"identity":this.parseIdentity(I);break;case"extmap":this.parseExtmap(I);break;case"msid-semantic":this.parseMsidSemantic(I);break;default:I.ignored=!0,this.attributes.unrecognized.push(I)}}catch(w){throw console.error("parsing session attribute ".concat(I.attField,' error, "a=').concat(I.attField,":").concat(I.attValue,'"')),w}if(!I.ignored&&I.attValue&&!this.atEnd(I))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(I){const w=this.extract(I,this.consumeToken),k=[];for(;!this.atEnd(I)&&this.peekChar(I)===A;)this.consumeAttributeSpace(I),k.push(this.extract(I,this.consumeToken));this.attributes.groups.push({semantic:w,identificationTag:k})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(I){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(I,G)}parseIdentity(I){const w=this.extractOneOrMore(I,Z),k=[];for(;!this.atEnd(I)&&this.peekChar(I)===A;){this.consumeAttributeSpace(I);const X=this.extract(I,this.consumeToken);this.extract(I,this.consume,"=");const pt=this.extractOneOrMore(I,Ht=>Ht!==A&&D(Ht));k.push({name:X,value:pt})}this.attributes.identities.push({assertionValue:w,extensions:k})}parseMsidSemantic(I){this.peekChar(I)===A&&this.consumeAttributeSpace(I);const w={semantic:this.extract(I,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(I)}catch{break}if(this.peekChar(I)==="*"){this.extract(I,this.consume,"*"),w.applyForAll=!0;break}{const k=this.extract(I,this.consumeTill,A);w.identifierList.push(k)}}this.attributes.msidSemantic=w}}class j extends J{constructor(I){super(),St(this,"attributes",void 0),I.protos.indexOf("RTP")!==-1||I.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(I){if(this.digested)throw new Error("already digested");try{switch(I.attField){case"extmap":this.parseExtmap(I);break;case"setup":this.parseSetup(I);break;case"ice-ufrag":this.parseIceUfrag(I);break;case"ice-pwd":this.parseIcePwd(I);break;case"ice-options":this.parseIceOptions(I);break;case"candidate":this.parseCandidate(I);break;case"remote-candidate":this.parseRemoteCandidate(I);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(I);break;case"rtpmap":this.parseRtpmap(I);break;case"ptime":this.parsePtime(I);break;case"maxptime":this.parseMaxPtime(I);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(I);break;case"ssrc":this.parseSSRC(I);break;case"fmtp":this.parseFmtp(I);break;case"rtcp-fb":this.parseRtcpFb(I);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(I);break;case"mid":this.parseMid(I);break;case"msid":this.parseMsid(I);break;case"imageattr":this.parseImageAttr(I);break;case"rid":this.parseRid(I);break;case"simulcast":this.parseSimulcast(I);break;case"sctp-port":this.parseSctpPort(I);break;case"max-message-size":this.parseMaxMessageSize(I);break;case"ssrc-group":this.parseSSRCGroup(I);break;default:I.ignored=!0,this.attributes.unrecognized.push(I)}}catch(w){throw console.error("parsing media attribute ".concat(I.attField,' error, "a=').concat(I.attField,":").concat(I.attValue,'"')),w}if(!I.ignored&&I.attValue&&!this.atEnd(I))throw new Error("attribute parsing error")}parseCandidate(I){const w=this.extractOneOrMore(I,L,[1,32]);this.consumeAttributeSpace(I);const k=this.extractOneOrMore(I,f,[1,5]);this.consumeAttributeSpace(I);const X=this.extract(I,this.consumeToken);this.consumeAttributeSpace(I);const pt=this.extractOneOrMore(I,f,[1,10]);this.consumeAttributeSpace(I);const Ht=this.extract(I,this.consumeAddress);this.consumeAttributeSpace(I);const Gt=this.extract(I,this.consumePort);this.consumeAttributeSpace(I),this.extract(I,this.consume,"typ"),this.consumeAttributeSpace(I);const Jt={foundation:w,componentId:k,transport:X,priority:pt,connectionAddress:Ht,port:Gt,type:this.extract(I,this.consumeToken),extension:{}};for(this.peek(I," raddr")&&(this.extract(I,this.consume," raddr"),this.consumeAttributeSpace(I),Jt.relAddr=this.extract(I,this.consumeAddress)),this.peek(I," rport")&&(this.extract(I,this.consume," rport"),this.consumeAttributeSpace(I),Jt.relPort=this.extract(I,this.consumePort));this.peekChar(I)===A;){this.consumeAttributeSpace(I);const Ie=this.extract(I,this.consumeToken);this.consumeAttributeSpace(I),Jt.extension[Ie]=this.extractOneOrMore(I,E)}this.attributes.candidates.push(Jt)}parseRemoteCandidate(I){const w=[];for(;;){const k=this.extractOneOrMore(I,f,[1,5]);this.consumeAttributeSpace(I);const X=this.extract(I,this.consumeAddress);this.consumeAttributeSpace(I);const pt=this.extract(I,this.consumePort);w.push({componentId:k,connectionAddress:X,port:pt});try{this.consumeAttributeSpace(I)}catch{break}}this.attributes.remoteCandidatesList.push(w)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(I){const w=this.extract(I,this.consumeToken);this.consumeAttributeSpace(I);const k=this.extract(I,this.consumeTill,"/");this.extract(I,this.consume,"/");const X={encodingName:k,clockRate:this.extractOneOrMore(I,f)};this.atEnd(I)||this.peekChar(I)!=="/"||(this.extract(I,this.consume,"/"),X.encodingParameters=parseInt(this.extract(I,this.consumeTill),10));const pt=this.attributes.payloads.find(Ht=>Ht.payloadType===parseInt(w,10));pt?pt.rtpMap=X:this.attributes.payloads.push({payloadType:parseInt(w,10),rtpMap:X,rtcpFeedbacks:[]})}parsePtime(I){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(I,this.consumeTill)}parseMaxPtime(I){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(I,this.consumeTill)}parseDirection(I){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=I.attField}parseSSRC(I){const w=this.extractOneOrMore(I,f);this.consumeAttributeSpace(I);const k=this.extract(I,this.consumeTill,":");let X;this.peekChar(I)===":"&&(this.extract(I,this.consume,":"),X=this.extract(I,this.consumeTill));const pt=this.attributes.ssrcs.find(Ht=>Ht.ssrcId===parseInt(w,10));pt?pt.attributes[k]=X:this.attributes.ssrcs.push({ssrcId:parseInt(w,10),attributes:{[k]:X}})}parseFmtp(I){const w=this.extract(I,this.consumeTill,A);this.consumeAttributeSpace(I);const k=this.extract(I,this.consumeTill),X={};k.split(";").forEach(Ht=>{let[Gt,Jt]=Ht.split("=");Gt=Gt.trim(),Jt=typeof Jt=="string"?Jt.trim():Jt,typeof Gt=="string"&&Gt.length>0&&(X[Gt]=Jt)});const pt=this.attributes.payloads.find(Ht=>Ht.payloadType===parseInt(w,10));pt?pt.fmtp={parameters:X}:this.attributes.payloads.push({payloadType:parseInt(w,10),rtcpFeedbacks:[],fmtp:{parameters:X}})}parseFmtParameters(I){const w={},k=this.extract(I,this.consumeTill,"=");I._cur++;const X=this.extract(I,this.consumeTill,";");for(w[k]=X;I.attValue[I._cur]===";";){const pt=this.extract(I,this.consumeTill,"=");I._cur++;const Ht=this.extract(I,this.consumeTill,";");w[pt]=Ht}return w}parseRtcpFb(I){let w="";w=this.peekChar(I)==="*"?this.extract(I,this.consume,"*"):this.extract(I,this.consumeTill,A),this.consumeAttributeSpace(I);const k=this.extract(I,this.consumeTill,A);let X;switch(k){case"trr-int":X={type:k,interval:this.extract(I,this.consumeTill)};break;case"ack":case"nack":default:{const pt={type:k};this.peekChar(I)===A&&(this.consumeAttributeSpace(I),pt.parameter=this.extract(I,this.consumeToken),this.peekChar(I)===A&&(pt.additional=this.extract(I,this.consumeTill))),X=pt}}if(w==="*")this.attributes.rtcpFeedbackWildcards.push(X);else{const pt=this.attributes.payloads.find(Ht=>Ht.payloadType===parseInt(w,10));pt?pt.rtcpFeedbacks.push(X):this.attributes.payloads.push({payloadType:parseInt(w,10),rtcpFeedbacks:[X]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(I){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const w={port:this.extract(I,this.consumePort)};this.peekChar(I)===A&&(this.consumeAttributeSpace(I),w.netType=this.extractOneOrMore(I,_),this.consumeAttributeSpace(I),w.addressType=this.extractOneOrMore(I,_),this.consumeAttributeSpace(I),w.address=this.extract(I,this.consumeAddress)),this.attributes.rtcp=w}parseMsid(I){const w={id:this.extractOneOrMore(I,_,[1,64])};this.peekChar(I)===A&&(this.consumeAttributeSpace(I),w.appdata=this.extractOneOrMore(I,_,[1,64])),this.attributes.msids.push(w)}parseImageAttr(I){this.attributes.imageattr.push(I.attValue)}parseRid(I){const w=this.extractOneOrMore(I,X=>R(X)||f(X)||X==="_"||X==="-");this.consumeAttributeSpace(I);const k={id:w,direction:this.extract(I,this.consumeToken),params:[]};if(this.peekChar(I)===A){if(this.consumeAttributeSpace(I),this.peek(I,"pt=")){this.extract(I,this.consume,"pt=");const X=[];for(;;){const pt=this.extract(I,this.consumeToken);X.push(pt);try{this.extract(I,this.consume,",")}catch{break}}k.payloads=X,this.peekChar(I)===A&&this.extract(I,this.consume,A)}for(;;){const X=this.extract(I,this.consumeToken);switch(X){case"depend":{const pt={type:X,rids:this.extract(I,this.consume,"=").split(",")};k.params.push(pt);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const pt={type:X};this.peekChar(I)==="="&&(this.extract(I,this.consume,"="),pt.val=this.extract(I,this.consumeTill,";")),k.params.push(pt)}}try{this.extract(I,this.consume,";")}catch{break}}}this.attributes.rids.push(k)}parseSimulcast(I){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=I.attValue,this.extract(I,this.consumeTill)}parseSctpPort(I){this.attributes.sctpPort=this.extractOneOrMore(I,f,[1,5])}parseMaxMessageSize(I){this.attributes.maxMessageSize=this.extractOneOrMore(I,f,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(I){this.attributes.mid=this.extract(I,this.consumeToken)}parseSSRCGroup(I){const w=this.extract(I,this.consumeToken),k=[];for(;;)try{this.consumeAttributeSpace(I);const X=this.extract(I,this.consumeInteger);k.push(parseInt(X,10))}catch{break}this.attributes.ssrcGroups.push({semantic:w,ssrcIds:k})}}function Y(tt,I,w){return I in tt?Object.defineProperty(tt,I,{value:w,enumerable:!0,configurable:!0,writable:!0}):tt[I]=w,tt}class ft{constructor(){Y(this,"eol",l)}print(I,w){let k="";return w&&(this.eol=w),k+=this.printVersion(I.version),k+=this.printOrigin(I.origin),k+=this.printSessionName(I.sessionName),k+=this.printInformation(I.information),k+=this.printUri(I.uri),k+=this.printEmail(I.emails),k+=this.printPhone(I.phones),k+=this.printConnection(I.connection),k+=this.printBandwidth(I.bandwidths),k+=this.printTimeFields(I.timeFields),k+=this.printKey(I.key),k+=this.printSessionAttributes(I.attributes),k+=this.printMediaDescription(I.mediaDescriptions),k}printVersion(I){return"v=".concat(I).concat(this.eol)}printOrigin(I){return"o=".concat(I.username," ").concat(I.sessId," ").concat(I.sessVersion," ").concat(I.nettype," ").concat(I.addrtype," ").concat(I.unicastAddress).concat(this.eol)}printSessionName(I){return I?"s=".concat(I).concat(this.eol):""}printInformation(I){return I?"i=".concat(I).concat(this.eol):""}printUri(I){return I?"u=".concat(I).concat(this.eol):""}printEmail(I){let w="";for(const k of I)w+="e=".concat(k).concat(this.eol);return w}printPhone(I){let w="";for(const k of I)w+="e=".concat(k).concat(this.eol);return w}printConnection(I){return I?"c=".concat(I.nettype," ").concat(I.addrtype," ").concat(I.address).concat(this.eol):""}printBandwidth(I){let w="";for(const k of I)w+="b=".concat(k.bwtype,":").concat(k.bandwidth).concat(this.eol);return w}printTimeFields(I){let w="";for(const k of I){w+="t=".concat(k.time.startTime," ").concat(k.time.startTime).concat(this.eol);for(const X of k.repeats)w+="r=".concat(X.repeatInterval," ").concat(X.typedTimes.join(" ")).concat(this.eol);k.zoneAdjustments&&(w+="z=",w+="z=".concat(k.zoneAdjustments.map(X=>"".concat(X.time," ").concat(X.back?"-":""," ").concat(X.typedTime)).join(" ")).concat(this.eol),w+=this.eol)}return w}printKey(I){return I?"k=".concat(I).concat(this.eol):""}printAttributes(I){let w="";for(const k of I)w+="a=".concat(k.attField).concat(k.attValue?":".concat(k.attValue):"").concat(this.eol);return w}printMediaDescription(I){let w="";for(const k of I)w+=this.printMedia(k.media),w+=this.printInformation(k.information),w+=this.printConnections(k.connections),w+=this.printBandwidth(k.bandwidths),w+=this.printKey(k.key),w+=this.printMediaAttributes(k);return w}printConnections(I){let w="";for(const k of I)w+=this.printConnection(k);return w}printMedia(I){return"m=".concat(I.mediaType," ").concat(I.port," ").concat(I.protos.join("/")," ").concat(I.fmts.join(" ")).concat(this.eol)}printSessionAttributes(I){return new V(this.eol).print(I)}printMediaAttributes(I){return new q(this.eol).print(I)}}class x{constructor(I){Y(this,"eol",void 0),this.eol=I}printIceUfrag(I){return I===void 0?"":"a=ice-ufrag:".concat(I).concat(this.eol)}printIcePwd(I){return I===void 0?"":"a=ice-pwd:".concat(I).concat(this.eol)}printIceOptions(I){return I===void 0?"":"a=ice-options:".concat(I.join(A)).concat(this.eol)}printFingerprints(I){return I.length>0?I.map(w=>"a=fingerprint:".concat(w.hashFunction).concat(A).concat(w.fingerprint)).join(this.eol)+this.eol:""}printExtmap(I){return I.map(w=>"a=extmap:".concat(w.entry).concat(w.direction?"/".concat(w.direction):"").concat(A).concat(w.extensionName).concat(w.extensionAttributes?"".concat(A).concat(w.extensionAttributes):"").concat(this.eol)).join("")}printSetup(I){return I===void 0?"":"a=setup:".concat(I).concat(this.eol)}printUnrecognized(I){return I.map(w=>"a=".concat(w.attField).concat(w.attValue?":".concat(w.attValue):"").concat(this.eol)).join("")}}class V extends x{print(I){let w="";return w+=this.printGroups(I.groups),w+=this.printMsidSemantic(I.msidSemantic),w+=this.printIceLite(I.iceLite),w+=this.printIceUfrag(I.iceUfrag),w+=this.printIcePwd(I.icePwd),w+=this.printIceOptions(I.iceOptions),w+=this.printFingerprints(I.fingerprints),w+=this.printSetup(I.setup),w+=this.printTlsId(I.tlsId),w+=this.printIdentity(I.identities),w+=this.printExtmap(I.extmaps),w+=this.printUnrecognized(I.unrecognized),w}printGroups(I){let w="";return I.length>0&&(w+=I.map(k=>"a=group:".concat(k.semantic).concat(k.identificationTag.map(X=>"".concat(A).concat(X)).join("")).concat(this.eol)).join("")),w}printIceLite(I){return I===void 0?"":"a=ice-lite"+this.eol}printTlsId(I){return I?"a=tls-id:".concat(I).concat(this.eol):""}printIdentity(I){return I.length===0?"":I.map(w=>"a=identity:".concat(w.assertionValue).concat(w.extensions.map(k=>"".concat(A).concat(k.name).concat(k.value?"=".concat(k.value):"")))).join(this.eol)+this.eol}printMsidSemantic(I){if(!I)return"";let w="a=msid-semantic:".concat(I.semantic);return I.applyForAll?w+="".concat(A,"*"):I.identifierList.length>0&&(w+=I.identifierList.map(k=>"".concat(A).concat(k))),w+this.eol}}class q extends x{print(I){const w=I.attributes;let k="";return k+=this.printRTCP(w.rtcp),k+=this.printIceUfrag(w.iceUfrag),k+=this.printIcePwd(w.icePwd),k+=this.printIceOptions(w.iceOptions),k+=this.printCandidates(w.candidates),k+=this.printRemoteCandidatesList(w.remoteCandidatesList),k+=this.printEndOfCandidates(w.endOfCandidates),k+=this.printFingerprints(w.fingerprints),k+=this.printSetup(w.setup),k+=this.printMid(w.mid),k+=this.printExtmap(w.extmaps),k+=this.printRTPRelated(w),k+=this.printPtime(w.ptime),k+=this.printMaxPtime(w.maxPtime),k+=this.printDirection(w.direction),k+=this.printSSRCGroups(w.ssrcGroups),k+=this.printSSRC(w.ssrcs),k+=this.printRTCPMux(w.rtcpMux),k+=this.printRTCPMuxOnly(w.rtcpMuxOnly),k+=this.printRTCPRsize(w.rtcpRsize),k+=this.printMSId(w.msids),k+=this.printImageattr(w.imageattr),k+=this.printRid(w.rids),k+=this.printSimulcast(w.simulcast),k+=this.printSCRPPort(w.sctpPort),k+=this.printMaxMessageSize(w.maxMessageSize),k+=this.printUnrecognized(w.unrecognized),k}printCandidates(I){return I.map(w=>"a=candidate:".concat(w.foundation).concat(A).concat(w.componentId).concat(A).concat(w.transport).concat(A).concat(w.priority).concat(A).concat(w.connectionAddress).concat(A).concat(w.port).concat(A,"typ").concat(A).concat(w.type).concat(w.relAddr?"".concat(A,"raddr").concat(A).concat(w.relAddr):"").concat(w.relPort?"".concat(A,"rport").concat(A).concat(w.relPort):"").concat(Object.keys(w.extension).map(k=>"".concat(A).concat(k).concat(A).concat(w.extension[k])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(I){return I.map(w=>"a=remote-candidates:".concat(w.join(A)).concat(this.eol)).join("")}printEndOfCandidates(I){return I===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(I){if(!I.payloads)return"";const w=I.payloads;let k="";k+=I.rtcpFeedbackWildcards.map(X=>this.printRTCPFeedback("*",X)).join("");for(const X of w)k+=this.printRtpMap(X.payloadType,X.rtpMap),k+=this.printFmtp(X.payloadType,X.fmtp),k+=X.rtcpFeedbacks.map(pt=>this.printRTCPFeedback(X.payloadType,pt)).join("");return k}printFmtp(I,w){if(!w)return"";const k=Object.keys(w.parameters);return k.length===1&&w.parameters[k[0]]===void 0?"a=fmtp:".concat(I).concat(A).concat(k[0]).concat(this.eol):"a=fmtp:".concat(I).concat(A).concat(Object.keys(w.parameters).map(X=>"".concat(X,"=").concat(w.parameters[X])).join(";")).concat(this.eol)}printRtpMap(I,w){return w?"a=rtpmap:".concat(I).concat(A).concat(w.encodingName,"/").concat(w.clockRate).concat(w.encodingParameters?"/".concat(w.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(I,w){let k="a=rtcp-fb:".concat(I).concat(A),X=w;switch(X.type){case"trr-int":k+="ttr-int".concat(A).concat(X.interval);break;case"ack":case"nack":default:X=X,k+="".concat(X.type),X.parameter&&(k+="".concat(A).concat(X.parameter),X.additional&&(k+="".concat(A).concat(X.additional)))}return k+this.eol}printPtime(I){return I===void 0?"":"a=ptime:".concat(I).concat(this.eol)}printMaxPtime(I){return I===void 0?"":"a=maxptime:".concat(I).concat(this.eol)}printDirection(I){return I===void 0?"":"a=".concat(I).concat(this.eol)}printSSRC(I){return I.map(w=>Object.keys(w.attributes).map(k=>"a=ssrc:".concat(w.ssrcId.toString(10)).concat(A).concat(k).concat(w.attributes[k]?":".concat(w.attributes[k]):"").concat(this.eol)).join("")).join("")}printRTCPMux(I){return I===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(I){return I===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(I){return I===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(I){if(I===void 0)return"";let w="a=rtcp:".concat(I.port);return I.netType&&(w+="".concat(A).concat(I.netType)),I.addressType&&(w+="".concat(A).concat(I.addressType)),I.address&&(w+="".concat(A).concat(I.address)),w+this.eol}printMSId(I){return I.map(w=>"a=msid:".concat(w.id).concat(w.appdata?"".concat(A).concat(w.appdata):"").concat(this.eol)).join("")}printImageattr(I){return I.map(w=>"a=imageattr:".concat(w).concat(this.eol)).join("")}printRid(I){return I.map(w=>{let k="a=rid:".concat(w.id).concat(A).concat(w.direction);return w.payloads&&(k+="".concat(A,"pt=").concat(w.payloads.join(","))),w.params.length>0&&(k+="".concat(A).concat(w.params.map(X=>X.type==="depend"?"depend=".concat(X.rids.join(",")):"".concat(X.type,"=").concat(X.val)).join(";"))),k+this.eol}).join("")}printSimulcast(I){return I===void 0?"":"a=simulcast:".concat(I).concat(this.eol)}printSCRPPort(I){return I===void 0?"":"a=sctp-port:".concat(I).concat(this.eol)}printMaxMessageSize(I){return I===void 0?"":"a=max-message-size:".concat(I)}printMid(I){return I===void 0?"":"a=mid:".concat(I).concat(this.eol)}printSSRCGroups(I){return I.map(w=>"a=ssrc-group:".concat(w.semantic).concat(w.ssrcIds.map(k=>"".concat(A).concat(k.toString(10))).join("")).concat(this.eol)).join("")}}function dt(tt){return new It().parse(tt)}function mt(tt,I){return new ft().print(tt,I)}}},r={};function i(u){if(r[u])return r[u].exports;var s=r[u]={exports:{}};return n[u](s,s.exports,i),s.exports}return i.d=(u,s)=>{for(var d in s)i.o(s,d)&&!i.o(u,d)&&Object.defineProperty(u,d,{enumerable:!0,get:s[d]})},i.o=(u,s)=>Object.prototype.hasOwnProperty.call(u,s),i.r=u=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},i(8)})()})(gi);class fnt{constructor(e){v(this,"sessionDesc",void 0),v(this,"localCapabilities",void 0),v(this,"rtpCapabilities",void 0),v(this,"candidates",void 0),v(this,"iceParameters",void 0),v(this,"dtlsParameters",void 0),v(this,"setup",void 0),v(this,"currentMidIndex",void 0),v(this,"cname",void 0),e=Pn(e);const{remoteIceParameters:n,remoteDtlsParameters:r,candidates:i,remoteRTPCapabilities:u,remoteSetup:s,localCapabilities:d,sdkCodec:a,cname:l}=e,A=gi.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=u,this.candidates=i,this.iceParameters=n,this.dtlsParameters=r,this.setup=s,this.localCapabilities=d,this.cname=l;for(let p=0;p<A.mediaDescriptions.length;p++){const f=A.mediaDescriptions[p];if(f.attributes.iceUfrag=n.iceUfrag,f.attributes.icePwd=n.icePwd,f.attributes.fingerprints=r.fingerprints,f.attributes.candidates=i,f.attributes.setup=s,f.media.mediaType==="video"){f.media.fmts=u.videoCodecs.map(C=>C.payloadType.toString(10));const E=u.videoCodecs.filter(C=>{var _;return(_=C.rtpMap)===null||_===void 0?void 0:_.encodingName.toLowerCase().includes(a)});if(E.length===0)throw new Error("Codec ".concat(a," not supported by remote SDP."));f.attributes.payloads=E,f.attributes.extmaps=u.videoExtensions}f.media.mediaType==="audio"&&(f.media.fmts=u.audioCodecs.map(E=>E.payloadType.toString(10)),f.attributes.payloads=u.audioCodecs,f.attributes.extmaps=u.audioExtensions),A.mediaDescriptions[p]=this.mungMediaDesc(f)}this.sessionDesc=A,this.currentMidIndex=A.mediaDescriptions.length-1}toString(){return gi.exports.print(this.sessionDesc)}send(e,n,r){const{ssrcs:i,ssrcGroups:u}=Ru(n,this.cname),s=this.sessionDesc.mediaDescriptions.find(l=>e===ee.VIDEO?l.media.mediaType==="video":l.media.mediaType==="audio"),d=i[0].attributes.label,a=i[0].attributes.mslabel;return s.attributes.ssrcs=s.attributes.ssrcs.concat(i),s.attributes.ssrcGroups=s.attributes.ssrcGroups.concat(u),{id:d,mslabel:a}}batchSend(e){return e.map(n=>{let{kind:r,ssrcMsg:i}=n;return this.send(r,i,void 0)})}stopSending(e){this.sessionDesc.mediaDescriptions.forEach(n=>{const r=[],i=[],u=[];n.attributes.ssrcs.forEach(s=>{e.includes(s.attributes.label||"")?u.push(s):r.push(s)}),n.attributes.ssrcGroups.forEach(s=>{u.map(d=>d.ssrcId).includes(s.ssrcIds[0])||i.push(s)}),n.attributes.ssrcs=r,n.attributes.ssrcGroups=i})}mute(e){const n=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));n.attributes.direction="inactive"}unmute(e){const n=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));n.attributes.direction="sendonly"}receive(e,n,r){e.forEach((i,u)=>{const s=i._mediaStreamTrack,d=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===s.kind),a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[d],i);this.sessionDesc.mediaDescriptions[d]=a})}stopReceiving(e){}restartICE(e,n){e=Pn(e),n=Pn(n),this.iceParameters=e,this.candidates=n,this.sessionDesc.mediaDescriptions.forEach(r=>{r.attributes.iceUfrag=e.iceUfrag,r.attributes.icePwd=e.icePwd,r.attributes.candidates=this.candidates})}predictReceivingMids(e){const n=[];for(let r=0;r<e;r++)n.push((this.currentMidIndex+r+1).toString(10));return n}mungRecvMediaDsec(e,n){const r=Pn(e);return lf(r,n),_B(r,n),r}updateRecvMedia(e,n){const r=this.sessionDesc.mediaDescriptions.findIndex(i=>i.attributes.mid===e);if(r!==-1){const i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],n);this.sessionDesc.mediaDescriptions[r]=i}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,n,r){const i=this.sessionDesc.mediaDescriptions.find(s=>e===ee.VIDEO?s.attributes.mid==="video":s.attributes.mid==="audio");if(i){const s=i.attributes.ssrcs.find(d=>d.attributes.label===n);var u;s&&(s.attributes.label=r,(u=s.attributes.msid)===null||u===void 0||u.replace(n,r))}}mungMediaDesc(e){const n=Pn(e);return CB(n),function(r){const i=r.attributes.extmaps.find(u=>u.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");i&&r.attributes.extmaps.splice(r.attributes.extmaps.indexOf(i),1),r.attributes.payloads.forEach(u=>{const s=u.rtcpFeedbacks.findIndex(d=>d.type==="transport-cc");s!==-1&&u.rtcpFeedbacks.splice(s,1)})}(n),n}}function Pi(t){if(Array.isArray(t))return t.map(function(r){return r});if(!yB(t))return t;var e={};for(var n in t)yB(t[n])||Array.isArray(t[n])?e[n]=Pi(t[n]):e[n]=t[n];return e}function yB(t){return!(typeof t!="object"||Array.isArray(t)||!t)}var M_=function(){function t(e){this.input=[],this.size=e}return t.prototype.add=function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)},t.prototype.diffMean=function(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},t}(),TB=function(t,e){return(TB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */function U_(t,e){function n(){this.constructor=t}TB(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tc=function(){return(tc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function x_(t,e,n,r){return new(n||(n=Promise))(function(i,u){function s(l){try{a(r.next(l))}catch(A){u(A)}}function d(l){try{a(r.throw(l))}catch(A){u(A)}}function a(l){l.done?i(l.value):new n(function(A){A(l.value)}).then(s,d)}a((r=r.apply(t,e||[])).next())})}function Q_(t,e){var n,r,i,u,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(a){return function(l){return function(A){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&A[0]?r.return:A[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,A[1])).done)return i;switch(r=0,i&&(A=[2&A[0],i.value]),A[0]){case 0:case 1:i=A;break;case 4:return s.label++,{value:A[1],done:!1};case 5:s.label++,r=A[1],A=[0];continue;case 7:A=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||A[0]!==6&&A[0]!==2)){s=0;continue}if(A[0]===3&&(!i||A[1]>i[0]&&A[1]<i[3])){s.label=A[1];break}if(A[0]===6&&s.label<i[1]){s.label=i[1],i=A;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(A);break}i[2]&&s.ops.pop(),s.trys.pop();continue}A=e.call(t,s)}catch(p){A=[6,p],r=0}finally{n=i=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([a,l])}}}var Li,RB={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Sl={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:RB,remoteCandidate:RB}},wB={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},bB={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},NB={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},OB={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},F_=function(){function t(e,n){var r=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=Pi(Sl),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=e,this.options=n,this.intervalTimer=window.setInterval(function(){return x_(r,void 0,void 0,function(){return Q_(this,function(i){return this.updateStats(),[2]})})},this.options.updateInterval)}return t.prototype.getStats=function(){return this.stats},t.prototype.setVideoIsReady=function(e){this.videoIsReady=e},t.prototype.setVideoIsReady2=function(e,n){this.videoIsReady2[e]=n},t.prototype.getVideoIsReady=function(e){return this.videoIsReady2[e]||!1},t.prototype.setIsFirstAudioDecoded=function(e){},t.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},t.prototype.calcLossRate=function(e){var n=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var r=this.lossRateWindowStats.length,i=0,u=0,s=0,d=0,a=function(p){e[p].forEach(function(f,E){if(n.lossRateWindowStats[r-1][p][E]&&n.lossRateWindowStats[0][p][E]){var C=n.lossRateWindowStats[r-1][p][E].packets-n.lossRateWindowStats[0][p][E].packets,_=n.lossRateWindowStats[r-1][p][E].packetsLost-n.lossRateWindowStats[0][p][E].packetsLost;p==="videoSend"||p==="audioSend"?(i+=C,s+=_):(u+=C,d+=_),Number.isNaN(C)||Number.isNaN(C)?f.packetLostRate=0:f.packetLostRate=C<=0||_<=0?0:_/(C+_)}})},l=0,A=["videoSend","audioSend","videoRecv","audioRecv"];l<A.length;l++)a(A[l]);e.sendPacketLossRate=i<=0||s<=0?0:s/(i+s),e.recvPacketLossRate=u<=0||d<=0?0:d/(u+d)},t}(),gnt=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._stats=Sl,n.lastDecodeVideoReceiverStats=new Map,n}return U_(e,t),e.prototype.updateStats=function(){return x_(this,void 0,void 0,function(){var n,r,i,u;return Q_(this,function(s){switch(s.label){case 0:return[4,this._getStats()];case 1:return n=s.sent(),r=this.statsResponsesToObjects(n),this._stats=Pi(Sl),i=r.filter(function(d){return d.type==="ssrc"}),this.processSSRCStats(i),(u=r.find(function(d){return d.type==="VideoBwe"}))&&this.processBandwidthStats(u),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},e.prototype.processBandwidthStats=function(n){this._stats.bitrate={actualEncoded:Number(n.googActualEncBitrate),targetEncoded:Number(n.googTargetEncBitrate),retransmit:Number(n.googRetransmitBitrate),transmit:Number(n.googTransmitBitrate)},this._stats.sendBandwidth=Number(n.googAvailableSendBandwidth)},e.prototype.processSSRCStats=function(n){var r=this;n.forEach(function(i){var u=i.id.includes("send");switch(i.mediaType+"_"+(u?"send":"recv")){case"video_send":var s=Pi(bB);s.codec=i.googCodecName,s.adaptionChangeReason="none",i.googCpuLimitedResolution&&(s.adaptionChangeReason="cpu"),i.googBandwidthLimitedResolution&&(s.adaptionChangeReason="bandwidth"),s.avgEncodeMs=Number(i.googAvgEncodeMs),s.inputFrame={width:Number(i.googFrameWidthInput)||Number(i.googFrameWidthSent),height:Number(i.googFrameHeightInput)||Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},s.sentFrame={width:Number(i.googFrameWidthSent),height:Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},s.firsCount=Number(i.googFirReceived),s.nacksCount=Number(i.googNacksReceived),s.plisCount=Number(i.googPlisReceived),s.frameCount=Number(i.framesEncoded),s.bytes=Number(i.bytesSent),s.packets=Number(i.packetsSent),s.packetsLost=Number(i.packetsLost),s.ssrc=Number(i.ssrc),s.rttMs=Number(i.googRtt||0),r._stats.videoSend.push(s),r._stats.rtt=s.rttMs;break;case"video_recv":var d=Pi(wB),a=r.lastDecodeVideoReceiverStats.get(Number(i.ssrc));if(d.codec=i.googCodecName,d.targetDelayMs=Number(i.googTargetDelayMs),d.renderDelayMs=Number(i.googRenderDelayMs),d.currentDelayMs=Number(i.googCurrentDelayMs),d.minPlayoutDelayMs=Number(i.googMinPlayoutDelayMs),d.decodeMs=Number(i.googDecodeMs),d.maxDecodeMs=Number(i.googMaxDecodeMs),d.receivedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateReceived)},d.decodedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateDecoded)},d.outputFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateOutput)},d.jitterBufferMs=Number(i.googJitterBufferMs),d.firsCount=Number(i.googFirsSent),d.nacksCount=Number(i.googNacksSent),d.plisCount=Number(i.googPlisSent),d.framesDecodeCount=Number(i.framesDecoded),d.bytes=Number(i.bytesReceived),d.packets=Number(i.packetsReceived),d.packetsLost=Number(i.packetsLost),d.ssrc=Number(i.ssrc),d.packets>0&&!r.isFirstVideoReceived[d.ssrc]&&(r.onFirstVideoReceived&&r.onFirstVideoReceived(d.ssrc),r.isFirstVideoReceived[d.ssrc]=!0),d.framesDecodeCount>0&&!r.isFirstVideoDecoded[d.ssrc]&&(r.onFirstVideoDecoded&&r.onFirstVideoDecoded(d.ssrc,d.decodedFrame.width,d.decodedFrame.height),r.isFirstVideoDecoded[d.ssrc]=!0),a){var l=a.stats,A=Date.now()-a.lts;d.framesDecodeFreezeTime=l.framesDecodeFreezeTime,d.framesDecodeInterval=l.framesDecodeInterval,d.framesDecodeCount>l.framesDecodeCount&&r.isFirstVideoDecoded?(a.lts=Date.now(),d.framesDecodeInterval=A,d.framesDecodeInterval>=r.options.freezeRateLimit&&(r.getVideoIsReady(parseInt(i.ssrc,10))?d.framesDecodeFreezeTime+=d.framesDecodeInterval:r.setVideoIsReady2(parseInt(i.ssrc,10),!0))):d.framesDecodeCount<a.stats.framesDecodeCount&&(d.framesDecodeInterval=0)}r.lastDecodeVideoReceiverStats.set(d.ssrc,{stats:tc({},d),lts:Date.now()}),r._stats.videoRecv.push(d);break;case"audio_recv":var p=Pi(OB);p.codec=i.googCodecName,p.outputLevel=Math.abs(Number(i.audioOutputLevel))/32767,p.decodingCNG=Number(i.googDecodingCNG),p.decodingCTN=Number(i.googDecodingCTN),p.decodingCTSG=Number(i.googDecodingCTSG),p.decodingNormal=Number(i.googDecodingNormal),p.decodingPLC=Number(i.googDecodingPLC),p.decodingPLCCNG=Number(i.googDecodingPLCCNG),p.expandRate=Number(i.googExpandRate),p.accelerateRate=Number(i.googAccelerateRate),p.preemptiveExpandRate=Number(i.googPreemptiveExpandRate),p.secondaryDecodedRate=Number(i.googSecondaryDecodedRate),p.speechExpandRate=Number(i.googSpeechExpandRate),p.preferredJitterBufferMs=Number(i.googPreferredJitterBufferMs),p.jitterBufferMs=Number(i.googJitterBufferMs),p.jitterMs=Number(i.googJitterReceived),p.bytes=Number(i.bytesReceived),p.packets=Number(i.packetsReceived),p.packetsLost=Number(i.packetsLost),p.ssrc=Number(i.ssrc),p.receivedFrames=Number(i.googDecodingCTN)||Number(i.packetsReceived),p.droppedFrames=Number(i.googDecodingPLC)+Number(i.googDecodingPLCCNG)||Number(i.packetsLost),p.receivedFrames>0&&!r.isFirstAudioReceived[p.ssrc]&&(r.onFirstAudioReceived&&r.onFirstAudioReceived(p.ssrc),r.isFirstAudioReceived[p.ssrc]=!0),p.decodingNormal>0&&!r.isFirstAudioDecoded[p.ssrc]&&(r.onFirstAudioDecoded&&r.onFirstAudioDecoded(p.ssrc),r.isFirstAudioDecoded[p.ssrc]=!0),r._stats.audioRecv.push(p);break;case"audio_send":var f=Pi(NB);f.codec=i.googCodecName,f.inputLevel=Math.abs(Number(i.audioInputLevel))/32767,f.aecReturnLoss=Number(i.googEchoCancellationReturnLoss||0),f.aecReturnLossEnhancement=Number(i.googEchoCancellationReturnLossEnhancement||0),f.residualEchoLikelihood=Number(i.googResidualEchoLikelihood||0),f.residualEchoLikelihoodRecentMax=Number(i.googResidualEchoLikelihoodRecentMax||0),f.bytes=Number(i.bytesSent),f.packets=Number(i.packetsSent),f.packetsLost=Number(i.packetsLost),f.ssrc=Number(i.ssrc),f.rttMs=Number(i.googRtt||0),r._stats.rtt=f.rttMs,r._stats.audioSend.push(f)}})},e.prototype._getStats=function(){var n=this;return new Promise(function(r,i){n.pc.getStats(r,i)})},e.prototype.statsResponsesToObjects=function(n){var r=[];return n.result().forEach(function(i){var u={id:i.id,timestamp:i.timestamp.valueOf().toString(),type:i.type};i.names().forEach(function(s){u[s]=i.stat(s)}),r.push(u)}),r},e}(F_);(function(t){t.CERTIFICATE="certificate",t.CODEC="codec",t.CANDIDATE_PAIR="candidate-pair",t.LOCAL_CANDIDATE="local-candidate",t.REMOTE_CANDIDATE="remote-candidate",t.INBOUND="inbound-rtp",t.TRACK="track",t.OUTBOUND="outbound-rtp",t.PC="peer-connection",t.REMOTE_INBOUND="remote-inbound-rtp",t.REMOTE_OUTBOUND="remote-outbound-rtp",t.TRANSPORT="transport",t.CSRC="csrc",t.DATA_CHANNEL="data-channel",t.STREAM="stream",t.SENDER="sender",t.RECEIVER="receiver"})(Li||(Li={}));var fe,DB=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._stats=Sl,n.lastDecodeVideoReceiverStats=new Map,n.lastVideoFramesRecv=new Map,n.lastVideoFramesSent=new Map,n.lastVideoFramesDecode=new Map,n.lastVideoJBDelay=new Map,n.lastAudioJBDelay=new Map,n.mediaBytesSent=new Map,n.mediaBytesRetransmit=new Map,n.mediaBytesTargetEncode=new Map,n.lastEncoderMs=new Map,n}return U_(e,t),e.prototype.updateStats=function(){return x_(this,void 0,void 0,function(){var n,r=this;return Q_(this,function(i){switch(i.label){case 0:return n=this,[4,this.pc.getStats()];case 1:return n.report=i.sent(),this._stats=Pi(Sl),this.report.forEach(function(u){switch(u.type){case Li.OUTBOUND:u.mediaType==="audio"?r.processAudioOutboundStats(u):u.mediaType==="video"&&r.processVideoOutboundStats(u);break;case Li.INBOUND:u.mediaType==="audio"?r.processAudioInboundStats(u):u.mediaType==="video"&&r.processVideoInboundStats(u);break;case Li.TRANSPORT:var s=r.report.get(u.selectedCandidatePairId);s&&r.processCandidatePairStats(s);break;case Li.CANDIDATE_PAIR:u.selected&&r.processCandidatePairStats(u)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},e.prototype.processCandidatePairStats=function(n){if(this._stats.sendBandwidth=n.availableOutgoingBitrate||0,n.currentRoundTripTime&&(this._stats.rtt=1e3*n.currentRoundTripTime),this._stats.videoSend.forEach(function(u){!u.rttMs&&n.currentRoundTripTime&&(u.rttMs=1e3*n.currentRoundTripTime)}),this._stats.audioSend.forEach(function(u){!u.rttMs&&n.currentRoundTripTime&&(u.rttMs=1e3*n.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=n.id,n.localCandidateId){var r=this.report.get(n.localCandidateId);r&&this.processCandidateStats(r)}if(n.remoteCandidateId){var i=this.report.get(n.remoteCandidateId);i&&this.processCandidateStats(i)}},e.prototype.processCandidateStats=function(n){var r;n.type===Li.LOCAL_CANDIDATE&&(r=this._stats.selectedCandidatePair.localCandidate),n.type===Li.REMOTE_CANDIDATE&&(r=this._stats.selectedCandidatePair.remoteCandidate),r&&(r.type=n.type,r.id=n.id,n.address&&(r.address=n.address),n.candidateType&&(r.candidateType=n.candidateType),n.port&&(r.port=n.port),n.priority&&(r.priority=n.priority),n.protocol&&(r.protocol=n.protocol),n.relayProtocol&&(r.relayProtocol=n.relayProtocol),n.type===Li.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==r.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(tc({},r),tc({},this.stats.selectedCandidatePair.localCandidate)),n.type===Li.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==r.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(tc({},r),tc({},this.stats.selectedCandidatePair.remoteCandidate)))},e.prototype.processAudioInboundStats=function(n){var r=this._stats.audioRecv.find(function(i){return i.ssrc===n.ssrc});r||(r=Pi(OB),this._stats.audioRecv.push(r)),r.ssrc=n.ssrc,r.packets=n.packetsReceived,r.packetsLost=n.packetsLost,r.bytes=n.bytesReceived,r.jitterMs=1e3*n.jitter,n.trackId&&this.processAudioTrackReceiverStats(n.trackId,r),n.codecId&&(r.codec=this.getCodecFromCodecStats(n.codecId)),r.receivedFrames||(r.receivedFrames=n.packetsReceived),r.droppedFrames||(r.droppedFrames=n.packetsLost),r.receivedFrames>0&&!this.isFirstAudioReceived[r.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(r.ssrc),this.isFirstAudioReceived[r.ssrc]=!0),r.outputLevel&&r.outputLevel>0&&!this.isFirstAudioDecoded[r.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(r.ssrc),this.isFirstAudioDecoded[r.ssrc]=!0)},e.prototype.processVideoInboundStats=function(n){var r=this._stats.videoRecv.find(function(p){return p.ssrc===n.ssrc});r||(r=Pi(wB),this._stats.videoRecv.push(r)),r.ssrc=n.ssrc,r.packets=n.packetsReceived,r.packetsLost=n.packetsLost,r.bytes=n.bytesReceived,r.firsCount=n.firCount,r.nacksCount=n.nackCount,r.plisCount=n.pliCount,r.framesDecodeCount=n.framesDecoded;var i=this.lastDecodeVideoReceiverStats.get(r.ssrc),u=this.lastVideoFramesDecode.get(r.ssrc),s=Date.now();if(r.framesDecodeCount>0&&!this.isFirstVideoDecoded[r.ssrc]){var d=r.decodedFrame?r.decodedFrame.width:0,a=r.decodedFrame?r.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(r.ssrc,d,a),this.isFirstVideoDecoded[r.ssrc]=!0}if(i){var l=i.stats,A=s-i.lts;r.framesDecodeFreezeTime=l.framesDecodeFreezeTime,r.framesDecodeInterval=l.framesDecodeInterval,r.framesDecodeCount>l.framesDecodeCount&&this.isFirstVideoDecoded?(i.lts=Date.now(),r.framesDecodeInterval=A,r.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(n.ssrc))?r.framesDecodeFreezeTime+=r.framesDecodeInterval:this.setVideoIsReady2(parseInt(n.ssrc,10),!0))):r.framesDecodeCount<l.framesDecodeCount&&(r.framesDecodeInterval=0),n.framesDecoded&&n.qpSum&&(i.stats.framesDecodeCount>n.framesDecoded?r.qpSumPerFrame=n.qpSum/n.framesDecoded:r.qpSumPerFrame=(n.qpSum-i.qpSum)/(n.framesDecoded-i.stats.framesDecodeCount))}u&&s-u.lts>=800?(r.decodeFrameRate=Math.round((r.framesDecodeCount-u.count)/((s-u.lts)/1e3)),this.lastVideoFramesDecode.set(r.ssrc,{count:r.framesDecodeCount,lts:s,rate:r.decodeFrameRate})):u?r.decodeFrameRate=u.rate:this.lastVideoFramesDecode.set(r.ssrc,{count:r.framesDecodeCount,lts:s,rate:0}),n.totalDecodeTime&&(r.decodeMs=1e3*n.totalDecodeTime),n.trackId&&this.processVideoTrackReceiverStats(n.trackId,r),n.codecId&&(r.codec=this.getCodecFromCodecStats(n.codecId)),n.framerateMean&&(r.framesRateFirefox=n.framerateMean),r.packets>0&&!this.isFirstVideoReceived[r.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(r.ssrc),this.isFirstVideoReceived[r.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(r.ssrc,{stats:tc({},r),lts:i?i.lts:Date.now(),qpSum:n.qpSum})},e.prototype.processVideoOutboundStats=function(n){var r=this._stats.videoSend.find(function(f){return f.ssrc===n.ssrc});r||(r=Pi(bB),this._stats.videoSend.push(r));var i,u=this.mediaBytesSent.get(n.ssrc);if(u?u.add(n.bytesSent):((d=new M_(10)).add(n.bytesSent),this.mediaBytesSent.set(n.ssrc,d)),n.retransmittedBytesSent!==void 0){var s=this.mediaBytesRetransmit.get(n.ssrc);s?s.add(n.retransmittedBytesSent):((d=new M_(10)).add(n.retransmittedBytesSent),this.mediaBytesRetransmit.set(n.ssrc,d))}if(n.totalEncodedBytesTarget){var d,a=this.mediaBytesTargetEncode.get(n.ssrc);a?a.add(n.totalEncodedBytesTarget):((d=new M_(10)).add(n.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(n.ssrc,d))}if(r.ssrc=n.ssrc,r.bytes=n.bytesSent,r.packets=n.packetsSent,r.firsCount=n.firCount,r.nacksCount=n.nackCount,r.plisCount=n.pliCount,r.frameCount=n.framesEncoded,r.adaptionChangeReason=n.qualityLimitationReason,n.totalEncodeTime&&n.framesEncoded)if(!(i=this.lastEncoderMs.get(n.ssrc))||i.lastFrameCount>n.framesEncoded)r.avgEncodeMs=1e3*n.totalEncodeTime/n.framesEncoded;else{var l=n.framesEncoded-i.lastFrameCount,A=n.totalEncodeTime-i.lastEncoderTime;r.avgEncodeMs=1e3*A/l}if(n.framesEncoded&&n.qpSum&&(!(i=this.lastEncoderMs.get(n.ssrc))||i.lastFrameCount>n.framesEncoded?r.qpSumPerFrame=n.qpSum/n.framesEncoded:r.qpSumPerFrame=(n.qpSum-i.lastQpSum)/(n.framesEncoded-i.lastFrameCount)),this.lastEncoderMs.set(n.ssrc,{lastFrameCount:n.framesEncoded,lastEncoderTime:n.totalEncodeTime,lastQpSum:n.qpSum,lts:Date.now()}),n.codecId&&(r.codec=this.getCodecFromCodecStats(n.codecId)),n.mediaSourceId&&this.processVideoMediaSource(n.mediaSourceId,r),n.trackId&&this.processVideoTrackSenderStats(n.trackId,r),n.remoteId)this.processRemoteInboundStats(n.remoteId,r);else{var p=this.findRemoteStatsId(n.ssrc,Li.REMOTE_INBOUND);p&&this.processRemoteInboundStats(p,r)}},e.prototype.processAudioOutboundStats=function(n){var r=this._stats.audioSend.find(function(u){return u.ssrc===n.ssrc});if(r||(r=Pi(NB),this._stats.audioSend.push(r)),r.ssrc=n.ssrc,r.packets=n.packetsSent,r.bytes=n.bytesSent,n.mediaSourceId&&this.processAudioMediaSource(n.mediaSourceId,r),n.codecId&&(r.codec=this.getCodecFromCodecStats(n.codecId)),n.trackId&&this.processAudioTrackSenderStats(n.trackId,r),n.remoteId)this.processRemoteInboundStats(n.remoteId,r);else{var i=this.findRemoteStatsId(n.ssrc,Li.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,r)}},e.prototype.findRemoteStatsId=function(n,r){var i=Array.from(this.report.values()).find(function(u){return u.type===r&&u.ssrc===n});return i?i.id:null},e.prototype.processVideoMediaSource=function(n,r){var i=this.report.get(n);i&&i.width&&i.height&&i.framesPerSecond&&(r.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})},e.prototype.processAudioMediaSource=function(n,r){var i=this.report.get(n);i&&(r.inputLevel=i.audioLevel)},e.prototype.processVideoTrackSenderStats=function(n,r){var i=this.report.get(n);if(i){var u=0,s=Date.now(),d=this.lastVideoFramesSent.get(r.ssrc);d&&s-d.lts>=800?(u=Math.round((i.framesSent-d.count)/((s-d.lts)/1e3)),this.lastVideoFramesSent.set(r.ssrc,{count:i.framesSent,lts:s,rate:u})):d?u=d.rate:this.lastVideoFramesSent.set(r.ssrc,{count:i.framesSent,lts:s,rate:0}),r.sentFrame={width:i.frameWidth,height:i.frameHeight,frameRate:u}}},e.prototype.processVideoTrackReceiverStats=function(n,r){var i=this.report.get(n);if(i){var u=this.lastVideoFramesRecv.get(r.ssrc),s=Date.now();r.framesReceivedCount=i.framesReceived;var d=0;if(u&&s-u.lts>=800?(d=Math.round((i.framesReceived-u.count)/((s-u.lts)/1e3)),this.lastVideoFramesRecv.set(r.ssrc,{count:i.framesReceived,lts:s,rate:d})):u?d=u.rate:this.lastVideoFramesRecv.set(r.ssrc,{count:i.framesReceived,lts:s,rate:0}),r.receivedFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:d||0},r.decodedFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:r.decodeFrameRate||0},r.outputFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:r.decodeFrameRate||0},i.jitterBufferDelay&&i.jitterBufferEmittedCount){var a=this.lastVideoJBDelay.get(r.ssrc);this.lastVideoJBDelay.set(r.ssrc,{jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount}),a||(a={jitterBufferDelay:0,jitterBufferEmittedCount:0});var l=1e3*(i.jitterBufferDelay-a.jitterBufferDelay)/(i.jitterBufferEmittedCount-a.jitterBufferEmittedCount);r.jitterBufferMs=l,r.currentDelayMs=Math.round(l)}}},e.prototype.processAudioTrackSenderStats=function(n,r){var i=this.report.get(n);i&&(r.aecReturnLoss=i.echoReturnLoss||0,r.aecReturnLossEnhancement=i.echoReturnLossEnhancement||0)},e.prototype.processAudioTrackReceiverStats=function(n,r){var i=this.report.get(n);if(i){if(i.removedSamplesForAcceleration&&i.totalSamplesReceived&&(r.accelerateRate=i.removedSamplesForAcceleration/i.totalSamplesReceived),i.jitterBufferDelay&&i.jitterBufferEmittedCount){var u=this.lastAudioJBDelay.get(r.ssrc);this.lastAudioJBDelay.set(r.ssrc,{jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount}),u||(u={jitterBufferDelay:0,jitterBufferEmittedCount:0});var s=1e3*(i.jitterBufferDelay-u.jitterBufferDelay)/(i.jitterBufferEmittedCount-u.jitterBufferEmittedCount);r.jitterBufferMs=Math.round(s)}r.outputLevel=i.audioLevel;var d=1920;i.totalSamplesDuration&&i.totalSamplesReceived&&(d=i.totalSamplesReceived/i.totalSamplesDuration/50,r.receivedFrames=Math.round(i.totalSamplesReceived/d)),i.concealedSamples&&(r.droppedFrames=Math.round(i.concealedSamples/d))}},e.prototype.processRemoteInboundStats=function(n,r){var i=this.report.get(n);i&&(r.packetsLost=i.packetsLost,i.roundTripTime&&(r.rttMs=1e3*i.roundTripTime))},e.prototype.getCodecFromCodecStats=function(n){var r=this.report.get(n);if(!r)return"";var i=r.mimeType.match(/\/(.*)$/);return i&&i[1]?i[1]:""},e.prototype.updateSendBitrate=function(){var n=0,r=null,i=null;this.mediaBytesSent.forEach(function(s){n+=s.diffMean()}),this.mediaBytesRetransmit.forEach(function(s){r=r===null?s.diffMean():r+s.diffMean()}),this.mediaBytesTargetEncode.forEach(function(s){i=i===null?s.diffMean():i+s.diffMean()});var u=r!==null?n-r:n;this._stats.bitrate={actualEncoded:8*u/(this.options.updateInterval/1e3),transmit:8*n/(this.options.updateInterval/1e3)},r!==null&&(this._stats.bitrate.retransmit=8*r/(this.options.updateInterval/1e3)),i!==null&&(this._stats.bitrate.targetEncoded=8*i/(this.options.updateInterval/1e3))},e}(F_),Ent=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U_(e,t),e.prototype.updateStats=function(){return Promise.resolve()},e}(F_);function kB(t,e,n,r){e===void 0&&(e=250),n===void 0&&(n=8),r===void 0&&(r=500);var i,u=(i=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&i[0]?Number(i[0].split("/")[1]):null;return u?u<76?new gnt(t,{updateInterval:e,lossRateInterval:n,freezeRateLimit:r}):new DB(t,{updateInterval:e,lossRateInterval:n,freezeRateLimit:r}):function(s){return!!window.RTCStatsReport&&s.getStats()instanceof Promise}(t)?new DB(t,{updateInterval:e,lossRateInterval:n,freezeRateLimit:r}):new Ent(t,{updateInterval:e,lossRateInterval:n,freezeRateLimit:r})}function PB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}let mnt=(Lt((fe=class zf extends rO{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(e,n){super(e,n),v(this,"store",void 0),v(this,"peerConnection",void 0),v(this,"remoteSDP",void 0),v(this,"initialOffer",void 0),v(this,"statsFilter",void 0),v(this,"useRTX",!1),v(this,"localCapabilities",void 0),v(this,"localCandidateCount",0),v(this,"allCandidatesReceived",!1),v(this,"mutex",new Tr("P2PConnection-mutex")),this.store=n,this.peerConnection=new RTCPeerConnection(zf.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=kB(this.peerConnection,void 0,void 0,Cr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const n=df(e.sdp),r=B_(e.sdp,!this.useRTX,!1,["opus"]);return this.localCapabilities=r,this.initialOffer=e,LB(LB({},n),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:r},offerSDP:e.sdp})}catch(e){throw new B(P.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,n,r,i,u,s){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new fnt({remoteIceParameters:e,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i.send,remoteSetup:u,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:s});const d=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(d){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(d.toString()))}}send(e,n){var r=this;return vl(function*(){const i=yield We(r.mutex.lock());try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const u=e.map(f=>r.peerConnection.addTrack(f._mediaStreamTrack)),s=yield We(r.peerConnection.createOffer()),d=gi.exports.parse(s.sdp),a=e.map(f=>{const E=f._mediaStreamTrack,C=d.mediaDescriptions.find(_=>_.attributes.mid===E.kind);if(!C)throw new Error("Cannot extract ssrc from mediaDescription.");return function(_,y,R){const O=_.attributes.ssrcs.filter(L=>L.attributes.label===y),D=_.attributes.ssrcGroups;if(O.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(D&&O.length>1){const L=D.find(G=>G.ssrcIds.indexOf(O[0].ssrcId)!==-1);return L?[{ssrcId:L.ssrcIds[0],rtx:R?L.ssrcIds[1]:void 0}]:[{ssrcId:O[0].ssrcId}]}return[{ssrcId:O[0].ssrcId}]}(C,E.id,r.useRTX)});let l;try{l=yield a}catch(f){throw u.forEach(E=>{Lr()&&E.replaceTrack(null),r.peerConnection.removeTrack(E)}),f}const A=r.mungSendOfferSDP(s.sdp,e);r.remoteSDP.receive(e,n,l);const p=r.remoteSDP.toString();return yield We(r.peerConnection.setLocalDescription({type:"offer",sdp:A})),yield We(r.applySendEncodings(u,e)),yield We(r.peerConnection.setRemoteDescription({type:"answer",sdp:p})),e.map((f,E)=>{const C=f._mediaStreamTrack.id;return{localSSRC:a[E],id:C}})}catch(u){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(u.toString()))}finally{i()}})()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const n=this.peerConnection.getSenders().filter(u=>{var s;return e.indexOf(((s=u.track)===null||s===void 0?void 0:s.id)||"")!==-1});if(n.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");n.map(u=>{Lr()&&u.replaceTrack(null),this.peerConnection.removeTrack(u)});const r=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(r),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(n.toString()))}}async receive(e,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:u,mslabel:s}=this.remoteSDP.send(e,n,i),d=new Nt((A,p)=>{const f=setTimeout(()=>{p(new Error("Cannot receive track, id: ".concat(u)))},1e4),E=C=>{const _=ye();if((_.name==="Safari"&&Number(_.version)===11||_r())&&C.track.id!==u&&C.streams[0].id===s){var y;const R=C.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(e,u,C.track.id),this.peerConnection.removeEventListener("track",E),clearTimeout(f),void A(R)}if(C.track.id===u)return this.peerConnection.removeEventListener("track",E),clearTimeout(f),void A(C.track)};this.peerConnection.addEventListener("track",E)}),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),{track:await d,id:u}}catch(u){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(r)}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(n.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const n=this.peerConnection.getSenders().filter(r=>{var i;return e.indexOf(((i=r.track)===null||i===void 0?void 0:i.id)||"")!==-1});if(n.length!==e.length)throw new Error("sender' length doesn't match mids' length.");n.map(r=>{if(Lr()&&r.track)r.track.enabled=!1;else{const i=r.getParameters();i.encodings.forEach(u=>u.active=!1),r.setParameters(i)}})}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(n.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const n=this.peerConnection.getSenders().filter(u=>{var s;return e.indexOf(((s=u.track)===null||s===void 0?void 0:s.id)||"")!==-1});if(n.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");n.map(async u=>{if(Lr()&&u.track)u.track.enabled=!0;else{const s=u.getParameters();s.encodings.forEach(d=>d.active=!0),await u.setParameters(s)}});const r=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(r);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(n.toString()))}}async reEstablish(){const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:df(e.sdp).iceParameters,restartICE:async(n,r)=>this.restartICE(e,n,r),restartOfferSDP:e.sdp}}close(){var e;this.peerConnection.close(),(e=this.onConnectionStateChange)===null||e===void 0||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const r=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(r.sdp,[n]);this.remoteSDP.updateRecvMedia(n._mediaStreamTrack.kind,n);const u=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(r){throw new B(P.EXCHANGE_SDP_FAILED,r.toString())}}async updateSendParameters(e,n){const r=this.peerConnection.getSenders().filter(i=>{var u;return((u=i.track)===null||u===void 0?void 0:u.id)===e});r.length===1&&await this.applySendEncodings(r,[n])}setStatsRemoteVideoIsReady(e,n){this.statsFilter.setVideoIsReady2(e,n)}async replaceTrack(e,n){const r=this.peerConnection.getSenders().find(i=>{var u;return((u=i.track)===null||u===void 0?void 0:u.id)===n});r&&await r.replaceTrack(e._mediaStreamTrack)}async restartICE(e,n,r){try{if(!this.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");this.remoteSDP.restartICE(n,r);const i=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(e),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(i){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(i.toString()))}}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;(e=this.onICEConnectionStateChange)===null||e===void 0||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;(e=this.onConnectionStateChange)===null||e===void 0||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,T.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,T.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},st("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const n={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?n.iceServers=e.iceServers:e.turnServer&&e.turnServer.mode!=="off"&&(wI(e.turnServer.servers)?n.iceServers=e.turnServer.servers:(n.iceServers&&n.iceServers.push(...zf.turnServerConfigToIceServers(e.turnServer.servers)),st("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&e.turnServer.serversFromGateway&&n.iceServers.push(...zf.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach(r=>{r.forceturn&&(n.iceTransportPolicy="relay")}))),n}static turnServerConfigToIceServers(e){const n=[];return e.forEach(r=>{r.security?r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turns:".concat(r.turnServerURL,":").concat(r.tcpport,"?transport=tcp")}):(r.udpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.udpport,"?transport=udp")}),r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.tcpport,"?transport=tcp")}))}),n}async applySendEncodings(e,n){try{if(!rr().supportSetRtpSenderParameters||e.length!==n.length)return;for(let i=0;i<e.length;i++){var r;const u=e[i],s=n[i];if(!s)continue;const d={},a={};if(s instanceof un)switch(s._optimizationMode){case"motion":d.degradationPreference="maintain-framerate";break;case"detail":d.degradationPreference="maintain-resolution";break;default:d.degradationPreference="balanced"}if(st("DSCP_TYPE")&&Yc()){const p=st("DSCP_TYPE");["very-low","low","medium","high"].includes(p)&&(a.networkPriority=p)}const l=u.getParameters(),A=(r=l.encodings)===null||r===void 0?void 0:r[0];A&&Object.assign(A,a),Object.assign(l,d),await u.setParameters(l)}}catch{T.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,n){const r=gi.exports.parse(e);return n.forEach((i,u)=>{const s=i._mediaStreamTrack,d=r.mediaDescriptions.find(a=>a.attributes.mid===s.kind);d&&lf(d,i)}),gi.exports.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var n;(n=this.onFirstAudioReceived)===null||n===void 0||n.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var n;(n=this.onFirstVideoReceived)===null||n===void 0||n.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var n;(n=this.onFirstAudioDecoded)===null||n===void 0||n.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,n,r)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,e,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=(e,n)=>{var r;(r=this.onSelectedLocalCandidateChanged)===null||r===void 0||r.call(this,e,n)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,n)=>{var r;(r=this.onSelectedRemoteCandidateChanged)===null||r===void 0||r.call(this,e,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const n=this.remoteSDP.batchSend(e).map((u,s)=>{let{id:d,mslabel:a}=u;const{kind:l}=e[s];return new Nt((A,p)=>{const f=setTimeout(()=>{p(new Error("Cannot receive track, id: ".concat(d)))},1e4),E=C=>{const _=ye();if(_.name==="Safari"&&Number(_.version)===11&&C.track.id!==d&&C.streams[0].id===a){var y;const R=C.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(l,d,C.track.id),this.peerConnection.removeEventListener("track",E),clearTimeout(f),void A({track:R,id:d})}if(C.track.id===d)return this.peerConnection.removeEventListener("track",E),clearTimeout(f),void A({track:C.track,id:d})};this.peerConnection.addEventListener("track",E)})}),r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});const i=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(i),await Nt.all(n)}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(n.toString()))}}}).prototype,"connect",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"connect"),fe.prototype),Lt(fe.prototype,"stopSending",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"stopSending"),fe.prototype),Lt(fe.prototype,"receive",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"receive"),fe.prototype),Lt(fe.prototype,"stopReceiving",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"stopReceiving"),fe.prototype),Lt(fe.prototype,"muteRemote",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"muteRemote"),fe.prototype),Lt(fe.prototype,"unmuteRemote",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"unmuteRemote"),fe.prototype),Lt(fe.prototype,"muteLocal",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"muteLocal"),fe.prototype),Lt(fe.prototype,"unmuteLocal",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"unmuteLocal"),fe.prototype),Lt(fe.prototype,"reEstablish",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"reEstablish"),fe.prototype),Lt(fe.prototype,"close",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"close"),fe.prototype),Lt(fe.prototype,"updateEncoderConfig",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"updateEncoderConfig"),fe.prototype),Lt(fe.prototype,"updateSendParameters",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"updateSendParameters"),fe.prototype),Lt(fe.prototype,"replaceTrack",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"replaceTrack"),fe.prototype),Lt(fe.prototype,"restartICE",[Gr],Object.getOwnPropertyDescriptor(fe.prototype,"restartICE"),fe.prototype),fe);function Gr(t,e,n){const r=t[e];if(typeof r!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){const i=this.mutex,u=await i.lock("Locking from P2PConnection.".concat(e));try{for(var s=arguments.length,d=new Array(s),a=0;a<s;a++)d[a]=arguments[a];return await r.apply(this,d)}finally{u()}},n}var BB;const hf="9",MB=4e4;let Int=Qn("RemoteSDP")(BB=class{get localCapabilities(){return Pn(this._localCapabilities)}get rtpCapabilities(){return Pn(this._rtpCapabilities)}get candidates(){return Pn(this._candidates)}get iceParameters(){return Pn(this._iceParameters)}get dtlsParameters(){return Pn(this._dtlsParameters)}constructor(t){v(this,"sessionDesc",void 0),v(this,"_localCapabilities",void 0),v(this,"_rtpCapabilities",void 0),v(this,"_candidates",void 0),v(this,"_iceParameters",void 0),v(this,"_dtlsParameters",void 0),v(this,"setup",void 0),v(this,"currentMidIndex",void 0),v(this,"cname",void 0),t=Pn(t);const{remoteIceParameters:e,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:u,localCapabilities:s,cname:d}=t,a=gi.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=i,this._candidates=r,this._iceParameters=e,this._dtlsParameters=n,this._localCapabilities=s,this.setup=u,this.cname=d;const l=this.rtpCapabilities.send;for(const A of a.mediaDescriptions){if(A.attributes.iceUfrag=e.iceUfrag,A.attributes.icePwd=e.icePwd,A.attributes.fingerprints=n.fingerprints,A.attributes.candidates=r,A.attributes.setup=u,A.media.mediaType==="video"&&(A.media.fmts=l.videoCodecs.map(p=>p.payloadType.toString(10)),A.attributes.payloads=l.videoCodecs,A.attributes.extmaps=l.videoExtensions,st("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:p,ssrcGroups:f}=Ru([{ssrcId:MB,rtx:st("USE_RTX")?40001:void 0}],this.cname);A.attributes.ssrcs=p,A.attributes.ssrcGroups=f}if(A.media.mediaType==="audio"&&(A.media.fmts=l.audioCodecs.map(p=>p.payloadType.toString(10)),A.attributes.payloads=l.audioCodecs,A.attributes.extmaps=l.audioExtensions,st("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:p,ssrcGroups:f}=Ru([{ssrcId:2e4}],this.cname);A.attributes.ssrcs=p,A.attributes.ssrcGroups=f}}this.sessionDesc=a,this.currentMidIndex=a.mediaDescriptions.length-1}preloadRemoteMedia(){const t=st("PRELOAD_MEDIA_COUNT");at("debug",this,"preloadRemoteMedia",t),this.rtpCapabilities;const e=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;for(let u=1;u<t;u++){const s=2*u+2e4,d=2*u+MB,{ssrcs:a,ssrcGroups:l}=Ru([{ssrcId:s}],this.cname),{ssrcs:A,ssrcGroups:p}=Ru([{ssrcId:d,rtx:st("USE_RTX")?d+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:hf,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:e,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:A,ssrcGroups:p,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*u)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:hf,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:e,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:l,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*u+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return gi.exports.print(this.sessionDesc)}send(t,e,n,r){const{ssrcs:i,ssrcGroups:u}=Ru(e,this.cname,n),s=this.findPreloadMediaDesc(i);if(s){if(r&&(r.tcc||r.remb)){const d=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[d]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const d=this.findAvailableMediaIndex(t);if(Lr()||Zb()){if(d!==-1&&d!==1){const a=Pn(this.sessionDesc.mediaDescriptions[d]);return a.attributes.direction="sendonly",a.attributes.ssrcs=i,a.attributes.ssrcGroups=u,this.sessionDesc.mediaDescriptions[d]=this.mungSendMediaDesc(a,r),{mid:a.attributes.mid,needExchangeSDP:!0}}{const a=this.createOrRecycleSendMedia(t,i,u,"sendonly",r);return this.updateBundleMids(),{mid:a.attributes.mid,needExchangeSDP:!0}}}if(d!==-1){const a=Pn(this.sessionDesc.mediaDescriptions[d]);return a.attributes.direction="sendonly",a.attributes.ssrcs=i,a.attributes.ssrcGroups=u,this.sessionDesc.mediaDescriptions[d]=this.mungSendMediaDesc(a,r),{mid:a.attributes.mid,needExchangeSDP:!0}}{const a=this.createOrRecycleSendMedia(t,i,u,"sendonly",r);return this.updateBundleMids(),{mid:a.attributes.mid,needExchangeSDP:!0}}}}batchSend(t){const e=t.map(i=>{let{kind:u,ssrcMsg:s,mslabel:d}=i;return this.send(u,s,d)}),n=[];let r=!1;return e.forEach(i=>{let{mid:u,needExchangeSDP:s}=i;s&&(r=!0),n.push(u)}),{mids:n,needExchangeSDP:r}}stopSending(t){const e=this.sessionDesc.mediaDescriptions.filter(n=>n.attributes.mid&&t.indexOf(n.attributes.mid)!==-1);if(e.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");e.forEach(n=>{n.attributes.mid==="0"||Cr()||Lr()||Zb()?n.attributes.ssrcs=[]:(n.attributes.ssrcs=[],n.attributes.direction="inactive",n.media.port="0")}),this.updateBundleMids()}mute(t){const e=this.sessionDesc.mediaDescriptions.find(n=>n.attributes.mid===t);if(!e)throw new Error("mediaDescription not found with ".concat(t," in remote SDP when calling RemoteSDP.mute."));e.attributes.direction="inactive"}unmute(t){const e=this.sessionDesc.mediaDescriptions.find(n=>n.attributes.mid===t);if(!e)throw new Error("mediaDescription not found with ".concat(t," in remote SDP when calling RemoteSDP.unmute."));e.attributes.direction="sendonly"}muteRemote(t){const e=this.sessionDesc.mediaDescriptions.filter(n=>t.includes(n.attributes.mid||""));if(e.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");e.forEach(n=>{n.attributes.direction="inactive"})}unmuteRemote(t){const e=this.sessionDesc.mediaDescriptions.filter(n=>t.includes(n.attributes.mid||""));if(e.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");e.forEach(n=>{n.attributes.direction="recvonly"})}receive(t,e,n,r){t.forEach((i,u)=>{this.createOrRecycleRecvMedia(i,[],"recvonly",e,n,r[u])}),this.updateBundleMids()}stopReceiving(t){const e=this.sessionDesc.mediaDescriptions.filter(n=>t.indexOf(n.attributes.mid)!==-1);if(e.length!==t.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");e.forEach(n=>{n.media.port="0",n.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(t,e){t=Pn(t),e=Pn(e),this._iceParameters=t,this._candidates=e,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=t.iceUfrag,n.attributes.icePwd=t.icePwd,n.attributes.candidates=this.candidates})}predictReceivingMids(t){const e=[];for(let n=0;n<t;n++)e.push((this.currentMidIndex+n+1).toString(10));return e}findAvailableMediaIndex(t){return this.sessionDesc.mediaDescriptions.findIndex(e=>e.media.mediaType===t&&e.media.port!=="0"&&(e.attributes.direction==="sendonly"||e.attributes.direction==="sendrecv")&&e.attributes.ssrcs.length===0)}createOrRecycleRecvMedia(t,e,n,r,i,u){const s=t._mediaStreamTrack.kind,d=this.rtpCapabilities.recv,a=this.localCapabilities.send;let l=[];if(s===ee.VIDEO){var A,p;if(st("H264_PROFILE_LEVEL_ID")&&r==="h264"&&(l=d.videoCodecs.filter(y=>{var R,O;return(((R=y.rtpMap)===null||R===void 0?void 0:R.encodingName.toLowerCase())||"").includes(r)&&(y==null||(O=y.fmtp)===null||O===void 0?void 0:O.parameters["profile-level-id"])===st("H264_PROFILE_LEVEL_ID")})),!l||((A=l)===null||A===void 0?void 0:A.length)===0){const y=a.videoCodecs.filter(R=>{var O;return(((O=R.rtpMap)===null||O===void 0?void 0:O.encodingName.toLowerCase())||"").includes(r)});y.length!==0&&(l=d.videoCodecs.filter(R=>y.some(O=>O.payloadType===R.payloadType)))}if(st("USE_RTX")){const y=l.map(O=>O.payloadType.toString()),R=d.videoCodecs.filter(O=>{var D,L;return((D=O.rtpMap)===null||D===void 0?void 0:D.encodingName)==="rtx"&&y.includes(((L=O.fmtp)===null||L===void 0?void 0:L.parameters.apt)||"")});l=[...l,...R]}l.length===0&&(T.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat((p=d.videoCodecs[0].rtpMap)===null||p===void 0?void 0:p.encodingName)),l=d.videoCodecs)}else l=d.audioCodecs.filter(y=>{var R;return(((R=y.rtpMap)===null||R===void 0?void 0:R.encodingName.toLowerCase())||"").includes(i)}),l.length===0&&(T.warning("codec ".concat(i," not included in rtpCapabilities, fallback to opus")),l=d.audioCodecs.filter(y=>{var R;return(((R=y.rtpMap)===null||R===void 0?void 0:R.encodingName.toLowerCase())||"").includes("opus")}));const f=s===ee.VIDEO?d.videoExtensions:d.audioExtensions;this.currentMidIndex+=1;const E="".concat(this.currentMidIndex);let C={media:{mediaType:s,port:hf,protos:["UDP","TLS","RTP","SAVPF"],fmts:l.map(y=>y.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:f,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:e,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:l,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(E)}};C=this.mungRecvMediaDsec(C,t,u);const _=this.findFirstClosedMedia(s);if(_){const y=this.sessionDesc.mediaDescriptions.indexOf(_);this.sessionDesc.mediaDescriptions[y]=C}else this.sessionDesc.mediaDescriptions.push(C);return C}createOrRecycleSendMedia(t,e,n,r,i){const u=this.rtpCapabilities.send,s=t===ee.VIDEO?u.videoCodecs:u.audioCodecs,d=t===ee.VIDEO?u.videoExtensions:u.audioExtensions;this.currentMidIndex+=1;const a="".concat(this.currentMidIndex);let l={media:{mediaType:t,port:hf,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:d,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:e,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(a)}};l=this.mungSendMediaDesc(l,i);const A=this.findFirstClosedMedia(t);if(A){const p=this.sessionDesc.mediaDescriptions.indexOf(A);this.sessionDesc.mediaDescriptions[p]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(t=>t.media.port!=="0").map(t=>t.attributes.mid)}mungRecvMediaDsec(t,e,n){const r=Pn(t);return CB(r),lf(r,e),_B(r,e),function(i){if(i.media.mediaType!=="video")return;const u=ye();if(u.name!==me.SAFARI&&u.os!==Sn.IOS)return;const s=i.attributes.extmaps.findIndex(d=>/video-orientation/g.test(d.extensionName));s!==-1&&i.attributes.extmaps.splice(s,1)}(r),vB(r,n,this.localCapabilities.send),r}mungSendMediaDesc(t,e){const n=Pn(t);return vB(n,e,this.localCapabilities.recv),n}updateRecvMedia(t,e){const n=this.sessionDesc.mediaDescriptions.findIndex(r=>r.attributes.mid===t);if(n!==-1){const r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],e);this.sessionDesc.mediaDescriptions[n]=r}}bumpMid(t){this.currentMidIndex+=t}findFirstClosedMedia(t){return this.sessionDesc.mediaDescriptions.find(e=>Cr()?e.media.port==="0"&&e.media.mediaType===t:e.media.port==="0")}findPreloadMediaDesc(t){return this.sessionDesc.mediaDescriptions.find(e=>{var n,r;return((n=e.attributes)===null||n===void 0||(r=n.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===t[0].ssrcId})}})||BB;var UB,ge;function xB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xB(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}let Cnt=Qn("P2PConnection","store.p2pId")((Lt((ge=class Xf extends rO{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(e,n){super(e,n),v(this,"store",void 0),v(this,"peerConnection",void 0),v(this,"remoteSDP",void 0),v(this,"initialOffer",void 0),v(this,"transportEventReceiver",void 0),v(this,"statsFilter",void 0),v(this,"useRTX",st("USE_RTX")),v(this,"localCapabilities",void 0),v(this,"localCandidateCount",0),v(this,"allCandidatesReceived",!1),v(this,"mutex",new Tr("P2PConnection-mutex")),this.store=n,this.peerConnection=new RTCPeerConnection(Xf.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=kB(this.peerConnection,void 0,void 0,Cr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const n=df(e.sdp),r=await async function(i,u,s,d){const a=new RTCPeerConnection;a.addTransceiver("video",{direction:"sendonly"}),a.addTransceiver("audio",{direction:"sendonly"}),a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"});const l=(await a.createOffer()).sdp,A=B_(l,i,u,s,d,"sendonly"),p=B_(l,i,u,s,d,"recvonly"),f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},E={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},C={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Af(A,p,"videoExtensions",f,E,C),Af(A,p,"videoCodecs",f,E,C),Af(A,p,"audioExtensions",f,E,C),Af(A,p,"audioCodecs",f,E,C),st("RAISE_H264_BASELINE_PRIORITY")){const _=C.videoCodecs.findIndex(y=>{var R,O;return((R=y.rtpMap)===null||R===void 0?void 0:R.encodingName.toLocaleLowerCase())==="h264"&&((O=y.fmtp)===null||O===void 0?void 0:O.parameters["profile-level-id"])==="42001f"});if(_!==-1){const y=C.videoCodecs.findIndex(R=>{var O;return((O=R.rtpMap)===null||O===void 0?void 0:O.encodingName.toLocaleLowerCase())==="h264"});if(y<_){T.debug("raising H264 baseline profile priority");const R=C.videoCodecs[_];C.videoCodecs.splice(_,1),C.videoCodecs.splice(y,0,R)}y!==-1&&(E.videoCodecs=E.videoCodecs.filter(R=>{var O,D;return!(((O=R.rtpMap)===null||O===void 0?void 0:O.encodingName.toLocaleLowerCase())==="h264"&&((D=R.fmtp)===null||D===void 0?void 0:D.parameters["profile-level-id"])!=="42001f")})),y!==-1&&st("FILTER_SEND_H264_BASELINE")&&(f.videoCodecs=f.videoCodecs.filter(R=>{var O,D;return!(((O=R.rtpMap)===null||O===void 0?void 0:O.encodingName.toLocaleLowerCase())==="h264"&&((D=R.fmtp)===null||D===void 0?void 0:D.parameters["profile-level-id"])!=="42001f")}))}}try{a.close()}catch{}return{send:f,recv:E,sendrecv:C}}(!this.useRTX,!1);return this.localCapabilities=SB(r),this.initialOffer=e,QB(QB({},n),{},{rtpCapabilities:r,offerSDP:e.sdp})}catch(e){throw new B(P.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,n,r,i,u,s){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new Int({remoteIceParameters:e,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:u,localCapabilities:this.localCapabilities,cname:s});const d=this.remoteSDP.toString(),a=this.logSDPExchange(this.initialOffer.sdp||"","offer","local","connect");await this.peerConnection.setLocalDescription(this.initialOffer),a==null||a(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d});const l=this.peerConnection.getTransceivers()[0];if(l!=null&&l.receiver&&this.tryBindTransportEvents(l.receiver),st("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const A=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:A});const p=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(p)}}catch(d){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(d.toString()))}}send(e,n,r){var i=this;return vl(function*(){const u=yield We(i.mutex.lock());try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const s=[];e.forEach(_=>{const y=i.peerConnection.addTransceiver(_._mediaStreamTrack,{direction:"sendonly"});s.push(y)}),Cr()&&st("SIMULCAST")===!0&&(wt("debug",i,"apply simulcast for firefox"),yield We(i.applySimulcastForFirefox(s,e)));const d=yield We(i.peerConnection.createOffer()),a=i.remoteSDP.predictReceivingMids(e.length),l=i.mungSendOfferSDP(d.sdp,e,a),A=gi.exports.parse(l),p=a.map(_=>{const y=A.mediaDescriptions.find(R=>R.attributes.mid===_);if(!y)throw new Error("Cannot extract ssrc from mediaDescription.");return function(R,O){const D=[],L=R.attributes.ssrcGroups.filter(nt=>nt.semantic==="FID"),G=R.attributes.ssrcGroups.find(nt=>nt.semantic==="SIM"),Z=R.attributes.ssrcs;if(G)G.ssrcIds.forEach(nt=>{var it;const St=(it=L.find(ht=>ht.ssrcIds[0]===nt))===null||it===void 0?void 0:it.ssrcIds[1];D.push({ssrcId:nt,rtx:O?St:void 0})});else if(L.length>0){const nt=L[0].ssrcIds[0],it=L[0].ssrcIds[1];D.push({ssrcId:nt,rtx:O?it:void 0})}else{if(Z.length===0)throw new Error("No ssrcs found on local media description.");D.push({ssrcId:Z[0].ssrcId})}return D}(y,i.useRTX)});let f;try{f=yield p}catch(_){f=[],i.remoteSDP.receive(e,n,r,f);const y=i.remoteSDP.toString();throw yield We(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield We(i.peerConnection.setRemoteDescription({type:"answer",sdp:y})),yield We(i.stopSending(a,!0)),_}i.remoteSDP.receive(e,n,r,f);const E=i.remoteSDP.toString(),C=i.logSDPExchange(l,"offer","local","send");return yield We(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield We(i.applySimulcastEncodings(s,e)),yield We(i.applySendEncodings(s,e)),C==null||C(E),yield We(i.peerConnection.setRemoteDescription({type:"answer",sdp:E})),s.map((_,y)=>{const R=a[y];return{localSSRC:p[y],id:R,transceiver:_}})}catch(s){throw s instanceof B?s:new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(s.toString()))}finally{u()}})()}async stopSending(e,n){const r=n?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getTransceivers().filter(a=>e.indexOf(a.mid)!==-1);if(i.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(a=>{var l;a.direction="inactive",(l=a.stop)===null||l===void 0||l.call(a)});const u=await this.peerConnection.createOffer(),s=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(e);const d=this.remoteSDP.toString();s==null||s(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{r&&r()}}async receive(e,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:u,needExchangeSDP:s}=this.remoteSDP.send(e,n,r,i);if(s){const a=this.remoteSDP.toString(),l=this.logSDPExchange(a,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const A=await this.peerConnection.createAnswer();l==null||l(A.sdp||""),await this.peerConnection.setLocalDescription(A),T.debug("[P2PConnection] receive ".concat(e," by exchanging SDP."))}else T.debug("[P2PConnection] receive ".concat(e," no need to exchange SDP."));const d=this.peerConnection.getTransceivers().find(a=>a.mid===u);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:u}}catch(u){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:n,needExchangeSDP:r}=this.remoteSDP.batchSend(e);if(r){const i=this.remoteSDP.toString(),u=this.logSDPExchange(i,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const s=await this.peerConnection.createAnswer();u==null||u(s.sdp||""),await this.peerConnection.setLocalDescription(s),T.debug("[P2PConnection] batchReceive by exchanging SDP.")}else T.debug("[P2PConnection] batchReceive no need to exchange SDP.");return n.map(i=>{const u=this.peerConnection.getTransceivers().find(s=>s.mid===i);if(!u)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:u.receiver.track,id:i}})}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(n.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();r==null||r(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(n.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();r==null||r(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(n.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();r==null||r(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(n.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const n=this.peerConnection.getTransceivers().filter(s=>s.mid&&e.indexOf(s.mid)!==-1);if(n.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");n.map(s=>{s.direction="inactive"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.muteRemote(e);const u=this.remoteSDP.toString();i==null||i(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(n.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const n=this.peerConnection.getTransceivers().filter(s=>s.mid&&e.indexOf(s.mid)!==-1);if(n.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");n.map(async(s,d)=>{s.direction="sendonly"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.unmuteRemote(e);const u=this.remoteSDP.toString();i==null||i(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(n){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(n.toString()))}}async reEstablish(){const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:df(e.sdp).iceParameters,restartICE:async(n,r)=>this.restartICE(e,n,r),restartOfferSDP:e.sdp}}close(){var e;this.peerConnection.close(),(e=this.onConnectionStateChange)===null||e===void 0||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const r=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(r.sdp,[n],[e]);this.remoteSDP.updateRecvMedia(e,n);const u=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),s==null||s(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(r){throw new B(P.EXCHANGE_SDP_FAILED,r.toString())}}async updateSendParameters(e,n){const r=this.peerConnection.getTransceivers().filter(i=>i.mid===e);r.length===1&&(this.isVP8Simulcast(n)?Cr()||await this.applySimulcastEncodings(r,[n]):await this.applySendEncodings(r,[n]))}setStatsRemoteVideoIsReady(e,n){this.statsFilter.setVideoIsReady2(e,n)}async replaceTrack(e,n){const r=this.peerConnection.getTransceivers().find(i=>i.mid===n);r&&await r.sender.replaceTrack(e._mediaStreamTrack)}async restartICE(e,n,r){try{if(!this.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");this.remoteSDP.restartICE(n,r);const i=this.remoteSDP.toString(),u=this.logSDPExchange(e.sdp||"","offer","local","restartICE");await this.peerConnection.setLocalDescription(e),u==null||u(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(i){throw new B(P.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(i.toString()))}}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;(e=this.onICEConnectionStateChange)===null||e===void 0||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;(e=this.onConnectionStateChange)===null||e===void 0||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,T.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,T.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},st("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const n={iceServers:[]};return e.iceServers?n.iceServers=e.iceServers:e.turnServer&&e.turnServer.mode!=="off"&&(wI(e.turnServer.servers)?n.iceServers=e.turnServer.servers:(n.iceServers&&n.iceServers.push(...Xf.turnServerConfigToIceServers(e.turnServer.servers)),st("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&e.turnServer.serversFromGateway&&n.iceServers.push(...Xf.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach(r=>{r.forceturn&&(n.iceTransportPolicy="relay")}))),n}static turnServerConfigToIceServers(e){const n=[];return e.forEach(r=>{r.security?r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turns:".concat(bC(r.turnServerURL),":").concat(r.tcpport,"?transport=tcp")}):(r.udpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.udpport,"?transport=udp")}),r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.tcpport,"?transport=tcp")}))}),n}tryBindTransportEvents(e){e.transport&&(this.transportEventReceiver=e,e.transport.onstatechange=()=>{var n,r;(n=e.transport)!==null&&n!==void 0&&n.state&&((r=this.onDTLSTransportStateChange)===null||r===void 0||r.call(this,e.transport.state))},e.transport.onerror=n=>{var r;(r=this.onDTLSTransportError)===null||r===void 0||r.call(this,n.error)},e.transport.iceTransport&&(e.transport.iceTransport.onstatechange=()=>{var n,r,i;(n=e.transport)!==null&&n!==void 0&&n.iceTransport.state&&((r=this.onICETransportStateChange)===null||r===void 0||r.call(this,(i=e.transport)===null||i===void 0?void 0:i.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(e,n){try{if(!rr().supportSetRtpSenderParameters||e.length!==n.length)return;for(let l=0;l<e.length;l++){const A=e[l],p=n[l];if(p&&p instanceof un){var r,i;if(this.isVP8Simulcast(p))continue;const f={},E={};switch(p._optimizationMode){case"motion":f.degradationPreference="maintain-framerate";break;case"detail":f.degradationPreference="maintain-resolution";break;default:f.degradationPreference="balanced"}var u,s,d,a;if((r=p._encoderConfig)!==null&&r!==void 0&&r.bitrateMax&&(E.maxBitrate=1e3*((u=p._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)),p._hints.includes(jn.LOW_STREAM)&&((s=p._encoderConfig)!==null&&s!==void 0&&s.frameRate&&(E.maxFramerate=Ps(p._encoderConfig.frameRate)),(d=p._encoderConfig)!==null&&d!==void 0&&d.scaleResolutionDownBy&&((a=p._encoderConfig)===null||a===void 0?void 0:a.scaleResolutionDownBy)>1&&(E.scaleResolutionDownBy=p._encoderConfig.scaleResolutionDownBy)),st("DSCP_TYPE")&&Yc()){const y=st("DSCP_TYPE");["very-low","low","medium","high"].includes(y)&&(E.networkPriority=y)}const C=A.sender.getParameters(),_=(i=C.encodings)===null||i===void 0?void 0:i[0];Cr()&&!_&&(f.encodings=[E]),_&&Object.assign(_,E),Object.assign(C,f),await A.sender.setParameters(C)}}}catch{T.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,n,r){const i=gi.exports.parse(e);return n.forEach((u,s)=>{const d=r[s],a=i.mediaDescriptions.find(l=>l.attributes.mid===d);a&&(lf(a,u),function(l,A,p){if(Cr()||l.media.mediaType!=="video"||!(A instanceof un)||p!=="vp9"&&p!=="vp8"||p==="vp8"&&!st("SIMULCAST")||A._scalabiltyMode===void 0||A._scalabiltyMode.numSpatialLayers<=1)return;const f=p==="vp8"?2:A._scalabiltyMode.numSpatialLayers,E=l.attributes.ssrcs[0],C=l.attributes.ssrcGroups.find(y=>y.semantic==="FID"&&y.ssrcIds[0]===E.ssrcId),_={semantic:"SIM",ssrcIds:[E.ssrcId]};for(let y=1;y<f;y++)l.attributes.ssrcs.push({ssrcId:E.ssrcId+y,attributes:Pn(E.attributes)}),_.ssrcIds.push(E.ssrcId+y),C&&(l.attributes.ssrcs.push({ssrcId:C.ssrcIds[1]+y,attributes:Pn(E.attributes)}),l.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[E.ssrcId+y,C.ssrcIds[1]+y]}));l.attributes.ssrcGroups.unshift(_)}(a,u,this.store.codec))}),gi.exports.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var n;(n=this.onFirstAudioReceived)===null||n===void 0||n.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var n;(n=this.onFirstVideoReceived)===null||n===void 0||n.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var n;(n=this.onFirstAudioDecoded)===null||n===void 0||n.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,n,r)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,e,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=(e,n)=>{var r;(r=this.onSelectedLocalCandidateChanged)===null||r===void 0||r.call(this,e,n)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,n)=>{var r;(r=this.onSelectedRemoteCandidateChanged)===null||r===void 0||r.call(this,e,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async applySimulcastForFirefox(e,n){if(e.length===n.length)for(let d=0;d<e.length;d++){var r,i,u,s;const a=e[d],l=n[d];if(l instanceof un&&!l._hints.includes(jn.LOW_STREAM)&&(r=l._encoderConfig)!==null&&r!==void 0&&r.bitrateMax&&((i=l._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(u=l._scalabiltyMode)!==null&&u!==void 0&&u.numSpatialLayers&&((s=l._scalabiltyMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){const A={},p={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};A.encodings=[{rid:"m",active:!0,maxBitrate:p.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:p.high}];const f=a.sender.getParameters();await a.sender.setParameters(Object.assign(f,A))}}}async applySimulcastEncodings(e,n){if(!Cr()&&e.length===n.length)for(let r=0;r<e.length;r++){const i=n[r];if(i instanceof un&&this.isVP8Simulcast(i)){const u=e[r],s={},d={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};s.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:d.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:d.medium,scaleResolutionDownBy:4}];const a=u.sender.getParameters();await u.sender.setParameters(Object.assign(a,s))}}}isVP8Simulcast(e){var n,r,i,u;return!!(e instanceof un&&st("SIMULCAST")&&this.store.codec==="vp8"&&!e._hints.includes(jn.LOW_STREAM)&&(n=e._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((r=e._encoderConfig)===null||r===void 0?void 0:r.bitrateMax)>200&&(i=e._scalabiltyMode)!==null&&i!==void 0&&i.numSpatialLayers&&((u=e._scalabiltyMode)===null||u===void 0?void 0:u.numSpatialLayers)>1)}logSDPExchange(e,n,r,i){if(st("SDP_LOGGING"))return T.upload("exchanging ".concat(r," ").concat(n," SDP during P2PConnection.").concat(i,`
`),e),n==="offer"?u=>{this.logSDPExchange(u,"answer",r==="local"?"remote":"local",i)}:void 0}}).prototype,"connect",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"connect"),ge.prototype),Lt(ge.prototype,"receive",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"receive"),ge.prototype),Lt(ge.prototype,"batchReceive",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"batchReceive"),ge.prototype),Lt(ge.prototype,"stopReceiving",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"stopReceiving"),ge.prototype),Lt(ge.prototype,"muteRemote",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"muteRemote"),ge.prototype),Lt(ge.prototype,"unmuteRemote",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"unmuteRemote"),ge.prototype),Lt(ge.prototype,"muteLocal",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"muteLocal"),ge.prototype),Lt(ge.prototype,"unmuteLocal",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"unmuteLocal"),ge.prototype),Lt(ge.prototype,"reEstablish",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"reEstablish"),ge.prototype),Lt(ge.prototype,"close",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"close"),ge.prototype),Lt(ge.prototype,"updateEncoderConfig",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"updateEncoderConfig"),ge.prototype),Lt(ge.prototype,"updateSendParameters",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"updateSendParameters"),ge.prototype),Lt(ge.prototype,"replaceTrack",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"replaceTrack"),ge.prototype),Lt(ge.prototype,"restartICE",[Kr],Object.getOwnPropertyDescriptor(ge.prototype,"restartICE"),ge.prototype),UB=ge))||UB;function Kr(t,e,n){const r=t[e];if(typeof r!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){const i=this.mutex,u=await i.lock("From P2PConnection.".concat(e));try{for(var s=arguments.length,d=new Array(s),a=0;a<s;a++)d[a]=arguments[a];return await r.apply(this,d)}finally{u()}},n}function _nt(t,e){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=Ps(e.width),r.height=Ps(e.height);const i=Ps(e.framerate||15);document.body.append(n),document.body.append(r);let u=t._mediaStreamTrack;n.srcObject=new MediaStream([u]),n.play();const s=r.getContext("2d");if(!s)throw new B(P.UNEXPECTED_ERROR,"can not get canvas context");const d=rr(),a=r.captureStream(d.supportRequestFrame?0:i).getVideoTracks()[0],l=TC(()=>(()=>{if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const p=n.videoWidth,f=n.videoHeight/p,E=r.width*f;Math.abs(E-r.height)>=2&&(T.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(E)),r.height=E)}s.drawImage(n,0,0,r.width,r.height),a.requestFrame&&a.requestFrame(),u!==t._mediaStreamTrack&&(u=t._mediaStreamTrack,n.srcObject=new MediaStream([u]))})(),i),A=a.stop;return a.stop=()=>{A.call(a),l(),n.remove(),r.width=0,r.remove(),r=null,n=null,T.debug("clean low stream renderer")},a}var FB,jB;function VB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VB(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class GB extends FD{getUserId(){return this._userId}constructor(e,n,r,i){super(e,"track-".concat(e.kind,"-").concat(n,"-").concat(i.clientId,"_").concat(Ye(5,""))),v(this,"_userId",void 0),v(this,"_uintId",void 0),v(this,"_isDestroyed",!1),v(this,"store",void 0),this._userId=n,this._uintId=r,this.store=i}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,T.info("[".concat(this.getTrackId(),"] is destroyed")),at("info",this,"_destroy"),this.stop(),super.close()}}let ff=Qn("RemoteVideoTrack","getTrackId")(FB=class extends GB{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Fn.PLAYING)}constructor(t,e,n,r){super(t,e,n,r),v(this,"_videoVisibleTimer",null),v(this,"_previousVideoVisibleStatus",void 0),v(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),v(this,"trackMediaType","video"),v(this,"_videoWidth",void 0),v(this,"_videoHeight",void 0),v(this,"_player",void 0),at("info",this,"constructor",{userId:e}),this.updateMediaStreamTrackResolution()}getStats(){return il(()=>{T.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),wt("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ha(this,xt.GET_STATS)||pf({},ZN)}play(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),typeof t=="string"?t:"HTMLElement",e]});if(typeof t=="string"){const i=document.getElementById(t);i?t=i:(T.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),wt("warning",this,'can not find "#'.concat(t,'" element, use document.body')),t=document.body)}T.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(e)),at("debug",this,"play",e);const r=pf(pf({fit:"cover"},e),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(r):(this._player=new sL(r),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(eu.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const i=this.getVideoElementVisibleStatus();this.emit(eu.VIDEO_ELEMENT_VISIBLE_STATUS,i)}catch{}},st("CHECK_VIDEO_VISIBLE_INTERVAL")),n.onSuccess()}stop(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return t.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,T.debug("[".concat(this.getTrackId(),"] stop video playback")),at("debug",this,"stop"),t.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Pk(this._originMediaStreamTrack).then(t=>{let[e,n]=t;this._videoHeight=n,this._videoWidth=e}).catch(Mp)}_updatePlayerSource(){T.debug("[".concat(this.getTrackId(),"] update player source track")),at("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var t,e;const n=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),r={track:this,element:this==null||(e=this._player)===null||e===void 0?void 0:e.getVideoElement(),slot:n==null?void 0:n.parentElement},{element:i,slot:u}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&u instanceof HTMLElement){const s=BL.checkOneElementVisible(i),d=Object.assign({},s);if(d.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=d.visible;const a=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});d.visible?a.onSuccess("Video is visible"):a.onSuccess("Invisible because of ".concat(d.reason))}return d}return}catch(n){throw new B(P.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}})||FB,gf=Qn("RemoteAudioTrack","getTrackId")(jB=class extends GB{get isPlaying(){return this._useAudioElement?wr.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(t,e,n,r){super(t,e,n,r),v(this,"trackMediaType","audio"),v(this,"_source",void 0),v(this,"_useAudioElement",!0),v(this,"_volume",100),at("info",this,"constructor",{userId:e}),st("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new KD(t,!0),this._source.once(vr.RECEIVE_TRACK_BUFFER,()=>{this.emit(eu.FIRST_FRAME_DECODED)})}setAudioFrameCallback(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!t)return this._source.removeAllListeners(vr.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(e),this._source.removeAllListeners(vr.ON_AUDIO_BUFFER),this._source.on(vr.ON_AUDIO_BUFFER,n=>t(n))}setVolume(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),t]},300);this._volume=t,this._useAudioElement?wr.setVolume(this.getTrackId(),t):this._source.setVolume(t/100),e.onSuccess()}async setPlaybackDevice(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),t]});if(!this._useAudioElement)throw new B(P.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await wr.setSinkID(this.getTrackId(),t)}catch(n){throw e.onError(n),n}e.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return il(()=>{T.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),wt("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ha(this,xt.GET_STATS)||pf({},XN)}play(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});T.debug("[".concat(this.getTrackId(),"] start audio playback")),at("debug",this,"play"),this._useAudioElement?(T.debug("[".concat(this.getTrackId(),"] use audio element to play")),wt("debug",this,"use audio element to play"),wr.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),t.onSuccess()}stop(){const t=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});T.debug("[".concat(this.getTrackId(),"] stop audio playback")),at("debug",this,"stop"),this._useAudioElement?wr.stop(this.getTrackId()):this._source.stop(),t.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){T.debug("[".concat(this.getTrackId(),"] update player source track")),at("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wr.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||jB;function KB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KB(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class vnt extends Ge{constructor(){super(),v(this,"uplinkStatsUploadInterval",void 0),v(this,"uplinkStatsUploadSlowInterval",void 0),v(this,"uplinkRelatedStatsUploadInterval",void 0),v(this,"uplinkDenoiserStatsUploadInterval",void 0),v(this,"transportStatsUploadInterval",void 0),v(this,"extensionStatsUploadInterval",void 0),v(this,"downlinkStatsUploadInterval",void 0),v(this,"downlinkStatsUploadSlowInterval",void 0),v(this,"downlinkRelatedStatsUploadInterval",void 0),v(this,"lastStats",void 0),v(this,"uploadUnplinkStarted",!1),v(this,"uploadDownlinkStarted",!1),v(this,"uploadTransportStarted",!1),v(this,"requestStats",void 0),v(this,"requestLocalMedia",void 0),v(this,"requestRemoteMedia",void 0),v(this,"requestAllTracks",void 0),v(this,"requestVideoIsReady",void 0),v(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var e;const n=(e=this.requestStats)===null||e===void 0?void 0:e.call(this);n&&this.uploadTransportStats(n)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var e;const n=(e=this.requestStats)===null||e===void 0?void 0:e.call(this);n&&(this.uploadUplinkStats(n,this.lastStats),this.lastStats=n)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const n=(e=this.requestStats)===null||e===void 0?void 0:e.call(this);n&&this.uploadSlowUplinkStats(n)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const n=(e=this.requestStats)===null||e===void 0?void 0:e.call(this);n&&this.uploadRelatedUplinkStats(n,this.lastStats),this.lastStats=n},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var e;const n=(e=this.requestAllTracks)===null||e===void 0?void 0:e.call(this);n&&this.uploadDenoiserStats(n)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var e;const n=(e=this.requestAllTracks)===null||e===void 0?void 0:e.call(this);n&&this.uploadExtensionStats(n)},2e3))}uploadTransportStats(e){pi(()=>{var n;(n=this.requestUpload)===null||n===void 0||n.call(this,hr.TRANSPORT_STATS,function(r){const i={connectionType:100};if(r.selectedCandidatePair.localCandidate.candidateType==="relay"){const u=r.selectedCandidatePair.localCandidate.relayProtocol;u==="udp"&&(i.connectionType=101),u==="tcp"&&(i.connectionType=103),u==="tls"&&(i.connectionType=104)}return i}(e))})}uploadUplinkStats(e,n){var r;(((r=this.requestLocalMedia)===null||r===void 0?void 0:r.call(this))||[]).forEach(i=>{let[u,{track:s,ssrcs:d}]=i;switch(u){case _t.LocalVideoLowTrack:case _t.LocalVideoTrack:{const l=function(p,f,E){var C;const _=f.videoSend.find(R=>R.ssrc===p);if(!_)return null;const y={id:Ye(10,""),timestamp:new Date(f.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:_.ssrc.toString()};switch(y.A_vstd=E._originMediaStreamTrack&&!E._originMediaStreamTrack.enabled||!E._mediaStreamTrack.enabled?"1":"0",_.sentFrame&&(y.A_fhs=_.sentFrame.height.toString(),y.A_frs=_.sentFrame.frameRate.toString(),y.A_fws=_.sentFrame.width.toString()),_.adaptionChangeReason){case"none":y.A_ac="0";break;case"cpu":y.A_ac="1";break;case"bandwidth":y.A_ac="2";break;case"other":y.A_ac="3"}return y.A_lvps=TI[E._player?E._player.videoElementStatus:"uninit"].toString(),y.A_nr=(C=_.nacksCount)===null||C===void 0?void 0:C.toString(),_.avgEncodeMs&&(y.A_aem=_.avgEncodeMs.toFixed(0).toString()),y}(d[0].ssrcId,e,s),A=Nk(d[0].ssrcId,e,n);l&&pi(()=>{var p;return(p=this.requestUpload)===null||p===void 0?void 0:p.call(this,hr.PUBLISH_STATS,{stream_type:u===_t.LocalVideoLowTrack?"low":"high",stats:HB(HB({},l),A)})});break}case _t.LocalAudioTrack:{const l=function(A,p,f){const E=p.audioSend.find(_=>_.ssrc===A);if(!E)return null;const C={id:Ye(10,""),timestamp:new Date(p.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:E.ssrc.toString()};return C.A_astd=f._originMediaStreamTrack.enabled&&f._mediaStreamTrack.enabled?"0":"1",E.inputLevel?C.A_ail=Math.round(100*E.inputLevel).toString():C.A_ail=Math.round(100*f._source.getAccurateVolumeLevel()).toString(),C.A_apil=Math.round(100*f._source.getAccurateVolumeLevel()).toString(),E.aecReturnLoss&&(C.A_ecrl=Math.round(E.aecReturnLoss).toString()),E.aecReturnLossEnhancement&&(C.A_ecrle=Math.round(E.aecReturnLossEnhancement).toString()),C}(d[0].ssrcId,e,s);l&&pi(()=>{var A;return(A=this.requestUpload)===null||A===void 0?void 0:A.call(this,hr.PUBLISH_STATS,{stream_type:"high",stats:l})});break}}const a=function(l){const A={id:"bweforvideo",timestamp:new Date(l.timestamp).toISOString(),type:"VideoBwe"};return l.bitrate.retransmit&&(A.A_rb=l.bitrate.retransmit.toString()),l.bitrate.targetEncoded&&(A.A_teb=l.bitrate.targetEncoded.toString()),A.A_aeb=l.bitrate.actualEncoded.toString(),A.A_tb=l.bitrate.transmit.toString(),l.sendBandwidth!==void 0&&(A.A_asb=l.sendBandwidth.toString()),A}(e);a&&pi(()=>{var l;return(l=this.requestUpload)===null||l===void 0?void 0:l.call(this,hr.PUBLISH_STATS,{stream_type:u===_t.LocalVideoLowTrack?"low":"high",stats:a})})})}uploadSlowUplinkStats(e){var n;(((n=this.requestLocalMedia)===null||n===void 0?void 0:n.call(this))||[]).filter(r=>{let[i]=r;return i===_t.LocalVideoLowTrack||i===_t.LocalVideoTrack}).forEach(r=>{let[i,{ssrcs:u}]=r;const s=Nk(u[0].ssrcId,e);s&&pi(()=>{var d;return(d=this.requestUpload)===null||d===void 0?void 0:d.call(this,hr.PUBLISH_STATS,{stream_type:i===_t.LocalVideoLowTrack?"low":"high",stats:s})})})}uploadRelatedUplinkStats(e,n){var r;(((r=this.requestLocalMedia)===null||r===void 0?void 0:r.call(this))||[]).filter(i=>{let[u]=i;return u===_t.LocalVideoLowTrack||u===_t.LocalVideoTrack}).forEach(i=>{let[u,{ssrcs:s}]=i;const d=function(a,l){const A=l.videoSend.find(p=>p.ssrc===a);return A?{mediaType:"video",isVideoMute:!1,frameRateInput:A.inputFrame&&A.inputFrame.frameRate.toString(),frameRateSent:A.sentFrame&&A.sentFrame.frameRate.toString(),googRtt:A.rttMs.toString(),qpSumPerFrame:Math.floor(A.qpSumPerFrame).toString()}:null}(s[0].ssrcId,e);d&&pi(()=>{var a;(a=this.requestUpload)===null||a===void 0||a.call(this,hr.PUBLISH_RELATED_STATS,{stream_type:u===_t.LocalVideoLowTrack?"low":"high",stats:d})})})}uploadDenoiserStats(e){for(let u=0;u<e.length;u++){const s=e[u];if(s instanceof rl){var n,r,i;const d=(n=(r=s._external).getDenoiserStats)===null||n===void 0?void 0:n.call(r);return void(d&&((i=this.requestUpload)===null||i===void 0||i.call(this,hr.DENOISER_STATS,d)))}}}uploadExtensionStats(e){for(let n=0;n<e.length;n++){const r=e[n];if(r instanceof rl)return void r.getProcessorStats().forEach(i=>{var u;i.type===hr.DENOISER_STATS&&((u=this.requestUpload)===null||u===void 0||u.call(this,hr.DENOISER_STATS,i.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var e;const n=(e=this.requestStats)===null||e===void 0?void 0:e.call(this);n&&(this.uploadDownlinkStats(n,this.lastStats),this.lastStats=n)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const n=(e=this.requestStats)===null||e===void 0?void 0:e.call(this);n&&this.uploadSlowDownlinkStats(n)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const n=(e=this.requestStats)===null||e===void 0?void 0:e.call(this);n&&(this.uploadRelatedDownlinkStats(n,this.lastStats),this.lastStats=n)},1e3))}uploadDownlinkStats(e,n){var r;(((r=this.requestRemoteMedia)===null||r===void 0?void 0:r.call(this))||[]).forEach(i=>{let[u,s]=i;if(s.has(ee.VIDEO)&&u.videoTrack){const d=u.videoTrack?function(a,l,A){const p=l.videoRecv.find(_=>_.ssrc===a);if(!p)return null;const f={id:Ye(10,""),timestamp:new Date(l.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:p.ssrc.toString()};var E,C;return f.bytesReceived=p.bytes.toString(),f.packetsLost=p.packetsLost.toString(),f.packetsReceived=p.packets.toString(),p.framesRateFirefox&&(f.A_frr=p.framesRateFirefox.toString()),p.receivedFrame?(f.A_frr=p.receivedFrame.frameRate.toString(),f.A_fhr=p.receivedFrame.height.toString(),f.A_fwr=p.receivedFrame.width.toString()):(f.A_fhr=(E=A._videoHeight)===null||E===void 0?void 0:E.toString(),f.A_fwr=(C=A._videoWidth)===null||C===void 0?void 0:C.toString()),f.A_frd=p.decodeFrameRate.toString(),p.outputFrame&&(f.A_fro=p.outputFrame.frameRate.toString()),p.jitterBufferMs!==void 0&&(f.A_jbm=Math.floor(p.jitterBufferMs).toString()),p.currentDelayMs!==void 0&&(f.A_cdm=Math.floor(p.currentDelayMs).toString()),f.A_fs=p.firsCount.toString(),f.A_ns=p.nacksCount.toString(),f.A_ps=p.plisCount.toString(),A&&(f.A_vrtd=A._originMediaStreamTrack.enabled&&A._mediaStreamTrack.enabled?"0":"1"),A._player&&A._player.freezeTimeCounterList.length>0&&(f.A_vrft=A._player.freezeTimeCounterList.splice(0,1)[0].toString()),f.A_rvps=TI[A._player?A._player.videoElementStatus:"uninit"].toString(),f}(u._videoSSRC,e,u.videoTrack):void 0;d&&pi(()=>{var a;return(a=this.requestUpload)===null||a===void 0?void 0:a.call(this,hr.SUBSCRIBE_STATS,{stream_id:u.uid,stats:d})})}if(s.has(ee.AUDIO)&&u.audioTrack){const d=u.audioTrack?function(a,l,A){const p=l.audioRecv.find(E=>E.ssrc===a);if(!p)return null;const f={id:Ye(10,""),timestamp:new Date(l.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:p.ssrc.toString()};return f.bytesReceived=p.bytes.toString(),f.packetsLost=p.packetsLost.toString(),f.packetsReceived=p.packets.toString(),p.outputLevel?f.A_aol=Math.round(100*p.outputLevel).toString():f.A_aol=Math.round(100*A._source.getAccurateVolumeLevel()).toString(),f.A_apol=Math.round(100*A._source.getAccurateVolumeLevel()).toString(),A&&(f.A_artd=A._originMediaStreamTrack.enabled&&A._mediaStreamTrack.enabled?"0":"1"),f.A_jr=p.jitterMs.toString(),f.A_jbm=Math.floor(p.jitterBufferMs).toString(),f.A_cdm=Math.floor(p.jitterBufferMs).toString(),f.A_raps=TI[wr.getPlayerState(A.getTrackId())].toString(),f}(u._audioSSRC,e,u.audioTrack):void 0;d&&pi(()=>{var a;return(a=this.requestUpload)===null||a===void 0?void 0:a.call(this,hr.SUBSCRIBE_STATS,{stream_id:u.uid,stats:d})})}})}uploadSlowDownlinkStats(e){}uploadRelatedDownlinkStats(e,n){var r;(((r=this.requestRemoteMedia)===null||r===void 0?void 0:r.call(this))||[]).forEach(i=>{let[u,s]=i;if(s.has(ee.VIDEO)&&u.videoTrack){var d;const a=(u._videoSSRC&&((d=this.requestVideoIsReady)===null||d===void 0?void 0:d.call(this,u._videoSSRC))||!1)===!0,l=function(A,p,f,E,C,_){const y=f.videoRecv.find(L=>L.ssrc===A),R=C?C.videoRecv.find(L=>L.ssrc===A):void 0;if(!y)return null;const O=lu.isRemoteVideoFreeze(_,y,R)&&p,D={mediaType:"video",isVideoMute:!1,peerId:E,frameRateReceived:y.receivedFrame&&y.receivedFrame.frameRate.toString(),frameRateDecoded:y.decodedFrame&&y.decodedFrame.frameRate.toString(),isFreeze:O,bytesReceived:y.bytes.toString(),packetsReceived:y.packets.toString(),packetsLost:y.packetsLost.toString(),qpSumPerFrame:Math.floor(y.qpSumPerFrame).toString()};return y.framesRateFirefox&&(D.frameRateDecoded=y.framesRateFirefox.toString(),D.frameRateReceived=y.framesRateFirefox.toString()),D}(u._videoSSRC,a,e,u.uid,n,u.videoTrack);l&&pi(()=>{var A;(A=this.requestUpload)===null||A===void 0||A.call(this,hr.SUBSCRIBE_RELATED_STATS,{stream_id:u.uid,stats:l})})}if(s.has(ee.AUDIO)&&u.audioTrack){const a=function(l,A,p,f){const E=A.audioRecv.find(_=>_.ssrc===l);if(!E)return null;const C=lu.isRemoteAudioFreeze(f);return{mediaType:"audio",isAudioMute:!1,peerId:p,googJitterReceived:E.jitterMs.toString(),isFreeze:C,bytesReceived:E.bytes.toString(),packetsReceived:E.packets.toString(),packetsLost:E.packetsLost.toString(),frameReceived:E.receivedFrames.toString(),frameDropped:E.droppedFrames.toString()}}(u._audioSSRC,e,u.uid,u.audioTrack);a&&pi(()=>{var l;(l=this.requestUpload)===null||l===void 0||l.call(this,hr.SUBSCRIBE_RELATED_STATS,{stream_id:u.uid,stats:a})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var YB,Ee;function WB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JB(t){var e,n,r,i=2;for(typeof Symbol!="undefined"&&(n=$et,r=Symbol.iterator);i--;){if(n&&(e=t[n])!=null)return e.call(t);if(r&&(e=t[r])!=null)return new j_(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function j_(t){function e(n){if(Object(n)!==n)return Nt.reject(new TypeError(n+" is not an object."));var r=n.done;return Nt.resolve(n.value).then(function(i){return{value:i,done:r}})}return(j_=function(n){this.s=n,this.n=n.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Nt.resolve({value:n,done:!0}):e(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Nt.reject(n):e(r.apply(this.s,arguments))}},new j_(t)}let Snt=Qn("P2PChannel","store.p2pId")((Lt((Ee=class extends Ge{get state(){return this._state}set state(t){const e=this._state;this._state=t,this.emit(le.StateChange,e,this._state)}constructor(t,e){super(),v(this,"store",void 0),v(this,"statsUploader",void 0),v(this,"connection",void 0),v(this,"localTrackMap",new Map),v(this,"remoteUserMap",new Map),v(this,"pendingLocalTracks",[]),v(this,"pendingRemoteTracks",[]),v(this,"statsCollector",void 0),v(this,"isPlanB",!1),v(this,"iceFailedCount",0),v(this,"dtlsFailedCount",0),v(this,"mutex",new Tr("P2PChannel-mutex")),v(this,"_state",Ur.Disconnected),v(this,"handleMuteLocalTrack",async(n,r,i)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection)return void i(new B(P.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));at("debug",this,"handleMuteLocalTrack",n.getTrackId()),await this.waitTillConnected();const s=this.filterTobeMutedTracks(n);if(s.length===0)return void r();await this.connection.muteLocal(s.map(a=>{let[,{id:l}]=a;return l}));const d=this.createMuteMessage(s);await Be(this,le.RequestMuteLocal,d),r()}catch(s){i(s)}finally{u()}}),v(this,"handleUnmuteLocalTrack",async(n,r,i)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection)return void i(new B(P.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));at("debug",this,"handleUnmuteLocalTrack",n.getTrackId()),await this.waitTillConnected();const s=this.filterTobeUnmutedTracks(n);if(s.length===0)return void r();await this.connection.unmuteLocal(s.map(a=>{let[,{id:l}]=a;return l}));const d=this.createUnmuteMessage(s);await Be(this,le.RequestUnmuteLocal,d),r()}catch(s){i(s)}finally{u()}}),v(this,"handleUpdateVideoEncoder",async(n,r,i)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const s=this.localTrackMap.get(_t.LocalVideoTrack);if(!this.connection||!s||s.track!==n)return void r();await this.waitTillConnected();const{id:d,track:a}=s;await this.connection.updateSendParameters(d,a),await this.connection.updateEncoderConfig(d,a),this.emit(le.UpdateVideoEncoder,a),r()}catch(s){i(s)}finally{u()}}),v(this,"handleSetOptimizationMode",async(n,r,i)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const s=this.localTrackMap.get(_t.LocalVideoTrack);if(!this.connection||!s||s.track!==n)return;await this.waitTillConnected();const{id:d,track:a}=s;await this.connection.updateSendParameters(d,a),r()}catch(s){i(s)}finally{u()}}),v(this,"handleReplaceTrack",async(n,r,i,u)=>{let s;T.debug("P2PChannel handleReplaceTrack for [track-id-".concat(n.getTrackId(),"]")),typeof u=="boolean"&&u||(s=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:A}]=l;return n===A});if(!this.connection||!a)return void r();if(await this.waitTillConnected(),await this.connection.replaceTrack(n,a[1].id),this.isPlanB){const l=a[1];l.id=n._mediaStreamTrack.id,this.localTrackMap.set(a[0],l)}if(a[0]===_t.LocalVideoTrack&&rr().supportDualStreamEncoding){const l=this.localTrackMap.get(_t.LocalVideoLowTrack);if(l){const A=n._mediaStreamTrack.clone();l.track._originMediaStreamTrack.stop(),l.track._mediaStreamTrack=A,l.track._originMediaStreamTrack=A,await new Nt((p,f)=>{this.handleReplaceTrack(l.track,p,f,!0)})}}r()}catch(a){i(a)}finally{var d;(d=s)===null||d===void 0||d()}}),v(this,"handleGetLocalVideoStats",n=>{n(this.statsCollector.getLocalVideoTrackStats())}),v(this,"handleGetLocalAudioStats",n=>{n(this.statsCollector.getLocalAudioTrackStats())}),v(this,"handleGetRemoteVideoStats",n=>this.statsCollector.getRemoteVideoTrackStats(n.uid)[n.uid]),v(this,"handleGetRemoteAudioStats",n=>this.statsCollector.getRemoteAudioTrackStats(n.uid)[n.uid]),this.store=t,this.statsCollector=e,this.statsCollector.addP2PChannel(this),this.statsUploader=new vnt,this.bindStatsUploaderEvents(),this.isPlanB=!rr().supportUnifiedPlan||st("CHROME_FORCE_PLAN_B")&&Yc()}async startP2PConnection(t){return this.state=Ur.New,this.connection=this.isPlanB?new mnt(t,this.store):new Cnt(t,this.store),this.bindConnectionEvents(this.connection),this.store.peerConnectionStart(),this.connection.establish()}async connect(t,e,n,r,i,u){if(!this.connection)throw new B(P.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");await this.connection.connect(t,e,n,r,i,u),this.statsUploader.startUploadTransportStats(),this.state=Ur.Connected}publish(t,e,n){var r=this;return vl(function*(){const i=yield We(r.mutex.lock("From P2PChannel.publish"));try{if(!r.connection){if(r.state===Ur.Disconnected)throw new B(P.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(t);const s=t.filter(d=>r.pendingLocalTracks.indexOf(d)===-1);return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(s))}r.store.pubId=r.store.pubId+1,hi.markPublishStart(r.store.clientId,r.store.pubId),yield We(r.waitTillConnected());const u=r.filterTobePublishedTracks(t,e,n);if(u.length===0)return void(yield We(r.tryToUnmuteAudio(t)));yield*fB(JB(r.doPublish(r.connection,u)),We)}finally{i()}})()}doPublish(t,e){var n=this;return vl(function*(){e.forEach(l=>{let{track:A,type:p}=l;const f=performance.now();n.store.publish(A.getTrackId(),p===_t.LocalAudioTrack?"audio":"video",f)}),n.bindLocalTrackEvents(e);const r=yield We(t.send(e.map(l=>{let{track:A}=l;return A}),n.store.codec,n.store.audioCodec)),i=(yield We(r.next())).value,u=n.createGatewayPublishMessage(e,i);let s;try{s=yield u}catch(l){throw wt("error",n,"doPublish yield error: ".concat(l.toString())),r.throw(l),(l==null?void 0:l.code)===P.WS_ABORT&&e.forEach(A=>{let{track:p}=A;n.pendingLocalTracks.indexOf(p)===-1&&n.pendingLocalTracks.push(p)}),n.unbindLocalTrackEvents(e),l}const d=n.mapPubResToRemoteConfig(u,s);at("debug",n,"doPublish",{remoteConfigs:d,tracks:e.map(l=>{let{track:A}=l;return A.getTrackId()}),pubMsg:u,pubAns:s});const a=(yield We(r.next(d))).value;e.forEach(l=>{let{type:A}=l;n.statsCollector.addLocalStats(A)}),n.assignLocalTracks(e,a),n.statsUploader.startUploadUplinkStats(),e.forEach(l=>{let{track:A,type:p}=l;const f=performance.now();n.store.publish(A.getTrackId(),p===_t.LocalAudioTrack?"audio":"video",void 0,f)})})()}publishLowStream(t){var e=this;return vl(function*(){if(!e.connection)return;at("debug",e,"publishLowStream",t);const n=yield We(e.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const i=e.localTrackMap.get(_t.LocalVideoTrack);if(!i)throw new B(P.UNEXPECTED_ERROR,"Could not find high stream");if(e.localTrackMap.has(_t.LocalVideoLowTrack))throw new B(P.UNEXPECTED_ERROR,"[".concat(e.store.clientId,"] Can't publish low stream when stream already publish"));yield We(e.waitTillConnected());const u=[{track:e.getLowVideoTrack(i.track,t),type:_t.LocalVideoLowTrack}];if(yield*fB(JB(e.doPublish(e.connection,u)),We),i.track.muted||!i.track.enabled){var r;const s=(r=e.localTrackMap.get(_t.LocalVideoLowTrack))===null||r===void 0?void 0:r.id;s!==void 0&&(yield We(e.connection.muteLocal([s])))}}finally{n()}})()}async republish(){this.pendingLocalTracks.length>0&&(T.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),at("debug",this,"republish",this.pendingLocalTracks.map(t=>t.getTrackId())),await jr(this,le.RequestRePublish,this.pendingLocalTracks),this.emit(le.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(t){at("debug",this,"reSubscribe",this.pendingRemoteTracks.map(e=>{let{user:n}=e;return n.uid}));for(let e=this.pendingRemoteTracks.length-1;e>=0;e--){const{user:n,kind:r}=this.pendingRemoteTracks[e];(r!==ee.AUDIO||n._audio_added_&&n._audioSSRC)&&(r!==ee.VIDEO||n._video_added_&&n._videoSSRC)||this.pendingRemoteTracks.splice(e,1)}if(t)await jr(this,le.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:e,kind:n}of this.pendingRemoteTracks)await this.subscribe(e,n,n===ee.VIDEO?e._videoSSRC:e._audioSSRC);this.pendingRemoteTracks.forEach(e=>{let{user:n}=e;this.emit(le.MediaReconnectEnd,n.uid)}),this.pendingRemoteTracks=[]}async unpublish(t){if(!this.connection)return void t.forEach(n=>{const r=this.pendingLocalTracks.indexOf(n);r!==-1&&this.pendingLocalTracks.splice(r,1)});await this.waitTillConnected();const e=this.filterTobeUnpublishedTracks(t);return e.length!==0?(at("debug",this,"unpublish"),this.doUnpublish(this.connection,e)):void 0}async unpublishLowStream(){if(!this.connection)return;at("debug",this,"unpublishLowStream");const t=this.localTrackMap.get(_t.LocalVideoLowTrack);if(!t)return;await this.waitTillConnected();const e=[[_t.LocalVideoLowTrack,t]];return this.doUnpublish(this.connection,e)}async doUnpublish(t,e){const n=this.createGatewayUnpublishMessage(e);return await t.stopSending(e.map(r=>{let[,{id:i}]=r;return i})),this.withdrawLocalTracks(e),this.unbindLocalTrackEvents(e.map(r=>{let[i,{track:u}]=r;return{type:i,track:u}})),e.forEach(r=>{let[i]=r;this.statsCollector.removeLocalStats(i)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),n}async subscribe(t,e,n,r,i){var u;if(!this.connection)throw new B(P.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(at("debug",this,"subscribe",{uid:t.uid,mediaType:e,ssrcId:n}),(u=this.remoteUserMap.get(t))!==null&&u!==void 0&&u.has(e))return;let s,d;if(await this.waitTillConnected(),i){const A=i.find(f=>{let{stream_type:E}=f;return E===e});if(!A)throw new B(P.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(e," for user: ").concat(t.uid," because subscribe answer from gateway does not contain stream_type: ").concat(e,"."));const p=await this.connection.receive(e,A.ssrcs,String(t.uid),A.attributes);s=p.track,d=p.id}else{const A=await this.connection.receive(e,[{ssrcId:n,rtx:r}],String(t.uid),void 0);s=A.track,d=A.id}e===ee.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new gf(s,t.uid,t._uintid,this.store),T.info("[".concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new ff(s,t.uid,t._uintid,this.store),T.info("[".concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(t,t._videoTrack));const a=this.remoteUserMap.get(t);a?a.set(e,d):this.remoteUserMap.set(t,new Map([[e,d]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadDownlinkStats();const l=this.pendingRemoteTracks.findIndex(A=>{let{user:p,kind:f}=A;return p.uid===t.uid&&e===f});l!==-1&&(this.pendingRemoteTracks.splice(l,1),this.emit(le.MediaReconnectEnd,t.uid))}async massSubscribe(t){return this.massSubscribeNoLock(t)}async massSubscribeNoLock(t){if(!this.connection)throw new B(P.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");at("debug",this,"subscribeAll",t.map(n=>{let{user:r,mediaType:i,ssrcId:u}=n;return{uid:r.uid,mediaType:i,ssrcId:u}})),t=t.filter(n=>{var r;let{user:i,mediaType:u}=n;return!((r=this.remoteUserMap.get(i))!==null&&r!==void 0&&r.has(u))}),await this.waitTillConnected();const e=await this.connection.batchReceive(t.map(n=>{let{user:r,mediaType:i,ssrcId:u,rtxSsrcId:s}=n;return{kind:i,ssrcMsg:[{ssrcId:u,rtx:s}],mslabel:String(r.uid)}}));t.forEach((n,r)=>{let{user:i,mediaType:u}=n;const{track:s,id:d}=e[r];u===ee.AUDIO?(i._audioTrack?i._audioTrack._updateOriginMediaStreamTrack(s):(i._audioTrack=new gf(s,i.uid,i._uintid,this.store),T.info("[".concat(this.store.p2pId,"] create remote audio track: ").concat(i._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(i,i._audioTrack)):(i._videoTrack?i._videoTrack._updateOriginMediaStreamTrack(s):(i._videoTrack=new ff(s,i.uid,i._uintid,this.store),T.info("[".concat(this.store.p2pId,"] create remote video track: ").concat(i._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(i,i._videoTrack));const a=this.remoteUserMap.get(i);a?a.set(u,d):this.remoteUserMap.set(i,new Map([[u,d]])),this.statsCollector.addRemoteStats(i.uid),this.statsUploader.startUploadDownlinkStats();const l=this.pendingRemoteTracks.findIndex(A=>{let{user:p,kind:f}=A;return p.uid===i.uid&&u===f});l!==-1&&(this.pendingRemoteTracks.splice(l,1),this.emit(le.MediaReconnectEnd,i.uid))})}async unsubscribe(t,e){const n=this.pendingRemoteTracks.filter(u=>{let{user:s,kind:d}=u;return e!==void 0?s.uid===t.uid&&e===d:s.uid===t.uid});if(n.forEach(u=>{const s=this.pendingRemoteTracks.indexOf(u);this.pendingRemoteTracks.splice(s,1)}),!this.connection)return void n.forEach(u=>{let{kind:s}=u;var d;if(s===ee.AUDIO)(d=t._audioTrack)===null||d===void 0||d._destroy(),t._audioTrack=void 0;else if(s===ee.VIDEO){var a;(a=t._videoTrack)===null||a===void 0||a._destroy(),t._videoTrack=void 0}});at("debug",this,"unsubscribe",{uid:t.uid,mediaType:e});const r=this.filterTobeUnSubscribedTracks(t,e);if(r.length===0)return;await this.connection.stopReceiving(r.map(u=>{let[,{id:s}]=u;return s}));const i=this.createUnsubscribeMessage(r);return this.withdrawRemoteTracks(r),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),r.forEach(u=>{let[s,{kind:d}]=u;var a,l;if(d===ee.VIDEO&&s._videoSSRC&&((a=this.connection)===null||a===void 0||a.setStatsRemoteVideoIsReady(s._videoSSRC,!1)),d===ee.VIDEO)this.unbindRemoteTrackEvents(s._videoTrack),(l=s._videoTrack)===null||l===void 0||l._destroy(),s._videoTrack=void 0;else if(d===ee.AUDIO){var A;this.unbindRemoteTrackEvents(s._audioTrack),(A=s._audioTrack)===null||A===void 0||A._destroy(),s._audioTrack=void 0}}),i}async massUnsubscribe(t){return this.massUnsubscribeNoLock(t)}async massUnsubscribeNoLock(t){let e=[];for(const{user:i,mediaType:u}of t){const s=this.pendingRemoteTracks.filter(d=>{let{user:a,kind:l}=d;return u!==void 0?a.uid===i.uid&&u===l:a.uid===i.uid});s.forEach(d=>{const a=this.pendingRemoteTracks.indexOf(d);this.pendingRemoteTracks.splice(a,1)}),e=e.concat(s)}if(!this.connection)return void e.forEach(i=>{let{user:u,kind:s}=i;var d;if(s===ee.AUDIO)(d=u._audioTrack)===null||d===void 0||d._destroy(),u._audioTrack=void 0;else if(s===ee.VIDEO){var a;(a=u._videoTrack)===null||a===void 0||a._destroy(),u._videoTrack=void 0}});at("debug",this,"batchUnsubscribe",t.map(i=>{let{user:u,mediaType:s}=i;return{uid:u.uid,mediaType:s}}));const n=_a(t).call(t,(i,u)=>{let{user:s,mediaType:d}=u;const a=this.filterTobeUnSubscribedTracks(s,d);return i.concat(a)},[]);if(n.length===0)return;await this.connection.stopReceiving(n.map(i=>{let[,{id:u}]=i;return u}));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),n.forEach(i=>{let[u,{kind:s}]=i;var d,a;if(s===ee.VIDEO&&u._videoSSRC&&((d=this.connection)===null||d===void 0||d.setStatsRemoteVideoIsReady(u._videoSSRC,!1)),s===ee.VIDEO)this.unbindRemoteTrackEvents(u._videoTrack),(a=u._videoTrack)===null||a===void 0||a._destroy(),u._videoTrack=void 0;else if(s===ee.AUDIO){var l;this.unbindRemoteTrackEvents(u._audioTrack),(l=u._audioTrack)===null||l===void 0||l._destroy(),u._audioTrack=void 0}}),r}async muteRemote(t,e){if(!this.connection)return;at("debug",this,"muteRemote",{uid:t.uid,kind:e});const n=this.remoteUserMap.get(t);if(!n)return T.warning("P2PChannel.muteRemote has no remote user ".concat(t.uid,".")),void wt("warning",this,"P2PChannel.muteRemote has no remote user ".concat(t.uid,"."));if(!n.get(e))return T.warning("P2PChannel.muteRemote has no remote user ".concat(t.uid," media type ").concat(e,".")),void wt("warning",this,"P2PChannel.muteRemote has no remote user ".concat(t.uid," media type ").concat(e,"."));const r=e===ee.VIDEO?t._videoSSRC:t._audioSSRC;r!==void 0&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(t,e){return this.unmuteRemoteNoLock(t,e)}async unmuteRemoteNoLock(t,e){if(!this.connection)return;at("debug",this,"unmuteRemote",{uid:t.uid,kind:e});const n=this.remoteUserMap.get(t);return n?n.get(e)?void 0:(T.warning("P2PChannel.unmuteRemote has no remote user ".concat(t.uid," media type ").concat(e,".")),void wt("warning",this,"unmuteRemote has no remote user ".concat(t.uid," media type ").concat(e))):(T.warning("P2PChannel.unmuteRemote has no remote user ".concat(t.uid,".")),void wt("warning",this,"unmuteRemote has no remote user ".concat(t.uid)))}getAllTracks(t){const e=this.localTrackMap.get(_t.LocalAudioTrack);if((e==null?void 0:e.track)instanceof Ai){const n=e.track;return Array.from(this.localTrackMap.entries()).filter(r=>{let[i]=r;return i!==_t.LocalAudioTrack}).filter(r=>{let[i]=r;return!(t&&i===_t.LocalVideoLowTrack)}).map(r=>{let[,{track:i}]=r;return i}).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter(n=>{let[r]=n;return!(t&&r===_t.LocalVideoLowTrack)}).map(n=>{let[,{track:r}]=n;return r})}reportPublishEvent(t,e,n,r,i){if(t){const s=this.localTrackMap.get(_t.LocalAudioTrack),d=r?this.localTrackMap.get(_t.LocalVideoLowTrack):this.localTrackMap.get(_t.LocalVideoTrack);ot.publish(this.store.sessionId,{eventElapse:hi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:e,audioName:s==null?void 0:s.track.getTrackLabel(),videoName:d==null?void 0:d.track.getTrackLabel(),screenshare:(d==null?void 0:d.track._hints.indexOf(jn.SCREEN_TRACK))!==-1,audio:!!s,video:!!d,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var u;n||(n=[]);const s=n.find(a=>a instanceof kn),d=r?(u=this.localTrackMap.get(_t.LocalVideoTrack))===null||u===void 0?void 0:u.track:n.find(a=>a instanceof un);ot.publish(this.store.sessionId,{eventElapse:hi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:e,audioName:s==null?void 0:s.getTrackLabel(),videoName:d==null?void 0:d.getTrackLabel(),screenshare:(d==null?void 0:d._hints.indexOf(jn.SCREEN_TRACK))!==-1,audio:!!s,video:!!d,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(t,e,n,r){const i=r===ee.VIDEO?n._videoSSRC:n._audioSSRC;i&&ot.subscribe(this.store.sessionId,{succ:t,ec:e,video:r===ee.VIDEO,audio:r===ee.AUDIO,peerid:n.uid,subscribeRequestid:r===ee.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:hi.measureFromSubscribeStart(this.store.clientId,i)})}reset(){T.debug("P2PChannel.reset"),this.mutex=new Tr("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Ur.Disconnected}getStats(){var t;return(t=this.connection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(t){var e;return((e=this.connection)===null||e===void 0?void 0:e.getRemoteVideoIsReady(t))||!1}getLocalAudioVolume(){const t=this.localTrackMap.get(_t.LocalAudioTrack);if(t)return t.track.getVolumeLevel()}getLocalVideoSize(){const t=this.localTrackMap.get(_t.LocalVideoTrack);if(t)return{width:t.track._videoWidth||0,height:t.track._videoHeight||0}}getEncoderConfig(t){const e=this.localTrackMap.get(t);return e&&e.track instanceof un||e&&e.track instanceof kn?e.track._encoderConfig:void 0}getLocalMedia(t){return this.localTrackMap.get(t)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(t,e){if(!t)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(t);return!!n&&(!e||n.has(e))}async hasRemoteMediaWithLock(t,e){if(!t)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(t);return!!n&&(!e||n.has(e))}getRemoteMedia(t){var e;const n=Array.from(Fa(e=this.remoteUserMap).call(e)).find(r=>r.uid===t);return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let t=Array.from(this.remoteUserMap.entries()).map(n=>{let[r]=n;return{uid:r.uid,level:r.audioTrack?100*r.audioTrack._source.getAccurateVolumeLevel():0}});const e=this.localTrackMap.get(_t.LocalAudioTrack);return e&&t.push({level:100*e.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),t=vI(t).call(t,(n,r)=>n.level-r.level),t}async disconnectForReconnect(){this.connection&&(at("debug",this,"disconnectForReconnect"),T.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),this.state=Ur.Reconnecting,this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(t=>{let[e,{track:n}]=t;switch(e){case _t.LocalVideoTrack:n._hints.includes(jn.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case _t.LocalAudioTrack:n instanceof Ai?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);break;case _t.LocalVideoLowTrack:}}),this.emit(le.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[e,n]=t;Array.from(Fa(n).call(n)).forEach(r=>{this.setPendingRemoteMedia(e,r)}),this.emit(le.MediaReconnectStart,e.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),T.debug("P2PChannel disconnected, waiting to reconnect."))}hasPendingRemoteMedia(t,e){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((t instanceof E_?t.uid:t)===r.uid&&e===i)return!0}return!1}setPendingRemoteMedia(t,e){this.hasPendingRemoteMedia(t,e)||this.pendingRemoteTracks.push({user:t,kind:e})}async reEstablish(){if(this.connection)return this.connection.reEstablish()}getUplinkNetworkQuality(){if(!this.connection)return 0;const t=this.connection.getStats(),e=this.localTrackMap.get(_t.LocalVideoTrack),n=this.localTrackMap.get(_t.LocalAudioTrack),r=t.videoSend.find(E=>E.ssrc===(e==null?void 0:e.ssrcs[0].ssrcId)),i=t.audioSend.find(E=>E.ssrc===(n==null?void 0:n.ssrcs[0].ssrcId));if(!r||!i)return 1;const u=Ha(this,le.NeedSignalRTT),s=r?r.rttMs:void 0,d=i?i.rttMs:void 0,a=s&&d?(s+d)/2:s||d,l=(a&&u?(a+u)/2:a||u)||0,A=100*t.sendPacketLossRate*.7/50+.3*l/1500,p=A<.17?1:A<.36?2:A<.59?3:A<.1?4:5,f=e==null?void 0:e.track;if(f&&f._encoderConfig&&f._hints.indexOf(jn.SCREEN_TRACK)===-1){const E=f._encoderConfig.bitrateMax,C=t.bitrate.actualEncoded;if(E&&C){const _=(1e3*E-C)/(1e3*E);return EJ[_<.15?0:_<.3?1:_<.45?2:_<.6?3:4][p]}}return p}getDownlinkNetworkQuality(){if(!this.connection)return 0;const t=this.connection.getStats();let e=0;return Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;const i=r._audioSSRC,u=r._videoSSRC,s=t.audioRecv.find(C=>C.ssrc===i),d=t.videoRecv.find(C=>C.ssrc===u);if(!s&&!d)return void(e+=1);const a=Ha(this,le.NeedSignalRTT),l=t.rtt,A=(l&&a?(l+a)/2:l||a)||0,p=s?s.jitterMs:void 0,f=t.recvPacketLossRate;let E=.7*f*100/50+.3*A/1500;p&&(E=.6*f*100/50+.2*A/1500+.2*p/400),e+=E<.1?1:E<.17?2:E<.36?3:E<.59?4:5}),this.remoteUserMap.size>0?Math.round(e/this.remoteUserMap.size):e}async muteLocalTrack(t){return new Nt((e,n)=>{this.handleMuteLocalTrack(t,e,n)})}filterTobePublishedTracks(t,e,n){const r=[],i=rr(),u=this.getAllTracks();t=Lk(t=t.filter(a=>u.indexOf(a)===-1));let s=!1,d=!1;for(const a of t){if(a instanceof un&&(this.localTrackMap.has(_t.LocalVideoTrack)||s?new B(P.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:a,type:_t.LocalVideoTrack}),s=!0),e)){const l=this.getLowVideoTrack(a,n);r.push({track:l,type:_t.LocalVideoLowTrack})}if(a instanceof kn){const l=this.localTrackMap.get(_t.LocalAudioTrack);if(l){if(!(l.track instanceof Ai))throw new B(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(a._bypassWebAudio)throw new B(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");l.track.addAudioTrack(a),this.bindLocalAudioTrackEvents(a,!0)}else if(d){const A=r.find(p=>{let{type:f}=p;return f===_t.LocalAudioTrack});if(!(A.track instanceof Ai))throw new B(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(a._bypassWebAudio)throw new B(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");A.track.addAudioTrack(a)}else{if(!i.webAudioMediaStreamDest||a instanceof Ai||a._bypassWebAudio)r.push({track:a,type:_t.LocalAudioTrack});else{const A=new Ai;A.addAudioTrack(a),r.push({track:A,type:_t.LocalAudioTrack})}d=!0}}}return r}filterTobeUnpublishedTracks(t){const e=[],n=this.getAllTracks();t=Lk(t=t.filter(r=>n.indexOf(r)!==-1));for(const r of t){if(r instanceof kn){const i=this.localTrackMap.get(_t.LocalAudioTrack);if(!i)continue;i.track instanceof Ai?(i.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),i.track.trackList.length===0&&(e.push([_t.LocalAudioTrack,i]),i.track.close())):e.push([_t.LocalAudioTrack,i])}if(r instanceof un){const i=this.localTrackMap.get(_t.LocalVideoTrack);if(!i)continue;e.push([_t.LocalVideoTrack,i]);const u=this.localTrackMap.get(_t.LocalVideoLowTrack);u&&e.push([_t.LocalVideoLowTrack,u])}}return e}bindLocalTrackEvents(t){t.forEach(e=>{let{track:n,type:r}=e;switch(r){case _t.LocalVideoTrack:n.addListener(xt.GET_STATS,this.handleGetLocalVideoStats),n.addListener(xt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(xt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(xt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),n.addListener(xt.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),n.addListener(xt.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.addListener(xt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(xt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case _t.LocalAudioTrack:this.bindLocalAudioTrackEvents(n);break;case _t.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(t,e){t instanceof Ai?t.trackList.forEach(n=>{n.addListener(xt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(xt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(xt.GET_STATS,this.handleGetLocalAudioStats),n.addListener(xt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(xt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.addListener(xt.GET_STATS,this.handleGetLocalAudioStats),t.addListener(xt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(xt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(xt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(xt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),e||t.addListener(xt.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(t){t||(t=Array.from(this.localTrackMap.entries()).map(e=>{let[n,{track:r}]=e;return{track:r,type:n}})),t.forEach(e=>{let{track:n,type:r}=e;switch(r){case _t.LocalVideoTrack:n.off(xt.GET_STATS,this.handleGetLocalVideoStats),n.off(xt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(xt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(xt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),n.off(xt.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),n.off(xt.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(xt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(xt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case _t.LocalAudioTrack:this.unbindLocalAudioTrackEvents(n);break;case _t.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(t){t instanceof Ai?t.trackList.forEach(e=>{e.off(xt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(xt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(xt.GET_STATS,this.handleGetLocalAudioStats),e.off(xt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(xt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.off(xt.GET_STATS,this.handleGetLocalAudioStats),t.off(xt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(xt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(xt.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(xt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(xt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(t,e){e instanceof ff&&e.addListener(xt.GET_STATS,n=>{n(this.handleGetRemoteVideoStats(t))}),e instanceof gf&&e.addListener(xt.GET_STATS,n=>{n(this.handleGetRemoteAudioStats(t))})}unbindRemoteTrackEvents(t){t&&t.removeAllListeners(xt.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(t=>{let[e,n]=t;n.has(ee.AUDIO)&&this.unbindRemoteTrackEvents(e._audioTrack),n.has(ee.VIDEO)&&this.unbindRemoteTrackEvents(e._videoTrack)})}createGatewayPublishMessage(t,e){return t.map((n,r)=>{let i,u,{track:s,type:d}=n;switch(d){case _t.LocalAudioTrack:i=He.Audio,u={dtx:s instanceof rl&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case _t.LocalVideoTrack:i=s._hints.includes(jn.SCREEN_TRACK)?He.Screen:He.High,u=Qs(Qs({},bk(s)),{},{codec:this.store.codec});break;case _t.LocalVideoLowTrack:i=He.Low,u=Qs(Qs({},bk(s)),{},{codec:this.store.codec})}return{stream_type:i,attributes:u,ssrcs:e[r]}})}createGatewayUnpublishMessage(t){return t.map(e=>{let n,[r,{track:i,ssrcs:u,id:s}]=e;switch(r){case _t.LocalVideoTrack:n=i._hints.includes(jn.SCREEN_TRACK)?He.Screen:He.High;break;case _t.LocalAudioTrack:n=He.Audio;break;case _t.LocalVideoLowTrack:n=He.Low}return{stream_type:n,ssrcs:u,mid:s}})}assignLocalTracks(t,e){t.forEach((n,r)=>{let{track:i,type:u}=n;this.localTrackMap.set(u,{track:i,id:e[r].id,ssrcs:e[r].localSSRC})})}withdrawLocalTracks(t){t.forEach(e=>{let[n]=e;this.localTrackMap.delete(n)})}async waitTillConnected(){return new Nt((t,e)=>{switch(this.state){case Ur.New:case Ur.Reconnecting:{const n=(r,i)=>i===Ur.Disconnected?(this.off(le.StateChange,n),void e(new B(P.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):i===Ur.Connected?(this.off(le.StateChange,n),void t(void 0)):void 0;this.on(le.StateChange,n);break}case Ur.Connected:t(void 0);break;case Ur.Disconnected:e(new B(P.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})}bindConnectionEvents(t){t.onConnectionStateChange=async e=>{T.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(e,")")),ke("info",this,"connectionStateChange",e),this.emit(le.PeerConnectionStateChange,e),e!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),e==="failed"&&(t.iceConnectionState==="failed"?(setTimeout(()=>this.emit(le.P2PLost),0),this.iceFailedCount+=1,await Vn(aI(this.iceFailedCount,ze)),this.emit(le.RequestRestartICE)):await this.requestReconnect())},t.onICEConnectionStateChange=e=>{T.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),ke("info",this,"iceConnectionStateChange",e),ot.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:Pt.TRACER}).onSuccess(),this.emit(le.IceConnectionStateChange,e)},t.onICETransportStateChange=e=>{T.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")")),ke("info",this,"ICETransportStateChange",e)},t.onDTLSTransportStateChange=e=>{T.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")")),ke("info",this,"DTLSTransportStateChange",e)},t.onDTLSTransportError=e=>{T.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")")),ke("info",this,"DTLSTransportError",e)},t.onFirstAudioDecoded=e=>{var n;const r=Array.from(Fa(n=this.remoteUserMap).call(n)).find(u=>u._audioSSRC===e);var i;r&&((i=r.audioTrack)===null||i===void 0||i.emit(eu.FIRST_FRAME_DECODED),ot.firstRemoteFrame(this.store.sessionId,On.FIRST_AUDIO_DECODE,Me.FIRST_AUDIO_DECODE,{peer:r._uintid,subscribeElapse:hi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},t.onFirstAudioReceived=e=>{var n;const r=Array.from(Fa(n=this.remoteUserMap).call(n)).find(i=>i._audioSSRC===e);r&&ot.firstRemoteFrame(this.store.sessionId,On.FIRST_AUDIO_RECEIVED,Me.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:hi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},t.onFirstVideoDecoded=(e,n,r)=>{var i;const u=Array.from(Fa(i=this.remoteUserMap).call(i)).find(s=>s._videoSSRC===e);u&&ot.firstRemoteFrame(this.store.sessionId,On.FIRST_VIDEO_DECODE,Me.FIRST_VIDEO_DECODE,{peer:u._uintid,videowidth:n,videoheight:r,subscribeElapse:hi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},t.onFirstVideoReceived=e=>{var n;const r=Array.from(Fa(n=this.remoteUserMap).call(n)).find(i=>i._videoSSRC===e);r&&ot.firstRemoteFrame(this.store.sessionId,On.FIRST_VIDEO_RECEIVED,Me.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:hi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},t.onSelectedLocalCandidateChanged=(e,n)=>{const r=e.candidateType==="relay",i=n.candidateType==="relay";n.candidateType!=="unknown"&&r===i||this.emit(le.ConnectionTypeChange,r),T.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Ls(n))," -> ").concat(JSON.stringify(Ls(e)),")")),ke("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(Ls(n))," -> ").concat(JSON.stringify(Ls(e))))},t.onSelectedRemoteCandidateChanged=(e,n)=>{T.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Ls(n))," -> ").concat(JSON.stringify(Ls(e)),")")),ke("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(Ls(n))," -> ").concat(JSON.stringify(Ls(e))))}}unbindConnectionEvents(t){t.onConnectionStateChange=void 0,t.onICEConnectionStateChange=void 0,t.onICETransportStateChange=void 0,t.onDTLSTransportStateChange=void 0,t.onDTLSTransportError=void 0,t.onFirstAudioDecoded=void 0,t.onFirstAudioReceived=void 0,t.onFirstVideoDecoded=void 0,t.onFirstVideoReceived=void 0,t.onSelectedLocalCandidateChanged=void 0,t.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(t){const e=[];if(this.getAllTracks().indexOf(t)===-1)return e;const n=this.localTrackMap.get(_t.LocalAudioTrack);if(t instanceof kn&&(n==null?void 0:n.track)instanceof Ai)return n.track.isActive||e.push([_t.LocalAudioTrack,n]),e;const r=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:u}]=i;return t===u});if(r&&(e.push(r),r[0]===_t.LocalVideoTrack)){const i=this.localTrackMap.get(_t.LocalVideoLowTrack);i&&e.push([_t.LocalVideoLowTrack,i])}return e}filterTobeUnmutedTracks(t){const e=[],n=this.localTrackMap.get(_t.LocalAudioTrack);if(t instanceof kn&&(n==null?void 0:n.track)instanceof Ai)return n.track.isActive&&e.push([_t.LocalAudioTrack,n]),e;const r=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:u}]=i;return t===u});if(r)if(r[0]===_t.LocalVideoTrack){e.push(r);const i=this.localTrackMap.get(_t.LocalVideoLowTrack);i&&e.push([_t.LocalVideoLowTrack,i])}else e.push(r);return e}createMuteMessage(t){return t.map(e=>{let n,[r,{track:i,ssrcs:u,id:s}]=e;switch(r){case _t.LocalAudioTrack:n=He.Audio;break;case _t.LocalVideoTrack:n=i._hints.includes(jn.SCREEN_TRACK)?He.Screen:He.High;break;case _t.LocalVideoLowTrack:n=He.Low}return{stream_type:n,ssrcs:u,mid:s}})}createUnmuteMessage(t){return t.map(e=>{let n,[r,{track:i,ssrcs:u,id:s}]=e;switch(r){case _t.LocalAudioTrack:n=He.Audio;break;case _t.LocalVideoTrack:n=i._hints.includes(jn.SCREEN_TRACK)?He.Screen:He.High;break;case _t.LocalVideoLowTrack:n=He.Low}return{stream_type:n,ssrcs:u,mid:s}})}filterTobeUnSubscribedTracks(t,e){const n=[],r=this.remoteUserMap.get(t);if(!r)return n;if(e){const i=r.get(e);if(!i)return n;n.push([t,{kind:e,id:i}])}else Array.from(r.entries()).forEach(i=>{let[u,s]=i;n.push([t,{kind:u,id:s}])});return n}createUnsubscribeMessage(t){const e=[];return t.forEach(n=>{let[r,{kind:i,id:u}]=n;switch(i){case ee.VIDEO:return void(r._videoSSRC&&e.push({stream_type:ee.VIDEO,ssrcId:r._videoSSRC}));case ee.AUDIO:return void(r._audioSSRC&&e.push({stream_type:ee.AUDIO,ssrcId:r._audioSSRC}))}}),e}createUnsubscribeAllMessage(t){const e=new Map;return t.forEach(n=>{let[r,{kind:i}]=n;if(e.has(r)){let u=e.get(r);i===ee.VIDEO?u|=Fe.Video:u|=Fe.Audio,e.set(r,u)}else i===ee.VIDEO?e.set(r,Fe.Video):e.set(r,Fe.Audio)}),{users:Array.from(e.entries()).map(n=>{let[r,i]=n;return{stream_id:r.uid,stream_type:i}})}}withdrawRemoteTracks(t){t.forEach(e=>{let[n,{kind:r}]=e;const i=this.remoteUserMap.get(n);i&&(i.delete(r),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(n))})}async updateBitrateLimit(t){const e=this.localTrackMap.get(_t.LocalVideoTrack),n=this.localTrackMap.get(_t.LocalVideoLowTrack);e&&await e.track.setBitrateLimit(t.uplink),n&&t.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(t,e){return t.map((n,r)=>{var i;let{stream_type:u}=n;return(i=e.find(s=>{let{stream_type:d}=s;return u===d}))===null||i===void 0?void 0:i.attributes})}async tryToUnmuteAudio(t){for(let n=0;n<t.length;n++)if(t[n]instanceof kn){var e;const r=this.filterTobeUnmutedTracks(t[n]);if(r.length===0)continue;await((e=this.connection)===null||e===void 0?void 0:e.unmuteLocal(r.map(u=>{let[,{id:s}]=u;return s})));const i=this.createUnmuteMessage(r);return void await Be(this,le.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=t=>{var e;return!((e=this.connection)===null||e===void 0||!e.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=(t,e)=>this.emit(le.RequestUploadStats,t,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Vn(aI(this.dtlsFailedCount,ze)),this.emit(le.RequestReconnect)}async reconnectP2P(){const t=Array.from(this.localTrackMap.entries()),e=this.createGatewayUnpublishMessage(t);Array.from(this.remoteUserMap.entries()),e.length>0&&await jr(this,le.RequestUnpublishForReconnectPC,e),this.disconnectForReconnect(),this.emit(le.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(_t.LocalVideoTrack)||this.pendingLocalTracks.some(t=>t instanceof un)}throwIfTrackTypeNotMatch(t){if(t.filter(e=>e instanceof un).length>1)throw new B(P.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t.filter(e=>e instanceof kn).length>1&&(t.some(e=>e instanceof kn&&e._bypassWebAudio)||!rr().webAudioMediaStreamDest))throw new B(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const e of t){if(e instanceof un&&this.pendingLocalTracks.some(n=>n instanceof un))throw new B(P.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e instanceof kn&&this.pendingLocalTracks.some(n=>n instanceof kn)&&(!rr().webAudioMediaStreamDest||e._bypassWebAudio||this.pendingLocalTracks.some(n=>n instanceof kn&&n._bypassWebAudio)))throw new B(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(t,e){const n=rr().supportDualStreamEncoding,r=Qs(Qs({},{width:160,height:120,framerate:15,bitrate:50}),e);let i;i=n?t._mediaStreamTrack.clone():_nt(t,r);const u=new un(i,Qs(Qs({},n&&{scaleResolutionDownBy:QZ(r,t)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}));return u._hints.push(jn.LOW_STREAM),u}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}}).prototype,"startP2PConnection",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"startP2PConnection"),Ee.prototype),Lt(Ee.prototype,"connect",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"connect"),Ee.prototype),Lt(Ee.prototype,"unpublish",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"unpublish"),Ee.prototype),Lt(Ee.prototype,"unpublishLowStream",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"unpublishLowStream"),Ee.prototype),Lt(Ee.prototype,"subscribe",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"subscribe"),Ee.prototype),Lt(Ee.prototype,"massSubscribe",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"massSubscribe"),Ee.prototype),Lt(Ee.prototype,"unsubscribe",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"unsubscribe"),Ee.prototype),Lt(Ee.prototype,"massUnsubscribe",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"massUnsubscribe"),Ee.prototype),Lt(Ee.prototype,"muteRemote",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"muteRemote"),Ee.prototype),Lt(Ee.prototype,"unmuteRemote",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"unmuteRemote"),Ee.prototype),Lt(Ee.prototype,"hasRemoteMediaWithLock",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"hasRemoteMediaWithLock"),Ee.prototype),Lt(Ee.prototype,"disconnectForReconnect",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"disconnectForReconnect"),Ee.prototype),Lt(Ee.prototype,"reEstablish",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"reEstablish"),Ee.prototype),Lt(Ee.prototype,"updateBitrateLimit",[Hr],Object.getOwnPropertyDescriptor(Ee.prototype,"updateBitrateLimit"),Ee.prototype),YB=Ee))||YB;function Hr(t,e,n){const r=t[e];if(typeof r!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){const i=this.mutex,u=await i.lock("From P2PChannel.".concat(e));try{for(var s=arguments.length,d=new Array(s),a=0;a<s;a++)d[a]=arguments[a];return await r.apply(this,d)}finally{u()}},n}function Bi(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Ae,qB=typeof Symbol=="function"&&Symbol.observable||"@@observable",V_=function(){return Math.random().toString(36).substring(7).split("").join(".")},zB={INIT:"@@redux/INIT"+V_(),REPLACE:"@@redux/REPLACE"+V_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+V_()}};function ynt(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function XB(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Bi(0));if(typeof e=="function"&&n===void 0&&(n=e,e=void 0),n!==void 0){if(typeof n!="function")throw new Error(Bi(1));return n(XB)(t,e)}if(typeof t!="function")throw new Error(Bi(2));var i=t,u=e,s=[],d=s,a=!1;function l(){d===s&&(d=s.slice())}function A(){if(a)throw new Error(Bi(3));return u}function p(_){if(typeof _!="function")throw new Error(Bi(4));if(a)throw new Error(Bi(5));var y=!0;return l(),d.push(_),function(){if(y){if(a)throw new Error(Bi(6));y=!1,l();var R=d.indexOf(_);d.splice(R,1),s=null}}}function f(_){if(!ynt(_))throw new Error(Bi(7));if(_.type===void 0)throw new Error(Bi(8));if(a)throw new Error(Bi(9));try{a=!0,u=i(u,_)}finally{a=!1}for(var y=s=d,R=0;R<y.length;R++)(0,y[R])();return _}function E(_){if(typeof _!="function")throw new Error(Bi(10));i=_,f({type:zB.REPLACE})}function C(){var _,y=p;return(_={subscribe:function(R){if(typeof R!="object"||R===null)throw new Error(Bi(11));function O(){R.next&&R.next(A())}return O(),{unsubscribe:y(O)}}})[qB]=function(){return this},_}return f({type:zB.INIT}),(r={dispatch:f,subscribe:p,getState:A,replaceReducer:E})[qB]=C,r}function ZB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZB(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}(function(t){t.SET_SESSION_ID="SET_SESSION_ID",t.SET_P2P_ID="SET_P2P_id",t.SET_UID="SET_UID",t.SET_PUB_ID="SET_PUB_ID",t.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",t.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",t.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",t.AVOID_JOIN_START="AVOID_JOIN_START",t.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",t.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",t.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",t.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",t.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",t.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",t.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",t.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",t.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",t.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",t.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",t.RESET_KEY_METRICS="RESET_KEY_METRICS"})(Ae||(Ae={}));class Tnt{constructor(e,n,r,i){v(this,"store",void 0),v(this,"reducer",void 0);const u={codec:e,audioCodec:n,mode:r,clientId:i,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u,d=arguments.length>1?arguments[1]:void 0;switch(d.type){case Ae.SET_SESSION_ID:return kt(kt({},s),{},{sessionId:d.sessionId});case Ae.SET_P2P_ID:return kt(kt({},s),{},{p2pId:d.p2pId});case Ae.SET_UID:return kt(kt({},s),{},{uid:d.uid});case Ae.SET_PUB_ID:return kt(kt({},s),{},{pubId:d.pubId});case Ae.KEY_METRIC_CLIENT_CREATED:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{clientCreated:d.metric})});case Ae.KEY_METRIC_JOIN_START:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{joinStart:d.metric})});case Ae.AVOID_JOIN_START:return kt(kt({},s),{},{avoidJoinStart:d.avoidJoinStart});case Ae.KEY_METRIC_JOIN_END:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{joinEnd:d.metric})});case Ae.KEY_METRIC_REQUEST_AP_START:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{requestAPStart:d.metric})});case Ae.KEY_METRIC_REQUEST_AP_END:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{requestAPEnd:d.metric})});case Ae.KEY_METRIC_JOIN_GATEWAY_START:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{joinGatewayStart:d.metric})});case Ae.KEY_METRIC_JOIN_GATEWAY_END:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{joinGatewayEnd:d.metric})});case Ae.KEY_METRIC_PEER_CONNECTION_START:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{peerConnectionStart:d.metric})});case Ae.KEY_METRIC_PEER_CONNECTION_END:return kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{peerConnectionEnd:d.metric})});case Ae.KEY_METRIC_PUBLISH:{const a=s.keyMetrics.publish,l=a.findIndex(A=>A.trackId===d.metric.trackId);return l!==-1?(a[l]=kt(kt({},a[l]),d.metric),kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{publish:[...a]})})):kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{publish:[...s.keyMetrics.publish,d.metric]})})}case Ae.KEY_METRIC_SUBSCRIBE:{const a=s.keyMetrics.subscribe,l=a.findIndex(A=>A.userId===d.metric.userId&&A.type===d.metric.type);return l!==-1?(a[l]=kt(kt({},a[l]),d.metric),kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{subscribe:[...a]})})):kt(kt({},s),{},{keyMetrics:kt(kt({},s.keyMetrics),{},{subscribe:[...s.keyMetrics.subscribe,d.metric]})})}case Ae.SET_CLOUD_PROXY_SERVER_MODE:return s.cloudProxyServerMode=d.mode,s;case Ae.RECORD_JOIN_CHANNEL_SERVICE:return typeof d.index!="number"?s.joinChannelServiceRecords=[...s.joinChannelServiceRecords,d.record]:(s.joinChannelServiceRecords[d.index]=kt(kt({},s.joinChannelServiceRecords[d.index]),d.record),s.joinChannelServiceRecords=[...s.joinChannelServiceRecords]),s;case Ae.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return s.joinChannelServiceRecords=[],s;case Ae.RESET_KEY_METRICS:return s.keyMetrics={publish:[],subscribe:[]},s;default:return s}},this.store=XB(this.reducer)}set sessionId(e){this.store.dispatch({type:Ae.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(e){this.store.dispatch({type:Ae.SET_P2P_ID,p2pId:e})}get p2pId(){return this.store.getState().p2pId}set uid(e){this.store.dispatch({type:Ae.SET_UID,uid:e})}get uid(){return this.store.getState().uid}set pubId(e){this.store.dispatch({type:Ae.SET_PUB_ID,pubId:e})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(e){this.store.dispatch({type:Ae.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:Ae.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:Ae.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(e){this.store.dispatch({type:Ae.AVOID_JOIN_START,avoidJoinStart:e})}joinEnd(){this.store.dispatch({type:Ae.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:Ae.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:Ae.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:Ae.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:Ae.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:Ae.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:Ae.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(e,n,r,i){this.store.dispatch({type:Ae.KEY_METRIC_PUBLISH,metric:kt(kt({trackId:e,type:n},r&&{publishStart:r}),i&&{publishEnd:i})})}subscribe(e,n,r,i,u){this.store.dispatch({type:Ae.KEY_METRIC_SUBSCRIBE,metric:kt(kt(kt({userId:e,type:n},r&&{subscribeStart:r}),i&&{subscribeEnd:i}),u&&{firstFrame:u})})}massSubscribe(e,n,r,i){e.forEach(u=>{this.store.dispatch({type:Ae.KEY_METRIC_SUBSCRIBE,metric:kt(kt(kt({userId:u.userId,type:u.type},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(e,n){e.service==="gateway"&&Array.isArray(e.urls)&&(e.urls=e.urls.map(r=>r.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof n!="number"?(this.store.dispatch({type:Ae.RECORD_JOIN_CHANNEL_SERVICE,record:kt(kt({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(n<0||n>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:Ae.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:n}),n)}catch{return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:Ae.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:Ae.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch{return[]}}}let Ef;const Rnt=()=>(Ef||Ef||(Ef=(window.location.protocol.split(":")[0]||"").toUpperCase(),Ef))==="HTTPS",$B=()=>window.isSecureContext!==void 0;class wnt{constructor(e,n){v(this,"time",void 0),v(this,"sequence",void 0),v(this,"name",void 0),v(this,"elapse",void 0),this.name=e,this.time=performance.now(),this.sequence=eq[n].indexOf(e)}setElapse(e){this.elapse=e}}const bnt=new Map;class Nnt{constructor(e,n){v(this,"records",[]),v(this,"_id",void 0),v(this,"_group",void 0),v(this,"_localTimeStamp",void 0),v(this,"_performanceTimeStamp",void 0),this._id=e,this._group=n,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(e){const n=new wnt(e,this._group);n.sequence===-1&&T.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(n);const r=this.records.find(i=>i.sequence===n.sequence-1);r&&n.setElapse(n.time-r.time)}getRecord(e){return this.records.find(n=>n&&n.name===e)}resetRecords(){this.records.length=0}}var t3,e3,n3,r3,i3,o3,s3,a3,c3,_n;function u3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}let Ont=(t3=Qn("AgoraRTCClient","store.clientId"),e3=cu({report:ot}),n3=cu(),r3=cu({report:ot}),i3=Dp(),o3=cu({report:ot}),s3=Dp({report:ot}),a3=cu({reportResult:!0,report:ot}),t3((Lt((_n=class extends Ge{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(t){let e;if(super(),v(this,"store",void 0),v(this,"_uid",void 0),v(this,"_channelName",void 0),v(this,"_uintUid",void 0),v(this,"_users",[]),v(this,"_codec",void 0),v(this,"_mode",void 0),v(this,"_config",void 0),v(this,"_clientId",void 0),v(this,"_appId",void 0),v(this,"_sessionId",null),v(this,"_key",void 0),v(this,"_joinInfo",void 0),v(this,"_gateway",void 0),v(this,"_statsCollector",void 0),v(this,"_configDistribute",void 0),v(this,"_leaveMutex",new Tr("client-leave")),v(this,"_publishMutex",new Tr("client-publish")),v(this,"_renewTokenMutex",new Tr("client-renewtoken")),v(this,"_subscribeMutex",new Tr("client-subscribe")),v(this,"_encryptionMode","none"),v(this,"_encryptionSecret",null),v(this,"_encryptionSalt",null),v(this,"_proxyServer",void 0),v(this,"_performanceRecorder",void 0),v(this,"_turnServer",{servers:[],mode:"auto"}),v(this,"_cloudProxyServerMode","disabled"),v(this,"_isDualStreamEnabled",!1),v(this,"_defaultStreamFallbackType",void 0),v(this,"_lowStreamParameter",void 0),v(this,"_streamFallbackTypeCacheMap",new Map),v(this,"_remoteStreamTypeCacheMap",new Map),v(this,"_axiosCancelSource",Yi.CancelToken.source()),v(this,"_audioVolumeIndicationInterval",void 0),v(this,"_networkQualityInterval",void 0),v(this,"_userOfflineTimeout",void 0),v(this,"_streamRemovedTimeout",void 0),v(this,"_injectStreamingClient",void 0),v(this,"_liveTranscodeStreamingClient",void 0),v(this,"_liveRawStreamingClient",void 0),v(this,"_channelMediaRelayClient",void 0),v(this,"_networkQualitySensitivity","normal"),v(this,"_p2pChannel",void 0),v(this,"_useLocalAccessPoint",!1),v(this,"_joinAndNotLeaveYet",!1),v(this,"_numberOfJoinCount",0),v(this,"_remoteDefaultVideoStreamType",void 0),v(this,"_handleLocalTrackEnable",(n,r,i)=>{this.publish(n,!1).then(r).catch(i)}),v(this,"_handleLocalTrackDisable",(n,r,i)=>{this.unpublish(n).then(r).catch(i)}),v(this,"_handleUserOnline",n=>{this.isStringUID&&typeof n.uid!="string"&&(T.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),wt("error",this,"StringUID is Mixed with UintUID"));const r=this._users.find(i=>i.uid===n.uid);if(r)r._trust_in_room_=!0;else{const i=new E_(n.uid,n.uint_id||n.uid);this._users.push(i),T.debug("[".concat(this._clientId,"] user online"),n.uid),di("info",this,"user-joined",{uid:n.uid}),this.emit(ie.USER_JOINED,i)}}),v(this,"_handleUserOffline",n=>{const r=this._users.find(i=>i.uid===n.uid);r&&(this._handleRemoveStream(n),OC(this._users,r),this._remoteStreamTypeCacheMap.delete(r.uid),this._streamFallbackTypeCacheMap.delete(r.uid),T.debug("[".concat(this._clientId,"] user offline"),n.uid,"reason:",n.reason),di("info",this,"user-left",{reason:n.reason,uid:n.uid}),this.emit(ie.USER_LEAVED,r,n.reason))}),v(this,"_handleAddAudioOrVideoStream",(n,r,i,u,s,d,a)=>{const l=this._users.find(p=>p.uid===r);if(!l)return T.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void ke("error",["AgoraRTCGateway",this._clientId],"add_".concat(n,"_stream"),"can not find target user!");T.debug("[".concat(this._clientId,"] stream added with uid ").concat(r,", type ").concat(n)),ke("debug",["AgoraRTCGateway",this._clientId],"add_".concat(n,"_stream"),{uid:r,mediaType:n});const A=n==="audio"?l.hasAudio:l.hasVideo;l._uintid||(l._uintid=s||r),l._trust_stream_added_state_=!0,n==="audio"?(l._audio_added_=!0,i!==void 0&&(l._audioSSRC=i),u!==void 0&&(l._cname=u),d&&(l._audioOrtc=d)):(l._video_added_=!0,i!==void 0&&(l._videoSSRC=i),u!==void 0&&(l._cname=u),a!==void 0&&(l._rtxSsrcId=a),d&&(l._videoOrtc=d)),(n==="audio"?l.hasAudio:l.hasVideo)&&!A&&(T.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published ").concat(n)),wt("info",this,"remote user ".concat(l.uid," published ").concat(n)),di("info",this,"user-published",{uid:l.uid,mediaType:n}),this.emit(ie.USER_PUBLISHED,l,n)),n==="video"?ot.onGatewayStream(this._sessionId,On.ON_ADD_VIDEO_STREAM,Me.ON_ADD_VIDEO_STREAM,{peer:s||r}):ot.onGatewayStream(this._sessionId,On.ON_ADD_AUDIO_STREAM,Me.ON_ADD_AUDIO_STREAM,{peer:s||r}),this._p2pChannel.hasPendingRemoteMedia(l,n)&&this.subscribe(l,n).catch(p=>{T.error("[".concat(this._clientId,"] resubscribe error"),p.toString()),wt("error",this,"resubscribe error: ".concat(p.toString()))})}),v(this,"_handleRemoveStream",n=>{const r=this._users.find(u=>u.uid===n.uid);if(!r)return T.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void ke("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:n.uid,info:"can not find target user!"});T.debug("[".concat(this._clientId,"] stream removed with uid ").concat(n.uid)),ke("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:n.uid});let i=()=>{};r.hasAudio&&r.hasVideo?i=()=>{T.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished audio track")),di("info",this,"user-unpublished",{uid:r.uid,mediaType:"audio"}),this.emit(ie.USER_UNPUBLISHED,r,"audio"),T.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished video track")),di("info",this,"user-unpublished",{uid:r.uid,mediaType:"video"}),this.emit(ie.USER_UNPUBLISHED,r,"video")}:r.hasVideo?i=()=>{T.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished video track")),di("info",this,"user-unpublished",{uid:r.uid,mediaType:"video"}),this.emit(ie.USER_UNPUBLISHED,r,"video")}:r.hasAudio&&(i=()=>{T.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished audio track")),di("info",this,"user-unpublished",{uid:r.uid,mediaType:"audio"}),this.emit(ie.USER_UNPUBLISHED,r,"audio")}),r._trust_stream_added_state_=!0,r._audio_added_=!1,r._video_added_=!1,this._p2pChannel.unsubscribe(r).then(u=>{if(u)return this._gateway.unsubscribe(u,r.uid)}),r._audioSSRC=void 0,r._videoSSRC=void 0,r._audioOrtc=void 0,r._videoOrtc=void 0,r._rtxSsrcId=void 0,ot.onGatewayStream(this._sessionId,On.ON_REMOVE_STREAM,Me.ON_REMOVE_STREAM,{peer:n.uint_id||n.uid}),i()}),v(this,"_handleSetStreamLocalEnable",(n,r,i)=>{const u=this._users.find(a=>a.uid===r);if(!u)return T.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void ke("error",this,"disable_local_video","can not find target user!(disable_local)");T.debug("[".concat(this._clientId,"] local ").concat(n," ").concat(i?"enabled":"disabled"," with uid ").concat(r)),ke("debug",this,"disable_local_video","local ".concat(n," ").concat(i?"enabled":"disabled"," with uid ").concat(r));const s=n==="audio"?u.hasAudio:u.hasVideo;if(n==="audio"){u._trust_audio_enabled_state_=!0;const a=u._audio_enabled_;if(u._audio_enabled_=i,u._audio_enabled_===a)return;{const l=u._audio_enabled_?"enable-local-audio":"disable-local-audio";T.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(r,", msg: ").concat(l)),Mt("debug",this,"user-info-updated",{uid:r,msg:l}),this.emit(ie.USER_INFO_UPDATED,r,l)}}else{u._trust_video_enabled_state_=!0;const a=u._video_enabled_;if(u._video_enabled_=i,u._video_enabled_===a)return;{const l=u._video_enabled_?"enable-local-video":"disable-local-video";T.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(l)),Mt("debug",this,"user-info-updated",{uid:r,msg:l}),this.emit(ie.USER_INFO_UPDATED,r,l)}}const d=n==="audio"?u.hasAudio:u.hasVideo;return s!==d?!s&&d?(T.info("[".concat(this._clientId,"] remote user ").concat(r," published ").concat(n)),di("info",this,"user-published",{uid:r,mediaType:n}),void this.emit(ie.USER_PUBLISHED,u,n)):(n==="video"&&u._videoTrack&&u._videoTrack._destroy(),n==="audio"&&u._audioTrack,this._p2pChannel.muteRemote(u,n),T.info("[".concat(this._clientId,"] remote user ").concat(r," unpublished ").concat(n)),di("info",this,"user-unpublished",{uid:r,mediaType:n}),void this.emit(ie.USER_UNPUBLISHED,u,n)):void 0}),v(this,"_handleMuteStream",(n,r,i)=>{T.debug("[".concat(this._clientId,"] receive mute message"),n,r,i),ke("debug",this,"mute_".concat(r),i);const u=this._users.find(a=>a.uid===n);if(!u)return T.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(n)),void ke("warning",this,"mute_".concat(r),"can not find remote user, ignore mute event, uid: ".concat(n));const s=r==="audio"?u.hasAudio:u.hasVideo;if(r==="audio"){u._trust_audio_mute_state_=!0;const a=u._audio_muted_;if(u._audio_muted_=i,u._audio_muted_===a)return;{const l=u._audio_muted_?"mute-audio":"unmute-audio";T.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(l)),Mt("debug",this,"user-info-updated",{uid:n,msg:l}),this.emit(ie.USER_INFO_UPDATED,n,l)}}else{u._trust_video_mute_state_=!0;const a=u._video_muted_;if(u._video_muted_=i,u._video_muted_===a)return;{const l=u._video_muted_?"mute-video":"unmute-video";T.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(l)),Mt("debug",this,"user-info-updated",{uid:n,msg:l}),this.emit(ie.USER_INFO_UPDATED,n,l)}}const d=r==="audio"?u.hasAudio:u.hasVideo;return s!==d?!s&&d?(T.info("[".concat(this._clientId,"] remote user ").concat(n," published ").concat(r)),di("info",this,"user-published",{uid:u.uid,mediaType:r}),void this.emit(ie.USER_PUBLISHED,u,r)):(r==="video"&&u._videoTrack&&u._videoTrack._destroy(),r==="audio"&&u._audioTrack,this._p2pChannel.muteRemote(u,r),T.info("[".concat(this._clientId,"] remote user ").concat(n," unpublished ").concat(r)),di("info",this,"user-unpublished",{uid:n,mediaType:r}),void this.emit(ie.USER_UNPUBLISHED,u,r)):void 0}),v(this,"_handleP2PLost",async n=>{if(T.debug("[".concat(this._clientId,"] receive p2p lost"),n),ke("debug",this,"p2p_lost",n),parseInt(n.p2pid,10)!==this.store.p2pId)return T.warning("P2PLost stream not found",n),void ke("warning",this,"p2p_lost","P2PLost stream not found, ".concat(n));await this._p2pChannel.requestReconnect()}),v(this,"_handleTokenWillExpire",()=>{T.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),ke("debug",this,"token_privilege_will_expire"),this.emit(ie.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),v(this,"_handleBeforeUnload",n=>{n.type==="beforeunload"&&n.returnValue!==void 0&&n.returnValue!==""||(this.leave(),T.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),Qo("info",["window",this.store.clientId],Lr()?"beforeunload":"pagehide"))}),v(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.emit(ie.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const n={downlinkNetworkQuality:0,uplinkNetworkQuality:0};n.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),n.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(ie.NETWORK_QUALITY,n)}),this._codec=t.codec,this._mode=t.mode,this._clientId=Ye(5,"client-"),this.store=new Tnt(t.codec,t.audioCodec,t.mode,this._clientId),this.store.clientCreated(),t.proxyServer&&this.setProxyServer(t.proxyServer,!0),t.turnServer&&this.setTurnServer(t.turnServer,!0),T.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(lr," build: ").concat(Ap,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),Mt("info",this,"constructor",{version:lr,build:Ap,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(n,r){const i=new Nnt(n,r);return bnt.set(n,i),i}(this._clientId,"join"),t.clientRoleOptions)try{zN(t.clientRoleOptions),e=Object.assign({},t.clientRoleOptions)}catch(n){T.warning("[".concat(this._clientId,"] ").concat(n.toString())),wt("warning",this,n.toString())}this._statsCollector=new lu(this.store),this._statsCollector.onStatsException=(n,r,i)=>{T.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(n,", msg: ").concat(r,", uid: ").concat(i)),di("debug",this,ie.EXCEPTION,{code:n,message:r,uid:i}),this.emit(ie.EXCEPTION,{code:n,msg:r,uid:i})},this._statsCollector.onUploadPublishDuration=(n,r,i,u)=>{const s=this._users.find(d=>d.uid===n);s&&ot.peerPublishStatus(this._sessionId,{subscribeElapse:u,audioPublishDuration:r,videoPublishDuration:i,peer:s._uintid})},this._gateway=new wtt(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:t.websocketRetryConfig||ze,httpRetryConfig:t.httpRetryConfig||ze,forceWaitGatewayResponse:t.forceWaitGatewayResponse===void 0||t.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:t.role,clientRoleOptions:e}),this._config=t,this._configDistribute=new Mtt,this._p2pChannel=new Snt(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}async join(t,e,n,r,i){const u=++this._numberOfJoinCount;this._performanceRecorder.checkPoint("startJoin"),this.store.joinStart(),r&&(this.store.uid=r);const s=Rnt(),d=$B()?window.isSecureContext:"Browser Not Support";if(!$B()&&!s||!window.isSecureContext){const E="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";T.warning(E),at("warning",this,E)}const a=kk();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),T.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)),at("debug",this,"join",void 0,"[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const l=ot.reportApiInvoke(a,{name:Ut.JOIN,options:[t,e,n,r],states:{isHttps:s,isSecureContext:d},tag:Pt.TRACER});try{if(!n&&n!==null)throw new B(P.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&Jn(n,"token",1,2047),Jn(t,"appid",1,2047),SI(e),r&&yI(r),i&&Jn(i,"optionalInfo",1,2047)}catch(E){throw l.onError(E),E}if(T.info("[".concat(this._clientId,"] start join channel ").concat(e,", join number: ").concat(u)),Mt("info",this,"join",{channel:e}),this._leaveMutex.isLocked&&(T.debug("[".concat(this._clientId,"] join: waiting leave operation")),wt("debug",this,"join: waiting leave operation"),(await this._leaveMutex.lock())(),T.debug("[".concat(this._clientId,"] join: continue")),wt("debug",this,"join: continue")),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const E=new B(P.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(E),E}this._sessionId||(this._sessionId=a,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const A=yl({clientId:this._clientId,appId:t,sid:this._sessionId,cname:e,uid:typeof r!="string"?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||t,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(typeof r=="string"&&(A.stringUid=r,this._uintUid?(A.uid=this._uintUid,this._uintUid=void 0):A.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(A.aesmode=this._encryptionMode,A.aespassword=await(async E=>{const C=DC(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),_=await window.crypto.subtle.importKey("spki",C,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),y=Tk(E),R=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},_,y);return xp(new Uint8Array(R))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new B(P.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(A.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:e,appId:t});const p=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&p===this._sessionId&&ot.joinChannelTimeout(this._sessionId,5)},5e3);try{let E;const C=A.cloudProxyServer;if(C==="443only")A.proxyServer=st("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(C)){const R=st("PROXY_SERVER_TYPE3");Array.isArray(R)?A.proxyServer=R[0]:A.proxyServer=R}if(ot.setProxyServer(A.proxyServer),T.setProxyServer(A.proxyServer),ka(A.proxyServer),this._performanceRecorder.checkPoint("startRequestAp"),this.store.requestAPStart(),A.stringUid&&!A.uid&&C==="normal"){await p_(A,this._axiosCancelSource.token,this._config.httpRetryConfig||ze,!1,this.store);const R=await f_(A.stringUid,A,this._axiosCancelSource.token,this._config.httpRetryConfig||ze,this.store);T.debug("getUserAccount Success ".concat(A.stringUid," => ").concat(R)),wt("debug",this,"getUserAccount Success ".concat(A.stringUid," => ").concat(R)),A.uid=R,E=await _u(A,this._axiosCancelSource.token,this._config.httpRetryConfig||ze,this.store)}else if(A.stringUid&&!A.uid){const R=await f_(A.stringUid,A,this._axiosCancelSource.token,this._config.httpRetryConfig||ze,this.store);T.debug("getUserAccount Success ".concat(A.stringUid," => ").concat(R)),wt("debug",this,"getUserAccount Success ".concat(A.stringUid," => ").concat(R)),A.uid=R,E=await p_(A,this._axiosCancelSource.token,this._config.httpRetryConfig||ze,!0,this.store)}else E=await p_(A,this._axiosCancelSource.token,this._config.httpRetryConfig||ze,!0,this.store);if(!this._joinAndNotLeaveYet)throw new B(P.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),this._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(A,this._axiosCancelSource.token),this._configDistribute.on(zd.UPDATE_BITRATE_LIMIT,R=>{this._p2pChannel.updateBitrateLimit(R)})},0),this._key=n||t;const _=E.gatewayInfo;this._joinInfo=yl(yl({},A),{},{cid:_.cid,uid:A.uid?A.uid:_.uid,vid:_.vid,apResponse:_.res,uni_lbs_ip:_.uni_lbs_ip,gatewayAddrs:_.gatewayAddrs});const y=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new B(P.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));return l.onSuccess(y),this._appId=t,this._channelName=A.cname,this._uid=y,this.store.uid=y,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Lr()?"beforeunload":"pagehide",this._handleBeforeUnload)},0),T.info("[".concat(this._clientId,"] Joining channel success: ").concat(e)),Mt("info",this,"join",e,"success"),setTimeout(()=>{st("USE_NEW_LOG")?lp():T.startUpload()},5e3),this._performanceRecorder.checkPoint("finishJoin"),this.store.joinEnd(),f=this,Zc.includes(f)||Zc.push(f),y}catch(E){const C=Array.isArray(E)?E[0]:E;throw T.error("[".concat(this._clientId,"] join number: ").concat(u,", Joining channel failed, rollback"),C),Mt("error",this,"join",e,C.toString()),C.code!==P.OPERATION_ABORTED&&this._numberOfJoinCount===u&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(C),C}var f}_joinGateway(){if(!this._joinInfo||!this._key)throw new B(P.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||!st("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(t=>t).catch(t=>{if(t.code===P.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,mn.FALLBACK);throw t}).then(t=>{if(t)return t;if(T.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new B(P.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const e=st("PROXY_SERVER_TYPE3");if(Array.isArray(e))if(this._joinInfo.apUrl){const n=new LP(this._joinInfo.apUrl).host.split("."),r=n.slice(n.length-2).join(".");e.forEach(i=>{this._joinInfo&&i.includes(r)&&(this._joinInfo.proxyServer=i)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=e[0])}else this._joinInfo.proxyServer=e[0];else this._joinInfo.proxyServer=e;return T.setProxyServer(this._joinInfo.proxyServer),ot.setProxyServer(this._joinInfo.proxyServer),ka(this._joinInfo.proxyServer),ot.reportApiInvoke(this._sessionId,{name:Ut.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:Pt.TRACER}).onSuccess(),this.emit(ie.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(t=>t)}async leave(){const t=ot.reportApiInvoke(this._sessionId,{name:Ut.LEAVE,options:[],tag:Pt.TRACER});T.info("[".concat(this._clientId,"] Leaving channel")),Mt("info",this,"leave"),window.removeEventListener(Lr()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(n){const r=Zc.indexOf(n);r!==-1&&Zc.splice(r,1)}(this);const e=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return T.info("[".concat(this._clientId,"] Leaving channel repeated, success")),e(),t.onSuccess();await this._gateway.leave(this.connectionState!=="CONNECTED"),T.info("[".concat(this._clientId,"] Leaving channel success")),Mt("info",this,"leave",void 0,"success"),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e(),t.onSuccess()}async publish(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];Array.isArray(t)||(t=[t]);const n=ot.reportApiInvoke(this._sessionId,{name:Ut.PUBLISH,options:t.map(i=>i?Object(i).toString():"null"),tag:Pt.TRACER});if(t.length===0){const i=new B(P.INVALID_PARAMS,"track list is empty");return n.onError(i),i.throw()}if(this._gateway.role==="audience"){const i=new B(P.INVALID_OPERATION,"audience can not publish stream");return n.onError(i),i.throw()}for(const i of t){if(!(i instanceof vC)){const u=new B(P.INVALID_PARAMS,"parameter is not local track");return n.onError(u),u.throw()}if(!i._enabled&&e){const u=new B(P.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()));return n.onError(u),u.throw()}}T.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(t.map(i=>"".concat(i.getTrackId()," ")))),Mt("info",this,"publish",t.map(i=>"".concat(i.getTrackId()))),await this._configDistribute.awaitConfigDistributeComplete(),e&&t.forEach(i=>{const u=this._configDistribute.getBitrateLimit();i instanceof un&&u&&i.setBitrateLimit(u.uplink)});const r=await this._publishMutex.lock();try{await this._publishHighStream(t),n.onSuccess(t.map(i=>i.trackMediaType+":"+i.getTrackLabel()).toString()),T.info("[".concat(this._clientId,"] Publish success, id ").concat(t.map(i=>"".concat(i.getTrackId()," ")))),Mt("info",this,"publish",t.map(i=>"".concat(i.getTrackId())),"success")}catch(i){throw n.onError(i),T.error("[".concat(this._clientId,"] publish error"),i.toString()),Mt("error",this,"publish",void 0,i.toString()),i}finally{r()}}async unpublish(t){if(!this._joinInfo||this._uid===void 0)throw new B(P.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");t?Array.isArray(t)||(t=[t]):t=this._p2pChannel.getAllTracks(!0);const e=ot.reportApiInvoke(this._sessionId,{name:Ut.UNPUBLISH,options:t.map(r=>r.getTrackId()),tag:Pt.TRACER});T.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map(r=>"".concat(r.getTrackId()," "))," ")),Mt("info",this,"unpublish",t.map(r=>"".concat(r.getTrackId())));const n=await this._publishMutex.lock();try{const r=await this._p2pChannel.unpublish(t);r&&await this._gateway.unpublish(r,this._uid),T.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map(i=>"".concat(i.getTrackId())))),Mt("info",this,"unpublish",t.map(i=>"".concat(i.getTrackId())),"success"),e.onSuccess()}catch(r){throw e.onError(r),T.error("[".concat(this._clientId,"] unpublish error"),r.toString()),Mt("error",this,"unpublish",void 0,r.toString()),r}finally{n&&n()}}async subscribe(t,e){Nn(e,"mediaType",["audio","video"]);const n=ot.reportApiInvoke(this._sessionId,{name:Ut.SUBSCRIBE,options:[t.uid,e],tag:Pt.TRACER});if(!this._joinInfo){const a=new B(P.INVALID_OPERATION,"Can't subscribe stream, not joined");throw n.onError(a),a}if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING"){const a=new B(P.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));throw n.onError(a),a}if(!this._users.find(a=>a===t)){const a=new B(P.INVALID_REMOTE_USER,"user is not in the channel");throw T.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),Mt("error",this,"subscribe",t.uid,"this user is not in the channel"),n.onError(a),a}if(!t.hasAudio&&!t.hasVideo){const a=new B(P.INVALID_REMOTE_USER,"user is not published");throw T.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),Mt("error",this,"subscribe",t.uid,"this user is not published"),n.onError(a),a}if(e==="audio"&&(!t.hasAudio||t._audioSSRC===void 0)||e==="video"&&(!t.hasVideo||t._videoSSRC===void 0)){const a=new B(P.REMOTE_USER_IS_NOT_PUBLISHED);throw T.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(e,", remote track is not published")),Mt("error",this,"subscribe",t.uid,"mediaType ".concat(e,", remote track is not published")),n.onError(a),a}const r=e==="audio"?t._audioSSRC:t._videoSSRC,i=e==="audio"?t._audioOrtc:t._videoOrtc,u=e==="video"?t._rtxSsrcId:void 0,s={stream_type:e==="audio"?ee.AUDIO:ee.VIDEO,ssrcId:r},d=await this._subscribeMutex.lock();T.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(e)),Mt("info",this,"subscribe",{uid:t.uid,mediaType:e});try{if(await this._p2pChannel.hasRemoteMediaWithLock(t,e))await this._p2pChannel.unmuteRemote(t,e);else try{hi.markSubscribeStart(this.store.clientId,r),this.store.subscribe(t.uid,e,performance.now()),await this._p2pChannel.subscribe(t,e,r,u,i);try{await this._gateway.subscribe(t.uid,s,!0)}catch(l){throw await this._p2pChannel.unsubscribe(t,e),l}this.store.subscribe(t.uid,e,void 0,performance.now()),this._p2pChannel.reportSubscribeEvent(!0,null,t,e)}catch(l){throw this._p2pChannel.reportSubscribeEvent(!1,l==null?void 0:l.code,t,e),l}T.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(e)),Mt("info",this,"subscribe",{uid:t.uid,mediaType:e},"success"),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch(l=>{T.warning("[".concat(this._clientId,"] auto set fallback failed"),l),wt("warning",this,"auto set fallback failed, ".concat(l.toString()))});const a=e==="audio"?t._audioTrack:t._videoTrack;if(!a){const l=new B(P.UNEXPECTED_ERROR,"can not find remote track in user object");return n.onError(l),l.throw()}return n.onSuccess(a.getTrackId()),a}catch(a){throw n.onError(a),T.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),a),Mt("error",this,"subscribe",{uid:t.uid,mediaType:e},a.toString()),a}finally{d()}}async massSubscribe(t){Jd(t,"subscribeList");const e=ot.reportApiInvoke(this._sessionId,{name:Ut.MASS_SUBSCRIBE,options:t.map(a=>{let{user:l,mediaType:A}=a;return[l==null?void 0:l.uid,A]}),tag:Pt.TRACER});if(!this._joinInfo){const a=new B(P.INVALID_OPERATION,"Can't subscribe stream, not joined");throw e.onError(a),a}if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING"){const a=new B(P.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));throw e.onError(a),a}const n=performance.now(),r=new Map,i=await this._subscribeMutex.lock();T.info("[".concat(this._clientId,"]start massSubscribe user ").concat(t.map(a=>{let{user:l,mediaType:A}=a;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(A)}).join("; "))),Mt("info",this,"massSubscribe",t);const u=(t=[...t]).map(a=>{let{user:l,mediaType:A}=a;return{user:l,mediaType:A}}),s=await this._p2pChannel.globalLock();try{var d;for(let l=t.length-1;l>=0;l--){const A=t[l],{user:p,mediaType:f}=A;if(Nn(f,"mediaType",["audio","video"]),!p){const _=new B(P.INVALID_PARAMS,"user property does not exist in subscribeList item");throw T.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e.onError(_),_}if(!this._users.find(_=>_===p)){const _=new B(P.INVALID_REMOTE_USER,"user is not in the channel");T.error("[".concat(this._clientId,"] can not massSubscribe ").concat(p.uid,", this user is not in the channel")),Mt("error",this,"massSubscribe",p.uid,"this user is not in the channel"),u[l].error=_,t.splice(l,1);continue}if(f==="audio"&&(!p.hasAudio||p._audioSSRC===void 0)||f==="video"&&(!p.hasVideo||p._videoSSRC===void 0)){const _=new B(P.REMOTE_USER_IS_NOT_PUBLISHED);T.error("[".concat(this._clientId,"] can not subscribe ").concat(p.uid," with mediaType ").concat(f,", remote user is not published")),Mt("error",this,"subscribe",p.uid,"mediaType ".concat(f,", remote user is not published")),u[l].error=_,t.splice(l,1);continue}const E=Fe.Video|Fe.LwoVideo,C=r.get(p);if(C){if(f==="video"?C&E:C&Fe.Audio){t.splice(l,1),T.warning("repeat massSubscribe user:".concat(p.uid,", mediaType:").concat(f," twice"));continue}r.set(p,C|(f==="video"?E:Fe.Audio))}else r.set(p,f==="video"?E:Fe.Audio)}for(let l=t.length-1;l>=0;l--){const A=t[l],{user:p,mediaType:f}=A,E=Fe.Video|Fe.LwoVideo;if(this._p2pChannel.hasRemoteMedia(p,f)){await this._p2pChannel.unmuteRemoteNoLock(p,f);const C=r.get(p);r.set(p,f==="video"?C^E:C^Fe.Audio),t.splice(l,1)}}this.store.massSubscribe(t.map(l=>({userId:l.user.uid,type:l.mediaType})),n);const a=_a(d=Array.from(r.entries())).call(d,(l,A)=>{let[p,f]=A;if(f===0)return l;const E={stream_id:p.uid,stream_type:f};return f&Fe.Audio&&(E.audio_ssrc=p._audioSSRC),f&Fe.Video&&(E.video_ssrc=p._videoSSRC),l.push(E),l},[]);try{t.length>0&&await this._p2pChannel.massSubscribeNoLock(t.map(A=>{let{user:p,mediaType:f}=A;return{user:p,mediaType:f,ssrcId:f===ee.VIDEO?p._videoSSRC:p._audioSSRC,rtxSsrcId:p._rtxSsrcId}}));const l=new Map;if(a.length>0){const A=await this._gateway.subscribeAll(a,!0);((A==null?void 0:A.users)||[]).forEach(p=>{let{stream_id:f,video_error_code:E,audio_error_code:C,error_code:_}=p;(E||C||_)&&l.set(f,{video_error_code:E,audio_error_code:C,error_code:_})})}if(Array.from(l.entries()).length>0){const A=Array.from(l.entries()).map(p=>{let f,[E,C]=p;return C.error_code||C.video_error_code&&C.audio_error_code?f=void 0:C.video_error_code?f=ee.VIDEO:C.audio_error_code&&(f=ee.AUDIO),{user:this.remoteUsers.find(_=>_.uid===E),mediaType:f}});await this._p2pChannel.massUnsubscribeNoLock(A)}for(const A of u){const p=l.get(A.user.uid);if(p){const f=p.error_code||A.mediaType==="audio"&&p.audio_error_code||A.mediaType==="video"&&p.video_error_code;if(f){const E=a_(f);T.error("user:".concat(A.user.uid," mediaType:").concat(A.mediaType," has massSubscribe error ").concat(E.desc)),A.error=new B(P.SUBSCRIBE_FAILED,"code ".concat(f,": ").concat(E.desc))}}A.error||(A.mediaType==="video"?A.track=A.user.videoTrack:A.track=A.user.audioTrack)}return this.store.massSubscribe(u.filter(A=>!A.error).map(A=>({userId:A.user.uid,type:A.mediaType})),void 0,performance.now()),u.forEach(A=>{var p;ot.subscribe(this.store.sessionId,{succ:!!A.error,ec:((p=A.error)===null||p===void 0?void 0:p.code)||null,video:A.mediaType===ee.VIDEO,audio:A.mediaType===ee.AUDIO,peerid:A.user.uid,subscribeRequestid:A.mediaType===ee.VIDEO?A.user._videoSSRC:A.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-n)},!0)}),e.onSuccess(),T.info("[".concat(this._clientId,"] massSubscribe success ").concat(t.map(A=>{let{user:p,mediaType:f}=A;return"user: ".concat(p==null?void 0:p.uid,", mediaType: ").concat(f)}).join("; "))),Mt("info",this,"massSubscribe",t,"success"),u}catch(l){throw await this._p2pChannel.massUnsubscribeNoLock(t),e.onError(l),l}}finally{s(),i()}}async unsubscribe(t,e){if(e&&Nn(e,"mediaType",["audio","video"]),!this._joinInfo)throw new B(P.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const n=ot.reportApiInvoke(this._sessionId,{name:Ut.UNSUBSCRIBE,options:[t.uid,e],tag:Pt.TRACER});if(!this._users.find(r=>r===t)){const r=new B(P.INVALID_REMOTE_USER,"user is not in the channel");throw T.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not in the channel")),Mt("error",this,"unsubscribe",{uid:t.uid,mediaType:e},"user is not in the channel"),n.onError(r),r}T.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: ").concat(e)),Mt("info",this,"unsubscribe",{uid:t.uid,mediaType:e});try{const r=await this._p2pChannel.unsubscribe(t,e);r&&await this._gateway.unsubscribe(r,t.uid),T.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(t.uid,", mediaType: ").concat(e)),Mt("info",this,"unsubscribe",{uid:t.uid,mediaType:e},"success"),n.onSuccess()}catch(r){if(r.code===P.DISCONNECT_P2P)return T.warning("disconnecting p2p, abort unsubscribe request."),void n.onSuccess();throw T.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),r.toString()),Mt("error",this,"unsubscribe",{uid:t.uid,mediaType:e},r.toString()),n.onError(r),r}}async massUnsubscribe(t){Jd(t,"unsubscribeList");const e=ot.reportApiInvoke(this._sessionId,{name:Ut.UNSUBSCRIBE,options:t.map(r=>{let{user:i,mediaType:u}=r;return{uid:i==null?void 0:i.uid,mediaType:u}}),tag:Pt.TRACER});if(!this._joinInfo){const r=new B(P.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw e.onError(r),r}T.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(t.map(r=>{let{user:i,mediaType:u}=r;return"user: ".concat(i==null?void 0:i.uid,", mediaType: ").concat(u,";")}).join())),Mt("info",this,"massUnsubscribe",t),t=[...t];const n=new Map;for(let r=t.length-1;r>=0;r--){const{user:i,mediaType:u}=t[r];if(!i){const d=new B(P.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw T.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e.onError(d),d}if(Nn(u,"mediaType",["video","audio",void 0]),!this._users.find(d=>d===i)){T.warning("[".concat(this._clientId,"] can not subscribe ").concat(i.uid,", user is not in the channel")),Mt("error",this,"unsubscribe",{uid:i.uid,mediaType:u},"user is not in the channel"),t.splice(r,1);continue}const s=Fe.Video|Fe.LwoVideo;if(n.has(i)){const d=n.get(i);let a;switch(u){case"video":a=d&s;break;case"audio":a=d&Fe.Audio;break;default:a=d&(Fe.Audio|s)}if(a){T.warning("repeat massUnsubscribe user:".concat(i.uid,",mediaType:").concat(u," twice.")),t.splice(r,1);continue}u?u==="audio"?n.set(i,d|Fe.Audio):u==="video"&&n.set(i,d|s):n.set(i,d|Fe.Audio|s)}else u?u==="audio"?n.set(i,Fe.Audio):u==="video"&&n.set(i,s):n.set(i,Fe.Audio|s)}try{const r=await this._p2pChannel.massUnsubscribe(t);r&&await this._gateway.massUnsubscribe(r),T.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(t.map(i=>{let{user:u,mediaType:s}=i;return"user: ".concat(u==null?void 0:u.uid,", mediaType: ").concat(s,";")}).join())),Mt("info",this,"massUnsubscribe",t,"success"),e.onSuccess()}catch(r){if(r.code===P.DISCONNECT_P2P)return T.warning("disconnecting p2p, abort unsubscribe request."),void e.onSuccess();throw T.error("[".concat(this._clientId,"] massUnsubscribe error"),r.toString()),Mt("error",this,"massUnsubscribe",t,r.toString()),e.onError(r),r}}setLowStreamParameter(t){(function(r){if(!r)throw new B(P.INVALID_PARAMS);Oe(r.width)||we(r.width,"streamParameter.width"),Oe(r.height)||we(r.height,"streamParameter.height"),Oe(r.framerate)||we(r.framerate,"streamParameter.framerate"),Oe(r.bitrate)||we(r.bitrate,"streamParameter.bitrate")})(t);const e=ot.reportApiInvoke(this._sessionId,{name:Ut.SET_LOW_STREAM_PARAMETER,options:[t],tag:Pt.TRACER});(!t.width&&t.height||t.width&&!t.height)&&(T.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),wt("warning",this,"The width and height parameters take effect only when both are set")),T.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(t)),Mt("info",this,"setLowStreamParameter",t);const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&t.bitrate&&n.bitrate<t.bitrate&&(t.bitrate=n.bitrate),this._lowStreamParameter=t,e.onSuccess()}async enableDualStream(){const t=ot.reportApiInvoke(this._sessionId,{name:Ut.ENABLE_DUAL_STREAM,options:[],tag:Pt.TRACER});if(!rr().supportDualStream){ot.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const e=new B(P.NOT_SUPPORTED,"Your browser is not support dual stream");throw t.onError(e),e}if(this._isDualStreamEnabled){const e=new B(P.INVALID_OPERATION,"Dual stream is already enabled");throw t.onError(e),e}if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw ot.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),t.onError(e),e}this._isDualStreamEnabled=!0,ot.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),T.info("[".concat(this._clientId,"] enable dual stream")),Mt("info",this,"enableDualStream"),t.onSuccess()}async disableDualStream(){if(!this._isDualStreamEnabled)return;if(!this._joinInfo)throw new B(P.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const t=ot.reportApiInvoke(this._sessionId,{name:Ut.DISABLE_DUAL_STREAM,options:[],tag:Pt.TRACER});if(this._p2pChannel.getLocalMedia(_t.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw ot.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),t.onError(e),e}this._isDualStreamEnabled=!1,ot.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),T.info("[".concat(this._clientId,"] disable dual stream")),Mt("info",this,"disableDualStream"),t.onSuccess()}async setClientRole(t,e){(function(r){Nn(r,"role",["audience","host"])})(t),e&&zN(e);const n=ot.reportApiInvoke(this._sessionId,{name:Ut.SET_CLIENT_ROLE,options:[t,e],tag:Pt.TRACER});if(this._mode==="rtc"){T.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),Mt("warning",this,"setClientRole",t,"rtc mode can not use setClientRole");const r=new B(P.INVALID_OPERATION,"rtc mode can not use setClientRole");return n.onError(r),r.throw()}if(e&&e.level&&t==="host"){const r=new B(P.INVALID_OPERATION,"host mode can not set audience latency level");return n.onError(r),r.throw()}try{if(t==="audience"&&this._p2pChannel.hasLocalMedia()){const r=new B(P.INVALID_OPERATION,"can not set client role to audience when publishing stream");return n.onError(r),r.throw()}await this._gateway.setClientRole(t,e),T.info("[".concat(this._clientId,"] set client role to ").concat(t,", level: ").concat(e&&e.level)),Mt("info",this,"setClientRole",{role:t,level:e&&e.level}),n.onSuccess()}catch(r){throw n.onError(r),r}}setProxyServer(t,e){if(Jn(t,"proxyServer"),!e){if(this.connectionState!=="DISCONNECTED")throw new B(P.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new B(P.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=t,ot.setProxyServer(this._proxyServer),T.setProxyServer(this._proxyServer),ka(this._proxyServer),T.info("[".concat(this._clientId,"] Set proxy server ").concat(e?"by initialize call":""," success.")),Mt("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(t,e){if(Array.isArray(t)||(t=[t]),!e){if(this.connectionState!=="DISCONNECTED")throw new B(P.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new B(P.INVALID_OPERATION,"You have already set the proxy")}if(wI(t))return this._turnServer={servers:t,mode:"original-manual"},T.info("[".concat(this._clientId,"] Set original turnserver ").concat(e?"by initialize call":""," success: ").concat(t.map(n=>n.urls).join(","),".")),void Mt("info",this,"setOriginalTurnServer",[...arguments],"success");t.forEach(n=>qN(n)),this._turnServer={servers:t,mode:"manual"},T.info("[".concat(this._clientId,"] Set turnserver ").concat(e?"by initialize call":""," success.")),Mt("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(t){const e=ot.reportApiInvoke(this._sessionId,{name:Ut.START_PROXY_SERVER,options:[],tag:Pt.TRACER});if(this.connectionState!=="DISCONNECTED"){const i=new B(P.INVALID_OPERATION,"Start proxy server before join channel");throw e.onError(i),i}if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint){const i=new B(P.INVALID_OPERATION,"You have already set the proxy");throw e.onError(i),i}const n=[1,2,3,4,5];let r;switch(t===void 0&&(t=1),t){case 1:r="normal";break;case 2:r="443only";break;case 3:r="proxy3";break;case 4:r="proxy4";break;case 5:r="proxy5";break;default:{const i=new B(P.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")));throw e.onError(i),i}}this._cloudProxyServerMode=r,this.store.cloudProxyServerMode=r,T.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Mt("info",this,"startProxyServer",this._cloudProxyServerMode),e.onSuccess()}stopProxyServer(){const t=ot.reportApiInvoke(this._sessionId,{name:Ut.STOP_PROXY_SERVER,options:[],tag:Pt.TRACER});if(this.connectionState!=="DISCONNECTED")throw new B(P.INVALID_OPERATION,"Stop proxy server after leave channel");ot.setProxyServer(),T.setProxyServer(),ka(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",T.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Mt("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},t.onSuccess()}setLocalAccessPoints(t,e){if(Jd(t,"serverList"),Jn(e,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new B(P.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;t=t.map(r=>n.test(r)?"".concat(r.replace(/\./g,"-"),".").concat(e):r),this._useLocalAccessPoint=!0,Wn("WEBCS_DOMAIN",t),Wn("WEBCS_DOMAIN_BACKUP_LIST",t),Wn("GATEWAY_DOMAINS",[e]),Wn("EVENT_REPORT_DOMAIN",t[0]),Wn("EVENT_REPORT_BACKUP_DOMAIN",t[1]||t[0]),Wn("LOG_UPLOAD_SERVER","".concat(t[0],":6444")),T.info("set local access point success"),Mt("info",this,"setLocalAccessPoints")}async setRemoteDefaultVideoStreamType(t){if(Nn(t,"streamType",[0,1]),this._remoteDefaultVideoStreamType=t,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(t),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw T.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else T.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(t))}async setRemoteVideoStreamType(t,e){Nn(e,"streamType",[0,1]);const n=ot.reportApiInvoke(this._sessionId,{name:Ut.SET_REMOTE_VIDEO_STREAM_TYPE,options:[t,e],tag:Pt.TRACER});try{await this._gateway.setRemoteVideoStreamType(t,e),setTimeout(()=>{const r=this._users.find(i=>i.uid===t);r&&r.videoTrack&&r.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(r){throw n.onError(r),T.error("[".concat(this._clientId,"] set remote video stream type error"),r.toString()),Mt("error",this,"setRemoteVideoStreamType",void 0,r.toString()),r}T.info("[".concat(this._clientId,"] set remote ").concat(t," video stream type to ").concat(e)),Mt("info",this,"setRemoteVideoStreamType",{uid:t,streamType:e}),this._remoteStreamTypeCacheMap.set(t,e),n.onSuccess()}async setStreamFallbackOption(t,e){Nn(e,"fallbackType",[0,1,2]);const n=ot.reportApiInvoke(this._sessionId,{name:Ut.SET_STREAM_FALLBACK_OPTION,options:["too long to show",e],tag:Pt.TRACER});try{await this._gateway.setStreamFallbackOption(t,e)}catch(r){throw n.onError(r),T.error("[".concat(this._clientId,"] set stream fallback option"),r.toString()),Mt("error",this,"setStreamFallbackOption",void 0,r.toString()),r}T.info("[".concat(this._clientId,"] set remote ").concat(t," stream fallback type to ").concat(e)),Mt("info",this,"setStreamFallbackOption",{uid:t,fallbackType:e}),this._streamFallbackTypeCacheMap.set(t,e),n.onSuccess()}setEncryptionConfig(t,e,n){if(function(r){Nn(r,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(t),Jn(e,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(t)){if(!n||!(n instanceof Uint8Array&&n.length===32))throw new B(P.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new B(P.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(e)||(T.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),wt("warning",this,`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `)),this._encryptionMode=t,this._encryptionSecret=e,n&&(this._encryptionSalt=xp(n))}async renewToken(t){Jn(t,"token",1,2047);const e=ot.reportApiInvoke(this._sessionId,{name:Ut.RENEW_TOKEN,options:[t],tag:Pt.TRACER});if(!this._key||!this._joinInfo){const i=new B(P.INVALID_OPERATION,"renewToken should not be called before user join");return e.onError(i),i.throw()}const n=this._key;this._key=t,this._joinInfo&&(this._joinInfo.token=t);const r=await this._renewTokenMutex.lock();try{if(st("USE_NEW_TOKEN")){T.debug("start renew token with ticket from unilbs"),Mt("debug",this,"renewToken","unilbs");const i=await Btt(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ze);T.debug("[".concat(this._clientId,"] get ticket from unilbs success")),Mt("debug",this,"renewToken","unilbs","success"),await this._gateway.renewToken({token:t,ticket:i})}else T.debug("start renew token without ticket"),Mt("debug",this,"renewToken"),await this._gateway.renewToken({token:t});T.debug("[".concat(this._clientId,"] renewToken success")),Mt("debug",this,"renewToken",void 0,"success"),e.onSuccess()}catch(i){throw this._key=n,this._joinInfo.token=n,e.onError(i),T.error("[".concat(this._clientId,"] renewToken failed"),i.toString()),Mt("error",this,"renewToken",void 0,i.toString()),i}finally{r()}}enableAudioVolumeIndicator(){const t=ot.reportApiInvoke(this._sessionId,{name:Ut.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:Pt.TRACER});if(this._audioVolumeIndicationInterval)return T.warning("you have already enabled audio volume indicator!"),Mt("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),t.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const e=this._p2pChannel.getAudioLevels();this.emit(ie.VOLUME_INDICATOR,e)},st("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),t.onSuccess()}getRTCStats(){const t=this._statsCollector.getRTCStats(),e=this._gateway.getInChannelInfo();return t.Duration=Math.round(e.duration/1e3),t}startLiveStreaming(t,e){const n=ot.reportApiInvoke(this._sessionId,{name:Ut.START_LIVE_STREAMING,options:[t,e],tag:Pt.TRACER});if(!e){if(this._codec!=="h264"){const i=new B(P.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return n.onError(i),Nt.reject(i)}if(!this._p2pChannel.hasLocalMedia()){const i=new B(P.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return n.onError(i),Nt.reject(i)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(t)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(t)){const i=new B(P.LIVE_STREAMING_TASK_CONFLICT);return n.onError(i),Nt.reject(i)}const r=e?Ke.TRANSCODE:Ke.RAW;return this._createLiveStreamingClient(r).startLiveStreamingTask(t,r).then(()=>n.onSuccess()).catch(i=>{throw n.onError(i),i})}setLiveTranscoding(t){const e=ot.reportApiInvoke(this._sessionId,{name:Ut.SET_LIVE_TRANSCODING,options:[t],tag:Pt.TRACER});return this._createLiveStreamingClient(Ke.TRANSCODE).setTranscodingConfig(t).then(()=>e.onSuccess()).catch(n=>{throw e.onError(n),n})}stopLiveStreaming(t){const e=ot.reportApiInvoke(this._sessionId,{name:Ut.STOP_LIVE_STREAMING,options:[t],tag:Pt.TRACER}),n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(r=>r&&r.hasUrl(t));if(!n.length){const r=new B(P.INVALID_PARAMS,"can not find live streaming url to stop");return e.onError(r),Nt.reject(r)}return Nt.all(n.map(r=>r&&r.stopLiveStreamingTask(t))).then(()=>e.onSuccess()).catch(r=>{throw e.onError(r),r})}async addInjectStreamUrl(t,e){const n=ot.reportApiInvoke(this._sessionId,{name:Ut.ADD_INJECT_STREAM_URL,options:[t,e],tag:Pt.TRACER});try{if(!this._joinInfo)throw new B(P.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const r=this._createLiveStreamingClient(Ke.INJECT);r.setInjectStreamConfig(e,0),await r.startLiveStreamingTask(t,Ke.INJECT)}catch(r){throw n.onError(r),r}n.onSuccess()}async removeInjectStreamUrl(){const t=ot.reportApiInvoke(this._sessionId,{name:Ut.REMOVE_INJECT_STREAM_URL,options:[],tag:Pt.TRACER});try{var e;const n=this._createLiveStreamingClient(Ke.INJECT),r=Array.from(Ho(e=n.streamingTasks).call(e)).find(i=>i.mode===Ke.INJECT);if(!this._joinInfo||!r)throw new B(P.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await n.stopLiveStreamingTask(r.url)}catch(n){throw t.onError(n),n}t.onSuccess()}async startChannelMediaRelay(t){const e=ot.reportApiInvoke(this._sessionId,{name:Ut.START_CHANNEL_MEDIA_RELAY,options:[t],tag:Pt.TRACER});try{iL(t),await this._createChannelMediaRelayClient().startChannelMediaRelay(t)}catch(n){return e.onError(n),n.throw()}e.onSuccess()}async updateChannelMediaRelay(t){const e=ot.reportApiInvoke(this._sessionId,{name:Ut.UPDATE_CHANNEL_MEDIA_RELAY,options:[t],tag:Pt.TRACER});try{iL(t),await this._createChannelMediaRelayClient().updateChannelMediaRelay(t)}catch(n){return e.onError(n),n.throw()}e.onSuccess()}async stopChannelMediaRelay(){const t=ot.reportApiInvoke(this._sessionId,{name:Ut.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:Pt.TRACER});try{await this._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(e){return t.onError(e),e.throw()}t.onSuccess()}sendStreamMessage(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new B(P.INVALID_OPERATION,"can not send data stream, not joined");if(typeof t=="string"&&(t=new TextEncoder().encode(t)),new Blob([t]).size>1024)throw new B(P.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(oe.DATA_STREAM,{payload:xp(t)},!e)}sendMetadata(t){if(!this._joinInfo)throw new B(P.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([t]).size>1024)throw new B(P.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(oe.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:xp(t)})}async sendCustomReportMessage(t){Array.isArray(t)||(t=[t]),t.forEach(WJ);const e=ot.reportApiInvoke(this._sessionId,{name:Ut.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(t)],tag:Pt.TRACER});if(!this._joinInfo){const n=new B(P.INVALID_OPERATION,"can not send custom report, not joined");return e.onError(n),n.throw()}await ot.sendCustomReportMessage(this._joinInfo.sid,t),e.onSuccess()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(t,e){Nn(e.spatialLayer,"spatialLayer",[0,1,2,3]),Nn(e.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(t,e)}catch(n){throw T.error("[".concat(this._clientId,"] pick SVC layer failed"),n.toString()),at("error",this,"pickSVCLayer",e,n.toString()),n}}_reset(){T.debug("[".concat(this._clientId,"] reset client")),at("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=Yi.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(t=>{t._audioTrack&&t._audioTrack._destroy(),t._videoTrack&&t._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Tr("client-publish"),this._subscribeMutex=new Tr("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(t,e){const n=t||kk();t?T.debug("[".concat(this._clientId,"] new Session ").concat(n)):T.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n)),at("debug",this,"_startSession",{newSid:n,sid:this._sessionId}),this._sessionId=n,this.store.sessionId=n,e?ot.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:e.channel,appid:e.appId,mode:this._mode}):this._joinInfo?ot.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&ot.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}async _publishHighStream(t){if(!this._joinInfo||this._uid===void 0)throw new B(P.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new B(P.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&st("FORCE_TURN")&&!st("TURN_ENABLE_TCP")&&!st("TURN_ENABLE_UDP"))throw new B(P.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");T.debug("[".concat(this._clientId,"] publish high stream")),at("debug",this,"_publishHighStream");try{const n=await this._p2pChannel.publish(t,this._isDualStreamEnabled,this._lowStreamParameter),r=(await n.next()).value;if(r){var e;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(u){if(u.code!==P.DISCONNECT_P2P)throw n.throw(u),u}await n.next(((e=i)===null||e===void 0?void 0:e.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const i of t)i instanceof un&&i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig),!i.muted&&i.enabled||await this._p2pChannel.muteLocalTrack(i)}catch(n){if(this._p2pChannel.reportPublishEvent(!1,n==null?void 0:n.code,t),(n==null?void 0:n.code)===P.WS_ABORT)return;throw n}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new B(P.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new B(P.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));T.debug("[".concat(this._clientId,"] publish low stream")),at("debug",this,"_publishLowStream");const t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate));try{const n=await this._p2pChannel.publishLowStream(this._lowStreamParameter),r=(await n.next()).value;if(r){var e;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(u){if(u.code!==P.DISCONNECT_P2P)throw n.throw(u),u}n.next(((e=i)===null||e===void 0?void 0:e.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(n){if(this._p2pChannel.reportPublishEvent(!1,n==null?void 0:n.code,void 0,!0),(n==null?void 0:n.code)===P.WS_ABORT)return;throw n}}_createLiveStreamingClient(t){if(!this._joinInfo||!this._appId)return new B(P.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const e=()=>new xtt(this._joinInfo,this._config.websocketRetryConfig||ze,this._config.httpRetryConfig||ze),n=r=>{r.onLiveStreamError=(i,u)=>{ot.reportApiInvoke(this._sessionId,{name:Ut.ON_LIVE_STREAM_ERROR,options:[i,u],tag:Pt.TRACER}).onSuccess(),this.emit(ie.LIVE_STREAMING_ERROR,i,u)},r.onLiveStreamWarning=(i,u)=>{ot.reportApiInvoke(this._sessionId,{name:Ut.ON_LIVE_STREAM_WARNING,options:[i,u],tag:Pt.TRACER}).onSuccess(),this.emit(ie.LIVE_STREAMING_WARNING,i,u)},r.on(tu.REQUEST_WORKER_MANAGER_LIST,(i,u,s)=>{if(!this._joinInfo)return s(new B(P.INVALID_OPERATION,"can not find join info to get worker manager"));XP(i,this._joinInfo,this._axiosCancelSource.token,ze).then(u).catch(s)})};switch(t){case Ke.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=e(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Ke.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=e(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Ke.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=e(),this._injectStreamingClient.on(tu.REQUEST_WORKER_MANAGER_LIST,(r,i,u)=>{if(!this._joinInfo)return u(new B(P.INVALID_OPERATION,"can not find join info to get worker manager"));XP(r,this._joinInfo,this._axiosCancelSource.token,ze).then(i).catch(u)}),this._injectStreamingClient.onInjectStatusChange=(r,i,u)=>{this.emit(ie.INJECT_STREAM_STATUS,r,i,u)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new Ftt(this._joinInfo,this._clientId,this._config.websocketRetryConfig||ze,this._config.httpRetryConfig||ze),this._channelMediaRelayClient.on("state",t=>{t===er.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(ie.CHANNEL_MEDIA_RELAY_STATE,t)}),this._channelMediaRelayClient.on("event",t=>{this.emit(ie.CHANNEL_MEDIA_RELAY_EVENT,t)})),this._channelMediaRelayClient):new B(P.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(Xe.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Xe.CONNECTION_STATE_CHANGE,(t,e,n)=>{var r;if(n===mn.FALLBACK)return;const i=()=>{this.emit(ie.CONNECTION_STATE_CHANGE,t,e,n)};if(ot.reportApiInvoke(this._sessionId||((r=this._gateway.joinInfo)===null||r===void 0?void 0:r.sid)||null,{name:Ut.CONNECTION_STATE_CHANGE,options:[t,e,n],tag:Pt.TRACER}).onSuccess(JSON.stringify({cur:t,prev:e,reason:n})),T.info("[".concat(this._clientId,"] connection state change: ").concat(e," -> ").concat(t)),ke("info",this,"connection-state-change","".concat(e," -> ").concat(t)),t==="DISCONNECTED")return this._reset(),void i();if(t==="RECONNECTING")this._users.forEach(s=>{s._trust_in_room_=!1,s._trust_audio_enabled_state_=!1,s._trust_video_enabled_state_=!1,s._trust_audio_mute_state_=!1,s._trust_video_mute_state_=!1,s._trust_stream_added_state_=!1}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(t==="CONNECTED"){var u;this._streamFallbackTypeCacheMap.forEach((s,d)=>{this._gateway.setStreamFallbackOption(d,s).catch(a=>{T.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),a),wt("warning",this,"auto set stream fallback option failed, ".concat(a.toString()))})}),this._remoteStreamTypeCacheMap.forEach((s,d)=>{this._gateway.setRemoteVideoStreamType(d,s).catch(a=>{T.warning("[".concat(this._clientId,"] auto set remote stream type failed"),a),wt("warning",this,"auto set remote stream type failed, ".concat(a.toString()))})}),this._remoteDefaultVideoStreamType!==void 0&&((u=this._joinInfo)===null||u===void 0?void 0:u.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{T.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(s=>{T.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(s))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(s=>!s._trust_in_room_).forEach(s=>{T.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(s.uid)),wt("debug",this,"user offline timeout, emit user offline ".concat(s.uid)),this._handleUserOffline({uid:s.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(s=>{s._trust_audio_mute_state_||(T.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(s.uid)),wt("debug",this,"auto dispatch audio unmute event ".concat(s.uid)),this._handleMuteStream(s.uid,"audio",!1)),s._trust_video_mute_state_||(T.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(s.uid)),wt("debug",this,"auto dispatch video unmute event ".concat(s.uid)),this._handleMuteStream(s.uid,"video",!1)),s._trust_audio_enabled_state_||(T.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(s.uid)),wt("debug",this,"auto dispatch enable local audio ".concat(s.uid)),this._handleSetStreamLocalEnable("audio",s.uid,!0)),!s._trust_video_enabled_state_&&s._video_enabled_&&(T.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(s.uid)),wt("debug",this,"auto dispatch enable local video ".concat(s.uid)),this._handleSetStreamLocalEnable("video",s.uid,!0)),s._trust_stream_added_state_||(T.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(s.uid)),wt("debug",this,"auto dispatch stream remove ".concat(s.uid)),this._handleRemoveStream({uid:s.uid,uint_id:s._uintid}))}))},1e3)}i()}),this._gateway.on(Xe.REQUEST_NEW_GATEWAY_LIST,(t,e)=>{if(!this._joinInfo)return e(new B(P.UNEXPECTED_ERROR,"can not recover, no join info"));_u(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ze,this.store).then(n=>{this._joinInfo&&(this._joinInfo.apResponse=n.gatewayInfo.res,this._joinInfo.gatewayAddrs=n.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=n.gatewayInfo.uni_lbs_ip),t(n.gatewayInfo.gatewayAddrs.map(r=>{if(this._joinInfo&&this._joinInfo.proxyServer){const i=r.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(i[0],"&p=").concat(i[1])}return"wss://".concat(r.address)}))}).catch(e)}),this._gateway.on(Xe.NETWORK_QUALITY,t=>{this._networkQualitySensitivity==="normal"&&this.emit(ie.NETWORK_QUALITY,t)}),this._gateway.on(Xe.STREAM_TYPE_CHANGE,(t,e)=>{this.emit(ie.STREAM_TYPE_CHANGED,t,e),ot.reportApiInvoke(this._sessionId,{name:Ut.STREAM_TYPE_CHANGE,options:[t,e],tag:Pt.TRACER}).onSuccess(JSON.stringify({uid:t,streamType:e}))}),this._gateway.on(Xe.IS_P2P_DISCONNECTED,t=>{this._p2pChannel.isP2PDisconnected()?t(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?t(!1):t(!0)}),this._gateway.on(Xe.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(Xe.REQUEST_P2P_CONNECTION_PARAMS,async(t,e,n)=>{try{e(await this._p2pChannel.startP2PConnection(t))}catch(r){n(r)}}),this._gateway.on(Xe.JOIN_RESPONSE,(t,e,n)=>{const{dtlsParameters:r,iceParameters:i,candidates:u,rtpCapabilities:s,setup:d,cname:a}=IB(t.ortc,e,n);this._p2pChannel.connect(i,r,u,s,d,a)}),this._gateway.signal.on(_e.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(_e.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(_e.ON_ADD_AUDIO_STREAM,t=>this._handleAddAudioOrVideoStream("audio",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc)),this._gateway.signal.on(_e.ON_ADD_VIDEO_STREAM,t=>this._handleAddAudioOrVideoStream("video",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc,t.rtxSsrcId)),this._gateway.signal.on(_e.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(_e.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(_e.MUTE_AUDIO,t=>(ke("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:t.uid}),this._handleMuteStream(t.uid,"audio",!0))),this._gateway.signal.on(_e.UNMUTE_AUDIO,t=>(ke("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:t.uid}),this._handleMuteStream(t.uid,"audio",!1))),this._gateway.signal.on(_e.MUTE_VIDEO,t=>(ke("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:t.uid}),this._handleMuteStream(t.uid,"video",!0))),this._gateway.signal.on(_e.UNMUTE_VIDEO,t=>(ke("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:t.uid}),this._handleMuteStream(t.uid,"video",!1))),this._gateway.signal.on(_e.RECEIVE_METADATA,t=>{const e=DC(t.metadata);this.emit(ie.RECEIVE_METADATA,t.uid,e)}),this._gateway.signal.on(_e.ON_DATA_STREAM,t=>{t.seq&&delete t.seq,t.payload=DC(t.payload),this.emit(ie.STREAM_MESSAGE,t.uid,t.payload),this.onStreamMessage&&this.onStreamMessage(t)}),this._gateway.signal.on(_e.ON_CRYPT_ERROR,()=>{il(()=>{T.warning("[".concat(this._clientId,"] on crypt error")),ke("warning",this,"crypt_error"),this.emit(ie.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(_e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(_e.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{T.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),ke("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(ie.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(_e.ON_STREAM_FALLBACK_UPDATE,t=>{T.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(t.stream_id,", attr: ").concat(t.stream_type)),ke("debug",this,"stream_fallback_update",{peerId:t.stream_id,attr:t.stream_type}),this.emit(ie.STREAM_FALLBACK,t.stream_id,t.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(_e.ON_PUBLISH_STREAM,t=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:t.proxy})),T.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(t))),ke("info",this,"publish_stream",t))}),this._gateway.signal.on(_e.ENABLE_LOCAL_VIDEO,t=>{this._handleSetStreamLocalEnable("video",t.uid,!0)}),this._gateway.signal.on(_e.DISABLE_LOCAL_VIDEO,t=>{this._handleSetStreamLocalEnable("video",t.uid,!1)}),this._gateway.signal.on(te.REQUEST_TIMEOUT,(t,e)=>{if(this._joinInfo)switch(t){case oe.PUBLISH:{if(!e)return;const s=(e=e).ortc;if(s){var n,r,i,u;const d=s.some(A=>{let{stream_type:p}=A;return p===He.Audio}),a=s.some(A=>{let{stream_type:p}=A;return p!==He.Audio}),l=s.some(A=>{let{stream_type:p}=A;return p===He.Screen||p===He.ScreenLow});e.state==="offer"&&ot.publish(this._joinInfo.sid,{eventElapse:hi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:P.TIMEOUT,audio:d,video:a,p2pid:e.p2p_id,publishRequestid:this.store.pubId,screenshare:l,audioName:d?(n=s.find(A=>{let{stream_type:p}=A;return p===He.Audio}))===null||n===void 0||(r=n.ssrcs[0])===null||r===void 0?void 0:r.ssrcId.toString():void 0,videoName:a?(i=s.find(A=>{let{stream_type:p}=A;return p!==He.Audio}))===null||i===void 0||(u=i.ssrcs[0])===null||u===void 0?void 0:u.ssrcId.toString():void 0})}break}case oe.SUBSCRIBE:(e=e)&&ot.subscribe(this._joinInfo.sid,{succ:!1,ec:P.TIMEOUT,audio:e.stream_type===ee.AUDIO,video:e.stream_type===ee.VIDEO,peerid:e.stream_id,subscribeRequestid:e.ssrcId,p2pid:this.store.p2pId,eventElapse:hi.measureFromSubscribeStart(this.store.clientId,e.ssrcId)})}}),this._gateway.signal.on(_e.ON_P2P_OK,t=>{this.uid,this._uid}),this._gateway.signal.on(_e.ON_PUBLISHED_USER_LIST,t=>{if(t==null||!t.users)return;const e=[],n=[];for(const r of t.users){let i=this._users.find(l=>l.uid===r.stream_id);i?i._trust_in_room_=!0:(i=new E_(r.stream_id,r.stream_id),this._users.push(i),this.getListeners(ie.PUBLISHED_USER_LIST).length===0&&(T.debug("[".concat(this._clientId,"] user online"),r.stream_id),di("info",this,"user-joined",{uid:r.stream_id}),this.emit(ie.USER_JOINED,i)));const u=Fe.Audio&r.stream_type,s=(Fe.Video|Fe.LwoVideo)&r.stream_type,d=u&&i.hasAudio,a=s&&i.hasVideo;r.stream_type!==Fe.Nothing&&(i._trust_stream_added_state_=!0),s&&(i._video_added_=!0,i._videoSSRC=r.video_ssrc),u&&(i._audio_added_=!0,i._audioSSRC=r.audio_ssrc),u&&!d&&this.getListeners(ie.PUBLISHED_USER_LIST).length===0&&(T.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published audio")),wt("info",this,"remote user ".concat(i.uid," published audio")),this.emit(ie.USER_PUBLISHED,i,"audio")),s&&!a&&this.getListeners(ie.PUBLISHED_USER_LIST).length===0&&(T.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published video")),wt("info",this,"remote user ".concat(i.uid," published video")),this.emit(ie.USER_PUBLISHED,i,"video")),(u&&!d||s&&!a)&&e.push(i),s&&this._p2pChannel.hasPendingRemoteMedia(i,"video")&&n.push({user:i,mediaType:"video"}),u&&this._p2pChannel.hasPendingRemoteMedia(i,"audio")&&n.push({user:i,mediaType:"audio"})}n.length>0&&(T.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map(r=>"user: ".concat(r.user.uid,", mediaType: ").concat(r.mediaType)).join("; ")," ")),this.massSubscribe(n).catch(r=>{T.error("[".concat(this._clientId,"] mass resubscribe error"),r.toString())})),this.getListeners(ie.PUBLISHED_USER_LIST).length>0?(T.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(e.map(r=>r.uid).join(", "))),this.emit(ie.PUBLISHED_USER_LIST,e)):T.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(e.map(r=>r.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(le.RequestMuteLocal,async(t,e,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(t,this._joinInfo.stringUid||this._joinInfo.uid),e()}catch(r){r.code===P.DISCONNECT_P2P?e():n(r)}else e()}),this._p2pChannel.on(le.RequestUnmuteLocal,async(t,e,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(t,this._joinInfo.stringUid||this._joinInfo.uid),e()}catch(r){r.code===P.DISCONNECT_P2P?e():n(r)}else e()}),this._p2pChannel.on(le.RequestRePublish,(t,e,n)=>{this.publish(t,!1).then(e).catch(n)}),this._p2pChannel.on(le.RequestReSubscribe,async(t,e,n)=>{try{for(const{user:r,kind:i}of t)i===ee.VIDEO?await this.subscribe(r,"video"):await this.subscribe(r,"audio");e()}catch(r){n(r)}}),this._p2pChannel.on(le.RequestUploadStats,(t,e)=>{this._gateway.uploadStats(t,e)}),this._p2pChannel.on(le.MediaReconnectStart,t=>{this.emit(ie.MEDIA_RECONNECT_START,t)}),this._p2pChannel.on(le.MediaReconnectEnd,t=>{this.emit(ie.MEDIA_RECONNECT_END,t)}),this._p2pChannel.on(le.NeedSignalRTT,t=>{t(this._gateway.getSignalRTT())}),this._p2pChannel.on(le.RequestRestartICE,async()=>{const t=await this._p2pChannel.reEstablish();if(t){const{restartICEResponse:e,gatewayIP:n,gatewayPort:r}=await this._gateway.restartICE({iceParameters:t.iceParameters}),{candidates:i,iceParameters:u}=function(s,d,a){const l=s.ice;let A;return d!==void 0&&a!==void 0?(A=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:d,port:a.toString(),type:"host",extension:{}}],T.debug("Using remote candidate from AP ".concat(d,":").concat(a)),wt("debug",[],"Using remote candidate from AP ".concat(d,":").concat(a))):A=l.candidates.map(p=>({foundation:p.foundation,componentId:"1",transport:p.protocol,priority:p.priority.toString(),connectionAddress:p.ip,port:p.port.toString(),type:p.type,extension:{}})),{candidates:A,iceParameters:{iceUfrag:l.iceUfrag,icePwd:l.icePwd}}}(e,n,r);await t.restartICE(u,i)}}),this._p2pChannel.on(le.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(le.RequestReconnectPC,async()=>{var t;const{iceParameters:e,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:(t=this._joinInfo)===null||t===void 0?void 0:t.turnServer}),{gatewayEstablishParams:i,gatewayIP:u,gatewayPort:s}=await this._gateway.reconnectPC({iceParameters:e,dtlsParameters:n,rtpCapabilities:r}),{dtlsParameters:d,iceParameters:a,candidates:l,rtpCapabilities:A,setup:p,cname:f}=IB(i,u,s);await this._p2pChannel.connect(a,d,l,A,p,f),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(le.RequestUnpublishForReconnectPC,async(t,e,n)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(t,this._uid),e()):n()}),this._p2pChannel.on(le.P2PLost,()=>{this.emit(ie.P2P_LOST,this.store.uid)}),this._p2pChannel.on(le.UpdateVideoEncoder,t=>{t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig)}),this._p2pChannel.on(le.ConnectionTypeChange,t=>{this.emit(ie.IS_USING_CLOUD_PROXY,t)})}getKeyMetrics(){return this.store.keyMetrics}getJoinChannelServiceRecords(){return T.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}}).prototype,"setProxyServer",[e3],Object.getOwnPropertyDescriptor(_n.prototype,"setProxyServer"),_n.prototype),Lt(_n.prototype,"setTurnServer",[n3],Object.getOwnPropertyDescriptor(_n.prototype,"setTurnServer"),_n.prototype),Lt(_n.prototype,"setLocalAccessPoints",[r3],Object.getOwnPropertyDescriptor(_n.prototype,"setLocalAccessPoints"),_n.prototype),Lt(_n.prototype,"setRemoteDefaultVideoStreamType",[i3],Object.getOwnPropertyDescriptor(_n.prototype,"setRemoteDefaultVideoStreamType"),_n.prototype),Lt(_n.prototype,"setEncryptionConfig",[o3],Object.getOwnPropertyDescriptor(_n.prototype,"setEncryptionConfig"),_n.prototype),Lt(_n.prototype,"pickSVCLayer",[s3],Object.getOwnPropertyDescriptor(_n.prototype,"pickSVCLayer"),_n.prototype),Lt(_n.prototype,"getJoinChannelServiceRecords",[a3],Object.getOwnPropertyDescriptor(_n.prototype,"getJoinChannelServiceRecords"),_n.prototype),c3=_n))||c3);class Dnt extends GD{set currentState(e){e!==this._currentState&&(this._currentState=e,this.emit(vr.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),v(this,"audioBuffer",void 0),v(this,"sourceNode",void 0),v(this,"startPlayTime",0),v(this,"startPlayOffset",0),v(this,"pausePlayTime",0),v(this,"options",void 0),v(this,"currentLoopCount",0),v(this,"_currentState","stopped"),this.audioBuffer=e,this.options=n,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(e){this.currentState==="stopped"?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):T.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=e,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const d3=new Map;async function knt(t,e){let n=null;if(typeof t=="string"){const i=d3.get(t);if(i)return T.debug("use cached audio resource: ",t),i;try{n=(await ci(()=>Yi.get(t,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(u){throw new B(P.FETCH_AUDIO_FILE_FAILED,u.toString())}}else n=await new Nt((u,s)=>{const d=new FileReader;d.onload=a=>{a.target?u(a.target.result):s(new B(P.READ_LOCAL_AUDIO_FILE_ERROR))},d.onerror=()=>{s(new B(P.READ_LOCAL_AUDIO_FILE_ERROR))},d.readAsArrayBuffer(t)});const r=await function(i){const u=el();return new Nt((s,d)=>{u.decodeAudioData(i,a=>{s(a)},a=>{d(new B(P.DECODE_AUDIO_FILE_FAILED,a.toString()))})})}(n);return typeof t=="string"&&e&&d3.set(t,r),r}function l3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(n),!0).forEach(function(r){v(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G_(t,e,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=mf(mf({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),n.optimizationMode!=="motion"&&n.optimizationMode!=="detail"||(e.contentHint=n.optimizationMode,e.contentHint===n.optimizationMode?(T.debug("[".concat(t,"] set content hint to"),n.optimizationMode),Mt("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[t,n,r])):(T.debug("[".concat(t,"] set content hint failed")),Mt("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[t,n,r],"failed")))):(T.warning("[".concat(t,"] can not apply optimization mode bitrate config, no encoderConfig")),wt("warning",["AgoraRTC"],"[".concat(t,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const Pnt=ye().name;function Lnt(t,e,n,r){let i,u=0,s=null;return new Nt((d,a)=>{setTimeout(()=>{i&&(i(),d(u))},e),i=TC(()=>{(function(){u>r&&i&&(i(),d(u));const l=n.getContext("2d");if(!l){const f=new B(P.UNEXPECTED_ERROR,"can not get canvas 2d context.");return T.error(f.toString()),void a(f)}l.drawImage(t,0,0,160,120);const A=l.getImageData(0,0,n.width,n.height),p=Math.floor(A.data.length/3);if(s){for(let f=0;f<p;f+=3)if(A.data[f]!==s[f])return u+=1,void(s=A.data);s=A.data}else s=A.data})()},30)})}class Tl{constructor(e,n){v(this,"id",0),v(this,"element",void 0),v(this,"peerPair",void 0),v(this,"context",void 0),v(this,"audioPlayerElement",void 0),v(this,"audioTrack",void 0),Tl.count+=1,this.id=Tl.count,this.element=e,this.context=n}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const n=document.createElement("audio");n.srcObject=new MediaStream([e.track]),n.play(),this.audioPlayerElement=n}}async switchSdp(){if(!this.peerPair)return;const e=async(r,i)=>{const u=i==="offer"?await r.createOffer():await r.createAnswer();return await r.setLocalDescription(u),r.iceGatheringState==="complete"?r.localDescription:new Nt(s=>{r.onicegatheringstatechange=()=>{r.iceGatheringState==="complete"&&s(r.localDescription)}})},n=async(r,i)=>await r.setRemoteDescription(i);try{const r=await e(this.peerPair[0],"offer");await n(this.peerPair[1],r);const i=await e(this.peerPair[1],"answer");await n(this.peerPair[0],i)}catch(r){throw new B(P.LOCAL_AEC_ERROR,r.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let n;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),n=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(n)}catch(i){throw new B(P.LOCAL_AEC_ERROR,i.toString()).print()}if(!n)throw new B(P.LOCAL_AEC_ERROR,"no dest node when local aec").print();const r=n.stream.getAudioTracks()[0];return this.audioTrack=r,r}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,n=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(n),await this.switchSdp()}close(){T.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(e=>{e.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var A3,If;v(Tl,"count",0);const Bnt=window.AudioContext||window.webkitAudioContext,Mnt=new(A3=cu({report:ot}),Lt((If=class{constructor(){v(this,"units",[]),v(this,"context",void 0)}processExternalMediaAEC(t){if(!this._doesEnvironmentNeedAEC())return T.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Bnt);let e=this.units.find(n=>n&&n.getElement()===t);return e||(e=new Tl(t,this.context),this.units.push(e)),e.startEchoCancellation(),T.debug("start processing local audio echo cancellation, id is",e.id),e.id}_doesEnvironmentNeedAEC(){return ye().name!==me.SAFARI}}).prototype,"processExternalMediaAEC",[A3],Object.getOwnPropertyDescriptor(If.prototype,"processExternalMediaAEC"),If.prototype),If);Wn("PROCESS_ID","process-".concat(Ye(8,""),"-").concat(Ye(4,""),"-").concat(Ye(4,""),"-").concat(Ye(4,""),"-").concat(Ye(12,""))),function(){const t=ye();nr.getDisplayMedia=function(e){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),nr.getStreamFromExtension=t.name===me.CHROME&&Number(t.version)>34,nr.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let n=!1;try{e.addTransceiver("audio"),n=!0}catch{}return e.close(),n}(),nr.supportMinBitrate=t.name===me.CHROME||t.name===me.EDGE,nr.supportSetRtpSenderParameters=function(){const e=ye();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!Yc()||!(!Lr()&&!qh())||e.name===me.FIREFOX&&Number(e.version)>=64}(),t.name===me.SAFARI&&(Number(t.version)>=14?nr.supportDualStream=!0:nr.supportDualStream=!1),nr.webAudioMediaStreamDest=function(){const e=ye();return!(e.name===me.SAFARI&&Number(e.version)<12)}(),nr.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),nr.supportWebGL=typeof WebGLRenderingContext!="undefined",nr.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Yc()||(nr.webAudioWithAEC=!0),nr.supportShareAudio=function(){const e=ye();return(e.os===Sn.WIN_10||e.os===Sn.WIN_81||e.os===Sn.WIN_7||e.os===Sn.LINUX||e.os===Sn.MAC_OS)&&e.name===me.CHROME&&Number(e.version)>=74}(),nr.supportDualStreamEncoding=function(){const e=ye();return e.name==="Safari"&&Number(e.version)>=14}(),T.info("browser compatibility",JSON.stringify(nr),JSON.stringify(t)),at("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:nr,browserInfo:t})}(),function(){let t;try{t=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void T.error("Error loading sdk config",e.message)}if(t)try{const e=JSON.parse(window.atob(t)),n=Date.now();T.debug("Loading global parameters from cache",e),at("debug",[],"loadConfigFromLocalStorage",e),Object.keys(e).forEach(r=>{if(Object.prototype.hasOwnProperty.call(Ar,r)){const{value:i,expires:u}=e[r];if(u&&u<=n)return;gI[r]=i,Ar[r]=i}})}catch(e){T.error("Error loading mutableParamsCache: ".concat(t),e.message)}}();const Zo={__CLIENT_LIST__:Zc,__TRACK_LIST__:Wd,VERSION:lr,BUILD:Ap,setParameter:Wn,getParameter:st,getSupportedCodec:async function(){let t={audio:[],video:[]};try{let e=new RTCPeerConnection;e.addTransceiver("video",{direction:"recvonly"}),e.addTransceiver("audio",{direction:"recvonly"});const n=(await e.createOffer()).sdp;if(!n)return t;e.close(),e=null,t=function(r){const i={video:[],audio:[]};return r.match(/ VP8/i)&&i.video.push("VP8"),r.match(/ VP9/i)&&i.video.push("VP9"),r.match(/ AV1/i)&&i.video.push("AV1"),r.match(/ H264/i)&&i.video.push("H264"),r.match(/ opus/i)&&i.audio.push("OPUS"),r.match(/ PCMU/i)&&i.audio.push("PCMU"),r.match(/ PCMA/i)&&i.audio.push("PCMA"),r.match(/ G722/i)&&i.audio.push("G722"),i}(n)}catch(e){throw new B(P.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return t},checkSystemRequirements:function(){const t=ot.reportApiInvoke(null,{name:Ut.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Pt.TRACER});let e=!1;try{const u=window.RTCPeerConnection,s=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,d=window.WebSocket;e=!!(u&&s&&d)}catch(u){return T.error("check system requirement failed: ",u),!1}let n=!1;const r=ye();r.name===me.CHROME&&Number(r.version)>=58&&(!PW()||kW())&&(n=!0),r.name===me.FIREFOX&&Number(r.version)>=56&&(n=!0),r.name===me.OPERA&&Number(r.version)>=45&&(n=!0),r.name===me.SAFARI&&Number(r.version)>=11&&(n=!0),(eN()||ye().name===me.QQ)&&(n=!0),T.debug("checkSystemRequirements, api:",e,"browser",n);const i=e&&n;return t.onSuccess(i),i},getDevices:function(t){return Rr.enumerateDevices(!0,!0,t)},getMicrophones:function(t){return Rr.getRecordingDevices(t)},getCameras:function(t){return Rr.getCamerasDevices(t)},getElectronScreenSources:YD,getPlaybackDevices:function(t){return Rr.getSpeakers(t)},createClient:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const e=ot.reportApiInvoke(null,{name:Ut.CREATE_CLIENT,options:[t],tag:Pt.TRACER});try{qJ(t)}catch(n){throw e.onError(n),n}return t.audioCodec===void 0&&(t.audioCodec="opus"),e.onSuccess(),new Ont(yl(yl({forceWaitGatewayResponse:!0},t),{},{role:t.mode==="rtc"?"host":t.role}))},createCameraVideoTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{encoderConfig:"480p_1"};const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CREATE_CAM_VIDEO_TRACK,options:[mf({},t)]}),n=g_(t),r=Ye(8,"track-cam-");let i=null;T.info("start create camera video track with config",JSON.stringify(t),"trackId",r),Mt("info",["AgoraRTC"],"createCameraVideoTrack",t);try{i=(await bi({video:n},r)).getVideoTracks()[0]||null}catch(s){throw e.onError(s),s}if(!i){const s=new B(P.UNEXPECTED_ERROR,"can not find track in media stream");return e.onError(s),s.throw()}t.optimizationMode&&G_(r,i,t,t.encoderConfig&&zc(t.encoderConfig));const u=new UL(i,t,n,t.scalabiltyMode?hp(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,r);return e.onSuccess(u.getTrackId()),T.info("create camera video success, trackId:",r),Mt("info",["AgoraRTC"],"createCameraVideoTrack",void 0,r),u},createCustomVideoTrack:function(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CREATE_CUSTOM_VIDEO_TRACK,options:[t]}),n=new un(t.mediaStreamTrack,{bitrateMax:t.bitrateMax,bitrateMin:t.bitrateMin},t.scalabiltyMode?hp(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode);return e.onSuccess(n.getTrackId()),T.info("create custom video track success with config",t,"trackId",n.getTrackId()),Mt("info",["AgoraRTC"],"createCustomVideoTrack",t,n.getTrackId()),n},createScreenVideoTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const n=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CREATE_SCREEN_VIDEO_TRACK,options:[mf({},t),e]});t.encoderConfig?typeof t.encoderConfig=="string"||t.encoderConfig.width&&t.encoderConfig.height||(t.encoderConfig.width={max:1920},t.encoderConfig.height={max:1080}):t.encoderConfig="1080p_2";const r=iet(t),i=Ye(8,"track-scr");let u=null,s=null;const d=rr();if(!d.supportShareAudio&&e==="enable"){const A=new B(P.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(A),A.throw()}T.info("start create screen video track with config",t,"withAudio",e,"trackId",i),Mt("info",["AgoraRTC"],"createScreenVideoTrack",[t,e]);try{const A=await bi({screen:r,screenAudio:e==="auto"?d.supportShareAudio:e==="enable"},i);u=A.getVideoTracks()[0]||null,s=A.getAudioTracks()[0]||null}catch(A){throw n.onError(A),A}if(!u){const A=new B(P.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(A),A.throw()}if(!s&&e==="enable"){u&&u.stop();const A=new B(P.SHARE_AUDIO_NOT_ALLOWED);return n.onError(A),A.throw()}t.optimizationMode||(t.optimizationMode="detail"),t.optimizationMode&&(G_(i,u,t,t.encoderConfig&&fI(t.encoderConfig)),t.encoderConfig&&typeof t.encoderConfig!="string"&&(t.encoderConfig.bitrateMin=t.encoderConfig.bitrateMax));const a=new un(u,t.encoderConfig?fI(t.encoderConfig):{},t.scalabiltyMode?hp(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,i,[jn.SCREEN_TRACK]);if(!s)return n.onSuccess(a.getTrackId()),T.info("create screen video track success","video:",a.getTrackId()),Mt("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:a.getTrackId()}),a;const l=new kn(s);return n.onSuccess([a.getTrackId(),l.getTrackId()]),T.info("create screen video track success","video:",a.getTrackId(),"audio:",l.getTrackId()),Mt("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:a.getTrackId(),audioTrack:l.getTrackId()}),[a,l]},createMicrophoneAndCameraTracks:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{encoderConfig:"480p_1"};const n=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CREATE_MIC_AND_CAM_TRACKS,options:[t,e]}),r=g_(e),i=hL(t),u=Ye(8,"track-mic-"),s=Ye(8,"track-cam-");let d=null,a=null;T.info("start create camera video track(".concat(s,") and microphone audio track(").concat(u,") with config, audio: ").concat(JSON.stringify(t),", video: ").concat(JSON.stringify(e))),Mt("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:e,audioConfig:t});try{const p=await bi({audio:i,video:r},"".concat(u,"-").concat(s));d=p.getAudioTracks()[0],a=p.getVideoTracks()[0]}catch(p){throw n.onError(p),p}if(!d||!a){const p=new B(P.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(p),p.throw()}e.optimizationMode&&G_(s,a,e,e.encoderConfig&&zc(e.encoderConfig));const l=new rl(d,t,i,u),A=new UL(a,e,r,e.scalabiltyMode?hp(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,s);return n.onSuccess([l.getTrackId(),A.getTrackId()]),T.info("create camera video track(".concat(s,") and microphone audio track(").concat(u,") success")),Mt("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:s,audioTrackId:u}),[l,A]},createMicrophoneAudioTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CREATE_MIC_AUDIO_TRACK,options:[t]}),n=hL(t),r=Ye(8,"track-mic-");let i=null;T.info("start create microphone audio track with config",JSON.stringify(t),"trackId",r),Mt("info",["AgoraRTC"],"createMicrophoneAudioTrack",t);try{i=(await bi({audio:n},r)).getAudioTracks()[0]||null}catch(s){throw e.onError(s),s}if(!i){const s=new B(P.UNEXPECTED_ERROR,"can not find track in media stream");return e.onError(s),s.throw()}const u=new rl(i,t,n,r);return e.onSuccess(u.getTrackId()),T.info("create microphone audio track success, trackId:",r),Mt("info",["AgoraRTC"],"createMicrophoneAudioTrack",t,r),u},createCustomAudioTrack:function(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CREATE_CUSTOM_AUDIO_TRACK,options:[t]}),n=new kn(t.mediaStreamTrack,t.encoderConfig?pp(t.encoderConfig):{});return T.info("create custom audio track success with config",t,"trackId",n.getTrackId()),Mt("info",["AgoraRTC"],"createCustomAudioTrack",t,n.getTrackId()),e.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(t){const e=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CREATE_BUFFER_AUDIO_TRACK,options:[t]}),n=Ye(8,"track-buf-");T.info("start create buffer source audio track with config",JSON.stringify(t),"trackId",n),Mt("info",[],"createBufferSourceAudioTrack",t);const r=t.source;if(!(t.source instanceof AudioBuffer))try{t.source=await knt(t.source,t.cacheOnlineFile)}catch(s){return e.onError(s),s.throw()}const i=new Dnt(t.source),u=new kZ(r,i,t.encoderConfig?pp(t.encoderConfig):{},n);return T.info("create buffer source audio track success, trackId:",n),Mt("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,n),e.onSuccess(u.getTrackId()),u},setLogLevel:function(t){st("USE_NEW_LOG")?function(e){e=Math.min(Math.max(0,e),4),NN=e}(t):T.setLogLevel(t)},enableLogUpload:function(){st("USE_NEW_LOG")?Wn("UPLOAD_LOG",!0):T.enableLogUpload()},disableLogUpload:function(){st("USE_NEW_LOG")?Wn("UPLOAD_LOG",!1):T.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new rL},checkAudioTrackIsActive:async function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const n=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[e]});if(!(t instanceof kn||t instanceof gf)){const a=new B(P.INVALID_TRACK,"the parameter is not a audio track");return n.onError(a),a.throw()}e&&e<1e3&&(e=1e3);const r=t instanceof kn?t.getTrackLabel():"remote_track",i=t.getVolumeLevel();let u=i,s=i;const d=Date.now();return new Nt(a=>{const l=setInterval(()=>{const A=t.getVolumeLevel();u=A>u?A:u,s=A<s?A:s;const p=u-s>1e-4,f=Date.now()-d;if(p||f>e){clearInterval(l);const E=p,C={duration:f,deviceLabel:r,maxVolumeLevel:u,result:E};T.info("[track-".concat(t.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(C))),n.onSuccess(C),a(E)}},200)})},checkVideoTrackIsActive:async function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const n=ot.reportApiInvoke(null,{tag:Pt.TRACER,name:Ut.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[e]});if(!(t instanceof un||t instanceof ff)){const f=new B(P.INVALID_TRACK,"the parameter is not a video track");return n.onError(f),f.throw()}const r=4;e&&e<1e3&&(e=1e3);const i=t instanceof un?t.getTrackLabel():"remote_track",u=t.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(Lr()||qh())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([u]),s.play();const d=document.createElement("canvas");d.width=160,d.height=120;let a=0,l=0;try{const f=Date.now();a=await Lnt(s,e,d,r),l=Date.now()-f}catch(f){throw n.onError(f),f}Pnt===me.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const A=a>r,p={duration:l,changedPicNum:a,deviceLabel:i,result:A};return T.info("[track-".concat(t.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(p))),n.onSuccess(p),A},setArea:function(t){const e=ot.reportApiInvoke(null,{name:Ut.SET_AREA,options:t,tag:Pt.TRACER});try{let n=[];if(typeof t=="string"&&(n=[t]),Array.isArray(t)&&(t.forEach(i=>{if(!tq.includes(i))throw new B(P.INVALID_PARAMS,"invalid area code")}),n=t),Object.prototype.toString.call(t)==="[object Object]"){const{areaCode:i,excludedArea:u}=t;if(!i)throw new B(P.INVALID_PARAMS,"area code is needed");let s=i;typeof i=="string"&&(s=[i]),n=u?ktt(s,u):s}Wn("AREAS",n);const r=(i=>{const u={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return i.map(s=>{const d=LI[s],a=Object.keys(d);a&&a.map(l=>{l!=="CODE"&&(u[l]=u[l].concat(d[l]))})}),u})(n);Object.keys(r).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?Wn(i,r[i][0]):Wn(i,r[i])}),T.debug("set area success:",n.join(","))}catch(n){throw e.onError(n),n}e.onSuccess()},loadModule:async function(t,e){if(T.debug("loadModule: ".concat(t.name,", loadOption: ").concat(JSON.stringify(e))),!t.moduleInit)throw T.debug("Invalid Plugin"),new B(P.INVALID_PLUGIN,"invalid plugin");try{kp.installPlugin(t),await t.moduleInit({logger:T,report:ot,pluginCenter:kp,getParameter:st},e)}catch(n){throw new B(P.UNEXPECTED_ERROR,"unexpected error in loadModule",n)}},audioElementPlayCenter:wr,processExternalMediaAEC:function(t){Mnt.processExternalMediaAEC(t)},registerExtensions:function(t){t.forEach(e=>{const n=e;n.__registered__=!0,n.logger.hookLog=T.extLog,n.reporter.hookApiInvoke=ot.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach(r=>{n.parameters[r]=st(r)})})},ChannelMediaRelayError:Rs,ChannelMediaRelayEvent:Wi,ChannelMediaRelayState:er,RemoteStreamFallbackType:PI,RemoteStreamType:kI,ConnectionDisconnectedReason:mn,AudienceLatencyLevelType:RI,AREAS:de};return Object.defineProperties(Zo,{onAudioAutoplayFailed:{get:()=>Fr.onAudioAutoplayFailed,set:t=>{Fr.onAudioAutoplayFailed=t}},onAutoplayFailed:{get:()=>Fr.onAutoplayFailed,set:t=>{Fr.onAutoplayFailed=t}}}),Rr.on(Fo.CAMERA_DEVICE_CHANGED,t=>{T.info("camera device changed",JSON.stringify(t)),Zo.onCameraChanged&&Zo.onCameraChanged(t)}),Rr.on(Fo.RECORDING_DEVICE_CHANGED,t=>{T.info("microphone device changed",JSON.stringify(t)),Zo.onMicrophoneChanged&&Zo.onMicrophoneChanged(t)}),Rr.on(Fo.PLAYOUT_DEVICE_CHANGED,t=>{T.debug("playout device changed",JSON.stringify(t)),Zo.onPlaybackDeviceChanged&&Zo.onPlaybackDeviceChanged(t)}),wr.onAutoplayFailed=()=>{T.info("detect audio element autoplay failed"),Fr.onAudioAutoplayFailed&&Fr.onAudioAutoplayFailed()},ae.on("autoplay-failed",()=>{T.info("detect webaudio autoplay failed"),Fr.onAudioAutoplayFailed&&Fr.onAudioAutoplayFailed()}),window&&(window.__ARTC__=Zo),Zo})})(BU);var UU=Qnt(BU.exports),rS={exports:{}},xg={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var not=ss.exports,rot=Symbol.for("react.element"),iot=Symbol.for("react.fragment"),oot=Object.prototype.hasOwnProperty,sot=not.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aot={key:!0,ref:!0,__self:!0,__source:!0};function xU(o,c,h){var g,m={},S=null,b=null;h!==void 0&&(S=""+h),c.key!==void 0&&(S=""+c.key),c.ref!==void 0&&(b=c.ref);for(g in c)oot.call(c,g)&&!aot.hasOwnProperty(g)&&(m[g]=c[g]);if(o&&o.defaultProps)for(g in c=o.defaultProps,c)m[g]===void 0&&(m[g]=c[g]);return{$$typeof:rot,type:o,key:S,ref:b,props:m,_owner:sot.current}}xg.Fragment=iot;xg.jsx=xU;xg.jsxs=xU;rS.exports=xg;const ea=rS.exports.jsx,QU=rS.exports.jsxs,cot=({user:o})=>{const c=ss.exports.useRef();return ss.exports.useEffect(()=>{o.videoTrack.play(c.current)},[]),QU("div",{children:["Uid: ",o.uid,ea("div",{ref:c,style:{width:"200px",height:"200px"}})]})},uot="c051d80ff38546afae1cb47635d08ad6",dot="007eJxTYHis+D7XRFyg2b6j/MubU9X+8eKXEzf+OtO41rDJ0GZKxQsFhpTEZCOLJBPTFHOLVJM0o8Qkw6RUAxNTC1MLgzRTYxOzXUYeyVYtnsnXbDpYGBkgEMRnZihPyWJgAABzFSCr",lot="wdj",ts=UU.createClient({mode:"rtc",codec:"vp8"}),Aot=()=>{const[o,c]=ss.exports.useState([]),[h,g]=ss.exports.useState([]),m=async(b,M)=>{await ts.subscribe(b,M),M==="video"&&c(F=>[...F,b])},S=b=>{c(M=>M.filter(F=>F.uid!==b.uid))};return ss.exports.useEffect(()=>(ts.on("user-published",m),ts.on("user-left",S),ts.join(uot,lot,dot,null).then(b=>Promise.all([UU.createMicrophoneAndCameraTracks(),b])).then(([b,M])=>{const[F,$]=b;g(b),c(At=>[...At,{uid:M,videoTrack:$,audioTrack:F}]),ts.publish(b)}),()=>{for(let b of h)b.stop(),b.close();ts.off("user-published",m),ts.off("user-left",S),ts.unpublish(tracks).then(()=>ts.leave())}),[]),ea("div",{style:{display:"flex",justifyContent:"center"},children:ea("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 200px)"},children:o.map(b=>ea(cot,{user:b},b.uid))})})};function hot(){const[o,c]=ss.exports.useState(!1);return QU("div",{className:"App",children:[ea("h1",{children:"WDJ Virtual Call"}),!o&&ea("button",{onClick:()=>c(!0),children:"Join Room"}),o&&ea(Aot,{})]})}m0.createRoot(document.getElementById("root")).render(ea(hot,{}));
